!function(c){function b(g){if(a[g]){return a[g].exports}var e=a[g]={exports:{},id:g,loaded:!1};return c[g].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var f=window.webpackJsonp;window.webpackJsonp=function(h,k){for(var e,j,l=0,g=[];l<h.length;l++){j=h[l],d[j]&&g.push.apply(g,d[j]),d[j]=0}for(e in k){c[e]=k[e]}for(f&&f(h,k);g.length;){g.shift().call(null,b)}};var a={},d={0:0};return b.e=function(j,k){if(0===d[j]){return k.call(null,b)}if(void 0!==d[j]){d[j].push(k)}else{d[j]=[k];var g=document.getElementsByTagName("head")[0],h=document.createElement("script");h.type="text/javascript",h.charset="utf-8",h.async=!0,h.src=b.p+""+j+".view-e10c53a.min.js",g.appendChild(h)}},b.m=c,b.c=a,b.p="//as.eqh5.com/h5_view_2/",b.p=(/http/.test(location.protocol)?null:"http://as.eqh5.com/h5_view_2/")||b.p,b(0)}([function(b,a,c){b.exports=c(1)},function(ab,K,R){function X(){aa().then(function(b){window.scene=b,M(b),V.setUp(b);var a=Promise.resolve(null);U()&&(a=function(){var c=location.href.split("#")[0];return b.property.wxAuth&&"miniprogram"!==window.__wxjs_environment?G(b.userId).then(function(d){return d.obj?(window._tracker_&&window._tracker_.push(["wx_user_info",{openid:d.obj.openid,nickname:d.obj.nickname,sex:d.obj.sex,province:d.obj.province,city:d.obj.city,country:d.obj.country,headimgurl:d.obj.headimgurl,privilege:d.obj.privilege,unionid:d.obj.unionid}]),D.setWeChatUser(d.obj),D.initWeChat({obj:b},c),d.obj):/eqxiu\.cn/.test(ae(window.location.href))?B(b.userId).then(function(e){return D.hrefToWxAuth(e,b.userId)}):D.hrefToWxAuth()})["catch"](function(d){console.error(d)}):Promise.resolve(D.initWeChat({obj:b},c))}()),a.then(function(c){A(b).then(function(){Z(b).then(function(d){return window._tj.sceneDataLoadTime=window._tj.now(),d.list.length?(d.map.wxComponent&&D.setWxCompData(d.map.wxComponent),ag(),new J(d).addPageFn(q).addEleFn(C(d,c)).addEleFn(z).start(),void Q(d)):void af()})})})})}function Q(d){function b(){var P=window._tj,m=P.startTime;Object.keys(P).forEach(function(h){"number"==typeof P[h]&&(P[h]=parseInt(P[h]-m))}),console.log("[tj]",window._tj);for(var v=d.list.length,e=0,I=0,S=0;S<v;S++){var E=d.list[S],O=E.elements.length;S===f.toPageIndex&&(e=O),I+=O}P.firstPageEleCnt=e,P.sceneEleCnt=I,P.pageCnt=v,P.code=d.meta.code;var o=window.performance.timing;try{P.redirect=o.redirectEnd-o.redirectStart,P.dns=o.domainLookupEnd-o.domainLookupStart,P.tcp=o.connectEnd-o.connectStart,P.html=o.responseEnd-o.requestStart,P.parseDOM=o.domComplete-o.domLoading,P.loadEvent=o.loadEventEnd-o.loadEventStart,P.startApp=P.redirect+P.dns+P.tcp+P.html+P.parseDOM+P.loadEvent}catch(k){console.log("window.performance")}var y=["redirect","dns","tcp","html","parseDOM","loadEvent","startApp","code","pageCnt","sceneEleCnt","firstPageEleCnt","firstPageShowTime","renderSceneTime","sceneDataLoadTime","ua","ios"].map(function(h){return h+"="+encodeURIComponent(window._tj[h])}),w=window._tj.img=new Image;w.onload=w.onabort=w.onerror=function(){window._tj.img=null};var x="https://wmi.eqxiu.com/cotest.gif?"+y.join("&");console.log("[tj]",y),console.log("[tj]",x),w.src=x}var g=window.location.href,a=j.getUrlParam("toPage");g.indexOf("toPage")>-1&&j.replaceLocationHref(j.removeUrlParam("toPage"));var f={param:g.split("?")[1],selector:"#nr",mode:"view",toPageIndex:L(d,a)},c=new F(d,f);window.app=c,setTimeout(function(){W()}),window.uploadTjStat=b,c.renderScene(),$("#pre_page").click(function(){c.pageScroll.goToPrePage()}),$("#next_page").click(function(){c.pageScroll.goToNextPage()})}function M(a){Y(location.host)?a.ext&&("string"==typeof a.ext&&(a.ext=JSON.parse(a.ext)),$.isEmptyObject(a.ext.yqc)||(N.FILE=N.VIP_USER_FILE)):(N.SOURCE=N.BIND_USER_SOURCE,N.FILE=N.BIND_USER_FILE)}function af(){alert("此场景不存在!")}function L(b,a){var c=0;return a?(b.list.forEach(function(f,d){f.id==a&&(c=d)}),c):c}R(2),R(3),R(15),R(16);var ad=R(18);R(19).disableScreenElasticity(),R(20).disableWxFontSize(),window._DEBUG_=ad.DEBUG,R(29),R(30);var H=R(31),V=R(32),N=R(22),ac=R(61).sceneLoadEnd,Y=R(42).isEqxHost,aa=R(55).$getSceneMetaData,Z=R(62).getPerfectSceneData;H.setUp();var U=R(25).isWeixin,G=R(81).$getUserWxInfo,B=R(81).$getWxAppId,ae=R(24).getUrlHost,D=R(82),F=R(88),W=R(32).stopLoading,J=R(67),C=R(471).wxAdaptor,q=R(70).perfectPage,z=R(73).perfectComp,ag=R(472).putTracker,j=R(24),A=R(47).customLoadPage;$(function(){var b=window._tj={},a=navigator.userAgent;b.ua=a,b.ios=/ipad|iphone/i.test(navigator.userAgent),window.performance&&window.performance.now?(b.perf=!0,b.now=function(){return performance.now()}):(b.perf=!1,b.now=function(){return Date.now()}),b.startTime=b.now(),X(),ac()})},function(b,a){},function(b,a,c){c(4),c(11),c(14)},function(b,a,c){c(5),c(6),c(7),c(8),c(9),c(10)},function(b,a){!function(c){c.forEach(function(d){d.hasOwnProperty("replaceWith")||Object.defineProperty(d,"replaceWith",{configurable:!0,enumerable:!0,writable:!0,value:function(){var g=Array.prototype.slice.call(arguments),f=document.createDocumentFragment();g.forEach(function(h){var i=h instanceof Node;f.appendChild(i?h:document.createTextNode(String(h)))}),this.parentNode.replaceChild(f,this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype])},function(b,a){!function(){Math.hypot=Math.hypot||function(){for(var d=0,c=arguments.length,f=0;f<c;f++){if(arguments[f]===1/0||arguments[f]===-(1/0)){return 1/0}d+=arguments[f]*arguments[f]}return Math.sqrt(d)}}()},function(b,a){!function(){"function"!=typeof Object.values&&!function(){Object.values=function(d){if(void 0===d||null===d){throw new TypeError("Cannot convert undefined or null to object")}var c=[];for(var f in d){d.hasOwnProperty(f)&&c.push(d[f])}return c}}(),"function"!=typeof Object.assign&&!function(){Object.assign=function(f){if(void 0===f||null===f){throw new TypeError("Cannot convert undefined or null to object")}for(var d=Object(f),h=1;h<arguments.length;h++){var c=arguments[h];if(void 0!==c&&null!==c){for(var g in c){c.hasOwnProperty(g)&&(d[g]=c[g])}}}return d}}()}()},function(b,a){!function(){Number.isInteger=Number.isInteger||function(c){return"number"==typeof c&&isFinite(c)&&Math.floor(c)===c},Number.isNaN=Number.isNaN||function(c){return"number"==typeof c&&isNaN(c)},Number.parseInt=parseInt,Number.parseFloat=parseFloat}()},function(b,a){!function(){String.prototype.includes||(String.prototype.includes=function(d,c){return"number"!=typeof c&&(c=0),!(c+d.length>this.length)&&this.indexOf(d,c)!==-1}),String.prototype.startsWith||(String.prototype.startsWith=function(d,c){return c=c||0,this.substr(c,d.length)===d}),String.prototype.endsWith||(String.prototype.endsWith=function(f,d){var g=this.toString();("number"!=typeof d||!isFinite(d)||Math.floor(d)!==d||d>g.length)&&(d=g.length),d-=f.length;var c=g.indexOf(f,d);return c!==-1&&c===d})}()},function(b,a){!function(){Array.isArray||(Array.isArray=function(c){return"[object Array]"===Object.prototype.toString.call(c)}),Array.prototype.includes||(Array.prototype.includes=function(g){var d=Object(this),j=parseInt(d.length)||0;if(0===j){return !1}var c,h=parseInt(arguments[1])||0;h>=0?c=h:(c=j+h,c<0&&(c=0));for(var f;c<j;){if(f=d[c],g===f||g!==g&&f!==f){return !0}c++}return !1}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(g){if(null==this){throw new TypeError("Array.prototype.findIndex called on null or undefined")}if("function"!=typeof g){throw new TypeError("predicate must be a function")}for(var d,j=Object(this),c=j.length>>>0,h=arguments[1],f=0;f<c;f++){if(d=j[f],g.call(h,d,f,j)){return f}}return -1},enumerable:!1,configurable:!1,writable:!1}),Array.prototype.find||(Array.prototype.find=function(g){if(null===this){throw new TypeError("Array.prototype.find called on null or undefined")}if("function"!=typeof g){throw new TypeError("predicate must be a function")}for(var d,j=Object(this),c=j.length>>>0,h=arguments[1],f=0;f<c;f++){if(d=j[f],g.call(h,d,f,j)){return d}}}),Array.from||(Array.from=function(){var f=Object.prototype.toString,d=function(e){return"function"==typeof e||"[object Function]"===f.call(e)},h=function(j){var i=Number(j);return isNaN(i)?0:0!==i&&isFinite(i)?(i>0?1:-1)*Math.floor(Math.abs(i)):i},c=Math.pow(2,53)-1,g=function(j){var i=h(j);return Math.min(Math.max(i,0),c)};return function(p){var k=this,o=Object(p);if(null==p){throw new TypeError("Array.from requires an array-like object - not null or undefined")}var j,t=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof t){if(!d(t)){throw new TypeError("Array.from: when provided, the second argument must be a function")}arguments.length>2&&(j=arguments[2])}for(var w,q=g(o.length),v=d(k)?Object(new k(q)):new Array(q),m=0;m<q;){w=o[m],t?v[m]="undefined"==typeof j?t(w,m):t.call(j,w,m):v[m]=w,m+=1}return v.length=q,v}}())}()},function(b,a,c){(function(f){var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g};!function(m){function t(){}function k(h,g){return function(){h.apply(g,arguments)}}function e(g){if("object"!==d(this)){throw new TypeError("Promises must be constructed via new")}if("function"!=typeof g){throw new TypeError("not a function")}this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],j(g,this)}function A(h,g){for(;3===h._state;){h=h._value}return 0===h._state?void h._deferreds.push(g):(h._handled=!0,void v(function(){var r=1===h._state?g.onFulfilled:g.onRejected;if(null===r){return void (1===h._state?C:z)(g.promise,h._value)}var l;try{l=r(h._value)}catch(p){return void z(g.promise,p)}C(g.promise,l)}))}function C(l,o){try{if(o===l){throw new TypeError("A promise cannot be resolved with itself.")}if(o&&("object"===("undefined"==typeof o?"undefined":d(o))||"function"==typeof o)){var h=o.then;if(o instanceof e){return l._state=3,l._value=o,void B(l)}if("function"==typeof h){return void j(k(h,o),l)}}l._state=1,l._value=o,B(l)}catch(g){z(l,g)}}function z(h,g){h._state=2,h._value=g,B(h)}function B(h){2===h._state&&0===h._deferreds.length&&setTimeout(function(){h._handled||x(h._value)},1);for(var g=0,i=h._deferreds.length;g<i;g++){A(h,h._deferreds[g])}h._deferreds=null}function q(h,g,i){this.onFulfilled="function"==typeof h?h:null,this.onRejected="function"==typeof g?g:null,this.promise=i}function j(l,h){var o=!1;try{l(function(i){o||(o=!0,C(h,i))},function(i){o||(o=!0,z(h,i))})}catch(g){if(o){return}o=!0,z(h,g)}}var y=setTimeout,v="function"==typeof f&&f||function(g){y(g,1)},x=function(g){console.warn("Possible Unhandled Promise Rejection:",g)},w=Array.isArray||function(g){return"[object Array]"===Object.prototype.toString.call(g)};e.prototype["catch"]=function(g){return this.then(null,g)},e.prototype.then=function(h,g){var i=new e(t);return A(this,new q(h,g,i)),i},e.all=function(){var g=Array.prototype.slice.call(1===arguments.length&&w(arguments[0])?arguments[0]:arguments);return new e(function(u,l){function s(i,o){try{if(o&&("object"===("undefined"==typeof o?"undefined":d(o))||"function"==typeof o)){var r=o.then;if("function"==typeof r){return void r.call(o,function(D){s(i,D)},l)}}g[i]=o,0===--p&&u(g)}catch(n){l(n)}}if(0===g.length){return u([])}for(var p=g.length,h=0;h<g.length;h++){s(h,g[h])}})},e.resolve=function(g){return g&&"object"===("undefined"==typeof g?"undefined":d(g))&&g.constructor===e?g:new e(function(h){h(g)})},e.reject=function(g){return new e(function(h,i){i(g)})},e.race=function(g){return new e(function(l,r){for(var h=0,p=g.length;h<p;h++){g[h].then(l,r)}})},e._setImmediateFn=function(g){v=g},e._setUnhandledRejectionFn=function(g){x=g},window.Promise?e=window.Promise:window.Promise=e,e.prototype["finally"]=function(h){var g=this.constructor;return this.then(function(i){return g.resolve(h()).then(function(){return i})},function(i){return g.resolve(h()).then(function(){throw i})})}}(void 0)}).call(a,c(12).setImmediate)},function(b,a,c){(function(k,g){function l(n,i){this._id=n,this._clearFn=i}var j=c(13).nextTick,d=Function.prototype.apply,h=Array.prototype.slice,m={},f=0;a.setTimeout=function(){return new l(d.call(setTimeout,window,arguments),clearTimeout)},a.setInterval=function(){return new l(d.call(setInterval,window,arguments),clearInterval)},a.clearTimeout=a.clearInterval=function(i){i.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},a.enroll=function(n,i){clearTimeout(n._idleTimeoutId),n._idleTimeout=i},a.unenroll=function(i){clearTimeout(i._idleTimeoutId),i._idleTimeout=-1},a._unrefActive=a.active=function(n){clearTimeout(n._idleTimeoutId);var i=n._idleTimeout;i>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},i))},a.setImmediate="function"==typeof k?k:function(p){var q=f++,o=!(arguments.length<2)&&h.call(arguments,1);return m[q]=!0,j(function(){m[q]&&(o?p.apply(null,o):p.call(null),a.clearImmediate(q))}),q},a.clearImmediate="function"==typeof g?g:function(i){delete m[i]}}).call(a,c(12).setImmediate,c(12).clearImmediate)},function(B,G){function q(){throw new Error("setTimeout has not been defined")}function x(){throw new Error("clearTimeout has not been defined")}function k(c){if(w===setTimeout){return setTimeout(c,0)}if((w===q||!w)&&setTimeout){return w=setTimeout,setTimeout(c,0)}try{return w(c,0)}catch(a){try{return w.call(null,c,0)}catch(a){return w.call(this,c,0)}}}function b(c){if(j===clearTimeout){return clearTimeout(c)}if((j===x||!j)&&clearTimeout){return j=clearTimeout,clearTimeout(c)}try{return j(c)}catch(a){try{return j.call(null,c)}catch(a){return j.call(this,c)}}}function E(){z&&y&&(z=!1,y.length?A=y.concat(A):v=-1,A.length&&H())}function H(){if(!z){var c=k(E);z=!0;for(var a=A.length;a;){for(y=A,A=[];++v<a;){y&&y[v].run()}v=-1,a=A.length}y=null,z=!1,b(c)}}function D(c,a){this.fun=c,this.array=a}function F(){}var w,j,C=B.exports={};!function(){try{w="function"==typeof setTimeout?setTimeout:q}catch(a){w=q}try{j="function"==typeof clearTimeout?clearTimeout:x}catch(a){j=x}}();var y,A=[],z=!1,v=-1;C.nextTick=function(c){var a=new Array(arguments.length-1);if(arguments.length>1){for(var d=1;d<arguments.length;d++){a[d-1]=arguments[d]}}A.push(new D(c,a)),1!==A.length||z||k(H)},D.prototype.run=function(){this.fun.apply(null,this.array)},C.title="browser",C.browser=!0,C.env={},C.argv=[],C.version="",C.versions={},C.on=F,C.addListener=F,C.once=F,C.off=F,C.removeListener=F,C.removeAllListeners=F,C.emit=F,C.prependListener=F,C.prependOnceListener=F,C.listeners=function(a){return[]},C.binding=function(a){throw new Error("process.binding is not supported")},C.cwd=function(){return"/"},C.chdir=function(a){throw new Error("process.chdir is not supported")},C.umask=function(){return 0}},function(b,a){!function(j){function p(i){var c="",o=!0;return i.forEach(function(r){var n=encodeURIComponent(r.name),s=encodeURIComponent(r.value);o||(c+="&"),c+=n+"="+s,o=!1}),c.replace(/%20/g,"+")}function g(s,r){var v=s.split("&");r&&v[0].indexOf("=")===-1&&(v[0]="="+v[0]);var c=[];v.forEach(function(w){if(0!==w.length){var i=w.indexOf("=");if(i!==-1){var y=w.substring(0,i),x=w.substring(i+1)}else{y=w,x=""}y=y.replace(/\+/g," "),x=x.replace(/\+/g," "),c.push({name:y,value:x})}});var u=[];return c.forEach(function(i){u.push({name:decodeURIComponent(i.name),value:decodeURIComponent(i.value)})}),u}function h(i){if(l){return new q(i)}var c=document.createElement("a");return c.href=i,c}function f(o){var c=this;this._list=[],void 0!==o&&null!==o||(o=""),Object(o)===o&&o instanceof f||(o=String(o)),"string"==typeof o&&"?"===o.substring(0,1)&&(o=o.substring(1)),"string"==typeof o?this._list=g(o):this._list=o._list.slice(),this._url_object=null,this._setList=function(i){n||(c._list=i)};var n=!1;this._update_steps=function(){n||(n=!0,c._url_object&&("about:"===c._url_object.protocol&&c._url_object.pathname.indexOf("?")!==-1&&(c._url_object.pathname=c._url_object.pathname.split("?")[0]),c._url_object.search=p(c._list),n=!1))}}function d(n,s){function x(){var c=e.href.replace(/#$|\?$|\?(?=#)/g,"");e.href!==c&&(e.href=c)}function i(){o._setList(e.search?g(e.search.substring(1)):[]),o._update_steps()}if(!(this instanceof j.URL)){throw new TypeError("Failed to construct 'URL': Please use the 'new' operator.")}s&&(n=function(){if(l){return new q(n,s).href}var r;if(document.implementation&&document.implementation.createHTMLDocument?r=document.implementation.createHTMLDocument(""):document.implementation&&document.implementation.createDocument?(r=document.implementation.createElement("http://www.w3.org/1999/xhtml","html",null),r.documentElement.appendChild(r.createElement("head")),r.documentElement.appendChild(r.createElement("body"))):window.ActiveXObject&&(r=new window.ActiveXObject("htmlfile"),r.write("<head></head><body></body>"),r.close()),!r){throw Error("base not supported")}var t=r.createElement("base");t.href=s,r.getElementsByTagName("head")[0].appendChild(t);var c=r.createElement("a");return c.href=n,c.href}());var e=h(n||""),v=function(){if(!("defineProperties" in Object)){return !1}try{var r={};return Object.defineProperties(r,{prop:{get:function(){return !0}}}),r.prop}catch(c){return !1}}(),w=v?this:document.createElement("a"),o=new f(e.search?e.search.substring(1):null);return o._url_object=w,Object.defineProperties(w,{href:{get:function(){return e.href},set:function(c){e.href=c,x(),i()},enumerable:!0,configurable:!0},origin:{get:function(){return"origin" in e?e.origin:this.protocol+"//"+this.host},enumerable:!0,configurable:!0},protocol:{get:function(){return e.protocol},set:function(c){e.protocol=c},enumerable:!0,configurable:!0},username:{get:function(){return e.username},set:function(c){e.username=c},enumerable:!0,configurable:!0},password:{get:function(){return e.password},set:function(c){e.password=c},enumerable:!0,configurable:!0},host:{get:function(){var c={"http:":/:80$/,"https:":/:443$/,"ftp:":/:21$/}[e.protocol];return c?e.host.replace(c,""):e.host},set:function(c){e.host=c},enumerable:!0,configurable:!0},hostname:{get:function(){return e.hostname},set:function(c){e.hostname=c},enumerable:!0,configurable:!0},port:{get:function(){return e.port},set:function(c){e.port=c},enumerable:!0,configurable:!0},pathname:{get:function(){return"/"!==e.pathname.charAt(0)?"/"+e.pathname:e.pathname},set:function(c){e.pathname=c},enumerable:!0,configurable:!0},search:{get:function(){return e.search},set:function(c){e.search!==c&&(e.search=c,x(),i())},enumerable:!0,configurable:!0},searchParams:{get:function(){return o},enumerable:!0,configurable:!0},hash:{get:function(){return e.hash},set:function(c){e.hash=c,x()},enumerable:!0,configurable:!0},toString:{value:function(){return e.toString()},enumerable:!1,configurable:!0},valueOf:{value:function(){return e.valueOf()},enumerable:!1,configurable:!0}}),w}var l,q=j.URL;try{if(q){if(l=new j.URL("http://example.com"),"searchParams" in l){return}"href" in l||(l=void 0)}}catch(k){}if(Object.defineProperties(f.prototype,{append:{value:function(i,c){this._list.push({name:i,value:c}),this._update_steps()},writable:!0,enumerable:!0,configurable:!0},"delete":{value:function(i){for(var c=0;c<this._list.length;){this._list[c].name===i?this._list.splice(c,1):++c}this._update_steps()},writable:!0,enumerable:!0,configurable:!0},get:{value:function(i){for(var c=0;c<this._list.length;++c){if(this._list[c].name===i){return this._list[c].value}}return null},writable:!0,enumerable:!0,configurable:!0},getAll:{value:function(i){for(var c=[],o=0;o<this._list.length;++o){this._list[o].name===i&&c.push(this._list[o].value)}return c},writable:!0,enumerable:!0,configurable:!0},has:{value:function(i){for(var c=0;c<this._list.length;++c){if(this._list[c].name===i){return !0}}return !1},writable:!0,enumerable:!0,configurable:!0},set:{value:function(r,o){for(var s=!1,c=0;c<this._list.length;){this._list[c].name===r?s?this._list.splice(c,1):(this._list[c].value=o,s=!0,++c):++c}s||this._list.push({name:r,value:o}),this._update_steps()},writable:!0,enumerable:!0,configurable:!0},entries:{value:function(){var i=this,c=0;return{next:function(){if(c>=i._list.length){return{done:!0,value:void 0}}var e=i._list[c++];return{done:!1,value:[e.name,e.value]}}}},writable:!0,enumerable:!0,configurable:!0},keys:{value:function(){var i=this,c=0;return{next:function(){if(c>=i._list.length){return{done:!0,value:void 0}}var e=i._list[c++];return{done:!1,value:e.name}}}},writable:!0,enumerable:!0,configurable:!0},values:{value:function(){var i=this,c=0;return{next:function(){if(c>=i._list.length){return{done:!0,value:void 0}}var e=i._list[c++];return{done:!1,value:e.value}}}},writable:!0,enumerable:!0,configurable:!0},forEach:{value:function(i){var c=arguments.length>1?arguments[1]:void 0;this._list.forEach(function(o,e){i.call(c,o.name,o.value)})},writable:!0,enumerable:!0,configurable:!0},toString:{value:function(){return p(this._list)},writable:!0,enumerable:!1,configurable:!0}}),"Symbol" in j&&"iterator" in j.Symbol&&Object.defineProperty(f.prototype,j.Symbol.iterator,{value:f.prototype.entries,writable:!0,enumerable:!0,configurable:!0}),q){for(var m in q){q.hasOwnProperty(m)&&"function"==typeof q[m]&&(d[m]=q[m])}}j.URL=d,j.URLSearchParams=f}(window)},function(b,a){},function(b,a,c){c(17),0===location.hostname.indexOf("wap")&&$(document.body).addClass("wap-scene")},function(b,a){},function(b,a){b.exports={publicHost:"//as.eqh5.com/",HOST:"//www.eqxiu.com/",EQX:"//www.eqxiu.com/",WAP_HOST:"//wap.eqxiu.com/",VIEW_HOST:"//h5.eqxiu.com/",SERVER_0:"//service.eqxiu.com/",INFO_SERVER:"//passport.eqxiu.com/",SERVER_0_VIP:"//vservice.eqxiu.com/",SERVER_1:"//s1.eqxiu.com/",SERVER_2:"//s2.eqxiu.com/",FLOW_SERVER:"//S6.eqxiu.com/",SERVER_MAX:"//max.eqxiu.com/",QUERY_SERVER:"//search.eqxiu.com/",WAP_SERVER:"//ie.eqxiu.com/",PAY_SERVER:"//xiupay.eqxiu.com/",MOBILE_SERVER_1:"//m1.eqxiu.com/",BIG_DATA:"//datalog.eqxiu.com/",TRACK:"//da.eqxiu.com/",PAY_HOST:"//www.eqxiu.com/",MALL_HOST:"//store.eqxiu.com/",STORE:"//store.eqxiu.com/",YQC:"//as.eqh5.cn/",MALL_BUY_ID:"10002",MALL_PIC_ID:"889874",MALL_MUSIC_ID:"889875",MALL_SOUND_ID:"889877",MALL_FONT_ID:"889873",MALL_PIC_ID_NEW:"890729",MALL_MUSIC_ID_NEW:"890727",MALL_SOUND_ID_NEW:"890728",MALL_FONT_ID_NEW:"890726",MALL_PAGE_ID_NEW:"890731",MALL_FUNCTION_ID_NEW:"890730",MALL_PIC_ID_DEFAULT:"890930",MALL_BG_ID_DEFAULT:"890810",MALL_MUSIC_ID_DEFAULT:"890935",MALL_SOUND_ID_DEFAULT:"890933",MALL_FONT_ID_DEFAULT:"890934",SOURCE:"//as.eqh5.com/c/",BIND_USER_SOURCE:"//as.eqxiu.com/c/",WX_APP_ID:"wxd9d2e6c45617efd1",WX_APP_ID_WAP:"wx8a61ef75c858990e",DOMAIN:"eqxiu",EQX_TPL_DOMAIN:"h5.eqxiu.com",EQX_FAN_DOMAIN:"scene.eqxiu.com",EQX_AD_DOMAIN:"scene.eqh5.cn",EQX_VIP_DOMAIN:"vip.eqxiu.cn",EQX_COMPANY_DOMAIN:"scene.eqxiu.cn",EQX_TG:"tg.eqxiu.com",EQX_APP_DOMAIN:"m.eqxiu.com",EQX_NO_BUSINESS_DOMAIN:"eqxiu.com",EQX_BATCH_SCENES_DOMAIN:"eqxiu.tv",FILE:"//res1.eqh5.com/",BIND_USER_FILE:"//res.eqh5.com/",FREE_USER_FILE:"//res1.eqh5.com/",VIP_USER_FILE:"//res2.eqh5.com/",FONT:"//font.eqh5.com/",VIDEO:"//res4.eqh5.com/",WAP_TPL_CENTER:"http://wap.eqxiu.com/wpmall/cats"}},function(c,b){function d(){var f=$(window);f.on("scroll.elasticity",function(g){g.preventDefault()}).on("touchmove.elasticity",function(g){g.preventDefault()}),f.delegate("img","mousemove",function(g){g.preventDefault()})}function a(){function f(g){g.addEventListener("touchmove",function(h){h._isScroller=!0})}return document.body.addEventListener("touchmove",function(g){g._isScroller?g.stopPropagation():g.preventDefault()}),{overScroll:f}}c.exports={disableScreenElasticity:d,canScreenElasticity:a}},function(ag,N,Y){function ac(b,a,c){window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+b+"&redirect_uri="+encodeURIComponent(a+"eqs/rel-account/wechat-mp?appId="+b)+"&response_type=code&scope=snsapi_userinfo&state="+encodeURIComponent(c)+"#wechat_redirect"}function X(b){var a=["yqh5.cn","yqh5.com","eqh5.cn","scene.eqxiu.tv","scene.eqxiu.mobi","divh5.com","divh5.cn","divh5.com.cn","divh5.net","meih5.com","meih5.cn","meih5.net"],c=null;return a.forEach(function(d){b.indexOf(d)>-1&&(c=d)}),c}function U(b){if(document.title=b,/ip(hone|od|ad)/i.test(navigator.userAgent)){var a=document.createElement("iframe");a.src="http://lib.eqh5.com/favicon.ico",a.style.display="none",a.onload=function(){setTimeout(function(){a.remove()},9)},document.body.appendChild(a)}}function ak(){function a(){WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0}),WeixinJSBridge.on("menu:setfont",function(){WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0})})}ab()&&M()&&("object"==("undefined"==typeof WeixinJSBridge?"undefined":af(WeixinJSBridge))&&"function"==typeof WeixinJSBridge.invoke?a():document.addEventListener?document.addEventListener("WeixinJSBridgeReady",a,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",a),document.attachEvent("onWeixinJSBridgeReady",a)))}function Q(){var b=H(window.location.href),a="eqs/wx/ticket/get?time="+Date.now(),c=X(b);return R.some(function(d){return d.test(b)})||(/eqxiu\.cn/.test(b)?(a+="&domain=eqxiu.cn",a+="&userId="+window.scene.userId):a+=c?"&domain="+c:"&domain="+b),ae({type:"GET",url:Z.SERVER_1+a})}function ai(){var a="api/wx/get-jsticket?time="+Date.now()+"&appId="+z.APP_ID_WAP;return console.log("getWxTicket2",a),ae({type:"GET",url:Z.WAP_SERVER+a}).then(function(b){return b&&b.obj?{obj:{appId:z.APP_ID_WAP,ticket:b.obj}}:Promise.reject("无微信 ticket: "+z.APP_ID_WAP)})}function L(a){return new Promise(function(b,c){wx.chooseWXPay({timestamp:a.timeStamp,nonceStr:a.nonceStr,"package":a.packageName,signType:a.signType,paySign:a.paySign,success:function(d){b(d)},cancel:function(d){c(d)}})})}function aa(a){return new Promise(function(b,c){console.log("微信jssdk init"),W().then(function(){console.log("微信jssdk chooseWXPay");var d=a["package"];d.startsWith("prepay_id=")||(d="prepay_id="+d),wx.chooseWXPay({timestamp:a.timeStamp,nonceStr:a.nonceStr,"package":d,signType:a.signType,paySign:a.paySign,success:function(f){b()},cancel:function(){c("充值失败")}})})})}function W(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=2===b.ticket?ai:Q;return V?V:V=Promise.all([F(),a(),aj()]).then(function(f){var d=f[1].obj,g=d.appId,c=d.ticket;return new Promise(function(m,i){if(g&&c&&c!==-1){var n=location.href.split("#")[0],l=(Date.now(),"jsapi_ticket="+c+"&noncestr="+al+"&timestamp="+j+"&url="+n),h=new jsSHA("SHA-1","TEXT");h.update(l);var k=h.getHash("HEX");console.log("wx config appId "+g+", sign "+l+", hash "+k),console.log(j),console.log(al),wx.config({debug:!1,appId:g,timestamp:j,nonceStr:al,signature:k,jsApiList:["chooseWXPay","checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseImage","previewImage","getLocalImgData","uploadImage","downloadImage","startRecord","addCard","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice"]}),wx.ready(function(){m()})}else{i()}})})}function ah(){return V?V:V=Promise.all([F(),ai(),aj()]).then(function(c){var b=c[1].obj,d=b.appId,a=b.ticket;return new Promise(function(l,h){if(d&&a&&a!==-1){var m=location.href.split("#")[0],k="eqxiuview",f=Date.now(),i="jsapi_ticket="+a+"&noncestr="+k+"&timestamp="+f+"&url="+m,n=new jsSHA("SHA-1","TEXT");n.update(i);var g=n.getHash("HEX");console.log("wx config appId "+d+", sign "+i+", hash "+g),wx.config({debug:!1,appId:d,timestamp:f,nonceStr:k,signature:g,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseImage","previewImage","getLocalImgData","uploadImage","downloadImage","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice"]}),wx.ready(function(){l()})}else{h()}})})}function ad(h){var d=h.title,l=h.desc,c=h.link,k=h.imgUrl,g=h.success,b=h.cancel,f=h.opts;return W(f).then(function(){wx.onMenuShareTimeline({title:d,link:c,imgUrl:k,success:function(){A(g)&&g()},cancel:function(){A(b)&&b()}}),wx.onMenuShareAppMessage({title:d,desc:l,link:c,imgUrl:k,success:function(){A(g)&&g()},cancel:function(){A(b)&&b()}}),wx.onMenuShareQQ({title:d,desc:l,link:c,imgUrl:k,success:function(){A(g)&&g()},cancel:function(){A(b)&&b()}}),wx.onMenuShareWeibo({title:d,desc:l,link:c,imgUrl:k,success:function(){A(g)&&g()},cancel:function(){A(b)&&b()}}),wx.onMenuShareQZone({title:d,desc:l,link:c,imgUrl:k,success:function(){A(g)&&g()},cancel:function(){A(b)&&b()}})})}var af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ae=Y(21).ajax,Z=Y(22),K=Y(23),F=K.$loadJWeixin,aj=K.$loadSHA,H=Y(24).getUrlHost,J=Y(25),ab=J.isWeixin,M=J.isAndroid,G=Y(27),A=G.isFunction,B=Y(28),al=B.wxNonceStr,j=B.wxTimestamp,z=Y(28),D=Y(28),R=(D.APP_ID,[/eqxiu\.com/,/eqxiu\.cc/,/eqshow\.cn/,/yqxiu\.cn/]),V=null;ag.exports={register:ac,disableWxFontSize:ak,setDocumentTitle:U,initWx:W,initWx2:ah,setWxShareInfo:ad,wxPay:L,wxPay2:aa}},function(c,b){function f(g){return Promise.resolve(g)}function a(g){return new Promise(function(e,h){$.ajax($.extend({},g,{success:function(i){i&&i.success===!1?h(i):e(i)},error:function(){for(var k,j=arguments.length,m=Array(j),l=0;l<j;l++){m[l]=arguments[l]}(k=console).error.apply(k,[g].concat(m)),h.apply(void 0,m)}}))})}function d(g){return new Promise(function(e,h){$.ajax($.extend({xhrFields:{withCredentials:!0},crossDomain:!0},g,{success:function(i){i&&i.success===!1?h(i):e(i)},error:function(){for(var k,j=arguments.length,m=Array(j),l=0;l<j;l++){m[l]=arguments[l]}(k=console).error.apply(k,[g].concat(m)),h.apply(void 0,m)}}))})}c.exports={ajax:d,$ajax:a,fajax:f}},function(d,b,g){function a(i){var h=window.location.protocol;return"file:"===h&&(h="http:"),i&&i.startsWith("//")?h+i:i}var f=g(18),c={SERVER_0:f.SERVER_0,INFO_SERVER:f.INFO_SERVER,SERVER_0_VIP:f.SERVER_0_VIP,SERVER_1:f.SERVER_1,SERVER_2:f.SERVER_2,FLOW_SERVER:f.FLOW_SERVER,WAP_SERVER:f.WAP_SERVER,SERVER_MAX:f.SERVER_MAX,QUERY_SERVER:f.QUERY_SERVER,PAY_SERVER:f.PAY_SERVER,FONT:f.FONT,HOST:f.HOST,EQX:f.EQX,WAP_HOST:f.WAP_HOST,VIEW_HOST:f.VIEW_HOST,PAY_HOST:f.PAY_HOST,MALL_HOST:f.MALL_HOST,MOBILE_SERVER_1:f.MOBILE_SERVER_1,SOURCE:f.SOURCE,BIND_USER_SOURCE:f.BIND_USER_SOURCE,TRACK:f.TRACK,STORE:f.STORE,YQC:f.YQC,BIND_USER_FILE:f.BIND_USER_FILE,FREE_USER_FILE:f.FREE_USER_FILE,VIP_USER_FILE:f.VIP_USER_FILE,FILE:f.FILE,DOMAIN:f.DOMAIN,EQX_FAN_DOMAIN:f.EQX_FAN_DOMAIN,EQX_AD_DOMAIN:f.EQX_AD_DOMAIN,EQX_VIP_DOMAIN:f.EQX_VIP_DOMAIN,EQX_COMPANY_DOMAIN:f.EQX_COMPANY_DOMAIN,EQX_TG:f.EQX_TG,EQX_APP_DOMAIN:f.EQX_APP_DOMAIN,EQX_NO_BUSINESS_DOMAIN:f.EQX_NO_BUSINESS_DOMAIN,EQX_BATCH_SCENES_DOMAIN:f.EQX_BATCH_SCENES_DOMAIN,MALL_BUY_ID:f.MALL_BUY_ID,MALL_PIC_ID:f.MALL_PIC_ID,MALL_MUSIC_ID:f.MALL_MUSIC_ID,MALL_SOUND_ID:f.MALL_SOUND_ID,MALL_FONT_ID:f.MALL_FONT_ID,MALL_PIC_ID_NEW:f.MALL_PIC_ID_NEW,MALL_MUSIC_ID_NEW:f.MALL_MUSIC_ID_NEW,MALL_SOUND_ID_NEW:f.MALL_SOUND_ID_NEW,MALL_FONT_ID_NEW:f.MALL_FONT_ID_NEW,MALL_PAGE_ID_NEW:f.MALL_PAGE_ID_NEW,MALL_FUNCTION_ID_NEW:f.MALL_FUNCTION_ID_NEW,MALL_PIC_ID_DEFAULT:f.MALL_PIC_ID_DEFAULT,MALL_BG_ID_DEFAULT:f.MALL_BG_ID_DEFAULT,MALL_MUSIC_ID_DEFAULT:f.MALL_MUSIC_ID_DEFAULT,MALL_SOUND_ID_DEFAULT:f.MALL_SOUND_ID_DEFAULT,MALL_FONT_ID_DEFAULT:f.MALL_FONT_ID_DEFAULT,VIDEO:f.VIDEO,WAP_TPL_CENTER:f.WAP_TPL_CENTER};Object.keys(c).forEach(function(i){var h=c[i];Array.isArray(h)?h.forEach(function(j,k){"string"==typeof j&&(h[k]=a(j))}):c[i]=a(h)}),d.exports=c},function(R,D,J){function N(){return G({name:"qiniu",src:q.qiniu})}function I(){return G({name:"plupload",src:q.plupload})}function G(c){var b=c.name,f=c.src,a=M[b];if(a){return Promise.resolve(a)}var d=z({url:U(f),dataType:"script"}).then(function(){for(var h=arguments.length,k=Array(h),g=0;g<h;g++){k[g]=arguments[g]}return M[b]=k,k});return M[b]=d,d}function V(){return G({name:"qrcode",src:q.QRCode})}function F(){return G({name:"sha",src:q.SHA})}function T(){return C?C:C=new Promise(function(b,a){window.qqMapCallback=function(){b()},G({name:"qqmap",src:q.QQMap})["catch"](a)})}function B(){return G({name:"chart",src:q.Chart})}function L(){return G({name:"threecanvas",src:q.threecanvas})}function H(){return G({name:"flux",src:q.Flux})}function S(){return G({name:"",src:q.sliders})}function O(){return G({name:"jweixin",src:q.JWeixin})}function Q(){return G({name:"typed",src:q.Typed})}function P(){return G({name:"mlink",src:q.MLink})}function K(){return G({name:"parallax",src:q.Parallax})}function A(){return G({name:"canvg",src:q.canvg})}function j(){return G({name:"tbsJS",src:q.tbsJS})}var U=J(24).addProtocol,q=J(26),z=J(21).$ajax,M={},C=null;R.exports={$loader:G,$loadQRCode:V,$loadSHA:F,$loadQQMap:T,$loadChart:B,$loadFlux:H,$loadJWeixin:O,$loadTyped:Q,$loadThreeCanvas:L,$loadSliders:S,$loadParallax:K,$canvas:A,$loadMLink:P,$loadQiniu:N,$loadPlupload:I,$loadTbsJs:j}},function(J,w,C){function F(a){return a.startsWith("//")&&(a=location.protocol+a),new window.URL(a)}function B(b){var a=location.href,c=N("toPage",a);c?c!==""+b&&(a=a.replace(c,b)):a+=(/\?/.test(a)?"&":"?")+"toPage="+b,window.history.replaceState({title:$("title").html(),url:a},$("title").html(),a)}function z(b,a){M()?(B(a),location.href=b):window.open(b,"_blank")}function N(b){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return F(a).searchParams.get(b)}function x(b){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href,c=F(a);return c.searchParams["delete"](b),c.href}function L(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href,c=F(a);return b.forEach(function(d){c.searchParams["delete"](d)}),c.href}function q(b,a){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.location.href,c=F(d);return c.searchParams.set(b,a),c.href}function E(b){var a=window.location.href;history.replaceState({},a,b)}function A(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return F(a).host}function K(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,a=F(b);return a.pathname}function G(){for(var h=arguments.length,p=Array(h),f=0;f<h;f++){p[f]=arguments[f]}var g=p.length;if(0===g){throw new Error("resolveUrl requires at least one argument; got none.")}var d=document.createElement("base");if(d.href=p[0],1===g){return d.href}var b=document.getElementsByTagName("head")[0];b.insertBefore(d,b.firstChild);for(var m,u=document.createElement("a"),l=1;l<g;l++){u.href=p[l],m=u.href,d.href=m}return b.removeChild(d),m}function I(b){var a=location.protocol;return"https:"!=a&&(a="http:"),/^\w{2,}:\/\//.test(b)||(b="//"+b),b.replace(/^\/\//,a+"//")}function H(a){return I(a).replace(/^https:/,"http:")}function D(a){return I(a).replace(/^http:/,"https:")}function k(){var b=H(j.EQX),a=C(25).mobilecheck;return b=a()?"http://service.eqxiu.com/m/special/1023.html":"http://store.eqxiu.com/cats-2.html"}var j=C(22),M=C(25).mobilecheck;J.exports={parseUrl:F,getUrlParam:N,removeUrlParam:x,removeUrlParams:L,addUrlParam:q,replaceLocationHref:E,getUrlHost:A,resolveUrl:G,setUrlHistory:B,openUrl:z,getPathName:K,addProtocol:I,url2http:H,url2https:D,redirectUrl:k}},function(v,A,j){function m(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobi/i.test(navigator.userAgent)||window.screen.width<500}function g(){return window.top===window&&/MicroMessenger/i.test(navigator.userAgent)}function b(){return m()&&y()}function y(){return/Android/i.test(navigator.userAgent)||/Linux/i.test(navigator.appVersion)}function B(){return/ipad|android|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent)}function x(){return/iPhone/i.test(navigator.userAgent)}function z(){return !(m()||B()&&window===window.top)}function k(){var a=j(24).getUrlParam;return !!a("appclient")||!!window.viewData}function f(){return/ipad|iphone/i.test(navigator.userAgent)}function w(){return/msie|applewebkit.+safari/i.test(navigator.userAgent)}function q(){var a=window.navigator.userAgent;return parseFloat(a.substr(a.indexOf("Android")+8,3))}v.exports={mobilecheck:m,isMobile:m,isWeixin:g,isAndroidPhone:b,isAndroid:y,tabletCheck:B,iphoneCheck:x,isPc:z,isApp:k,isIOS:f,isSafari:w,getAndroidVersion:q}},function(b,a){b.exports={Parallax:"//lib.eqh5.com/parallax/1.0.2/parallax.min.js",JWeixin:"//res.wx.qq.com/open/js/jweixin-1.2.0.js",QQMap:"//map.qq.com/api/js?v=2.exp&callback=qqMapCallback",SHA:"//lib.eqh5.com/jsSHA/2.0.2/sha1.js",Chart:"//lib.eqh5.com/Chart.js/1.0.2/Chart.min.js",sliders:"//lib.eqh5.com/slidesjs/3.0.3/jquery.slides.min.js",QRCode:"//lib.eqh5.com/lrsjng.jquery-qrcode/0.14.0/jquery-qrcode.min.js",Flux:"//lib.eqh5.com/@eqxiu/flux/1.0.2/flux.min.js",Typed:"//lib.eqh5.com/@eqxiu/typed/1.1.4/typed.min.js",threecanvas:"//lib.eqh5.com/@eqxiu/threecanvas/1.1.0/threecanvas.js",canvg:"//lib.eqh5.com/canvg/0.0.1/canvg.min.js",MLink:"https://static.mlinks.cc/scripts/dist/mlink.min.js",datePicker:"//lib.eqh5.com/bootstrap-daterangepicker/2.1.25/daterangepicker.js",datePickerCss:"//lib.eqh5.com/bootstrap-daterangepicker/2.1.25/daterangepicker.css",moment:"//lib.eqh5.com/moment.js/2.15.2/moment.min.js",imgJcropJs:"//lib.eqh5.com/jquery-jcrop/0.9.12/jquery.Jcrop.min.js",imgJcropCss:"//lib.eqh5.com/jquery-jcrop/0.9.12/jquery.Jcrop.min.css",plupload:"//lib.eqh5.com/plupload/2.1.8/plupload.full.min.js",qiniu:"//lib.eqh5.com/qiniu-js-sdk/1.0.14-beta/qiniu.min.js",html2canvas:"//lib.eqh5.com/html2canvas/0.0.8/html2canvas.min.js",tbsJS:"//res.imtt.qq.com/tbs/tbs.js"}},function(c,b){function f(g){return g&&"function"==typeof g}function a(){}function d(j,h,l){var g,k=null;return function(){var m=this,e=arguments,i=+new Date;clearTimeout(k),g||(g=i),i-g>=l?(j.apply(m,e),g=i):k=setTimeout(function(){j.apply(m,e)},h)}}c.exports={isFunction:f,noop:a,throttle:d}},function(c,b,d){var a=d(18);c.exports={APP_ID:a.WX_APP_ID,APP_ID_WAP:a.WX_APP_ID_WAP||a.WX_APP_ID,wxNonceStr:"eqxiuview",wxTimestamp:Date.now()}},function(b,a){},function(b,a){},function(b,a){function c(){$.ajaxSetup({cache:!0}),$.support.cors=!0}b.exports={setUp:function(){c()}}},function(j,q,f){function h(c){var a=$(document.body),i=$("html");v()?window.top===window?(a.prepend(k.div()),k.addRecommend(),c.isTemplate&&"1"===c.isTemplate.toString()&&k.addSample(c.id),k.addAdvertisement(),a.addClass("pc"),$("title").text(c.name+" | H5微场景制作-易企秀(www.eqxiu.com)"),m(c)):location.href.indexOf("exemplarReview")>=0?(a.prepend(p.phoneDiv()),a.append(p.ctrlBtnDiv())):location.href.indexOf("control")>=0?(a.prepend(p.phoneDiv()),a.append(p.ctrlBtnDiv2())):(i.addClass("iframe-html"),a.prepend(p.phoneDiv()),a.addClass("pc"),$(".scene_title").text(c.name),$("title").text(c.name)):(a.prepend(g.div()),$("title").text(c.name)),$(".main").show()}function d(){$(".loading").show()}function b(){$(".loading").hide()}f(33),f(34),f(35),f(36);var m=f(37).addElementsToPc,v=f(25).isPc,k=f(53),p=f(59),g=f(60);j.exports={setUp:h,stopLoading:b,startLoading:d}},function(b,a){},function(b,a){},function(b,a){},function(b,a){},function(m,y,h){function k(d){var c=d.name,l=d.description,a=d.cover;$(".scene_title").text(d.name),w({name:c,description:l,cover:a}),g(),b(d)}function g(){var a=q(window.location.host);x(a)["catch"](function(){return h(52)}).then(function(c){$("body").css("backgroundImage","url("+c+")")})}function b(a){j().then(function(){var c=z(f(a));c.searchParams.set("eqrcode",1),console.info("qrCodeUrl:",c.href),$("#downApp").click(function(){$("#downAppView").css("display","block")}),$("#close").click(function(){$("#downAppView").css("display","none")}),$("#downCode").qrcode({render:"canvas",size:192,text:"http://click.hm.baidu.com/app.gif?ap=62563&ch=43727"}),$("#codeImg").qrcode({render:"canvas",size:192,text:c.href})})}function w(d){var c=d.name,p=d.description,a=d.cover;p=p||"";var l=window.location.href.split("?")[0];$("#view_share .share-qq").attr("href","\n            http://connect.qq.com/widget/shareqq/index.html?url=\n            "+encodeURIComponent(l)+"?from=sqq&title="+c+"\n            &site=易企秀http://eqxiu.com&summary="+p+"\n            &pics="+(v.FILE+a)+"&desc="+p+"&appkey=3508809852\n        "),$("#view_share .share-qqZone").attr("href","\n            http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=\n            "+encodeURIComponent(l)+"?from=qzone&title="+c+"\n            &site=易企秀http://eqxiu.com&summary="+p+"\n            &pics="+(v.FILE+a)+"&desc="+p+"&appkey=3508809852\n        "),$("#view_share .share-weibo").attr("href","\n            http://service.weibo.com/share/share.php?url=\n            "+encodeURIComponent(l)+"?from=sina_weibo\n            &title="+encodeURIComponent("#易企秀分享# 这是我用@易企秀 做的【"+c+"】，赶紧打开看看吧！")+"\n            &pic="+(v.FILE+a)+"&appkey=3508809852\n        ")}h(38),h(39),h(40);var z=h(24).parseUrl,v=h(22),x=h(41).$getPcBgImg,j=h(23).$loadQRCode,f=h(42).getShareUrl,q=h(47).getDomainType;m.exports={addElementsToPc:k}},function(b,a){},function(b,a){},function(b,a){},function(v,A,j){function m(a){return Promise.all([b("image"),f.$loadQiniu(),f.$loadPlupload()]).then(function(c){return Object.assign(a,{token:c[0].map.token}),Qiniu.uploader({runtimes:"html5,flash,html4",browse_button:a.uploadButton,uptoken_url:w.SERVER_0+"eqs/material/uptokens?type=image",uptoken:a.token,unique_names:!0,domain:"http://qiniu-plupload.qiniudn.com/",max_file_size:"10mb",max_retries:3,chunk_size:"4mb",auto_start:!0,init:{FilesAdded:function(h,d){window.plupload.each(d,function(i){})},BeforeUpload:function(d,e){a.beforeUpload(d,e)},UploadProgress:function(h,d){},FileUploaded:function(e,h,d){a.finishUpload(e,h,d)},Error:function(e,h,d){a.Error(e,h,d)},UploadComplete:function(){},Key:function(h,d){var i="";return i}}})})}function g(a){return function(c){return c.includes("http")||(c=w.FILE+c),k({type:"GET",url:c,dataType:a})}}function b(a){return k({type:"POST",url:w.SERVER_1+"eqs/s/material/uptokens?type="+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}function y(c,a){var d="//up.qiniu.com/putb64/-1";return window.location.href.startsWith("https://")&&(d="//up.qiniup.com/putb64/-1"),k({type:"POST",url:d,contentType:"application/octet-stream",beforeSend:function(e){e.setRequestHeader("Authorization","UpToken "+c)},data:a})}function B(c,a){return k({type:"POST",url:w.SERVER_1+"eqs/board/drawing/save?compKey="+c,data:{data:JSON.stringify(a)}})}function x(a){return k({type:"GET",dataType:"text"})}function z(a){return k({type:"GET",url:w.SERVER_1+"eqs/s/image/scene/preview?domain="+a}).then(function(c){return c?(c=c.startsWith("http:")?c:w.FILE+c,c+="?imageMogr2/auto-orient/thumbnail/2100x1200>"):Promise.reject("No Background Image")})}var k=j(21).$ajax,f=j(23),w=j(22),q=g("xml");v.exports={$getSvg:q,$getSymbol:x,$getPcBgImg:z,$getUploadToken:b,$uploadBase64:y,$saveCompInfoByCompKey:B,$initQiniuUpload:m}},function(x,C,k){function q(h){var d=h.code,o=window.location.href,c=window.location.host,f=(g.EQX_FAN_DOMAIN,g.EQX_AD_DOMAIN,g.EQX_VIP_DOMAIN);g.EQX_COMPANY_DOMAIN;try{return j(c)?(console.info("第三方域名"),o):A(c)?(console.info("MAX 域名"),o):D(h)?(console.info("流量域名"),o):z(h)?(console.info("CDN 加速"),w(f+"/s/"+d)):B(h)?(console.info("企业账号"),o):(console.info("普通泛域名"),o)}catch(a){return console.error(a),o}}function j(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.host;return !b(a)}function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.host;return["eqshow.cn","yqxiu.cn","eqxiu.cc","eqxiu.com","eqxiu.cn","eqh5.cn","yqh5.cn","yqh5.com","eqxiu.tv","eqxiu.mobi","divh5.com","divh5.cn","divh5.com.cn","divh5.net","meih5.com","meih5.cn","meih5.net"].some(function(c){return a.endsWith("."+c)})||/localhost/.test(a)}function A(a){return b(a)&&/^max\./.test(a)}function D(c){var a=c.ext||{};return a.yqc&&a.yqc.ad}function z(c){var a=g.EQX_VIP_DOMAIN;return 1==c.staticStatus&&location.host.includes(a)}function B(d){var c=d.userType,f=d.memberType,a=d.expiryTime;return(c==v["企业账号"]||c==v["企业子账号"])&&f&&a&&y(a)}function m(){return location.host.includes(g.EQX_TG)}var g=k(22),y=k(43).isNotExpired,v=(k(44).hashCode,k(45).USER_ROLE),w=k(24).addProtocol;x.exports={getShareUrl:q,isEqxAdScene:D,isVipScene:z,isEqxHost:b,isThirdPartyHost:j,isTgScene:m}},function(module,exports){function dateFormat(x,y){var z={M:x.getMonth()+1,d:x.getDate(),h:x.getHours(),m:x.getMinutes(),s:x.getSeconds()};return y=y.replace(/(M+|d+|h+|m+|s+)/g,function(v){return((v.length>1?"0":"")+eval("z."+v.slice(-1))).slice(-2)}),y.replace(/(y+)/g,function(e){return x.getFullYear().toString().slice(-e.length)})}function isNotExpired(e){return new Date(e).getTime()>Date.now()}function isExpired(e){return new Date(e).getTime()<Date.now()}module.exports={dateFormat:dateFormat,isExpired:isExpired,isNotExpired:isNotExpired}},function(c,b){function d(h){var g=0;if(0===h.length){return g}for(var j=0;j<h.length;j++){var f=h.charCodeAt(j);g=(g<<5)-g+f,g&=g}return Math.abs(g)}function a(h,g){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;/\$\{([^}]*)}/.test(h)&&console.error("DO NOT USE ${}",h);for(var f=h;j&&/#\{([^}]*)}/.test(f);){f=f.replace(/#\{([^}]*)}/g,function(l,m){var k=g[m];return void 0!==k?k:l}),j--}return f}c.exports={hashCode:d,parse:a}},function(c,b,f){var a=f(46).make,d=a({1:"普通账号",2:"企业账号",21:"企业子账号",5:"公共账号",51:"公共子账号",3:"高级用户",4:"秀客",99:"运营人员"});c.exports={USER_ROLE:d}},function(b,a){function c(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f={};for(var h in g){if(g.hasOwnProperty(h)){var d=g[h];f[f[h]=d]=h}}return f}b.exports={make:c}},function(I,q,B){function E(l){var g=void 0,o=l.isTemplate,f=l.bizType;o&&3!==o&&4!==o?1===o?g=12:2===o&&(g=22):g=f?40==f?31:21:11;var d=window.location.host,h=x(d),m="b";return m=J()?"b":F()?"c":"a",new Promise(function(a){z(g,h,m).then(function(e){var c=e.map.logo;C=e.map.tail,e.map.share&&(b={link:e.map.share.backLink,domains:e.map.share.domains},H()||!window.scene||0===window.scene.property.eqAdType||window.scene.property.loadingLogo||1===o||2===o||window.location.href.indexOf("scene.eqxiu.com")!==-1||(j={shareCover:e.map.share.shareCover,coverLink:e.map.share.coverLink})),window.scene&&window.scene.ext&&window.scene.ext.yqc&&window.scene.ext.yqc.ad?k():b&&b.domains&&b.domains.indexOf(h)>-1&&b.link&&!H()&&window.scene&&0!==window.scene.property.eqAdType&&!window.scene.property.loadingLogo&&1!==o&&2!==o&&window.location.href.indexOf("scene.eqxiu.com")===-1,c&&A(c),a()})["catch"](function(c){console.log(c),a()})})}function A(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=$(".loading");if(d.backgroundSrc&&c.css({backgroundImage:"url('"+(D.FILE+d.backgroundSrc)+"')",backgroundColor:"none",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"}),d.logoSrc){var f=c.find(".loadbg");f.css({backgroundImage:"url('"+(D.FILE+d.logoSrc)+"')",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center",width:"70px",height:"70px"}),d.logoLink&&f.click(function(){window.location.href=d.logoLink})}if(d.brandSrc){var a=$('<div class="loading-brand"></div>').appendTo(c);a.css({backgroundImage:"url('"+(D.FILE+d.brandSrc)+"')",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:"40px",position:"absolute",left:"0",bottom:"0",zIndex:"9999"}),d.brandLink&&a.click(function(){window.location.href=d.logoLink})}}function x(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host,a=void 0;return a=window.scene&&window.scene.ext&&window.scene.ext.yqc&&window.scene.ext.yqc.ad?1:c.indexOf(D.EQX_TG)!==-1?2:c.indexOf(D.EQX_VIP_DOMAIN)!==-1?4:c.indexOf(D.EQX_APP_DOMAIN)!==-1?5:c.indexOf(D.EQX_COMPANY_DOMAIN)!==-1?3:c.indexOf(D.EQX_NO_BUSINESS_DOMAIN)!==-1?7:c.indexOf(D.EQX_BATCH_SCENES_DOMAIN)!==-1?8:6}function L(){return new Promise(function(a){return a(C)})}function w(){return j}function K(){return b}function k(){var c=window.location.href,a=window.scene.id,d=/singlemessage|groupmessage|timeline/;d.test(c)&&G(a)}var D=B(22),z=B(48).$getLoadPageConfig,J=B(25).isWeixin,F=B(25).mobilecheck,H=(B(24).getPathName,B(25).isApp),G=B(49).setAd,C=null,j=null,b=null;I.exports={customLoadPage:E,getLastPageConfig:L,getSharePopConfig:w,getButtonConfig:K,getDomainType:x}},function(h,d,k){function c(i,a,l){return l=l||"b",window._configure&&window._configure[l]?Promise.resolve({map:window._configure[l]}):b({type:"GET",url:f.SERVER_1+"eqs/scene/skin/get/page",data:{type:i,domain:a,platform:l}})}function j(a){return b({type:"GET",url:f.SERVER_2+"eqs/trailer/"+a})}function g(a){return a?j(a).then(function(i){return i.obj?(i.obj.isActivity=!0,i.obj):Promise.reject("活动尾页数据错误")}):Promise.reject("没有活动尾页 ID")}var b=k(21).$ajax,f=k(22);h.exports={$getPageInfo:j,$getActivityPage:g,$getLoadPageConfig:c}},function(j,q,f){function h(){$(".ad-modal-wx").css({top:"0px"}),$(".ad-modal-wx-box").addClass("ad-wx-slideInDown")}function d(a){m(a).then(function(y){if(y.success){var u=y.list[0].scenePageDTO,A=y.list[0].adCode;if(u){var l=u.elements.find(function(i){return"g"===i.type}),z=l.css.height,x=l.css.width,c=$('<div class="ad-modal-wx">\n                          <div class="ad-modal-wx-box">\n                          <div class="dog-gif "></div>\n                          <div class="ad-modal-content"></div>\n                          <div class="ad-close-btn"></div>\n                          </div>\n                      </div>');$(".p-index.main").not(".editor-section").prepend(c),$(".ad-modal-content").css({width:x,height:z,"margin-left":-x/2}),A.indexOf("gdt-native-template")>-1&&$(".ad-modal-content").append('<div id="gdt-native-template"></div>'),$(".ad-modal-content").append(A);var w=$(".ad-close-btn");w.on("click",function(){c.animate({opacity:0},{duration:300,complete:function(i){return c.remove()}})})}}})}function b(i){function a(){var n={title:"title",url:"#"};window.history.pushState(n,"title","#")}var l=112643717;m(i).then(function(o){if(o.success){var n=o.list[0].adPositionId;l=g[n]||112643717,d(l)}}),a();var c=!1;window.addEventListener("message",function(n){n.data.msg&&"adIsShowed"===n.data.msg&&(c=!0)}),window.addEventListener("popstate",function(){return c?void window.history.back():void h()},!1)}function m(c){var a=k.SERVER_1+"adview/scenePage/find?sceneId="+c,i=a.replace(/http:\/\//g,window.location.protocol+"//");return p({type:"GET",url:i})}function v(y,B,w,x){var l=k.TRACK+"p.gif?",c=encodeURIComponent,z=document,C={order_no:y,task_id:B,scene_id:w,exposure_type:x};l+="data="+c(JSON.stringify(C));var A=z.createElement("img");$(A).attr({src:l,width:0,height:0}),z.body.appendChild(A)}f(50);var k=f(22),p=f(21).$ajax,g=f(51).AD_POSITION_ID;j.exports={adModal:h,setAd:b,viewData:v,getSceneAdTpl:m}},function(b,a){},function(b,a){var c={1:116954426,2:116954202,3:116954311,1060:116954514,1107:116954060,1129:116953857};b.exports={AD_POSITION_ID:c}},function(b,a,c){b.exports=c.p+"images/spring-5632ca.jpg"},function(G,k,z){function C(){var c=x.ppitest(),a=J(),d=y();return j(),"\n            "+c+'\n            <div id="view_panel">\n            '+a+"\n            "+d+'\n                <div id="support">\n                    <a target="_blank" href="http://www.eqxiu.com">\n                         <em class="eqf-eqxiulogoorgin"></em>\n                     </a>\n                </div>\n            </div>'}function y(){var c=x.nr(),a=w();return'\n    <div class="phone_panel">\n                <div class="p-index main phoneBox" id="con" style="display: none;">         \n                    <div class="scene_title_baner">\n                        <h1 class="scene_title"></h1>\n                    </div>\n                    '+c+"\n                </div>\n                "+a+"\n            </div>"}function w(){return'<div class = "ctrl_panel">\n                <a id = "pre_page" type = "button" class = "pre_btn btn_scroll">上一页</a>\n                <a id = "next_page" type = "button" class = "next_btn btn_scroll">下一页</a>\n            </div>'}function J(){return'\n            <div id="code">\n                <div class="code_panel">\n                    <div class="code_panel_top">\n                        <div class="app">\n                            <a id="downApp" style="font-size:12px;">下载APP</a>\n                            <div id="downAppView" class="zoomIn-change">\n                                <h3><a id="close" style="cursor:pointer">X</a>易企秀APP</h3>\n                                <div id="downCode"></div>\n                                <p style="padding-bottom:20px;padding-top:10px;">一键生成H5，随时随地查数据</p>\n                            </div>\n                        </div>\n                        扫一扫，分享给朋友！\n                    </div>\n                    <div id="codeImg"/>\n                    <div id="view_share" class="bdsharebuttonbox">\n                        <a class="share-qq" href="" target="_blank"><span class="eqf-QQ share-icon"></span></a>\n                        <a class="share-qqZone" href="" target="_blank"><span class="eqf-QQzone share-icon"></span></a>\n                        <a class="share-weibo" href="" target="_blank"><span class="eqf-weibo share-icon"></span></a>\n                    </div>\n                </div>\n                <a class="btn_panel" target="_blank" href="'+D+'cats-2.html">\n                    <div id="view_reg">这么漂亮的场景&nbsp;→\n                        <span>我也来制作</span>\n                    </div>\n                </a>\n            </div>\n            '}function q(a){$("#view_reg").after('<div id="sample_btn">使用该模板</div>'),$("#view_reg").addClass("view_reg"),$("body").on("click","#sample_btn",function(){window.open(D+"redirect-"+a+".html")})}function I(){A().then(function(c){if(c.list.length){var a=c.list[0];$("#code").find(".btn_panel").append('<div id="advertisement_img">\n                    <a href="'+a.url+'" target="_blank">\n                    <img src="'+a.path+'">\n                    </a>\n                 </div>')}})}function j(){var c=0,a=$(document.body),d=$('<div id="lampHide-btn"><em class="eqf-left"></em></div>');a.append(d),d.click(function(){0===c?($("#recomment_container").hide(),$("#view_panel").addClass("onlyPhone"),$("#lampHide-btn").css("transform","rotate(180deg)"),$("#code").hide(),c=1):($("#recomment_container").show(),$("#view_panel").removeClass("onlyPhone"),$("#lampHide-btn").css("transform","rotate(360deg)"),$("#code").show(),c=0)})}function B(){var h=0,f=$(document.body),m=$('<div id="recomment_container"></div>'),d=$('<span id="recommend_btn">热点推荐</span>'),l=$('<div id="recommend_content"></div>'),g=$("<ul></ul>");m.append(l).append(d),f.append(m),d.click(function(){0===h?(l.hide(),$("#view_panel").css("margin","-300px 0 0 -326px"),h=1):(l.show(),$("#view_panel").css("margin","-300px 0 0 -198px"),h=0)});var c=b(window.location.host);E(c).then(function(a){a.list.length?($("#view_panel").css("margin","-310px 0 0 -204px"),l.append(g),a.list.forEach(function(n){if(n.cover.indexOf("imageMogr2")>-1){var i=n.cover.slice(0,n.cover.indexOf("imageMogr2")-1)}else{i=n.cover}g.append('<li><a href="'+F+"s/"+n.code+'" target="_blank"><img src="'+H.FILE+i+'?imageMogr2/auto-orient/thumbnail/240x240>"> <span>'+(n.name||"我用易企秀做了一个超酷炫的H5，快来看看吧。")+"</span></a></li>")})):$("#recomment_container").remove()})["catch"](function(a){$("#recomment_container").remove()})}var x=z(54),H=z(22),D=H.STORE;D=H.STORE.replace("https://","http://");var F=H.VIEW_HOST,E=z(55).$getRecommendScenes,A=z(55).$getPCAdvertisement,b=z(47).getDomainType;G.exports={div:C,pcCtrlBtn:w,addSample:q,addRecommend:B,addAdvertisement:I}},function(g,d,j){function c(){return'<div id="ppitest" style="width:1in;visible:hidden;padding:0px"></div>'}function h(){var a=$(".loading").remove().show()[0].outerHTML;return'\n<div class="nr" id="nr">\n    '+a+"\n</div>\n"}function f(i,a){i=i||"场景名称";var k=a.startsWith("http")?a:b.FILE+a;return'\n<div id="verifyCode" class="verifyCode">\n    <div class="container">\n        <div class="scene-cover">\n            <!-- 3、场景封面 -->\n            <img class="cover-img" src="'+k+'">\n        </div>\n        <!-- 4、场景名称 -->\n        <div class="scene-name">'+i+'</div>\n        <div class="confirm-password">\n            <div class="verify-label">请输入访问密码</div>\n            <div class="verify-tips" id="verifyTip">\n                <ul class="password-indicator">\n                    <li></li>\n                    <li></li>\n                    <li></li>\n                    <li></li>\n                </ul>\n            </div>\n            <div class="password-numbers">\n                <span>1</span>\n                <span>2</span>\n                <span>3</span>\n                <span>4</span>\n                <span>5</span>\n                <span>6</span>\n                <span>7</span>\n                <span>8</span>\n                <span>9</span>\n                <span>0</span>\n            </div>\n            <div class="password-operation">\n                <span class="btn-clear" id="btnClear">清空</span>\n                <span class="btn-cancel" id="btnCancel">取消</span>\n            </div>\n        </div>\n    </div>\n</div>'}var b=j(22);g.exports={nr:h,ppitest:c,pwd:f}},function(R,D,J){function N(){return/max\.(eqshow\.cn|yqxiu\.cn|eqxiu\.com|eqxiu\.cc)/.test(window.location.host)}function I(){return(/\/(\w+)$/.exec(window.location.pathname)||[])[1]}function G(){function b(c){return z(c),c}var a=new Promise(function(d,f){var e=window.scene;if(e){d(b(e))}else{if(window.__isServerRendered&&!window.scene&&f("场景数据异常"),N()){var c=I();window.__isMax=!0,A({type:"GET",url:Q.SERVER_MAX+"m/new/check/model/code?objectId="+c+"&JSESSIONID=ff4ff6599aa04597861955583c300a5d"}).then(function(h){if(h&&h.data){var l=h.data,k=window.scene=l.scene,g=l.pages.map(function(i){return{elements:i}});window.viewData={list:g},d(b(k))}else{f("无审核场景数据")}})["catch"](function(){f("无审核场景数据")})}else{K({type:"GET",url:Q.SERVER_1+"eqs/sc?code="+L()}).then(function(g){g.obj?d(b(g.obj)):f("无场景数据")})["catch"](function(){f("无场景数据")})}}});return a.then(function(c){return !c||!c.property.isHidden||j.getUrlParam("qz_gdt")||j.getUrlParam("wx_traceid")||j.getUrlParam("gdt_vid")?Promise.resolve(c):K({type:"GET",url:Q.SERVER_1+"eqs/geterrorpage"}).then(function(d){return d.obj?b(d.obj):"无场景数据"})["catch"](function(){return"无场景数据"})})}function V(g){if(window.viewData){return Promise.resolve(window.viewData)}var d=U("userKey"),k=U("compKey"),c={type:"GET",url:B()},h={type:"GET",url:T()};g&&(c.data={password:g});var f=null,b=Promise.resolve(null);return(d||k)&&(b=A(h).then(function(a){f=a.map})),b.then(function(){return A(c)}).then(function(a){return f&&(a.map=f),a})}function F(){var c=U("userKey"),b=U("cache"),d=Q.SERVER_1,a=M(window.scene);return(a||C())&&(d=Q.SERVER_2),(c||b)&&(d=Q.SERVER_1),d}function T(){var h=window.scene||{},f=h.id,m=h.code;if(!f){throw new Error("Not Valid Scene! No Id!")}if(!m){throw new Error("Not Valid Scene! No Code!")}var d=U("userKey"),k=U("compKey"),g=F(),b=g+"eqs/s/scene/component/data?id="+f+"&code="+m,l=q(b);return d&&l.searchParams.set("userKey",d),k&&l.searchParams.set("compKey",k),b=l.href}function B(){var g=window.scene||{},d=g.id,k=g.code,c=g.publishTime;if(!d){throw new Error("Not Valid Scene! No Id!")}if(!k){throw new Error("Not Valid Scene! No Code!")}var h=F(),f=h+"eqs/page/"+d+"?code="+k,b=q(f);return b.searchParams.set("time",c),f=b.href}function L(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;if(window.scene){return window.scene.code}c=q(c);var b=c.pathname,d=b.lastIndexOf("/");if(d>-1){var a=b.substr(d+1)}if(a.indexOf("index.html")>-1&&(a=U("codeTestMobile")),!a){throw new Error("No Valid Scene Code!")}return a.length>10&&console.error("URL Code 大于 10 位, 请检查 Code"),a}function H(a){return A({type:"GET",url:Q.SERVER_1+"eqs/s/recommend/scene/preview?domain="+a})}function S(){return A({type:"GET",url:Q.SERVER_2+"eqs/banners?pageCode=pc_view_bottom_ad"})}function O(){return Math.ceil(10000000000*Math.random())}var Q=J(22),P=J(21),K=P.ajax,A=P.$ajax,j=J(24),U=j.getUrlParam,q=j.parseUrl,z=J(56).perfectMeta,M=J(42).isVipScene,C=J(42).isTgScene;R.exports={$getSceneMetaData:G,$getSceneData:V,$getRecommendScenes:H,$getPCAdvertisement:S,randomId:O}},function(j,q,f){function h(a){return a.ext||(a.ext={}),"string"==typeof a.property&&(a.property=JSON.parse(a.property)||{}),"string"==typeof a.bgAudio&&(a.bgAudio=JSON.parse(a.bgAudio)||null),null===a.accessCode&&(a.accessCode=""),k(a),m(a),v(a),a}function d(a){a.name=a.name||"未命名场景",a.name=a.name.replace(/&quot;/g,'"')}function b(a){a.description=a.description||"我用易企秀做了一个超酷炫的H5，快来看看吧。"}function m(c){switch(c.pageMode+""){case"2":c.pageMode=p["上下翻页"]}void 0===p[c.pageMode]&&(_DEBUG_,c.pageMode=p["上下翻页"]),c.property||(c.property={});var a=c.property;return"triggerLoop" in a||(a.triggerLoop=!0),"autoFlip" in a||(a.autoFlip=!1),a.autoFlipTime||(a.autoFlipTime=3),"forbidHandFlip" in a||(a.forbidHandFlip=!1),void 0!==a.slideNumber&&null!==a.slideNumber||(a.slideNumber=!0),c}function v(w){var s=w.property,y=w.createTime,l=w.hideEqAd,x=w.eqAdType,u=w.isAdvancedUser,c=w.bottomLabel;switch(y<1416502800000|l|99===x&&(s.eqAdType=g["无尾页无底标"],delete s.createTime,delete s.hideEqAd),u&&(s.ad=2,c&&c.id?s.eqAdType=g["品牌联合底标"]:s.eqAdType=g["技术支持底标"],delete s.isAdvancedUser),""+s.eqAdType){case g["无尾页无底标"]:s.ad=0;break;case g["技术支持尾页"]:s.ad=1;break;case g["技术支持底标"]:case g["品牌联合底标"]:s.ad=2;break;case g["deepshare尾页"]:s.ad=4;break;default:s.eqAdType=g["技术支持尾页"],s.eqAdType=parseInt(s.eqAdType),s.ad=1}}function k(l){var c=l.property;if(c.shareDes&&"string"==typeof c.shareDes){try{c.shareDes=JSON.parse(c.shareDes)}catch(s){c.shareDes={description:{type:"position",description:c.shareDes}}}}var a=!1;if(c.wxCount>0||(1==c.clickFarmerStatus||2==c.clickFarmerStatus)&&c.wxClickFarmerCount>0){a=!0}else{var r=c.shareDes;r&&(r.description&&["myself","selfAndPosition"].includes(r.description.type)||r.title&&["myself","selfAndPosition"].includes(r.title.type)||r.avatar)&&(a=!0)}c.wxAuth=a}var p=f(57).PAGE_MODE,g=f(58).AD_TYPE;j.exports={perfectMeta:h,perfectPageMode:m,perfectAdType:v,perfectName:d,perfectDescription:b}},function(h,l){function f(a){return m.includes(a)}function g(a){return j.includes(a)}var d={up:1,right:2,down:3,left:4},b=[{name:"上下翻页",type:0,dir:d.down},{name:"上下惯性翻页",type:1,dir:d.down},{name:"左右惯性翻页",type:3,dir:d.right},{name:"左右翻页",type:4,dir:d.right},{name:"左右连续翻页",type:5,dir:d.right},{name:"立体翻页",type:6,dir:d.down},{name:"卡片翻页",type:7,dir:d.down},{name:"放大翻页",type:8,dir:d.down},{name:"交换翻页",type:9,dir:d.right},{name:"翻书翻页",type:10,dir:d.right},{name:"上下连续翻页",type:11,dir:d.down},{name:"掉落翻页",type:12,dir:d.down},{name:"淡入翻页",type:13,dir:d.down},{name:"上下推出翻页",type:14,dir:d.down},{name:"左右推出翻页",type:15,dir:d.right},{name:"折叠翻页",type:16,dir:d.down}],k={};b.forEach(function(a){k[a.type]=a.name,k[a.name]=a.type});var m=b.filter(function(a){return a.dir==d.down}).map(function(a){return a.type}),j=b.filter(function(a){return a.dir==d.right}).map(function(a){return a.type});h.exports={isBottomArrow:f,isRightArrow:g,BOTTOM_ARROWS:m,RIGHT_ARROWS:j,PAGE_MODE:k}},function(c,b,f){var a=f(46).make,d=a({0:"无尾页无底标",1:"技术支持尾页",2:"技术支持底标",3:"品牌联合底标",4:"deepshare尾页"});c.exports={AD_TYPE:d}},function(h,d,k){function c(){var a=f.nr();return'<div class="phone_panel">\n   \n    <div class="p-index main phoneBox" id="con" style="display: none;">\n        <div class="top"></div>\n        <div class="phone_menubar"></div>\n        <div class="scene_title_baner">\n            <h1 class="scene_title"></h1>\n        </div>\n        '+a+'\n        <div class="bottom"></div>\n    </div>\n</div>'}function j(){var i=f.nr(),a=f.ppitest();return"\n"+a+'\n<div class="p-index main iframe-phone" id="con" style="display: none; width: 320px; margin-right: 40px;">\n'+i+"\n</div>\n"}function g(){return'<div class = "iframe_panel" style="z-index:2;">\n        <div class="preview"><a id = "pre_page" type = "button" class = "scroll_btn"><span class="eqf-right" style="display: inline-block;transform: rotate(-90deg);font-size: 18px;"></span></a></div>\n        <div class="next"><a id = "next_page" type = "button" class = "scroll_btn"><span class="eqf-left" style="display: inline-block;transform: rotate(-90deg);font-size: 18px;"></span></a></div>\n    </div>'}function b(){return'<div class="iframe_panel2">\n                    <ul>\n                        <li id="pre_page">上一页</li>\n                        <li id="next_page">下一页</li>\n                    </ul>\n                </div>'}var f=k(54);h.exports={div:c,phoneDiv:j,ctrlBtnDiv:g,ctrlBtnDiv2:b}},function(c,b,f){function a(){var h=d.nr(),g=d.ppitest();return"\n"+g+'\n<div class="p-index main" id="con" style="display: none;">\n'+h+"\n</div>\n"}var d=f(54);c.exports={div:a}},function(c,b){function f(){a(),d()}function a(){"miniprogram"==window.__wxjs_environment&&document.addEventListener("visibilitychange",function(){"hidden"==document.visibilityState&&$(".bgm-btn audio")[0].pause()})}function d(){var g=window.location.href;g.indexOf("tg.eqxiu.com")>-1&&(window.onresize=function(){window.screen.width<450&&window.location.reload()})}c.exports={sceneLoadEnd:f}},function(B,G,q){function x(f){var d=f.property.activityPageId;if(f.isPwd){var g=new Promise(function(e){new b(f.cover,$("#nr"),e)})}else{g=E()}var c=g.then(function(e){return e.meta=f,new w(e,[j]).start(),e}),a=H(d)["catch"](function(){return null});return Promise.all([c,a]).then(function(m){var l=k(m,2),o=l[0],h=l[1];return h instanceof Object&&o.list.push(h),o}).then(function(i){var h=i.meta;if(!A(h)){return i}var l=h.ext;return D(l.yqc.ad).then(function(e){return e&&e.list&&e.list.length?(e.list.filter(function(m){return !!m.scenePage||!!m.scenePageDTO}).forEach(function(O){for(var I=O.scenePage,K=O.scenePageDTO,p=O.pageNum,m=K||I,M=m.elements||[],P=0;P<M.length;P++){var L=M[P];if(L&&"EqxAdvertise"==v[L.type]){L.content="tpl";break}}var N=p-1,J=i.list;N>J.length?J.push(m):J.splice(N,0,m)}),i):i})["catch"](function(e){return console.error(e||"广告尾页请求或者解析失败"),i})}).then(function(h){return new F(h).addPageFn(C).addEleFn(y).start(),z(h)})}var k=function(){function a(l,u){var g=[],h=!0,f=!1,d=void 0;try{for(var p,I=l[Symbol.iterator]();!(h=(p=I.next()).done)&&(g.push(p.value),!u||g.length!==u);h=!0){}}catch(m){f=!0,d=m}finally{try{!h&&I["return"]&&I["return"]()}finally{if(f){throw d}}}return g}return function(c,d){if(Array.isArray(c)){return c}if(Symbol.iterator in Object(c)){return a(c,d)}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=q(63).Guess,E=q(55).$getSceneData,H=q(48).$getActivityPage,D=q(66).$getYqcAd,F=q(67),w=q(68).ObjAdaptor,j=q(69).perfectScene,C=q(70).perfectPage,y=q(73).perfectComp,A=q(42).isEqxAdScene,z=q(78).addEqAdInfo,v=q(72).COMP_TYPE;B.exports={getPerfectSceneData:x,$getActivityPage:H}},function(x,C,k){function q(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var j=function(){function a(f,d){for(var h=0;h<d.length;h++){var c=d[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}();k(64);var b=k(65),A=k(44).parse,D=k(55).$getSceneData,z=k(25),B=z.mobilecheck,m=z.isAndroidPhone,g=z.tabletCheck,y=z.isPc,v=k(22),w=function(){function a(d,r,l){if(q(this,a),this.callBack=l,this.password="",d.startsWith("http")||(d=v.FILE+d),r.append(A(b,{cover:d})),$("#loading").hide(),$("#verifyCode").show(),y()||m()?($(".password-numbers>span").on("click",this.passwordEventListener.bind(this)),$("#btnClear").on("click",this.btnClearEventListener.bind(this)),$("#btnCancel").on("click",this.btnCancelEventListener.bind(this))):($(".password-numbers>span").on("touchstart",this.passwordEventListener.bind(this)),$("#btnClear").on("touchstart",this.btnClearEventListener.bind(this)),$("#btnCancel").on("touchstart",this.btnCancelEventListener.bind(this))),B()||g()){var e,p=$(".container"),i=p.width(),h=p.height();e=Math.floor(10*Math.min(document.documentElement.clientHeight/h,document.documentElement.clientWidth/i))/10,p.css("transform","scale("+e+", "+e+")")}}return j(a,[{key:"requestSceneDataWithPassword",value:function(d){var c=this;D(d).then(function(f){c.clearGuess(),c.callBack(f)})["catch"](function(){c.warnGuess()})}},{key:"animateVerifyTip",value:function(){var c=this;$("#verifyTip").addClass("shake").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("shake"),c.syncronizeTheIndicator()})}},{key:"syncronizeTheIndicator",value:function(){var c=this;$(".password-indicator li").each(function(d,e){d<c.password.length?$(e).addClass("active"):$(e).removeClass("active")})}},{key:"passwordEventListener",value:function(d){var c=$(d.target);c.addClass("active"),this.password+=c.text(),this.syncronizeTheIndicator(),4==this.password.length&&(this.requestSceneDataWithPassword(this.password),this.password=""),setTimeout(function(){c.removeClass("active")},100)}},{key:"btnClearEventListener",value:function(c){this.password="",this.syncronizeTheIndicator()}},{key:"btnCancelEventListener",value:function(c){this.password&&(this.password=this.password.substring(0,this.password.length-1),this.syncronizeTheIndicator())}},{key:"clearGuess",value:function(){$("#verifyCode").remove(),y()||m()?($(".password-numbers>span").off("click",this.passwordEventListener.bind(this)),$("#btnClear").off("click",this.btnClearEventListener.bind(this)),$("#btnCancel").off("click",this.btnCancelEventListener.bind(this))):($(".password-numbers>span").off("touchstart",this.passwordEventListener.bind(this)),$("#btnClear").off("touchstart",this.btnClearEventListener.bind(this)),$("#btnCancel").off("touchstart",this.btnCancelEventListener.bind(this)))}},{key:"warnGuess",value:function(){$("#verifyCode").show(),this.animateVerifyTip()}}]),a}();x.exports={Guess:w}},function(b,a){},function(b,a){b.exports='<div id="verifyCode" class="verifyCode"><div class="container"><div class="scene-cover"><img class="cover-img" src="#{cover}"></div><div class="scene-name">场景名称</div><div class="confirm-password"><div class="verify-label">请输入访问密码</div><div class="verify-tips" id="verifyTip"><ul class="password-indicator"><li></li><li></li><li></li><li></li></ul></div><div class="password-numbers"><span>1</span> <span>2</span> <span>3</span> <span>4</span> <span>5</span> <span>6</span> <span>7</span> <span>8</span> <span>9</span> <span>0</span></div><div class="password-operation"><span class="btn-clear" id="btnClear">清空</span> <span class="btn-cancel" id="btnCancel">取消</span></div></div></div></div>'},function(g,d,j){function c(a){return f({type:"GET",url:b.SERVER_1+"adview/scenePage/find",data:{sceneId:a,time:Date.now()}})}function h(a){return f({type:"GET",url:b.SERVER_1+"adview/tail/find",data:{sceneId:a,time:Date.now()}})}var f=j(21).ajax,b=j(22);g.exports={$getYqcAd:c,$getYqcTail:h}},function(h,m,f){function g(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function a(q,o){for(var r=0;r<o.length;r++){var c=o[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(q,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}(),b=f(68),k=b.ObjAdaptor,p=b.ListAdaptor,j=f(69).perfectScene,l=function(){function a(c){g(this,a),j(c),this.sceneJson={map:c.map,meta:c.meta,list:c.list},this.mapAdaptor=new k(c.map),this.metaAdaptor=new k(c.meta),this.pageAdaptor=new p(c.list),this.eleAdptorList=c.list.map(function(i){return i.elements||(i.elements=[]),new p(i.elements)})}return d(a,[{key:"addMapFn",value:function(c){return this.mapAdaptor.addFn(c),this}},{key:"addMetaFn",value:function(c){return this.metaAdaptor.addFn(c),this}},{key:"addPageFn",value:function(c){return this.pageAdaptor.addFn(c),this}},{key:"addEleFn",value:function(c){return this.eleAdptorList.forEach(function(e){return e.addFn(c)}),this}},{key:"start",value:function(){var c=this;this.mapAdaptor.start(this.sceneJson),this.metaAdaptor.start(this.sceneJson),this.pageAdaptor.start(this.sceneJson),this.eleAdptorList.forEach(function(e,i){return e.start(c.sceneJson,c.sceneJson.list[i])})}}]),a}();h.exports=l},function(h,l){function f(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function g(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}function d(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var b=function(){function a(p,o){for(var q=0;q<o.length;q++){var c=o[q];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(p,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}(),k=function(){function a(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];d(this,a),this.fns=c}return b(a,[{key:"addFns",value:function(i){var c=this;return i.forEach(function(n){return c.addFn(n)}),this}},{key:"addFn",value:function(c){return this.fns.includes(c)||this.fns.push(c),this}},{key:"removeFn",value:function(i){var c=this.fns.indexOf(i);return c>-1&&this.fns.splice(c,1),this}},{key:"clearFns",value:function(){return this.fns.length=0,this}},{key:"start",value:function(){return this}}]),a}(),m=function(c){function a(p){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];d(this,a);var o=f(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,n));return o.data=p,o}return g(a,c),b(a,[{key:"start",value:function(n){var i=this;return this.fns.forEach(function(e){return e.call(null,i.data,n)}),this}}]),a}(k),j=function(c){function a(p){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];d(this,a);var o=f(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,n));return Array.isArray(p)||(_DEBUG_&&console.error("Invalid Array"),p=[]),o.list=p,o}return g(a,c),b(a,[{key:"start",value:function(){for(var q=this,p=arguments.length,r=Array(p),o=0;o<p;o++){r[o]=arguments[o]}return this.fns.forEach(function(e){return q.list.forEach(function(i){return e.call.apply(e,[null,i].concat(r))})}),this}}]),a}(k);h.exports={ObjAdaptor:m,ListAdaptor:j}},function(b,a){function c(d){return d.meta?d.obj=d.meta:d.obj=d.obj||{},d.meta=d.obj,d.map=d.map||{},d.list=d.list||[],d.list.forEach(function(g,f){g.num=f+1}),d}b.exports={perfectScene:c}},function(m,y,h){function k(c,a){g(c),z(c,a),b(c,a),w(c),x(c),j(c.properties,"p",c)}function g(a){a.elements&&a.elements.forEach(function(d){d.css=d.css||{};var c=d.type;"3"==c?d.css.zIndex=-1:"q"==c&&(d.css.zIndex=0)})}function b(a){a.elements=a.elements.filter(function(p){var d=p.type;if("EqxShape"==f[d]){var u=p.properties,c=u.type,s=u.src;if(s){return !0}if(!c){return !1}if(c.includes("symbols")){return !0}var l=c.replace(/-([a-z])/g,function(n,i){return i.toUpperCase()});return !!l}return !0})}function w(c){var a=c.properties,d=a.longPage;d&&d>1&&d<6&&(a.longPage=486*d)}function z(c,a){c.properties=c.properties||{},c.properties.triggerGroup=c.properties.triggerGroup||[],c.properties.pageScroll=c.properties.pageScroll||{},Array.isArray(c.properties.triggerGroup)||(c.properties.triggerGroup=[]),c.elements=c.elements||[],c.sceneId=a.meta.id,c.name=c.name||"第"+c.num+"页",c.elements.forEach(function(d){return d.pageId=c.id})}function v(c){var a=c+"Effect";q.includes(a)||q.push(a)}function x(d){var c=d.properties||{};if(c.image||c.scratch){v("scratch");var p=c.effect=Object.assign({name:"scratch"},c.image||c.scratch),a=p.percentage?p.percentage.value||p.percentage||0.15:0.15;return delete p.percentage,p.percentage=a,void (c.image?delete c.image:delete c.scratch)}if(c.finger){return v("finger"),c.effect=Object.assign({name:"finger"},c.finger),void delete c.finger}if(c.fallingObject){return v("fallingObject"),c.effect=Object.assign({name:"fallingObject"},c.fallingObject),void delete c.fallingObject}if(c.effect){var l=c.effect.name;v(l),"money"===l&&_DEBUG_&&(c.effect.seconds=2)}}var j=h(71),f=h(72).COMP_TYPE,q=[];m.exports={perfectPage:k,perfectJson:z,perfectLongPage:w,perfectTrigger:j,effectArr:q,perfectEffect:x}},function(b,a){function c(h,f,k){var d=h.trigger;if(d){var j=d.sends;Array.isArray(j)&&(k.properties.triggerGroup=k.properties.triggerGroup||[],j.forEach(function(e){e.handles.forEach(function(i){i.ids&&i.ids.length&&i.ids.forEach(function(l){k.properties.triggerGroup.push({eventType:e.type,sourceType:f,sourceId:"e"==f?h.id:k.id,targetType:"e",targetId:l,targetState:i.type,delay:e.delay})})})})),"e"==f&&d.initType&&(h.properties.initType=d.initType),delete h.trigger}if("e"==f&&1!=h.properties.initType&&2!=h.properties.initType){if(d&&d.receives&&d.receives.length){var g=d.receives.length;1===d.receives[g-1].type?h.properties.initType=2:2===d.receives[g-1].type&&(h.properties.initType=1)}else{h.properties.initType=1}}}b.exports=c},function(h,l){function f(c,a,i){return a in c?Object.defineProperty(c,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):c[a]=i,c}var g=f({16:"EqxPipButton",1:"EqxHotNewText",13:"EqxPhotoWall",7:"EqxNewText",2:"EqxText",x:"EqxText",298:"EqxDeepShare",299:"EqxReport",3:"EqxBackground",4:"EqxImage",8:"EqxTelephone",9:"EqxRedPacket",10:"EqxRandomContent",11:"EqxReward",b:"EqxComment",h:"EqxShape",i:"EqxCount",l:"EqxLink",t:"EqxChart",v:"EqxVideo",o:"EqxInteractiveVideo",p:"EqxImageSlider",m:"EqxMap",n:"EqxRandom",s:"EqxSound",d:"EqxPv",g:"EqxAdvertise",e:"EqxDownTime",f:"EqxUpTime",upload:"EqxUploadImages",a:"EqxScore",c:"EqxCheckbox",r:"EqxRadio",z:"EqxDropDownList",5:"EqxInput",501:"EqxInput",502:"EqxInputPhone",503:"EqxInputEmail",504:"EqxInput",6:"EqxSubmitButton",601:"EqxSubmitButton",12:"EqxSMS",201:"EqxWxNickName",401:"EqxWxProfile",403:"EqxWxUploadImage",w01:"EqxWxSoundPlay",w02:"EqxWxSoundRecord",j:"EqxImgVote",k:"EqxTextVote",q:"EqxGravity",u:"EqxDrawingBoard",14:"EqxDate",24:"EqxLongTouchSavePicButton",17:"EqxWeChatCard",18:"EqxTurntable",19:"EqxSmashEgg",20:"EqxScratchcard",21:"EqxRedPackets",22:"EqxNineSquare",23:"EqxQrcode"},"24","EqxLongTouchSavePicButton"),d=["upload","5","501","502","503","504","c","r","z","a","12"],b=["201","401","403","w01","w02","j","k","11","9","b","13","17","18","19","20","21","22"],k=["i","6","601"],m=["3","q"],j=Date.now()+""+Math.floor(100000*Math.random());h.exports={COMP_TYPE:g,FORM_COMPS:d,WX_COMPS:b,WX_CLICK_FARMER_COMPS:k,FIX_INDEX_COMPS:m,COMP_KEY:j}},function(aa,K,Q){function W(b,a,c){return M(b,a),ae(b,a,c),L(b),H(b),O(b,a),ac(b),U(b),N(b),X(b,a),V(b,"e",c),ab(b),G(b,c),B(b,c),ad(b),b}function O(b,a){if("EqxDrawingBoard"===D[b.type]&&a.map[af]){var c=a.map[af][b.id];c&&(b.properties.imgSrc=c,b.properties.qiniuSrc=c)}}function M(b,a){b&&a&&(b.properties=b.properties||{},"string"==typeof b.properties&&(b.properties={}),b.css=b.css||{},b.sceneId=a.meta.id)}function ae(h,m,f){var g=h.css,d=D[h.type];if("translate3d(0px, 0px, 0px) rotateZ(0deg) scale(1, 1)"===g.transform&&(g.transform=""),g.letterSpacing&&!g.letterSpacing.toString().endsWith("em")&&(g.letterSpacing=g.letterSpacing+"em"),"EqxBackground"!==d){var b=["top","left","width","height","zIndex"];b.forEach(function(a){void 0===g[a]&&(_DEBUG_,"height"===a&&(["EqxInput","EqxInputEmail","EqxInputPhone"].includes(d)&&(g.height=38),"EqxSubmitButton"===d&&(g.height=36),"EqxRadio"!==d&&"EqxCheckbox"!==d||_DEBUG_&&console.info(d),_DEBUG_&&console.info("add height",g.height)))});var l={color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},p=Object.assign({},l,g);Object.assign(g,p)}if(Y(h),Z(g),f){var k=f.properties.longPage||486;g.bottom&&!g.top&&(g.top=k-g.bottom-g.height,console.log("bottom "+g.bottom+" height "+g.height+" -> top "+g.top),delete g.bottom)}return g.top||(g.top=0),g.left||(g.left=0),h}function L(b){var a=b.properties;"string"==typeof a&&(a={}),a.anim?(Array.isArray(a.anim)||(a.anim=[a.anim]),a.anim=a.anim.filter(function(f){var d=f||{},g=d.type,c=d.direction;return !(g==-1||null==g||void 0==g||!J[g])&&(C[g]&&!J[g][c]&&(console.error("invalid animation type",f),f.direction=0),!0)})):a.anim=[],a.anim.forEach(function(c){["delay","duration"].forEach(function(d){"string"==typeof c[d]&&(c[d]=parseFloat(c[d]))})})}function ac(d){var b=d.type,g=d.properties,a=g.cropSize,f=g.croptype,c=g.pageLength;"EqxBackground"===D[b]&&(a&&!f&&(g.croptype=F["固定背景模式"]),c&&(c<2&&delete g.pageLength,c<10&&(g.pageLength=486*c)))}function H(b){if("EqxImage"===D[b.type]){var a=b.properties;Z(a),Z(a.imgStyle||(a.imgStyle={}))}}function U(b){var a=D[b.type];"string"!=typeof b.choices||"EqxCheckbox"!==a&&"EqxDropDownList"!==a&&"EqxRadio"!==a||(b.choices=JSON.parse(b.choices)||{})}function N(a){}function ab(a){"EqxDropDownList"==D[a.type]&&(a.showText&&a.placeholderText&&a.choices&&(a.choices.options.unshift({id:0,label:a.placeholderText}),a.choices.options.map(function(b){b.value=b.id,delete b.id,b.selected=!1,b.label==a.showText&&(b.selected=!0)})),delete a.showText,delete a.placeholderText,a.choices&&delete a.choices.seq)}function X(c,b){var f=b.meta.publishTime,a=D[c.type];if("EqxText"===a||"EqxAwesomeText"===a){c.type=2,c.properties&&c.properties.dataUrl&&delete c.properties.dataUrl;var d=c.content;d&&d.length>0&&(d=d.replace(/(^\s*)|(\s*$)/g,""),z.isBadStr(d)&&(console.error("xss text"),d=z.toGoodStr(d)),c.content=d),c.publishTime=f}}function Z(a){"100%"===a.width&&(a.width=320),["opacity","width","height","top","bottom","left","right","zIndex","borderWidth","borderBottomLeftRadius","borderBottomRightRadius","borderTopRightRadius","borderTopLeftRadius","borderRadius"].forEach(function(b){var c=a[b];c&&(a[b]=parseFloat(c))})}function Y(c){var b=c.css,d=D[c.type],a=["top","bottom","left","zIndex","width","height","lock","transform","opacity","color","backgroundColor","lineHeight","fontSize","textAlign","fontWeight","writingMode","letterSpacing","fontFamily","paddingBottom","paddingTop","letterSpacing","fontStyle","textDecoration","letterSpacing","fontStyle","borderWidth","borderStyle","borderColor","borderRadius","borderRadiusPerc","borderBottomRightRadius","borderBottomLeftRadius","borderTopRightRadius","borderTopLeftRadius","boxShadow","boxShadowDirection","boxShadowSize"];return Object.keys(b).forEach(function(h){var i=a.indexOf(h),g=b[h];if(i===-1&&(_DEBUG_,"EqxInput"===d&&"text-align"===h&&(b.textAlign=b.textAlign||b["text-align"],delete b[h]),"border"===h)){var f=R(g);b.borderColor=f.borderColor||b.borderColor,b.borderWidth=f.borderWidth||b.borderWidth,b.borderStyle=f.borderStyle||b.borderStyle,delete b[h],_DEBUG_&&console.info("delete border:",g,"add",b.borderColor,b.borderWidth,b.borderStyle)}}),c}function R(b){var a=b.split(" ");return{borderWidth:a[0],borderStyle:a[1],borderColor:a[2]}}function G(g,d){var k=g.properties,c=k.url,h=k.number,f="",b="";c?(!Number.isInteger(+c)&&c.startsWith("http://")&&window.location.href.startsWith("https://")&&(c=c.replace("http://","https://")),b=c,f=Number.isInteger(+c)?q.page:q.link,delete g.properties.url):h&&(b=h,f=q.phone,delete g.properties.number),b&&f&&d.properties.triggerGroup.push({eventType:j.click,sourceType:"e",sourceId:g.id,targetType:"e",targetId:g.id,targetState:f,targetContent:b})}function B(b,a){if(b.sound&&b.sound.src){var c=a.properties.triggerGroup.findIndex(function(d){return d.eventType==j.click&&d.sourceId==b.id&&d.targetState==q.play});c==-1&&a.properties.triggerGroup.push({eventType:j.click,sourceType:"e",sourceId:b.id,targetType:"e",targetId:b.id,targetState:q.play})}}function ad(a){a.properties.zoom=a.properties.zoom||11}var D=Q(72).COMP_TYPE,F=Q(74).BG_CROP_TYPE,V=Q(71),J=Q(75).ANIMATION_TYPE,C=Q(75).ANIMATION_TYPE_WITH_DIR,z=Q(76),A=Q(24).getUrlParam,af=A("compKey"),j=Q(77).RAW_EVENT,q=Q(77).EQX_EVENT;aa.exports={perfectComp:W,perfectJson:M,perfectCss:ae,perfectAnim:L,perfectBg:ac,perfectChoice:U,perfectInput:N,perfectText:X,perfectTrigger:V,perfectLink:G,perfectSound:B}},function(b,a){var c={"固定背景模式":1,"全屏背景模式":2};b.exports={BG_CROP_TYPE:c}},function(c,b){var d={0:["fadeIn"],1:["fadeInLeft","fadeInDown","fadeInRight","fadeInUp"],2:["bounceInLeft","bounceInDown","bounceInRight","bounceInUp"],3:["bounceIn"],4:["zoomIn"],5:["rubberBand"],6:["wobble"],7:["rotateIn"],8:["flip"],9:["swing"],10:["fadeOut"],11:["flipOutY"],12:["rollInRight","rollInDown","rollInLeft","rollInUp"],13:["lightSpeedInRight","lightSpeedInDown","lightSpeedInLeft","lightSpeedInUp"],14:["bounceOut"],15:["rollOutRight","rollOutDown","rollOutLeft","rollOutUp"],16:["lightSpeedOutRight","lightSpeedOutDown","lightSpeedOutLeft","lightSpeedOutUp"],17:["fadeOutRight","fadeOutDown","fadeOutLeft","fadeOutUp"],18:["zoomOut"],19:["bounceOutRight","bounceOutDown","bounceOutLeft","bounceOutUp"],20:["flipInY"],21:["tada"],22:["jello"],23:["flash"],24:["flipInX"],25:["flipOutX"],26:["twisterInDownRight","twisterInDownDown","twisterInDownLeft","twisterInDownUp"],27:["puffIn"],28:["puffOut"],29:["slideDown"],30:["slideUp"],31:["twisterInUpRight","twisterInUpDown","twisterInUpLeft","twisterInUpUp"],32:["hingeRight","hingeLeft"],33:["opacityFadeInLeft","opacityFadeInDown","opacityFadeInRight","opacityFadeInUp"],particles:["particles"],typer:["typer"]},a={1:["fadeInLeft","fadeInDown","fadeInRight","fadeInUp"],2:["bounceInLeft","bounceInDown","bounceInRight","bounceInUp"],12:["rollInRight","rollInDown","rollInLeft","rollInUp"],13:["lightSpeedInRight","lightSpeedInDown","lightSpeedInLeft","lightSpeedInUp"],15:["rollOutRight","rollOutDown","rollOutLeft","rollOutUp"],16:["lightSpeedOutRight","lightSpeedOutDown","lightSpeedOutLeft","lightSpeedOutUp"],17:["fadeOutRight","fadeOutDown","fadeOutLeft","fadeOutUp"],19:["bounceOutRight","bounceOutDown","bounceOutLeft","bounceOutUp"],26:["twisterInDownRight","twisterInDownDown","twisterInDownLeft","twisterInDownUp"],31:["twisterInUpRight","twisterInUpDown","twisterInUpLeft","twisterInUpUp"],33:["opacityFadeInLeft","opacityFadeInDown","opacityFadeInRight","opacityFadeInUp"]};c.exports={ANIMATION_TYPE:d,ANIMATION_TYPE_WITH_DIR:a}},function(c,b){function d(f){return f?f.replace(/<\s*(img|input)[^>]*\/?>/gi,"").replace(/<\s*(script|textarea|svg|iframe|embed)[^>]*>.*?<\s*\/\1\s*>/gi,""):f}function a(f){return !!f&&(f=f.replace(/[↵\n\t\s]/g,""),/<\s*(img|input)[^>]*\/?>/gi.test(f)||/<\s*(script|textarea|svg|iframe|embed)[^>]*>.*?<\s*\/\1\s*>/gi.test(f))}c.exports={toGoodStr:d,isBadStr:a}},function(c,b){var f={click:1,shake:2,taphold:3,slide:4,mediaCanplay:5,mediaPlaying:6,mediaEnded:7,animStart:8,animIteration:9,animEnd:10},a={show:1,hide:2,random:3,play:4,link:5,page:6,phone:7,position:8,anim:9},d={show:1,hide:2,"default":0};c.exports={RAW_EVENT:f,EQX_EVENT:a,INIT_EVENT:d}},function(P,C,H){function L(b){if(Array.isArray(b)){for(var a=0,c=Array(b.length);a<b.length;a++){c[a]=b[a]}return c}return Array.from(b)}function G(b,a){var c={};return new Promise(function(d){return b?S(b).then(function(f){return O(a,f.obj)}).then(function(f){return D(f),d(f)}):(c=J(a),D(c),d(c))})}function E(i){var s=i.meta,c=s.id,b=s.property,a=b.lastPageId,p=b.eqAdType,k=s.bizType,h=s.isTemplate,f=(s.ext,i.list),l=f.length;return new Promise(function(g){function r(){return K().then(function(o){return n=J(i,o),R(n),f.push(n),g(i)})["catch"](function(){return n=J(i),R(n),f.push(n),g(i)})}var n=void 0;if(l&&(n=f[l-1],n.elements=n.elements||[]),!(q()||30!=k&&2!=h||p!=A["deepshare尾页"]&&(p!=A["技术支持尾页"]||a))){return K().then(function(o){return o}).then(function(o){return n=T(i,o),R(n),f.push(n),g(i)})["catch"](function(){return n=T(i),R(n),f.push(n),g(i)})}switch(""+p){case A["无尾页无底标"]:return g(i);case A["技术支持尾页"]:return a?S(a).then(function(o){return O(i,o.obj)}).then(function(o){return D(o),f.push(o),g(i)})["catch"](function(){return r()}):r();case A["技术支持底标"]:try{var d=F(n),e=j.bottomLabel({sceneId:c,pageId:n.pageId,top:d,pageIndex:l});return n.elements.push(e),g(i)}catch(m){return console.error("添加技术支持底标尾页失败",m),r()}case A["品牌联合底标"]:try{return M(i).then(function(o){return n.elements=[].concat(L(n.elements),L(o)),g(i)})}catch(m){return console.error("添加品牌联合底标失败",m),r()}default:return r()}})}function T(h,d){var l=h.meta,c=l.id,k=l.cover,g=l.name,b=l.code,f=h.list.length+1;return j.lastPageBlur({id:c,name:g,num:f,cover:k,code:b,isDeepShare:!0},d)}function D(d,b){var g=d.pageId,a=d.sceneId,f=d.num,c=j.report({pageId:g,sceneId:a,pageIndex:f,center:b});d.elements.push(c)}function R(d,b){var g=d.pageId,a=d.sceneId,f=d.num,c=j.addReportBlur({pageId:g,sceneId:a,pageIndex:f,center:b});d.elements.push(c)}function B(b){var a=b.sceneId,c=b.url;return I.SERVER_1+"eqs/link?id="+a+"&url="+encodeURIComponent(c)}function J(g){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=g.meta,c=k.id,h=k.cover,f=k.name,b=g.list.length+1;return j.lastPageBlur({id:c,name:f,num:b,cover:h},d)}function F(b){var a=(b.properties||{}).longPage||1;return a<10?486*(a-1):a-486}function Q(c,b,f){var a=F(c),d=j.bottomLabel({sceneId:b,pageId:c.pageId,top:a,pageIndex:f});return d}function M(k){var w=k.meta,f=w.id,h=w.property.bottomLabel,d=h.id,b=h.name,p=h.url;if(!d){throw new Error("No bottomLabel's id")}var x=k.list,m=x[x.length-1],v=F(m),g=m.pageId;return S(d).then(function(a){return(a.obj.elements||[]).map(function(c){return N({ele:c,sceneId:f,pageId:g,url:p,top:v,name:b})})},function(){return[]})}function O(h,p){var f=h.list,d=h.meta,b=d.cover,k=d.id,v=d.name;p.properties=p.properties||{},p.sceneId=k;var i=function(c){var a=c.properties.src;return 4==c.type&&!!a&&["group1/M00/A5/5E/yq0KA1QmePmAKr7yAAEByp5jyLc752.jpg","group1/M00/C5/9D/yq0KA1SH1zuAFgkLAAAFgBR8hJs456.png","group1/M00/C5/3F/yq0KA1SHp-2AQZZZAAB-7rIaK6I743.png","group1/M00/C5/9D/yq0KA1SH1zuAeQuFAAAFfUkeXDc110.png"].includes(a)},m=function(a){2==a.type&&/http:\/\/service.eqxiu.com\/eqs\/link/.test(a.content)&&(a.content=a.content.replace(/;url=.*com"/,";url="+encodeURIComponent(z)))};if("group1/M00/61/8A/yq0KA1T2vYSAEgo7AACovQVgHxk048.jpg"!==b){var g=j.image1();g.properties.src=b}else{g=j.eqxLogo()}return p.elements=p.elements.filter(function(a){return !i(a)}),p.elements.forEach(m),p.elements=[].concat(L(p.elements),[j.shadow(),g,j.line(),j.title(v)]),p.num=f.length+1,p}function N(h){var d=h.ele,l=h.sceneId,c=(h.pageId,h.url),k=h.top,g=h.name;d.sceneId=l,d.pageId=129811;var b="EQXIU.COM科技公司",f=d.type;return 2==f&&(g&&c&&"http://"!==c&&(d.content=d.content.replace(new RegExp(b),'<a href="'+B({sceneId:l,url:c})+'" target=_blank data-event="1120203">'+g+"</a>")),g?d.content=d.content.replace(new RegExp(b),g):/易企秀技术支持/.test(d.content)&&(Object.assign(d.css,{zIndex:1000,height:33,width:129,left:97}),d.content='<div style="text-align: center;">'+d.content+"</div>")),d.css.top+=k,d.css.zIndex=200,d}var I=H(22),A=H(58).AD_TYPE,j=H(79),S=H(48).$getPageInfo,q=(H(66).$getYqcTail,H(25).isApp),z=H(24).redirectUrl(),K=H(47).getLastPageConfig;P.exports={addEqAdInfo:E,getLastPage:G,getDefaultBottom:Q,getCustomBottomLabel:M}},function(J,w,C){function F(h){var d=h.sceneId,m=void 0===d?16060:d,c=h.pageId,l=h.top,g=h.pageIndex,b=H.SERVER_1+"eqs/link?id="+m+"&url="+encodeURIComponent(D),f='\n<div style="text-align: center;transform: translateY(-2px);-webkit-animation: fadeIn 2s ease 1s both;-webkit-animation-play-state: initial;">\n    <a href="'+b+'" target="_blank"\n       style="font-size: x-small;display:block;line-height: 10px;">\n        <font color="#ffffff">'+k+"</font>\n    </a>\n</div>";return{id:M(),pageId:c,sceneId:m,num:g,type:2,content:f,status:1,css:{zIndex:"1000",height:"20",width:"129",left:"97px",top:418+l+"px",backgroundColor:"rgba(0,0,0,0.6)",borderBottomLeftRadius:20,borderBottomRightRadius:20,borderTopRightRadius:20,borderTopLeftRadius:20,borderRadius:20},properties:{anim:{type:0,direction:0,duration:2,delay:0}}}}function B(h){var p=h.pageId,f=void 0===p?1:p,g=h.sceneId,d=void 0===g?1:g,b=h.pageIndex,m=void 0===b?1:b,u=h.center,l='\n<div style="text-align: right;">\n    <span style="line-height: 1; background-color: initial;">\n        <font size="2" color="#888888"><b>举报</b></font>\n    </span>\n</div>';return{id:M(),pageId:f,sceneId:d,num:m,type:299,content:l,status:1,css:{zIndex:999,height:36,width:60,left:u?130:10,top:420},properties:{anim:{type:0,direction:0,duration:3,delay:1}}}}function z(){return{id:M(),pageId:"",sceneId:"",num:1,type:"4",isInput:0,title:null,content:null,status:1,css:{borderRadius:"0",borderStyle:"solid",height:"158",zIndex:"1000",borderColor:"rgba(0,0,0,1)",boxShadow:"0 0px 0px #333333",color:"#000000",backgroundColor:"white",borderWidth:"0px",width:"158",left:"84px",paddingTop:"11px",paddingLeft:"10px",top:"170px"},properties:{height:"100px",imgStyle:{width:139,height:136,marginTop:"0px",marginLeft:"0px"},width:"100px",src:"group1/M00/01/30/yq0JCFQpOR-AOULFAAFBPO1yzBQ984.jpg"}}}function N(){return{id:M(),pageId:129810,sceneId:16060,num:1,type:2,isInput:0,title:null,content:'\n<div class="logo-shadow1" style="text-align: center; \n    cursor:pointer;height:127px;width:220px;transform:rotate(-45deg);-webkit-transform:rotate(-45deg);\n    position:absolute;left:20px;top:56px;">\n</div>',status:1,css:{height:"257",width:"257",left:"78px",top:"175px"},properties:{}}}function x(){return{id:M(),pageId:129810,sceneId:16060,num:1,type:"2",isInput:0,title:null,content:'\n<div class="bottom-logo" style="text-align: center;cursor:pointer;height:136px;width:139px;">\n    <em style="color:white;line-height:136px;font-size:120px;" class="eqf-eqxiu"></em>\n</div>',status:1,css:{height:"158",width:"158",left:"84px",top:"170px",backgroundColor:"white"},properties:{}}}function L(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"点击此处进行编辑";return{id:M(),pageId:"",sceneId:"",num:1,type:"2",isInput:0,title:null,content:'<div style="text-align: center;"><font color="#ffffff" size="3">'+a+"</font></div>",status:1,css:{zIndex:"102",height:"65",width:"320",left:"0px",top:"70px"},properties:{}}}function q(){var a='<div style="width:280px;height:1px;background-color:rgba(60,60,60,0.4);cursor:pointer;position:absolute;left:0;-webkit-filter:drop-shadow(0px 1px 0px rgba(60,60,60,0.4));top:12px;"></div>';return{id:M(),pageId:129810,sceneId:16060,num:1,type:"2",isInput:0,title:null,content:a,status:1,css:{height:"24",width:"280",left:"21px",top:"122px"},properties:{}}}function E(){var a='<div class="logo-shadow1" style="text-align: center;cursor:pointer;height:127px;width:220px;transform:rotate(-45deg);-webkit-transform:rotate(-45deg);position:absolute;left:20px;top:56px;"></div>';return{id:M(),pageId:129810,sceneId:16060,num:1,type:"2",isInput:0,title:null,content:a,status:1,css:{height:257,width:257,left:"78px",top:"175px"},properties:{}}}function A(am,Z,ag){var aj=am.id,af=void 0===aj?16060:aj,ac=am.name,ap=am.num,aa=am.cover,ao=void 0===aa?"group1/M00/BA/DA/yq0KA1Rq8COAAYRjAAKU4OVYum0889.jpg":aa,X=(am.code,am.isDeepShare),ah=am.href;ac=ac||"",Z=Z||{};var ae=129810,an=af;ah=ah?H.SERVER_1+"eqs/link?id="+af+"&url="+encodeURIComponent(ah):j()?"":H.SERVER_1+"eqs/link?id="+af+"&url="+encodeURIComponent(D),Z&&!Z.brandSrc&&Z.brandLink&&(ah=Z.brandLink);var ak="点我免费制作易企秀",al="#23a3d3",W="",U='<div style="text-align: center;">\n                        <span style="line-height: 1; background-color: initial;">\n                            <font size="4" color="#888888"><b>'+(Z.sceneName||ac)+"</b></font>\n                        </span>\n                    </div>",V='<div style="width:280px;\n                                height:1px;\n                                background-color:rgba(60,60,60,0.4);\n                                cursor:pointer;\n                                position:absolute;\n                                left:0;\n                                -webkit-filter:drop-shadow(0px 1px 0px rgba(60,60,60,0.4));\n                                top:12px;"></div>',ai='<div style="text-align: center;padding-top: 0;">\n                        <span style="font-size: small; line-height: 1; background-color: initial;">\n                            <a href="'+ah+'" target="_blank">\n                                <font color="#888888">'+W+'</font>\n                                <font color="'+al+'">'+ak+"</font>\n                            </a>\n                        </span>\n                    </div>",Y='<a class="element comp_anchor editable-text deepShareHref" \n                       data-event="1120601"\n                       style="cursor: default; \n                              width: 100px; \n                              height: 36px; \n                              display: block;\n                              background: #08c3fd; \n                              color:#ffffff;\n                              font-size:13px;\n                              border-radius: 4px;">使用该模板</a>',R={id:"",sceneId:an,num:ap,name:ac,properties:{},elements:[]},m={id:M(),pageId:ae,sceneId:an,num:0,type:"3",css:{},properties:{}};Z.backgroundSrc?m.properties.imgSrc=Z.backgroundSrc:m.properties.bgColor="#E6E9EE",R.elements.push(m);var y={id:M(),pageId:ae,sceneId:an,num:1,type:"2",content:U,css:{height:"65",zIndex:"10",width:"320",left:"0px",top:"77px"},properties:{}};R.elements.push(y);var aq={id:M(),pageId:ae,sceneId:an,num:2,type:"4",isInput:0,title:null,content:null,status:1,css:{borderBottomLeftRadius:10,borderBottomRightRadius:10,borderTopRightRadius:10,borderTopLeftRadius:10,borderRadius:10,borderStyle:"solid",zIndex:"9",borderColor:"rgba(0,0,0,1)",paddingTop:"0px",height:"142",backgroundColor:"",color:"",boxShadow:"0px 0px 0px #333333",borderWidth:"0px",width:"142",left:"92px",paddingBottom:"0px",top:"177px"},properties:{height:"100px",imgStyle:{width:142,height:142,marginTop:"-0.5px",marginLeft:"0px"},width:"100px",src:ao}};Z.logoSrc&&(aq.properties.src=Z.logoSrc),Z.logoLink&&(aq.properties.url=Z.logoLink),R.elements.push(aq);var b={id:M(),pageId:129810,sceneId:an,num:1,type:"2",content:V,css:{height:"24",width:"280",left:"21px",top:"122px"},properties:{}};R.elements.push(b);var g={id:M(),pageId:ae,sceneId:an,num:1,type:X&&!j()?"298":"2",content:X?Y:"",css:{height:"36",width:"120",left:"98px",top:"350px",zIndex:"13"},properties:{}};if(R.elements.push(g),Z.brandSrc){var Q='<a style="position: absolute;\n                               display: block;\n                               width: 100%;\n                               height: 100%;\n                               background-image: url('+(H.FILE+Z.brandSrc)+');    \n                               background-repeat: no-repeat;\n                               background-position: center;\n                               background-size: cover;" \n                           href="'+Z.brandLink+'"\n                           target="_blank"></a>',ab={id:M(),pageId:ae,sceneId:an,num:2,type:"7",content:Q,css:{height:"40px",width:"320px",left:"0",top:"420px",zIndex:"13"},properties:{}};R.elements.push(ab)}else{var ad={id:439885,pageId:ae,sceneId:an,num:1,type:X&&!j()?"298":"2",content:ai,css:{borderRadius:"0px",borderStyle:"solid",height:"30",paddingTop:"0px",borderColor:"rgba(222,220,227,1)",zIndex:"12",boxShadow:"0px 0px 0px rgba(200,200,200,0.6)",color:"",backgroundColor:"rgba(255,255,255,0)",borderWidth:"0px",width:"320",left:"1px",bottom:"36px",paddingBottom:"20px"},properties:{anim:[{type:1,direction:3,duration:"1",delay:"0.6"}]}};R.elements.push(ad)}return R}function K(){return{id:849219621,sceneId:87910723,num:1,name:null,properties:{},elements:[{css:{top:-132,left:-270,width:873,height:692,zIndex:1,color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},properties:{src:"Fl5L4C5JXbrlNDUm1TlMi6rZP7SA",imgStyle:{width:873,height:1376.3390625,marginTop:-342.16953125,marginLeft:0},maskSrc:"",originSrc:"Fl5L4C5JXbrlNDUm1TlMi6rZP7SA",anim:[],initType:0},type:4,id:4791539496,pageId:849219621,sceneId:87910723,num:1,name:"图片1"},{css:{top:-197.5,left:-118,width:579.5,height:388,zIndex:2,color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},properties:{src:"Fie_7zLKX1jFwnowjnupl0uxuRzf",imgStyle:{width:579.5,height:388,marginLeft:0,marginTop:0},maskSrc:"",originSrc:"Fie_7zLKX1jFwnowjnupl0uxuRzf",anim:[{type:0,direction:0,duration:1,delay:0,countNum:1,interval:0,count:0,$show:!0,$$hashKey:"object:1200"}],initType:0},type:4,id:2648920976,pageId:849219621,sceneId:87910723,num:2,name:"图片2"},{css:{top:283.5,left:78,width:165,height:50.5,zIndex:5,color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},properties:{src:"FszOmxnRNeOR4QbwDnYQHGP4uF4G",imgStyle:{width:165,height:50.5,marginLeft:0,marginTop:0},maskSrc:"",originSrc:"FszOmxnRNeOR4QbwDnYQHGP4uF4G",anim:[{type:24,direction:0,duration:1,delay:0.2,countNum:1,interval:0,count:0,$show:!0,$$hashKey:"object:1336"}],initType:0},type:4,id:6696803295,pageId:849219621,sceneId:87910723,num:5,name:"图片4"},{css:{top:118.5,left:86,width:148,height:148,zIndex:4,color:"#676767",backgroundColor:"",opacity:1,transform:"rotateZ(0deg)",textAlign:"left",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0},properties:{src:"FvqrpftukXbdDhFScUbzUuFZEIkz",imgStyle:{width:148,height:148,marginLeft:0,marginTop:0},maskSrc:"",originSrc:"FvqrpftukXbdDhFScUbzUuFZEIkz",anim:[{type:4,direction:0,duration:1,delay:0,countNum:1,interval:0,count:0,$show:!0,$$hashKey:"object:1268"}],initType:0},type:4,id:8888432263,pageId:849219621,sceneId:87910723,num:4,name:"图片5"}],price:null,isPaid:null,forms:null}}function G(ak,Z){var ae=ak.id,ah=void 0===ae?16060:ae,ad=ak.name,ab=ak.num,an=ak.cover,aa=void 0===an?"group1/M00/BA/DA/yq0KA1Rq8COAAYRjAAKU4OVYum0889.jpg":an,am=(ak.code,ak.isDeepShare),X=ak.href;ad=ad||"",Z=Z||{};var af=129810,ac=ah;X=X?H.SERVER_1+"eqs/link?id="+ah+"&url="+encodeURIComponent(X):j()?"":H.SERVER_1+"eqs/link?id="+ah+"&url="+encodeURIComponent(D),Z&&!Z.brandSrc&&Z.brandLink&&(X=Z.brandLink);var al="点我免费制作易企秀",ai="#23a3d3",aj="",W='<div style="text-align: center;">\n                        <span style="line-height: 1.5; background-color: initial;text-shadow: 0px 0px 4px rgba(0, 0, 0, 0.6) !important;color:#FFFFFF">\n                            '+(Z.sceneName||ad)+"\n                        </span>\n                    </div>",U='<div style="text-align: center;padding-top: 0;">\n                        <span style="font-size: small; line-height: 1; background-color: initial;">\n                            <a href="'+X+'" target="_blank">\n                                <font color="#888888">'+aj+'</font>\n                                <font color="'+ai+'">'+al+"</font>\n                            </a>\n                        </span>\n                    </div>",V={id:"",sceneId:ac,num:ab,name:ad,properties:{},elements:[]},ag={id:M(),pageId:af,sceneId:ac,num:0,type:"3",css:{left:0,opacity:0.7,top:0,zIndex:-1,filter:"blur(6px)"},properties:{imgSrc:window.scene?window.scene.cover:"group2/M00/7F/9B/yq0KXlZNGfWAbZo_AAAdI0Feqt0138.png",originSrc:window.scene?window.scene.cover:"group2/M00/7F/9B/yq0KXlZNGfWAbZo_AAAdI0Feqt0138.png"}},Y={content:"",css:{color:"#555",height:"700px",left:-27,top:-107,width:374,zIndex:1},id:M(),num:1,pageId:af,sceneId:ac,type:"h",properties:{anim:[],id:144877595,initType:1,items:[{element:[0],fill:"rgba(0,0,0,0.6)",svgFill:"#08A1EF"}],src:"group1/M00/B1/A3/yq0KXFZysi-ACYaKAAACDQH4Nes625.svg",translate3dZ:0,type:"rect"}};Z.backgroundSrc?(ag.properties.imgSrc=Z.backgroundSrc,ag.css={left:0,opacity:0.7,top:0,zIndex:-1}):V.elements.push(Y),V.elements.push(ag);var R={id:M(),pageId:af,sceneId:ac,num:2,type:"2",content:W,css:{height:"65px",zIndex:"10",width:"320px",left:"0px",top:"205px",fontSize:"18px",lineHeihgt:1.5},properties:{}};V.elements.push(R);var m={id:M(),pageId:af,sceneId:ac,num:3,type:"4",isInput:0,title:null,content:null,status:1,css:{borderBottomLeftRadius:10,borderBottomRightRadius:10,borderTopRightRadius:10,borderTopLeftRadius:10,borderRadius:10,borderStyle:"solid",zIndex:"9",borderColor:"rgba(0,0,0,1)",paddingTop:"0px",height:"142",backgroundColor:"",color:"",boxShadow:"0px 0px 0px #333333",borderWidth:"0px",width:"144px",left:"88px",paddingBottom:"0px",top:"47px"},properties:{height:"100px",imgStyle:{width:142,height:142,marginTop:"-0.5px",marginLeft:"0px"},width:"100px",src:aa}};if(Z.logoSrc&&(m.properties.src=Z.logoSrc),Z.logoLink&&(m.properties.url=Z.logoLink),V.elements.push(m),!j()){if(Z.brandSrc){var y=H.FILE+Z.brandSrc+"?imageMogr2/auto-orient/thumbnail/620x92>",ao='<a style="position: absolute;\n                               display: block;\n                               width: 310px;\n                               height: 100%;\n                               background-image: url('+y+');    \n                               background-repeat: no-repeat;\n                               background-position: center;\n                               background-size: cover;" \n                           href="'+Z.brandLink+'"\n                           target="_blank"></a>',b={id:M(),pageId:af,sceneId:ac,num:5,type:"2",content:ao,css:{height:"46px",width:"320px",left:"0px",bottom:"92px",zIndex:"13"},properties:{}};V.elements.push(b)}else{var g={id:439885,pageId:af,sceneId:ac,num:6,type:am&&!j()?"298":"2",content:U,css:{borderRadius:"0px",borderStyle:"solid",height:"30",paddingTop:"0px",borderColor:"rgba(222,220,227,1)",zIndex:"12",boxShadow:"0px 0px 0px rgba(200,200,200,0.6)",color:"",backgroundColor:"rgba(255,255,255,0)",borderWidth:"0px",width:"320px",left:"0px",bottom:"92px",paddingBottom:"20px"},properties:{anim:[{type:1,direction:3,duration:"1",delay:"0.6"}]}};V.elements.push(g)}}var Q={css:{height:26,left:237,top:456,width:67,borderStyle:"solid",borderWidth:6,borderColor:"rgba(255, 255, 255, 0)",borderRadius:"4px",borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderTopLeftRadius:"4px",borderTopRightRadius:"4px"},id:M(),num:6,pageId:af,sceneId:ac,properties:{anim:[],id:144899161,initType:1,items:[{elements:[0],fill:"rgba(255, 255, 255, 0.6)",svgFill:"#08A1EF"},{elements:[1],fill:"rgba(0, 0, 0, 0.4)",svgFill:"#08A1EF"}],src:"group2/M00/94/6B/yq0KXlZyt2WAERDfAAAVxmdQJtQ706.svg",translate3dZ:0,type:"rect"},type:"h"};return V.elements.push(Q),V}function I(h){var p=h.pageId,f=void 0===p?1:p,g=h.sceneId,d=void 0===g?1:g,b=h.pageIndex,m=void 0===b?1:b,u=h.center,l='\n<div style="text-align: center;width: 44px;height: 26px;\nfont-size: 12px; color: rgba(255, 255, 255, 0.6); line-height: 26px; border-radius: 4px;">\n        举报\n</div>';return{id:M(),pageId:f,sceneId:d,num:m,type:299,content:l,status:1,css:{zIndex:999,height:41,width:74,left:u?130:1,top:449},properties:{anim:{type:0,direction:0,duration:3,delay:1}}}}var H=C(22),D=C(24).redirectUrl(),k="易企秀技术支持",j=C(25).isApp,M=C(55).randomId;C(80),J.exports={bottomLabel:F,report:B,image1:z,image2:N,eqxLogo:x,title:L,line:q,shadow:E,lastPage:A,lastPageBlur:G,bizType40Page:K,addReportBlur:I}},function(b,a){},function(h,m,f){function g(a){return p({type:"POST",url:j.SERVER_1+"eqs/wx/component",data:a})}function d(c){var a={};return/eqxiu\.cn/.test(l(window.location.href))&&(a.userId=c),p({type:"GET",url:j.SERVER_1+"eqs/wx/user/cache",data:a})}function b(){var c=l(window.location.href),a="eqs/wx/ticket?time="+Date.now(),i=[/eqxiu\.com/,/eqh5\.cn/,/eqxiu\.cc/,/eqshow\.cn/,/yqxiu\.cn/];return i.some(function(e){return e.test(c)})||(a+=/eqxiu\.cn/.test(c)?"&domain=eqxiu.cn":"&domain="+c),console.log("getWxTicket",a),p({type:"GET",url:j.SERVER_1+a})}function k(a){return p({type:"GET",url:j.SERVER_1+"eqs/wx/wechat/appid/get",data:{userId:a}}).then(function(c){return c.obj})}var p=f(21).ajax,j=f(22),l=f(24).getUrlHost;h.exports={$postWxComp:g,$getUserWxInfo:d,$getWxTicket:b,$getWxAppId:k}},function(at,ad,aj){function ao(c,b){if(ab="",Y=c.obj.name,aw=N.FILE+c.obj.cover,F=c.obj.description||"我用易企秀做了一个超酷炫的H5，快来看看吧。",am=c.obj.property,Z=c.obj.dsAppId||"",aa=b,am.shareDes&&"string"==typeof am.shareDes){var d=am.shareDes;am.shareDes={description:{type:"position",description:d}}}if(!am.shareDes){return ac()}am.shareDes.avatar&&(aw=J.headimgurl);var a=c.obj.id;ai(am.shareDes,a).then(function(){return ac()})["catch"](function(f){return console.error(f)})}function ai(c,b){var d=function(){return Promise.resolve(null)},a=function(){return Promise.resolve(null)};return c.title&&c.title.type&&(d=function(){return ax(c.title,b).then(function(f){Y=f})}),c.description&&c.description.type&&(a=function(){return ax(c.description,b).then(function(f){F=f})}),d().then(function(){a()})}function af(a){return void 0!==Q?Promise.resolve(Q):H(a).then(function(b){return Q=b||""})["catch"](function(){return Q=""})}function ax(b,a){var c="";return new Promise(function(d,e){switch(b.type){case"myself":c+="我是"+J.nickname+","+b.description,d(c);break;case"position":af(a).then(function(f){c+="我是第"+f+"位"+b.description,d(c)});break;case"selfAndPosition":af(a).then(function(f){c+="我是"+J.nickname+", 我是第"+f+"位 "+b.description,d(c)})}})}function ae(){ab=Date.now()+""+Math.floor(100000*Math.random()),aa=ay("userKey",ab,aa),ac()}function av(b,a){aa=b,aa=ay("compKey",a,aa),ac()}function ac(){function a(){var b=K();b&&b.shareCover?ag():window.scene&&window.scene.ext&&window.scene.ext.yqc&&window.scene.ext.yqc.ad&&W(window.scene.id)}aq().then(function(){var b=z("toPage",aa),c=Z?DS.linkChange(b):b;window._tracker_api_&&(c=window._tracker_api_.getShareUrl(c)),wx.onMenuShareTimeline({title:Y,link:c,desc:F,imgUrl:aw,success:function(){Z&&DS.sendRepost("appMessage"),window._tracker_api_.share("timeline"),al(),a()},cancel:function(){}}),wx.onMenuShareAppMessage({title:Y,desc:F,link:c,imgUrl:aw,success:function(){Z&&DS.sendRepost("appMessage"),window._tracker_api_.share("message"),al(b),a()},cancel:function(){}}),wx.onMenuShareQQ({title:Y,desc:F,link:c,imgUrl:aw,success:function(){window._tracker_api_.share("qq"),a()},cancel:function(){}}),wx.onMenuShareWeibo({title:Y,desc:F,link:c,imgUrl:aw,success:function(){window._tracker_api_.share("weibo"),a()},cancel:function(){}}),wx.onMenuShareQZone({title:Y,desc:F,link:c,imgUrl:aw,success:function(){window._tracker_api_.share("qzone")},cancel:function(){}})})}function al(b){if(ab){var a={userKey:ab};J&&J.headimgurl&&(U.shareUserHeader=J.headimgurl),J&&J.nickname&&(U.shareUserName=J.nickname),a.data=JSON.stringify(U),X(a)["catch"](function(c){V(JSON.stringify(c))})}}function ah(a){Object.assign(J,a)}function au(){return J}function ap(a){U=a}function ar(b,a){U[b]=a}function aq(){return an.initWx()}function ak(h,d){var k=window.location.href.split("?")[0],c=G("userKey",window.location.href),j=G("toPage",window.location.href),g=G("compKey",window.location.href),b=h||B;c&&(k=ay("userKey",c,k)),j&&(k=ay("toPage",j,k)),g&&(k=ay("compKey",g,k));var f=N.SERVER_1+"eqs/wx/user/info/get";h&&(f=ay("userId",d,f)),window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+b+"&redirect_uri="+encodeURIComponent(f)+"&response_type=code&scope=snsapi_userinfo&state="+encodeURIComponent(k)+"#wechat_redirect"}var ab,Y,aw,Z,aa,am,Q,N=aj(22),B=aj(28).APP_ID,G=aj(24).getUrlParam,ay=aj(24).addUrlParam,z=aj(24).removeUrlParam,X=aj(81).$postWxComp,H=aj(83).$getPvCount,V=aj(84).popUpModal,ag=aj(84).popShareModal,an=aj(20),K=aj(47).getSharePopConfig,W=aj(86).popAdShareModal,F="",J={},U={};at.exports={initWeChat:ao,shareWidthSDK:ac,setWeChatUser:ah,getWeChatUser:au,setWxCompData:ap,saveWxCompData:ar,generateUserKey:ae,getWxJSSDK:aq,hrefToWxAuth:ak,addCompKey:av}},function(g,d,j){function c(a){return f({type:"GET",url:b.SERVER_1+"eqs/scene/pv?sceneId="+a})}function h(l){var k=l.id,p=l.param,a=l.ad,m=b.SERVER_1+"eqs/pv/"+k;return p&&(m+="?1=1",m+=/\?.*/.test(p)?"&"+p.substring(1):/&.*/.test(p)?p:"&"+p),m+=(/\?/.test(m)?"&":"?")+"ad="+a,f({type:"GET",url:m})}var f=j(21).ajax,b=j(22);g.exports={$getPvCount:c,$postPVCount:h}},function(h,d,k){function c(i){var a=$('<div class="pop-up-box">\n                        <div class="pop-up-form">\n                            <div class="pop-up-content">\n                                <span class="pop-up-msg">'+i+'</span>\n                            </div>\n                            <div class="pop-up-btn"><a class="pop-up-btn-close">关闭</a></div>\n                        </div>\n                    </div>');$(".main-page.z-current").not(".editor-section").prepend(a);var l=$(".pop-up-btn");l.on("click",function(){a.animate({opacity:0},{duration:300,complete:function(m){return a.remove()}})})}function j(){var m=g(),l=f(m.coverLink),q=b.FILE+m.shareCover,a=$('<div class="pop-up-box">\n                        <div class="pop-share-form">\n                            <div class="pop-share-content">\n                                <a href="'+l+'">\n                                 <img style="width:250px;height:360px;" src="'+q+'">\n                                </a>\n                            </div>\n                            <div class="pop-share-btn"><span class="eqf-no-l"></span></div>\n                        </div>\n                    </div>');$(".main-page.z-current").not(".editor-section").prepend(a);var p=$(".pop-share-btn");p.on("click",function(){a.animate({opacity:0},{duration:300,complete:function(i){return a.remove()}})})}k(85);var g=k(47).getSharePopConfig,b=k(22),f=k(24).addProtocol;h.exports={popUpModal:c,popShareModal:j}},function(b,a){},function(j,q,f){function h(a){b(a).then(function(i){if(i.success){var c=i.list[0];m(118427790).then(function(l){if(l.success){var o=l.list[0].adCode;d(c,o)}})}})}function d(l,c){var o=$('<div class="ad-share-modal">\n        <div class="ad-share-box ad-share-slideInDown">\n            <div class="ad-share-content">\n                <div class="ad-share-recommend">\n                    <a style="display: block;overflow: hidden;color: #000;" id="recommendSceneUrl" target="_blank">\n                        <img src="" width="100" height="100" class="recommend-cover" id="recommendSceneCover">\n                        <span class="recommend-title" id="recommendTitle"></span>\n                    </a>\n                </div>\n                <div class="ad-share-container" id="ad-share-container">\n                    <div id="share_modal_ad" style="width: 100%;height: 100%;">\n                    </div>\n                </div>\n                <div class="ad-share-more">\n                    <a class="share-more-btn" href="http://m.eqxiu.com/s/hV5SUm4u" target="_blank">查看更多</a>\n                </div>\n            </div>\n            <div class="ad-share-close-btn"></div>\n        </div>\n    </div>');$(".main-page.z-current").not(".editor-section").prepend(o),$("#recommendSceneCover")[0].src=p.FILE+l.cover,$("#recommendSceneUrl")[0].href=p.VIEW_HOST+"s/"+l.code,$("#recommendTitle").text(l.name),$("#ad-share-container").append(c);var a=$(".ad-share-close-btn");a.on("click",function(){o.animate({opacity:0},{duration:300,complete:function(i){return o.remove()}})})}function b(c){var a=p.SERVER_1+"adview/scene/recommend?sceneId="+c,i=a.replace(/http:\/\//g,window.location.protocol+"//");return k({type:"GET",url:i})}function m(c){var a=p.SERVER_1+"adview/scenePage/find?sceneId="+c,i=a.replace(/http:\/\//g,window.location.protocol+"//");return k({type:"GET",url:i})}function v(a){g(a).then(function(c){if(c.success){var e=c.list[0].adPositionId;1===e&&h(a)}})}f(87);var k=f(21).$ajax,p=f(22),g=f(49).getSceneAdTpl;j.exports={adSharePop:h,popAdShareModal:v}},function(b,a){},function(T,F,L){function P(b){if(Array.isArray(b)){for(var a=0,c=Array(b.length);a<b.length;a++){c[a]=b[a]}return c}return Array.from(b)}function K(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}var H=function(){function a(h,m){var f=[],g=!0,d=!1,b=void 0;try{for(var l,p=h[Symbol.iterator]();!(g=(l=p.next()).done)&&(f.push(l.value),!m||f.length!==m);g=!0){}}catch(k){d=!0,b=k}finally{try{!g&&p["return"]&&p["return"]()}finally{if(d){throw b}}}return f}return function(b,c){if(Array.isArray(b)){return b}if(Symbol.iterator in Object(b)){return a(b,c)}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),X=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),G=L(25).mobilecheck,V=L(25).isApp,C=L(70).perfectPage,N=L(89),J=L(431),U=L(433),Q=L(451),S=L(456),R=L(457),M=L(459),B=L(460),j=L(461),W=L(463),z=L(56).perfectMeta,A=L(23).$loadMLink,O=L(464),D=O.diff,q=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};K(this,a),this.sceneJson=b,this.config=Object.assign({toPageIndex:0,selector:"#nr",mode:"view",disablePageEffect:!1,disableCompEvent:!1,disableSubmit:!1,disableTrigger:!1,disableArrow:!1,disableCommentManager:!1,showProgressBar:!1,disableProgressBar:!1,disableCompAnim:!1,disableReport:!1,disablePageScroll:!1,disablePv:!1,initManagers:!0,disableQiniuZoom:!1,mobileEdit:!1,EqxGravity:{disableGravityMotion:!1},disableSetUlTopAndLeft:!1},c),this.meta=z(this.sceneJson.meta),this.eqxPageList=[],this.currentPage=null,this.soundManager=null,this.statManager=null,this.commentManager=null,this.formManager=null,this.pageScroll=null,this.progressBar=null,this.config.initManagers&&this.initManagers(),this.dependenciesRenderObj={num:0,renderQueue:[],allRendered:!1,renderedPageList:{}},this.nextRenderPageId=-1,this.renderPageCnt=0,this.variableComps={texts:[],textsPreLen:0,inputs:[],inputsPreLen:0,images:[],imagesPreLen:0,uploads:[],uploadsPreLen:0},window.devScene=this}return X(a,[{key:"setNextRenderPageId",value:function(b){this.nextRenderPageId=b}},{key:"getNextRenderPage",value:function(){function g(){for(var l=0;l<c;l++){var i=h.eqxPageList[l];if(i.isXb()&&!i.$section){return i}}}var d=this;if(this.nextRenderPageId!==-1){var k=this.eqxPageList.find(function(i){return i.pageJson.id===d.nextRenderPageId});if(k&&!k.$section){return k}}var c=this.eqxPageList.length,h=this;if(this.renderPageCnt>0&&(k=g())){return k}var f=this.eqxPageList.indexOf(this.currentPage);f===-1&&(f=0);for(var b=0;b<c;b++){if(k=this.eqxPageList[(b+f)%c],!k.$section){return k}}}},{key:"setPageList",value:function(c){var b;this.sceneJson.list.length=0,(b=this.sceneJson.list).push.apply(b,P(c)),this.eqxPageList=[],this.eqxPageList.length=c.length}},{key:"getMetaWx",value:function(){var b=this.meta.property;return{wxCount:b.wxCount,wxClickFarmerCount:b.wxClickFarmerCount}}},{key:"calMetaWx",value:function(){return this.eqxPageList.reduce(function(c,b){return c.wxCount+=b.getWxCompCount(),c.wxClickFarmerCount+=b.getWxClickFarmerCompCount(),c},{wxCount:0,wxClickFarmerCount:0})}},{key:"syncMetaWx",value:function(){var b=this.calMetaWx();console.log("wxObj",b),this.setProps({property:b})}},{key:"toJson",value:function(){var c=JSON.parse(JSON.stringify(this.sceneJson));for(var b in c){c.hasOwnProperty(b)&&b.startsWith("$")&&delete c[b]}return c}},{key:"renderScene",value:function(b){return this.initContainer(b||this.config.selector),this.renderBgm(),G()&&"view"==this.config.mode&&!V()&&2==this.meta.isTemplate&&this.tempAppUseBtn(),this.initEqxPages(),this.currentPage=this.eqxPageList[this.config.toPageIndex],this.initProgressBar(),this.initPageScroll(),this.updateProgressBar(),this.renderDependenciesPages(),Promise.resolve()}},{key:"tempAppUseBtn",value:function(){var h=this;if(!this.$tempAppUseBtn&&window.scene){var d='<a  class="temp-app-use">\n                                        <div class="temp-app-use-btn">\n                                            <span class="eqf-pen-f"></span>\n                                        </div>\n                                        <div class="temp-app-use-tip">使用</div>\n                                    </a>',l=window.scene,c=l.isTemplate,k=l.sourceId,g=l.id,b={sceneId:g};c&&(b.isTemplate=c),k&&(b.sourceId=k),A().then(function(){var e={mlink:"https://ax8bgc.mlinks.cc/AK00",button:h.$ele.find(".temp-app-use")[0],autoLaunchApp:!1,autoRedirectToDownloadUrl:!0,downloadWhenUniversalLinkFailed:!1,inapp:!1,params:b};console.log("mlink",e),new Mlink(e)});var f=$(d);this.$ele.append(f)}}},{key:"updateMeta",value:function(d){d=z(d);var c=JSON.parse(JSON.stringify(this.meta));delete c.property.wxAuth,Object.assign(this.meta,d);var f=JSON.parse(JSON.stringify(this.meta));delete f.property.wxAuth;var b=D(c,f);console.log(JSON.stringify(b))}},{key:"setProps",value:function(d){var c=JSON.parse(JSON.stringify(this.meta)),g=this.meta;Object.keys(d).filter(function(h){return"property"!==h}).forEach(function(e){g[e]=d[e]}),d.property&&("string"==typeof d.property&&(d.property=JSON.parse(d.property)),Object.keys(d.property).forEach(function(e){g.property[e]=d.property[e]}));var b=JSON.parse(JSON.stringify(this.meta)),f=D(c,b);console.log(JSON.stringify(f))}},{key:"getMeta",value:function(b){return this.meta[b]}},{key:"getMetaProperty",value:function(b){return this.meta.property[b]}},{key:"initContainer",value:function(c){$(this.$ele).is(c)||(this.$ele=$(c));var b=this.$ele;"static"===b.css("position")&&b.css({position:"relative"}),G()&&b.css({width:"100%",height:"100%"}),this.width=b.width(),this.height=b.height()}},{key:"createBgm",value:function(c){var b=c||this.meta.bgAudio;if(b){return this.bgm=new Q(b,this),this.bgm}}},{key:"renderBgm",value:function(){this.bgm||this.createBgm(),this.bgm&&this.$ele.append(this.bgm.$bgmBtn)}},{key:"updateBgm",value:function(b){return this.meta.bgAudio=b,b?void (this.bgm?this.bgm.updateJson(b):(this.createBgm(b),this.renderBgm())):void (this.bgm&&(this.bgm.hide(),this.bgm.stopPlay(),this.bgm=null))}},{key:"renderDependenciesPages",value:function(){var d=this;if(this.dependenciesRenderObj&&this.dependenciesRenderObj.num===this.dependenciesRenderObj.total){return void (this.dependenciesRenderObj.allRendered=!0)}if(!this.pageScroll||!this.pageScroll.pageFliping){var c=this.currentPage?this.currentPage.pageJson.id:this.eqxPageList[0].pageJson.id;this.dependenciesRenderObj.renderedPageList[c]||this.getDependenciesPages();var f=this.dependenciesRenderObj.renderedPageList[c];if(!f||0==f.length){return}var b=f.shift();this.renderPage(b),this.renderPageCnt++,window._tj&&1===this.renderPageCnt&&(window._tj.firstPageShowTime=window._tj.now()),window._tj&&this.renderPageCnt===this.eqxPageList.length&&(window._tj.renderSceneTime=window._tj.now(),window.uploadTjStat()),b.pageJson.id===this.nextRenderPageId&&(this.pageScroll.goToPageById(this.nextRenderPageId),this.setNextRenderPageId(-1))}this.stopRenderPages(),this.renderPagesTimeoutId=setTimeout(function(){d.renderDependenciesPages()},0)}},{key:"getDependenciesPages",value:function(){function k(){for(var i=0;i<d;i++){var c=b.eqxPageList[i];if(c.isXb()&&!c.$section){return c}}}var w=this,f=[];if(this.nextRenderPageId!==-1){var h=this.eqxPageList.find(function(c){return c.pageJson.id===w.nextRenderPageId});this.pageIsNeedRendered(h,f)}var d=this.eqxPageList.length,b=this;this.renderPageCnt<2&&(h=k(),this.pageIsNeedRendered(h,f));var p=this.eqxPageList.indexOf(this.currentPage);p=p===-1?0:p,h=this.eqxPageList[p],this.pageIsNeedRendered(h,f);var x=p<=0?d-1:p-1,m=p>=d-1?0:p+1;[x,m].forEach(function(c){b.pageIsNeedRendered(b.eqxPageList[c],f)});var v=this.getPageLinkId(this.eqxPageList[p]);v.length>0&&v.forEach(function(c){h=w.eqxPageList.find(function(e){return e.pageJson.id===c}),b.pageIsNeedRendered(h,f)}),this.dependenciesRenderObj.total=d;var g=this.currentPage?this.currentPage.pageJson.id:this.eqxPageList[0].pageJson.id;return this.dependenciesRenderObj.renderedPageList[g]=f,f}},{key:"pageIsNeedRendered",value:function(c,b){c&&!c.$section&&b.push(c)}},{key:"renderPages",value:function(){var c=this;if(!this.pageScroll||!this.pageScroll.pageFliping){var b;if(b=this.getNextRenderPage(),!b){return}this.renderPage(b),this.renderPageCnt++,window._tj&&1===this.renderPageCnt&&(window._tj.firstPageShowTime=window._tj.now()),window._tj&&this.renderPageCnt===this.eqxPageList.length&&(window._tj.renderSceneTime=window._tj.now(),window.uploadTjStat()),b.pageJson.id===this.nextRenderPageId&&(this.pageScroll.goToPageById(this.nextRenderPageId),this.setNextRenderPageId(-1))}this.stopRenderPages(),this.renderPagesTimeoutId=setTimeout(function(){c.renderPages()},0)}},{key:"stopRenderPages",value:function(){this.renderPagesTimeoutId&&clearTimeout(this.renderPagesTimeoutId)}},{key:"renderNeedPages",value:function(){var c=this;if(!this.pageScroll||!this.pageScroll.pageFliping){var b=this.getNeedRenderPages();if(!b){return}b.forEach(function(d){d&&(c.renderPage(d),c.renderPageCnt++,window._tj&&1===c.renderPageCnt&&(window._tj.firstPageShowTime=window._tj.now()),window._tj&&c.renderPageCnt===c.eqxPageList.length&&(window._tj.renderSceneTime=window._tj.now(),window.uploadTjStat()),d.pageJson.id===c.nextRenderPageId&&(c.pageScroll.goToPageById(c.nextRenderPageId),c.setNextRenderPageId(-1)))})}}},{key:"getNeedRenderPages",value:function(){function h(){for(var m=0;m<k;m++){var i=g.eqxPageList[m];if(i.isXb()&&!i.$section){return i}}}var d=this,l=[];if(this.nextRenderPageId!==-1){var c=this.eqxPageList.find(function(i){return i.pageJson.id===d.nextRenderPageId});c&&!c.$section&&l.push(c)}var k=this.eqxPageList.length,g=this;this.renderPageCnt<2&&(c=h(),c&&!c.$section&&l.push(c));var b=this.eqxPageList.indexOf(this.currentPage);b===-1&&(b=0),c=this.eqxPageList[b],c&&!c.$section&&l.push(c),0==b?(c=this.eqxPageList[k-1],c&&!c.$section&&l.push(c),c=this.eqxPageList[b+1],c&&!c.$section&&l.push(c)):b==k-1?(c=this.eqxPageList[0],c&&!c.$section&&l.push(c),c=this.eqxPageList[b-1],c&&!c.$section&&l.push(c)):(c=this.eqxPageList[b-1],c&&!c.$section&&l.push(c),c=this.eqxPageList[b+1],c&&!c.$section&&l.push(c));var f=this.getPageLinkId(this.eqxPageList[b]);return f.length>0&&f.forEach(function(i){c=d.eqxPageList.find(function(e){return e.pageJson.id===i}),l.push(c)}),l}},{key:"getPageLinkId",value:function(d){var c=[],f=d.pageJson.properties.triggerGroup,b=d.pageJson.elements;return f&&f.length>0&&f.forEach(function(g){6==g.targetState&&c.push(+g.targetContent)}),b.forEach(function(g){2==g.type&&/href="[0-9]+"/.test(g.content)&&c.push(parseInt(/[0-9]+/.exec(/href="[0-9]+"/.exec(g.content)[0])[0])),g.properties&&g.properties.url&&/^[0-9]+$/.test(g.properties.url)&&c.push(parseInt(/^[0-9]+$/.exec(g.properties.url)[0]))}),c}},{key:"initEqxPages",value:function(){var b=this;this.sceneJson.list.forEach(function(c,d){return b.initEqxPage(d)})}},{key:"initEqxPage",value:function(d){var c=this.sceneJson.list[d];if(c){C(c,this.sceneJson);var f=N.get(c),b=new f(c,this);return this.eqxPageList[d]=b,b}throw new Error("Invalid Page Index: "+d)}},{key:"renderPage",value:function(d){var c=this;if("number"==typeof d){var f=this.eqxPageList[d]}else{f=d,d=this.eqxPageList.indexOf(f)}if(f){var b=f.$section;if(b){return}return b=f.create$section(),this.dependenciesRenderObj.num++,this.dependenciesRenderObj.total=this.eqxPageList.length,console.log("[renderPage]",f.pageJson.num),"edit"!==this.config.mode&&f.addEventListener(),f.isXb()&&b.css({display:"inline-block"}),this.$ele&&this.$ele.append(b),this.sceneJson.list.length>1&&f.renderArrow(),window._tj&&(window._tj["page"+d]=window._tj.now()),0===d&&f.arrow&&f.arrow.updateCss({bottom:"30px"}),this.bindVariableComps(),f.addEffect().then(function(){d===c.config.toPageIndex?(c.currentPage=f,f.active().then(function(e){f.deactive().show(),window._tj&&(window._tj["page"+d+"Effect"]=window._tj.now(),window._tj.firstPageShowTime=window._tj.now())})):window._tj&&(window._tj["page"+d+"Effect"]=window._tj.now())})}return console.error("no eqxPage at index "+d),Promise.reject(new Error("no eqxPage at index "+d))}},{key:"bindVariableComps",value:function(){var h=this.variableComps,p=h.texts,f=h.inputs,g=h.images,d=h.uploads,b=h.textsPreLen,l=h.inputsPreLen,v=h.imagesPreLen,k=h.uploadsPreLen,m=function(w,s,y,c){for(var x=s.length,u=function(){var t=s[x],i=t.compJson.properties["var"].comp;if(i){var o=c.find(function(r){return r.compJson.id==i});if(o){if(o.variables=o.variables||[],o.variables.push(t),"7"===String(t.type)){var Y=o.variablesValue;Y&&t.updateContent(Y)}else{var n=o.variablesValues;if(n){var e=n.key,E=n.w,I=n.h;t.updateImageSrc(e,E,I)}}w.splice(x+y,1)}}};x--;){u()}};p.length>b&&f.length&&(m(p,p.slice(b),b,f),h.textsPreLen=p.length),f.length>l&&p.length&&(m(p,p,0,f.slice(l)),h.inputsPreLen=f.length),g.length>v&&d.length&&(m(g,g.slice(v),v,d),h.imagesPreLen=g.length),d.length>k&&g.length&&(m(g,g,0,d.slice(k)),h.uploadsPreLen=d.length)}},{key:"changePageMode",value:function(b){this.eqxPageList.forEach(function(c){c.$section&&(c.arrow?c.arrow.updatePageMode(b):c.renderArrow(b)),c.pageMode=b})}},{key:"initProgressBar",value:function(){this.progressBar=new J(this.sceneJson.list.length),this.$ele.append(this.progressBar.$progress)}},{key:"updateProgressBar",value:function(d){if(d||(d=this.currentPage),d){c=d.pageJson.num}else{var c=this.eqxPageList[0].pageJson.num}var f=this.sceneJson.list.length;if(this.progressBar.update(c,f),this.config.showProgressBar){this.progressBar.show()}else{var b=this.meta.property.slideNumber&&!this.config.disableProgressBar;b?this.progressBar.show():this.progressBar.hide()}}},{key:"initPageScroll",value:function(){this.config.disablePageScroll||(this.pageScroll=new U(this))}},{key:"initManagers",value:function(){this.initSoundManager(),this.initPageEffectManager(),this.initStatManager(),this.config.disableCommentManager||this.initCommentManager(),this.initEventManager(),this.initFormManager()}},{key:"initSoundManager",value:function(){this.soundManager=new j}},{key:"initStatManager",value:function(){return this.statManager=new B(this.sceneJson),this.statManager.iterate(),this.statManager}},{key:"initCommentManager",value:function(){this.commentManager=new R(this.meta.id)}},{key:"initEventManager",value:function(){this.eventManager=new S}},{key:"initFormManager",value:function(){this.formManager=new M}},{key:"initPageEffectManager",value:function(){this.pageEffectManager=new W}},{key:"replaceEqxPage",value:function(d,c){var f=this.eqxPageList[d];f.destroy(),this.sceneJson.list.splice(d,1,JSON.parse(JSON.stringify(c))),this.updatePageNum(),this.eqxPageList[d]=null;var b=this.initEqxPage(d);return this.currentPage&&this.currentPage.pageJson.num===d+1&&(this.currentPage=b),b}},{key:"updatePageNum",value:function(){this.sceneJson.list.forEach(function(c,b){c.num=b+1})}},{key:"insertPage",value:function(c,b){var d=this.sceneJson.list;return d.splice(c+1,0,b),this.updatePageNum(),this.eqxPageList.splice(c+1,0,null),this.initEqxPage(c+1)}},{key:"deletePage",value:function(c){var b=this.sceneJson.list,d=this.eqxPageList[c];return d&&d.destroy(),b.splice(c,1),this.updatePageNum(),this.eqxPageList.splice(c,1)}},{key:"destroy",value:function(){this.stopRenderPages(),this.eqxPageList.forEach(function(b){return b.destroy()}),this.bgm&&(this.bgm.destroy(),this.bgm=null)}},{key:"sortPage",value:function(v,I){var g=this.sceneJson.list,m=g.length;if(v===I||v<0||v>m-1||I<0||I>m-1){return console.error("invalid sortPage arguments")}if(v>I){var f=g.splice(v,1),y=H(f,1),Y=y[0];g.splice(I,0,Y);var x=this.eqxPageList.splice(v,1),E=H(x,1);Y=E[0],this.eqxPageList.splice(I,0,Y)}else{var k=g.splice(v,1),b=H(k,1);Y=b[0],g.splice(I,0,Y);var w=this.eqxPageList.splice(v,1),r=H(w,1);Y=r[0],this.eqxPageList.splice(I,0,Y)}this.updatePageNum()}},{key:"getEqxPageByIndex",value:function(c){var b=this.eqxPageList[c];return b||(b=this.initEqxPage(c)),b}},{key:"isEqxPage",value:function(b){return this.eqxPageList.some(function(c){return c===b})}},{key:"getEqxPageById",value:function(b){return this.getEqxPageByKeyValue("id",b)}},{key:"getEqxPageByKeyValue",value:function(c,b){var d=this.sceneJson.list.findIndex(function(e){return e[c]===b});if(d>-1){return this.getEqxPageByIndex(d)}}}]),a}();T.exports=q},function(d,b,g){var a=g(90),f=g(429),c=g(430);d.exports={get:function(j){var i=j.properties,k=i.longPage,h=i.xb;return h?c:k?f:a}}},function(an,Y,ae){function aj(b){if(Array.isArray(b)){for(var a=0,c=Array(b.length);a<b.length;a++){c[a]=b[a]}return c}return Array.from(b)}function ad(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}var aa=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),ar=ae(72).COMP_TYPE,Z=ae(72).FORM_COMPS,ap=ae(72).WX_COMPS,X=ae(72).FIX_INDEX_COMPS,ag=ae(72).WX_CLICK_FARMER_COMPS,ac=ae(73),ao=ac.perfectComp,ak=ae(55).randomId,am=ae(91),al=ae(93),af=ae(124),W=ae(127),Q=ae(401),aq=ae(239),U=ae(406),V=ae(407),ah=ae(411),K=ae(412),J=ae(416),B=ae(417),F=ae(419),at=ae(415),z=ae(420),G=ae(421),M=console.log.bind(console,"[EqxPage]"),ab=ae(137).toInt,ai=ae(423),H=ae(427),N=ae(428),D=function(){function a(m,e){ad(this,a),this.pageJson=m,this.eqxScene=e,this.eqxItemList=[],this.eqxLayerList=[],this.currentLayer=null,this.displayed=!1,this.hasCoverEffect=!1,this.destroyed=!1;var g=this.eqxScene.sceneJson,b=g.meta,j=b.pageMode,o=b.property.forbidHandFlip,h=this.eqxScene,k=h.width,f=h.height;this.width=k,this.height=f,this.pageMode=j,this.forbidHandFlip=o,this.bgm=this.eqxScene.bgm,this.eqxStatManager=null,this.pv=0;var d=m.properties;this.notImageCut=d.oneShot&&d.oneShot.isOpen||d.pip&&d.pip.used}return aa(a,[{key:"switchCurrentLayer",value:function(b){null!==b&&void 0!==b&&(isNaN(parseFloat(b))?b instanceof at&&(this.currentLayer=b):this.currentLayer=this.eqxLayerList[b])}},{key:"getCurrentLayer",value:function(){return this.currentLayer||this.eqxLayerList[this.eqxLayerList.length-1]||null}},{key:"hasEqxItem",value:function(b){return this.eqxLayerList.some(function(c){return c.eqxItems.includes(b)})}},{key:"getTopItems",value:function(){var b=[];return this.eqxLayerList.forEach(function(c){b.push.apply(b,aj(c.eqxItems.filter(function(d){return !d.group})))}),b}},{key:"initEqxLayers",value:function(){function E(){I.forEach(function(c){delete c.tag,delete c.visited})}function P(){var f=j.slice(),d={};f.forEach(function(h,i){"EqxGravity"!=ar[h.type]&&(d[h.id]=h)});for(var c=function(ax){var S=[],au=A[ax],u=au.thumbnail,m=au.pipButton,aA=au.displayed,aC=au.compIds,az=au.screenBg,T=au.flash,t=au.area,ay=au.name,av=au.hash,aw=au.id,aB=void 0===aw?O._generateLayerId():aw;aC.forEach(function(l){var h=d[l];void 0!==h&&(S.push(h),delete d[l])}),v.push({thumbnail:u,pipButton:m,displayed:aA,compIds:aC,flash:T,screenBg:az,items:S,area:t,name:ay,hash:av,id:aB})},g=0;g<A.length;g++){c(g)}q(Object.values(d),v),d=null,v.length||v.push({items:[],json:{compIds:[],id:O._generateLayerId()}}),v.forEach(function(i,h){i.zIndex=i.zIndex||h+1})}function q(f,d){var g=f.findIndex(function(h){return"16"===h.type});if(g>=0){var c=f.splice(g,1)}f.length&&d.unshift({items:f}),c&&d.unshift({items:c,pipButton:1})}function x(){for(var f=0;f<v.length;f++){var d=v[f];b();for(var g=0;g<I.length;g++){var c=I[g];c.tag||c.visited||k(c,d)}}}function k(m,h){m.visited=!0;for(var p=m.compIds,g=h.items.map(function(c){return c.id}),l=!0,d=0;d<p.length;d++){var o=p[d];if(g.indexOf(o)===-1){if(!/group/.test(o)){l=!1;break}var f=R(o);if(!f||f.visited||!k(f,h)){l=!1;break}}}return l&&(m.tag=!0,h.items.push(m)),l}function b(){for(var c=0;c<I.length;c++){I[c].visited=!1}}function R(c){return I.find(function(d){return d.id===c})}var L=this,O=this,w=this.pageJson,j=w.elements,I=w.groups;I||(I=[]),E();var y=this.pageJson.extend=this.pageJson.extend||{},C=y.screens,A=void 0===C?[]:C,v=[];return P(),x(),E(),v.map(function(c){return new at(c,L)})}},{key:"_generateLayerId",value:function(){return"layer:"+ak()}},{key:"addEmptyEqxLayer",value:function(d){if(!this.$editDiv){return null}if(this.currentLayer.json.screenBg&&d){var c=JSON.parse(JSON.stringify(this.currentLayer.json.screenBg))}else{c=null}var g={compIds:[],items:[],id:this._generateLayerId(),screenBg:c},b=new at(g,this),f=this.oneShot?this.$editDiv.find(".one-shot-change-wraper"):this.$editDiv;return 0===d?(this.eqxLayerList.unshift(b),f.prepend(b.render()),this.eqxLayerList.forEach(function(i,h){return i.updateEqxLayerIndex(h+1)})):d===this.eqxLayerList.length?(this.eqxLayerList.push(b),f.append(b.render()),b.updateEqxLayerIndex(this.eqxLayerList.length)):d?(this.eqxLayerList.splice(d,0,b),f.children().eq(d).before(b.render()),this.eqxLayerList.forEach(function(i,h){return i.updateEqxLayerIndex(h+1)})):(this.eqxLayerList.push(b),f.append(b.render()),b.updateEqxLayerIndex(this.eqxLayerList.length)),b}},{key:"deleteEqxLayer",value:function(c){var b=this.eqxLayerList;isNaN(parseInt(c))&&(c=b.findIndex(function(d){return d===c})),c>=0&&b.length>1&&(b.splice(c,1)[0].destroy(),this.switchCurrentLayer(b[b.length-1]))}},{key:"getEaxPageTreeStructureFlatted",value:function(){function c(e){var g=[];return e.eqxItems.forEach(function(h){g.push(h),h.isGroupItem()&&g.push.apply(g,aj(c(h)))}),g}function b(g){g.forEach(function(h){return h.isGroupItem()&&b(h.eqxItems)}),g.sort(function(i,h){return h.zIndex-i.zIndex})}function f(g){return g.eqxLayerList.slice().sort(function(i,h){return h.zIndex-i.zIndex}).map(function(h){var i=h.getDirectItems();return b(i),{eqxItems:i}})}var d=[];return f(this).forEach(function(e){return d.push.apply(d,aj(c(e)))}),d}},{key:"openPipEditor",value:function(){var c=this.pageJson,b=c.properties;b.pip=b.pip||{},b.pip.used=!0,b.pip.playback=!0,b.pip.mode=1}},{key:"initQuickFlash",value:function(){var c=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this.pageJson.properties;c&&(b.flash=b.flash||{},b.flash.used=c),b.flash&&b.flash.used&&(this.flash=new N(b.flash,this))}},{key:"openOneShot",value:function(){this.oneShot=new G(this),this.oneShot.open()}},{key:"toJson",value:function(){if(!this.eqxLayerList.length){return this.pageJson}var c=[],b=[],f=[];this.eqxLayerList.sort(function(h,g){return h.zIndex-g.zIndex}).forEach(function(j){var e=j.toJson(),y=e.elems,C=e.groups,x=e.thumbnail,A=e.pipButton,n=e.screenBg,i=e.compIds,w=e.flash,q=e.area,v=e.name,t=e.hash,k=e.id;c.push.apply(c,aj(y)),b.push.apply(b,aj(C)),f.push({thumbnail:x,pipButton:A,compIds:i,screenBg:n,flash:w,area:q,hash:t,name:v,id:k})}),c.forEach(function(h,g){var i=h.css;i.zIndex=g+1}),this.eqxBackground&&c.push(this.eqxBackground.compJson),this.eqxGravity&&c.push(this.eqxGravity.compJson),this.pageJson.elements=c,this.pageJson.groups=b,this.pageJson.extend=this.pageJson.extend||{},this.pageJson.extend.screens=f;var d=this.pageJson.properties;return d&&(d.groupSettings=this.ftManager.toJson()),this.pageJson}},{key:"toPageJson",value:function(g){g=Object.assign({transformText:!0,addForms:!0},g);var d=JSON.parse(JSON.stringify(this.toJson())),k=d.id,b=d.sceneId,h=d.forms=[],f=d.redPacket={};if(d.elements.forEach(function(o){var n=o.type+"";if("EqxRedPacket"===ar[n]){var p=o.properties;f.title=p.title,f.activity=p.activity,f.amount=p.amount,f.begin=p.begin,f.end=p.end,f.count=p.count,f.chance=p.chance}if("EqxText"===ar[n]&&o.content&&(o.content=o.content.replace(/(^\s*)|(\s*$)/g,"")),Z.includes(n)){var m={id:o.id,pageId:k,sceneId:b,type:n,fieldType:n,title:o.title,num:o.num};"z"===n&&o.choices&&o.choices.options&&(m.title=o.choices.options[0].label||o.title),/^[rc]/.test(n)&&(o.choices&&"string"!=typeof o.choices&&(o.choices=JSON.stringify(o.choices)),m.choices=o.choices),h.push(m)}if(o.trigger){var i=o.trigger;i.sends&&0===i.sends.length&&delete i.sends,i.receives&&0==i.receives.length&&delete i.receives,i.sends||i.receives||delete o.trigger}"EqxTelephone"!==ar[n]&&"EqxLink"!==ar[n]&&"EqxSubmitButton"!==ar[n]||o.properties.title&&(o.properties.title=o.properties.title.replace(/ /g,"&nbsp;"))}),d.trigger){var j=d.trigger;j.sends&&0===j.sends.length&&delete j.sends,j.receives&&0===j.receives.length&&delete j.receives,j.sends||j.receives||delete d.trigger}return d}},{key:"setProps",value:function(c){var b=this.pageJson.properties;Object.keys(c).forEach(function(d){b[d]=c[d]})}},{key:"isXb",value:function(){return !!this.pageJson.properties.xb}},{key:"isLongPage",value:function(){return"longPage" in this.pageJson.properties}},{key:"getPageWidth",value:function(){return 320}},{key:"getPageHeight",value:function(){var b=this.pageJson.properties;return b.longPage||486}},{key:"toString",value:function(){return"page-"+this.pageJson.id}},{key:"initStatManager",value:function(){return this.statManager=new U(this.pageJson.elements),this.statManager.iterate(),this.statManager}},{key:"updateItemIndex",value:function(c,b){b.eqxLayer.updateItemIndex(c,b)}},{key:"updateItemsIndexBySplit",value:function(c,b){b[0].eqxLayer.updateItemsIndexBySplit(c,b)}},{key:"updateItemsIndex",value:function(c,b){var d=b.sort(function(g,f){return g.getZIndex()-f.getZIndex()});"--"===c&&d.reverse(),d.forEach(function(e){e.eqxLayer.updateItemIndex(c,e)})}},{key:"show",value:function(){if(this.displayed=!0,this.triggerEventAgent&&this.triggerEventAgent.addEventListener(),this.$section.addClass("z-current"),window.scene){var b=window.scene.property.activityPageId;b&&!this.pv&&(this.pv+=1)}return this.soundAgent&&this.soundAgent.start(),this}},{key:"hide",value:function(){return this.displayed=!1,this.oneShot&&this.oneShot.reset&&this.oneShot.reset(),this.flash&&this.flash.reset&&this.flash.reset(),this.triggerEventAgent&&this.triggerEventAgent.removeEventListener(),this.eqxCompList.forEach(function(b){b.$li&&b.eleHide()}),this.effect&&this.effect.stopEffect&&this.effect.stopEffect(),this.$section&&this.$section.removeClass("z-current"),this.soundAgent&&this.soundAgent.pause(),this}},{key:"showElements",value:function(){var b=this;this.getEqxComps().forEach(function(c){var d=c.compJson.css.top;c.compJson.properties.anim&&c.compJson.properties.anim[0]&&30===c.compJson.properties.anim[0].type&&(d-=c.compJson.css.height),2===c.compJson.properties.initType?c.eleHide():c.compJson.properties.anim&&c.compJson.properties.anim[0]&&(2===c.compJson.properties.anim[0].type||19===c.compJson.properties.anim[0].type)?c.eleShow():d&&parseFloat(d)<=b.height?c.eleShow():d||c.eleShow()}),this.eqxBackground&&this.eqxBackground.eleShow()}},{key:"active",value:function(){function d(g){g.hasCoverEffect?(g.bgm&&g.bgm.hide(),g.eqxScene.progressBar&&g.eqxScene.progressBar.hide()):g.showElements(),g.effect&&g.effect.startEffect&&g.effect.startEffect(),g.$section.addClass("z-active"),g.flash&&g.flash.play(),g.oneShot&&g.oneShot.play()}function c(h){var g=[],i=h.eqxCompList;return i.forEach(function(j){j.anim&&!Array.isArray(j.anim)&&(j.anim=[j.anim]),(j.anim||[]).forEach(function(k){k.sound&&k.soundAgent&&g.push(k.soundAgent.audio)})}),g}var f=this,b=new Promise(function(g,j){var h=c(f),e=h.length;h&&h.length?h.forEach(function(i){4===i.readyState?0===--e&&(d(f),g()):(i.load(),$(i).on("canplay",function(){0===--e&&(d(f),g())}).on("error",function(){0===--e&&(d(f),g())}))}):(d(f),g())});return b}},{key:"deactive",value:function(){if(this.$section){return this.$section.removeClass("z-active"),this}}},{key:"destroy",value:function(){this.hide(),this.eqxLayerList.forEach(function(b){b.destroy()}),this.$ul&&(this.$ul.remove(),this.$ul=null),this.$editDiv&&(this.$editDiv.remove(),this.$editDiv=null),this.$pageDiv&&(this.$pageDiv.remove(),this.$pageDiv=null),this.$section&&(this.$section.remove(),this.$section=null),this.destroyed=!0,this.soundAgent&&this.soundAgent.destroy(),this._ftManager=null,this._groupManager=null,this._triggerManager=null}},{key:"create$section",value:function(){function aE(){f.eqxLayerList.some(function(b){return b.hasGroupsInLayer()})&&f.addGroupManager()}function S(){f.trigger=new B(f,j)}function ax(){f.initQuickFlash()}function aB(){aA.isOpen&&(f.oneShot=new G(f))}function aw(){var b=aD.find(function(c){return"EqxGravity"===ar[c.type]});b&&(f.eqxGravity=f.initEqxGravityByJson(b),f.renderGravity(f.eqxGravity))}function au(){(q.used||aA.isOpen||"edit"===L)&&(f.eqxLayerList=f.initEqxLayers(),f.$editDiv.append(f.eqxLayerList.map(function(b){return b.render()})),f.switchCurrentLayer(f.eqxLayerList.length-1))}function T(){A.used&&"view"===L&&f.$editDiv.append(new z({},f).render())}function aG(){if(!q.used&&!aA.isOpen&&!A.used&&"view"===L){var c=aD.slice().map(function(d){return d.name=f.getCompName(d),d}).filter(function(g){var d=g.type;return"EqxBackground"!==ar[d]&&"EqxGravity"!==ar[d]}).sort(function(h,g){var k=h.css.zIndex,d=g.css.zIndex;return k-d}).map(function(g,d){return g.num=d+1,g.css.zIndex=d+1,g}),b={id:f._generateLayerId(),items:c,compIds:c.map(function(d){return d.id}),zIndex:1};f.eqxLayerList=[new at(b,f)],f.$editDiv.append(f.eqxLayerList.map(function(d){return d.render()})),f.switchCurrentLayer(f.eqxLayerList.length-1)}}function O(){if(aD.length){var c=[],b=[];if(aD.forEach(function(e){"EqxBackground"===ar[e.type]?b.push(e):c.push(e)}),b.length){var d=f.initEqxBgByJson(b[b.length-1]);f.renderBg(d)}aD.length=0,aD.push.apply(aD,c)}}var az=this.pageJson,av=az.num,aF=az.id,aC=az.properties,aD=az.elements,ay=this.eqxScene.config,L=ay.mode,j=ay.disableTrigger,aH=aC.pip,A=void 0===aH?{}:aH,C=aC.oneShot,aA=void 0===C?{}:C,R=aC.flash,q=void 0===R?{}:R,f=this;return this.$section=$(am.section()),this.section=this.$section[0],this.$pageDiv=$(am.pageDiv(av)),this.$editDiv=$(am.editDiv(aF)),this.$pageDiv.append(this.$editDiv),this.$section.append(this.$pageDiv),O(),T(),au(),aG(),aw(),aB(),ax(),S(),aE(),this.$section}},{key:"addEventListener",value:function(){this.addPageSoundAgent()}},{key:"addPageSoundAgent",value:function(){this.soundAgent=new F(this,this.eqxScene.soundManager)}},{key:"renderGravity",value:function(b){b.$gravity?console.error("gravity already rendered"):this.$editDiv.prepend(b.create$gravity())}},{key:"addGravityJson",value:function(b){return this.deleteGravity(),this.addCompJson(b)}},{key:"deleteGravity",value:function(){var c=this;if(this.eqxGravity){var b=this.pageJson.elements.findIndex(function(d){return d.id===c.eqxGravity.compJson.id});b>-1&&this.pageJson.elements.splice(b,1),this.eqxGravity.delete$gravity(),this.eqxGravity=null}}},{key:"renderBg",value:function(b){b.$bg?console.error("background already rendered"):b.create$bg(this.$editDiv,this.width,this.height)}},{key:"addBgJson",value:function(b){return this.deleteBg(),this.addCompJson(b)}},{key:"deleteBg",value:function(){var c=this;if(this.eqxBackground){var b=this.pageJson.elements.findIndex(function(d){return d.id===c.eqxBackground.compJson.id});b>-1&&this.pageJson.elements.splice(b,1),this.eqxBackground.delete$bg(),this.eqxBackground=null}}},{key:"reEffectJson",value:function(b){this.pageJson.properties.effect=b}},{key:"addTriggerManager",value:function(){return this._triggerManager=new H(this),this._triggerManager}},{key:"addGroupManager",value:function(){return this._groupManager=new K(this),this._groupManager}},{key:"addFtManager",value:function(){return this._ftManager=new ai(this),this._ftManager}},{key:"addScreenManager",value:function(){return this.screenManager=new J(this),this.screenManager}},{key:"addEffect",value:function(){var d=this,c=this.pageJson,g=c.num,b=c.properties.effect,f=this.eqxScene.config;return new Promise(function(j,m){if(!b||f.disablePageEffect||"gravity"===b.name){j()}else{var h=d,k=function(){if(h.hasCoverEffect=!0,1===g){var l=h.eqxScene.progressBar;l.hide(),h.bgm&&(h.bgm.hide(),h.bgm.stopPlay())}},n=function(){h.hasCoverEffect=!1;var l=h.eqxScene.progressBar;l&&l.show(),h.bgm&&h.bgm.show(),1===g&&h.bgm&&h.bgm.resumePlay(),h.showElements()},i=b.name,e=d;al.load(i).then(function(l){e.effect=new l(b,e.$pageDiv,e.width,e.height,k,n),e.eqxScene.pageEffectManager.add(e.effect),e.effect.init(),j()})["catch"](function(){m()})}})}},{key:"renderArrow",value:function(c){var b=this.eqxScene.config;c||(c=this.pageMode),this.forbidHandFlip||b.disableArrow||(this.arrow=new Q(c),this.$section.append(this.arrow.$arrow))}},{key:"alignItem",value:function(A,O){var m=A.getBoundingRect(),v=function(c){return c.isGroupItem()?function(e,f){var d=c.getAllSubEqxComps();d.forEach(function(g){g.instantMove(e,f,!1)}),c.autoSize()}:function(d,e){c.instantMove(d,e,!1)}}(A);switch(O){case"左对齐":var k=-m.left;v(k,0);break;case"右对齐":var b=320-m.left-m.width;v(b,0);break;case"上对齐":var I=-m.top;v(0,I);break;case"下对齐":var P=this.getPageHeight(),E=P-m.top-m.height;v(0,E);break;case"水平居中对齐":var L=m.left,q=L+m.width/2,j=parseInt(160-q);v(j,0);break;case"垂直居中对齐":var C=this.getPageHeight(),w=m.top,y=w+m.height/2,x=parseInt(C/2-y);v(0,x);break;default:throw new Error("对齐元素位置类型"+O)}M("alignItem",O,m.toString(),"-->",A.getBoundingRect().toString(),A.id)}},{key:"initEqxBgByJson",value:function(b){return this.eqxBackground=new aq(b,this),this.eqxBackground}},{key:"initEqxGravityByJson",value:function(b){return this.eqxGravity=new V(b,this),this.eqxGravity}},{key:"alignItems",value:function(au,w){if(0!==au.length){if(1===au.length){return this.alignItem(au[0],w)}var I=this.groupManager||this.addGroupManager();au=I.filterNestedItems(au);var P=I.traceTopItemsContain(au),E=P.map(function(b){return b.getBoundingRect()}).join("\n"),A=P.filter(function(b){return b.isGroupItem()}),ay=au.length;if(!(ay<1)){for(var x=Number.POSITIVE_INFINITY,aw=Number.NEGATIVE_INFINITY,q=Number.POSITIVE_INFINITY,O=Number.NEGATIVE_INFINITY,C=0;C<ay;C++){var av=au[C],R=av.getBoundingRect(),T=R.center();av.$rect=R,av.$center=T,R.p1.x<x&&(x=R.p1.x),R.p1.y<q&&(q=R.p1.y),R.p2.x>aw&&(aw=R.p2.x),R.p2.y>O&&(O=R.p2.y)}var S=ab((x+aw)/2),L=ab((q+O)/2);switch(w){case"左对齐":au.forEach(function(c){var b=c.$rect,d=x-b.left;c.instantMove(d,0,!1)});break;case"右对齐":au.forEach(function(c){var b=c.$rect,d=aw-b.left-b.width;c.instantMove(d,0,!1)});break;case"上对齐":au.forEach(function(c){var b=c.$rect,d=q-b.top;c.instantMove(0,d,!1)});break;case"下对齐":au.forEach(function(c){var b=c.$rect,d=O-b.top-b.height;c.instantMove(0,d,!1)});break;case"水平居中对齐":au.forEach(function(c){var b=c.$center,d=S-b.x;c.instantMove(d,0,!1)});break;case"垂直居中对齐":au.forEach(function(c){var b=c.$center,d=L-b.y;c.instantMove(0,d,!1)});break;case"水平均分":if(ay<2){return}var k=au.map(function(b){return b}).sort(function(c,b){return c.$center.x-b.$center.x});x=k[0].$center.x,aw=k[ay-1].$center.x;var j=(aw-x)/(ay-1);k.forEach(function(c,b){var d=x+j*b-c.$center.x;c.instantMove(d,0,!1)});break;case"竖直均分":if(ay<2){return}k=au.map(function(b){return b}).sort(function(c,b){return c.$center.y-b.$center.y}),q=k[0].$center.y,O=k[ay-1].$center.y,j=(O-q)/(ay-1),k.forEach(function(c,b){var d=q+j*b-c.$center.y;c.instantMove(0,d,!1)});break;default:throw new Error("对齐元素位置类型"+w)}A.forEach(function(b){b.autoSize()});var ax=P.map(function(b){return b.getBoundingRect()}).join("\n");M("alignItems\n",E,"\n-->\n",ax)}}}},{key:"updateEqxComp",value:function(c,b){b=JSON.parse(JSON.stringify(b)),ao(b,this.eqxScene.sceneJson,this.pageJson);var d=this.getEqxCompById(c);if(d){return delete b.id,delete b.num,delete b.pageId,delete b.sceneId,delete b.type,Object.assign(d.compJson,b),d}}},{key:"isFunTemplate",value:function(){var c=this.pageJson.properties,b=c.pip,d=c.oneShot;if(b||d){return this.ftManager.ftRules.length}}},{key:"isSpecialPage",value:function(){var c=this.pageJson.properties,b=c.pip,d=c.oneShot;return b||d}},{key:"getEqxCompByCoord",value:function(h,d){for(var k=this.eqxLayerList.length,i=[],g=k-1;g>=0;g--){var b=this.eqxLayerList[g];if(b.allowOperate){var f=b.eqxItems.filter(function(c){return !c.isGroupItem()}).sort(function(l,c){return c.css.zIndex-l.css.zIndex});i.push.apply(i,aj(f))}}for(var j=0;j<i.length;j++){if(i[j].containsPoint(h,d)){return i[j]}}}},{key:"getWxCompCount",value:function(){return this.pageJson.elements.reduce(function(c,b){return ap.includes(b.type+"")&&(c+=1),c},0)}},{key:"getWxClickFarmerCompCount",value:function(){return this.pageJson.elements.reduce(function(c,b){var d=b.type+"";return ag.includes(d)&&b.properties.clickFarmer&&(c+=1),c},0)}},{key:"getCompName",value:function(d){if(d.name){return d.name}var c=ah.find(function(e){return e.types.includes(d.type+"")});if(!c){return null}var g=c.types,b=this.getEqxComps().map(function(h){return h.compJson}).filter(function(h){return g.includes(h.type+"")}),f=0;return b.forEach(function(j){if(j.name){var k=new RegExp(c.name+"(\\d+)"),h=parseInt((k.exec(j.name)||[])[1]);h&&h>f&&(f=h)}}),c.name+(f+1)}},{key:"getOperableLayers",value:function(){return this.eqxLayerList.filter(function(b){return b.allowOperate})}},{key:"getEqxItems",value:function(){var b;return(b=[]).concat.apply(b,aj(this.eqxLayerList.map(function(c){return c.eqxItems})))}},{key:"getDirectEqxItems",value:function(){var b;return(b=[]).concat.apply(b,aj(this.eqxLayerList.map(function(c){return c.getDirectItems()})))}},{key:"getEqxItem",value:function(b){return b&&this.getEqxItems().find(function(c){return""+c.id==""+b})}},{key:"getEqxCompById",value:function(b){return this.getEqxItem(b)}},{key:"getEqxComps",value:function(){var b=[];return this.eqxLayerList.forEach(function(c){b.push.apply(b,aj(c.getEqxComps()))}),b}},{key:"getZIndex",value:function(b){return b.compJson.css.zIndex}},{key:"initEqxCompById",value:function(c){var b=this.pageJson.elements.find(function(d){return d.id==c});return this.initEqxCompByJson(b)}},{key:"deleteEqxComp",value:function(b){this.deleteEqxItem(b)}},{key:"deleteEqxItem",value:function(c){if(c){var b=c.eqxLayer;b.deleteEqxItem(c),c.isGroupItem()||this.deleteTrigger(c)}}},{key:"deleteTrigger",value:function(c){var b=c.compJson.id,d=this.pageJson.properties;d.triggerGroup&&(d.triggerGroup=d.triggerGroup.filter(function(f){return f.sourceId.toString()!=-b.toString()&&f.targetId.toString()!==b.toString()}))}},{key:"renderEqxComp",value:function(c,b){c&&this.getCurrentLayer().renderEqxItem(c,b)}},{key:"initEqxCompByJson",value:function(f,c){if(f){this.getCompJsonById(f.id)||(f=this.addCompJson(f,c));var h=this.getEqxItem(f.id),b=af[f.type];if(h){return console.error("already init",f,h),null}if(!(b&&b.prototype instanceof W)){return console.error("In Valid Type: "+f.type+" @Page"+this.pageJson.id,f),null}var g=this.getCurrentLayer(),d=new b(f,g);return g.initEqxItem(d),d}}},{key:"getCompJsonById",value:function(c){if(c){var b=this.getEqxItem(c);return b?b.compJson:void 0}}},{key:"addCompJson",value:function(c,b){var d=JSON.parse(JSON.stringify(c));return this.addPageInfo(d,b),ao(d,this.eqxScene.sceneJson,this.pageJson),d}},{key:"addPageInfo",value:function(c,b){var f=this.pageJson,d=0;return X.indexOf(""+c.type)===-1&&(d=Math.max.apply(Math,[0].concat(aj(this.getEqxItems().map(function(g){return g.zIndex})))),c.css.zIndex=c.css.zIndex||d+1),c.id||(c.id=ak()),Object.assign(c,{id:c.id,pageId:f.id,sceneId:f.sceneId,num:d+1}),c.fromSource&&"psd"===c.fromSource?(delete c.fromSource,c):(b||(delete c.name,c.name=this.getCompName(c)),c)}},{key:"getLayer0ItemIds",value:function(){function f(m){for(var k=0;k<h.length;k++){for(var j=h[g].compIds,l=0;l<j;l++){if(j[l]===m){return !1}}}return !0}for(var c=this.pageJson.elements,h=this.pageJson["extends"].screens,b=[],g=0;g<c.length;g++){var d=c[g].id;f(d)&&b.push(d)}return b}},{key:"getEqxLayerById",value:function(){}},{key:"newEqxLayer",value:function(){}},{key:"mergeEqxLayers",value:function(){}},{key:"centerUI",value:function(){}},{key:"initTrigger",value:function(){}},{key:"addPageGroup",value:function(b){this.pageJson.groups=this.pageJson.groups||[],b.type&&this.pageJson.groups.push(b)}},{key:"getPageGroups",value:function(){return this.pageJson.groups||[]}},{key:"getPageGroupSettings",value:function(){var b=this.pageJson.properties;return b.groupSettings=b.groupSettings||[],b.groupSettings}},{key:"renderEqxCompById",value:function(b){return this.renderEqxComp(this.getEqxCompById(b))}},{key:"setIframeUlTopAndLeft",value:function(){var c,b=(this.width-320)/2,d=(this.height-486)/2;return c=this.width/this.height<=320/486?"scale("+this.width/320+")":"scale("+this.height/486+")",this.$ul.css({marginTop:d,marginLeft:b,transform:c}),{marginLeft:b,marginTop:d}}},{key:"resetZIndex",value:function(d){for(var c=d.length,f=c-1;f>=0;f--){var b=d[f];b.compJson.css.zIndex=c-f,b.update$li({zIndex:b.compJson.css.zIndex})}}},{key:"id",get:function(){return this.pageJson.id}},{key:"triggerManager",get:function(){return this._triggerManager||this.addTriggerManager()}},{key:"groupManager",get:function(){return this._groupManager||this.addGroupManager()}},{key:"ftManager",get:function(){return this._ftManager||this.addFtManager()}},{key:"eqxCompList",get:function(){return this.getEqxComps()}}]),a}();an.exports=D},function(g,d,j){function c(){return'<section class="main-page"></section>'}function h(a){return'<div class="m-img" id="page'+a+'"></div>'}function f(a){return'<div class="edit_wrapper" data-scene-id="'+a+'" style="position: relative; z-index: 1"></div>'}function b(a){return'<ul id="edit_area'+a+'" class="edit_area weebly-content-area weebly-area-active"></ul>'}j(92),g.exports={section:c,pageDiv:h,editDiv:f,ul:b}},function(b,a){},function(b,a,c){b.exports={load:function(d){return new Promise(function(f,e){switch(d){case"finger":c.e(1,function(){return f(c(94))});break;case"money":c.e(2,function(){return f(c(107))});break;case"scratch":c.e(3,function(){return f(c(111))});break;case"snowFly":c.e(4,function(){return f(c(113))});break;case"fallingObject":c.e(5,function(){return f(c(115))});break;case"fireWorks":c.e(6,function(){return f(c(116))});break;case"gradient":c.e(7,function(){return f(c(117))});break;case"glassBreak":c.e(8,function(){return f(c(120))});break;default:var g="Invalid Effect name: "+d;console.error(g),e(g)}})}}},,,function(G,k,z){function C(c,a){return new Promise(function(f,d){var e=new Image;a&&(e.crossOrigin="Anonymous"),e.onload=function(){f(this)},e.onerror=e.onabort=function(){d(new Error("download image fail"))},e.src=c})}function y(f,c,h){if(!f){return""}if("string"!=typeof f){throw new Error("Typeof src is not string")}var a=w(f);if(/^blob:/.test(f)){return f}if(f.startsWith("data:image/")){return f}if(/\.(ico|svg)$/i.test(f.split("?")[0])){return encodeURI(a)}if(!c){return encodeURI(/\?imageMogr2/.test(f)?a:a+"?imageMogr2/auto-orient")}var g=J(f,c,h);c=g.width,h=g.height;var d="imageMogr2/auto-orient/thumbnail/"+Math.round(c)+"x"+Math.round(h)+">";return a+=/\?imageMogr2/.test(f)?"|"+d:"?"+d,D()&&window.scene&&window.scene.id&&["1"].indexOf(window.scene.id.toString().charAt(window.scene.id.toString().length-1))>-1&&(a+=/\?imageMogr2/.test(a)?"/format/webp":"?imageMogr2/format/webp"),encodeURI(a)}function w(d){if(!d){return void console.error("add prefix invalid src")}if(/^blob:/.test(d)){return d}if(d.startsWith("data:image/")){return d}var c=window.location.protocol;if(d.startsWith("//")&&"file:"!==c&&(d=c+d),!d.startsWith("/")&&!d.startsWith("file://")){if(/^https?:\/\//.test(d)){for(var g,a=[F.BIND_USER_FILE,F.FREE_USER_FILE,F.VIP_USER_FILE],f=0;f<a.length;f++){if(g=a[f],d.startsWith(g)){d=d.replace(g,F.FILE);break}}}else{d=F.FILE+d}}return d}function J(d,c,g){/gif/.test(d)&&window.scene&&window.scene.ext&&window.scene.ext.yqc&&window.scene.ext.yqc.ad&&(c=0.75*c,g=0.75*g);var a=window.devicePixelRatio||1;c=E(c),g=E(g),c&&g?(c*=a,g*=a):(c*=a,g=c);var f=9999;return c>g?c>f&&(g*=1-(c-f)/c,c=f):c<g?g>f&&(c*=1-(g-f)/g,g=f):c>f&&(c=g=f),{width:c,height:g}}function q(c){var a=window.location.protocol;return c?/^http.*/.test(c)||/^blob:/.test(c)||c.startsWith("data:image/")?c:c.startsWith("//")&&"file:"==a?"http:"+c:c.startsWith("//")?c:"file:"==a&&c.startsWith("file://")?c:F.FILE+c:c}function I(d){var c=window.URL||window.webkitURL;try{var f=c.createObjectURL(d)}catch(a){return Promise.reject(new TypeError("不支持URL.createObjectURL"))}return j(f)}function j(a){return C(a).then(function(c){return{width:c.width,height:c.height,ratio:c.width/c.height}})}function B(g,d){if(g.shape){return Promise.resolve(g.shape)}var h=y(g.path,d||115),f=F.FILE+g.path,c=0;return C(f).then(function(a){return c=a.width/a.height,C(h)}).then(function(i){var a=window.devicePixelRatio||1,l=i.height/a;return{width:l*c,height:l,ratio:c}})}function x(c){var a=w(c);return a=a.replace(/\?.*$/,""),a+="?imageInfo",A({method:"GET",url:a})}function H(c){var a;return new Promise(function(d){b.parseMetaData(c,function(e){if(e&&e.exif&&1!==e.exif.get("Orientation")){var f={orientation:!0,canvas:!1};b(c,function(g){a=g.toDataURL(),d(a)},f)}else{a=b.createObjectURL(c),d(a)}},{maxMetaDataSize:262144,disableImageHead:!1})})}function D(){var a=!![].map&&0==document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp");return a}var F=z(22),E=Number.parseInt,A=z(21).$ajax,b=z(97);G.exports={loadImg:C,qiniuZoom:y,addPrefix:w,initEffectImgPath:q,getImgShapeByNativeFile:I,getImgShape:B,getImgShapeBySrc:j,getQiniuImgInfo:x,uploadImg:H}},function(b,a,c){b.exports=c(98),c(99),c(100),c(101),c(102),c(103),c(104)},function(c,b,d){var a;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f};!function(h){function g(l,k,p){var j,m=document.createElement("img");return m.onerror=function(n){return g.onerror(m,n,l,k,p)},m.onload=function(n){return g.onload(m,n,l,k,p)},"string"==typeof l?(g.fetchBlob(l,function(i){i?(l=i,j=g.createObjectURL(l)):(j=l,p&&p.crossOrigin&&(m.crossOrigin=p.crossOrigin)),m.src=j},p),m):g.isInstanceOf("Blob",l)||g.isInstanceOf("File",l)?(j=m._objectURL=g.createObjectURL(l),j?(m.src=j,m):g.readFile(l,function(i){var o=i.target;o&&o.result?m.src=o.result:k&&k(i)})):void 0}function e(j,i){!j._objectURL||i&&i.noRevoke||(g.revokeObjectURL(j._objectURL),delete j._objectURL)}var f=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;g.fetchBlob=function(j,i,k){i()},g.isInstanceOf=function(j,i){return Object.prototype.toString.call(i)==="[object "+j+"]"},g.transform=function(l,k,p,j,m){p(l,m)},g.onerror=function(l,k,p,j,m){e(l,m),j&&j.call(l,k)},g.onload=function(l,k,p,j,m){e(l,m),j&&g.transform(l,m,j,p,{})},g.createObjectURL=function(i){return !!f&&f.createObjectURL(i)},g.revokeObjectURL=function(i){return !!f&&f.revokeObjectURL(i)},g.readFile=function(l,k,m){if(window.FileReader){var j=new FileReader;if(j.onload=j.onerror=k,m=m||"readAsDataURL",j[m]){return j[m](l),j}}return !1},a=function(){return g}.call(b,d,b,c),!(void 0!==a&&(c.exports=a))}(window)},function(d,b,g){var a,f,c;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};!function(e){f=[g(98)],a=e,c="function"==typeof a?a.apply(b,f):a,!(void 0!==c&&(d.exports=c))}(function(i){var h=i.transform;i.transform=function(m,j,l,k,e){h.call(i,i.scale(m,j,e),j,l,k,e)},i.transformCoordinates=function(){},i.getTransformedOptions=function(p,l){var s,k,q,m,j=l.aspectRatio;if(!j){return l}s={};for(k in l){l.hasOwnProperty(k)&&(s[k]=l[k])}return s.crop=!0,q=p.naturalWidth||p.width,m=p.naturalHeight||p.height,q/m>j?(s.maxWidth=m*j,s.maxHeight=m):(s.maxWidth=q,s.maxHeight=q/j),s},i.renderImageToCanvas=function(p,x,l,m,k,j,v,y,q,w){return p.getContext("2d").drawImage(x,l,m,k,j,v,y,q,w),p},i.hasCanvasOption=function(j){return j.canvas||j.crop||!!j.aspectRatio},i.scale=function(B,G,K){function F(){var k=Math.max((P||q)/q,(A||J)/J);k>1&&(q*=k,J*=k)}function D(){var k=Math.min((R||q)/q,(C||J)/J);k<1&&(q*=k,J*=k)}G=G||{};var R,C,P,A,I,E,O,L,N,M,H,z=document.createElement("canvas"),e=B.getContext||i.hasCanvasOption(G)&&z.getContext,Q=B.naturalWidth||B.width,j=B.naturalHeight||B.height,q=Q,J=j;if(e&&(G=i.getTransformedOptions(B,G,K),O=G.left||0,L=G.top||0,G.sourceWidth?(I=G.sourceWidth,void 0!==G.right&&void 0===G.left&&(O=Q-I-G.right)):I=Q-O-(G.right||0),G.sourceHeight?(E=G.sourceHeight,void 0!==G.bottom&&void 0===G.top&&(L=j-E-G.bottom)):E=j-L-(G.bottom||0),q=I,J=E),R=G.maxWidth,C=G.maxHeight,P=G.minWidth,A=G.minHeight,e&&R&&C&&G.crop?(q=R,J=C,H=I/E-R/C,H<0?(E=C*I/R,void 0===G.top&&void 0===G.bottom&&(L=(j-E)/2)):H>0&&(I=R*E/C,void 0===G.left&&void 0===G.right&&(O=(Q-I)/2))):((G.contain||G.cover)&&(P=R=R||P,A=C=C||A),G.cover?(D(),F()):(F(),D())),e){if(N=G.pixelRatio,N>1&&(z.style.width=q+"px",z.style.height=J+"px",q*=N,J*=N,z.getContext("2d").scale(N,N)),M=G.downsamplingRatio,M>0&&M<1&&q<I&&J<E){for(;I*M>q;){z.width=I*M,z.height=E*M,i.renderImageToCanvas(z,B,O,L,I,E,0,0,z.width,z.height),O=0,L=0,I=z.width,E=z.height,B=document.createElement("canvas"),B.width=I,B.height=E,i.renderImageToCanvas(B,z,0,0,I,E,0,0,I,E)}}return z.width=q,z.height=J,i.transformCoordinates(z,G),i.renderImageToCanvas(z,B,O,L,I,E,0,0,q,J)}return B.width=q,B.height=J,B}})},function(d,b,g){var a,f,c;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};!function(e){f=[g(98)],a=e,c="function"==typeof a?a.apply(b,f):a,!(void 0!==c&&(d.exports=c))}(function(i){var h=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);i.blobSlice=h&&function(){var k=this.slice||this.webkitSlice||this.mozSlice;return k.apply(this,arguments)},i.metaDataParsers={jpeg:{65505:[]}},i.parseMetaData=function(l,u,k,q){k=k||{},q=q||{};var p=this,e=k.maxMetaDataSize||262144,m=!(window.DataView&&l&&l.size>=12&&"image/jpeg"===l.type&&i.blobSlice);!m&&i.readFile(i.blobSlice.call(l,0,e),function(A){if(A.target.error){return console.log(A.target.error),void u(q)}var y,B,x,z,o=A.target.result,n=new DataView(o),w=2,r=n.byteLength-4,v=w;if(65496===n.getUint16(0)){for(;w<r&&(y=n.getUint16(w),y>=65504&&y<=65519||65534===y);){if(B=n.getUint16(w+2)+2,w+B>n.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(x=i.metaDataParsers.jpeg[y]){for(z=0;z<x.length;z+=1){x[z].call(p,n,w,B,q,k)}}w+=B,v=w}!k.disableImageHead&&v>6&&(o.slice?q.imageHead=o.slice(0,v):q.imageHead=new Uint8Array(o).subarray(0,v))}else{console.log("Invalid JPEG file: Missing JPEG marker.")}u(q)},"readAsArrayBuffer")||u(q)},i.hasMetaOption=function(k){return k&&k.meta};var j=i.transform;i.transform=function(l,k,n,m,e){i.hasMetaOption(k)?i.parseMetaData(m,function(o){j.call(i,l,k,n,m,o)},k,e):j.apply(i,arguments)}})},function(d,b,g){var a,f,c;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};!function(e){f=[g(98),g(100)],a=e,c="function"==typeof a?a.apply(b,f):a,!(void 0!==c&&(d.exports=c))}(function(h){"fetch" in window&&"Request" in window&&(h.fetchBlob=function(j,k,e){return h.hasMetaOption(e)?fetch(new Request(j,e)).then(function(i){return i.blob()}).then(k)["catch"](function(i){console.log(i),k()}):void k()})})},function(d,b,g){var a,f,c;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};!function(e){f=[g(98),g(100)],a=e,c="function"==typeof a?a.apply(b,f):a,!(void 0!==c&&(d.exports=c))}(function(h){h.ExifMap=function(){return this},h.ExifMap.prototype.map={Orientation:274},h.ExifMap.prototype.get=function(i){return this[i]||this[this.map[i]]},h.getExifThumbnail=function(m,k,q){var j,p,l;if(!q||k+q>m.byteLength){return void console.log("Invalid Exif data: Invalid thumbnail data.")}for(j=[],p=0;p<q;p+=1){l=m.getUint8(k+p),j.push((l<16?"0":"")+l.toString(16))}return"data:image/jpeg,%"+j.join("%")},h.exifTagTypes={1:{getValue:function(j,i){return j.getUint8(i)},size:1},2:{getValue:function(j,i){return String.fromCharCode(j.getUint8(i))},size:1,ascii:!0},3:{getValue:function(j,i,k){return j.getUint16(i,k)},size:2},4:{getValue:function(j,i,k){return j.getUint32(i,k)},size:4},5:{getValue:function(j,i,k){return j.getUint32(i,k)/j.getUint32(i+4,k)},size:8},9:{getValue:function(j,i,k){return j.getInt32(i,k)},size:4},10:{getValue:function(j,i,k){return j.getInt32(i,k)/j.getInt32(i+4,k)},size:8}},h.exifTagTypes[7]=h.exifTagTypes[1],h.getExifValue=function(B,m,v,k,e,z){var C,y,A,q,j,x,w=h.exifTagTypes[k];if(!w){return void console.log("Invalid Exif data: Invalid tag type.")}if(C=w.size*e,y=C>4?m+B.getUint32(v+8,z):v+8,y+C>B.byteLength){return void console.log("Invalid Exif data: Invalid data offset.")}if(1===e){return w.getValue(B,y,z)}for(A=[],q=0;q<e;q+=1){A[q]=w.getValue(B,y+q*w.size,z)}if(w.ascii){for(j="",q=0;q<A.length&&(x=A[q],"\0"!==x);q+=1){j+=x}return j}return A},h.parseExifTag=function(k,p,j,m,l){var e=k.getUint16(j,m);l.exif[e]=h.getExifValue(k,p,j,k.getUint16(j+2,m),k.getUint32(j+4,m),m)},h.parseExifTags=function(q,l,v,k,u){var p,j,m;if(v+6>q.byteLength){return void console.log("Invalid Exif data: Invalid directory offset.")}if(p=q.getUint16(v,k),j=v+2+12*p,j+4>q.byteLength){return void console.log("Invalid Exif data: Invalid directory size.")}for(m=0;m<p;m+=1){this.parseExifTag(q,l,v+2+12*m,k,u)}return q.getUint32(j,k)},h.parseExifData=function(v,k,l,j,e){if(!e.disableExif){var p,w,m,q=k+10;if(1165519206===v.getUint32(k+4)){if(q+8>v.byteLength){return void console.log("Invalid Exif data: Invalid segment size.")}if(0!==v.getUint16(k+8)){return void console.log("Invalid Exif data: Missing byte alignment offset.")}switch(v.getUint16(q)){case 18761:p=!0;break;case 19789:p=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==v.getUint16(q+2,p)){return void console.log("Invalid Exif data: Missing TIFF marker.")}w=v.getUint32(q+4,p),j.exif=new h.ExifMap,w=h.parseExifTags(v,q,q+w,p,j),w&&!e.disableExifThumbnail&&(m={exif:{}},w=h.parseExifTags(v,q,q+w,p,m),m.exif[513]&&(j.exif.Thumbnail=h.getExifThumbnail(v,q+m.exif[513],m.exif[514]))),j.exif[34665]&&!e.disableExifSub&&h.parseExifTags(v,q,q+j.exif[34665],p,j),j.exif[34853]&&!e.disableExifGps&&h.parseExifTags(v,q,q+j.exif[34853],p,j)}}},h.metaDataParsers.jpeg[65505].push(h.parseExifData)})},function(d,b,g){var a,f,c;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};!function(e){f=[g(98),g(102)],a=e,c="function"==typeof a?a.apply(b,f):a,!(void 0!==c&&(d.exports=c))}(function(h){h.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},h.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},h.ExifMap.prototype.getText=function(j){var i=this.get(j);switch(j){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[j][i];case"ExifVersion":case"FlashpixVersion":if(!i){return}return String.fromCharCode(i[0],i[1],i[2],i[3]);case"ComponentsConfiguration":if(!i){return}return this.stringValues[j][i[0]]+this.stringValues[j][i[1]]+this.stringValues[j][i[2]]+this.stringValues[j][i[3]];case"GPSVersionID":if(!i){return}return i[0]+"."+i[1]+"."+i[2]+"."+i[3]}return String(i)},function(l){var k,m=l.tags,j=l.map;for(k in m){m.hasOwnProperty(k)&&(j[m[k]]=k)}}(h.ExifMap.prototype),h.ExifMap.prototype.getAll=function(){var j,i,k={};for(j in this){this.hasOwnProperty(j)&&(i=this.tags[j],i&&(k[i]=this.getText(i)))}return k}})},function(d,b,g){var a,f,c;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};!function(e){f=[g(98),g(99),g(100)],a=e,c="function"==typeof a?a.apply(b,f):a,!(void 0!==c&&(d.exports=c))}(function(k){var j=k.hasCanvasOption,m=k.hasMetaOption,h=k.transformCoordinates,l=k.getTransformedOptions;k.hasCanvasOption=function(e){return !!e.orientation||j.call(k,e)},k.hasMetaOption=function(e){return e&&e.orientation===!0||m.call(k,e)},k.transformCoordinates=function(p,y){h.call(k,p,y);var w=p.getContext("2d"),v=p.width,e=p.height,q=p.style.width,x=p.style.height,i=y.orientation;if(i&&!(i>8)){switch(i>4&&(p.width=e,p.height=v,p.style.width=x,p.style.height=q),i){case 2:w.translate(v,0),w.scale(-1,1);break;case 3:w.translate(v,e),w.rotate(Math.PI);break;case 4:w.translate(0,e),w.scale(1,-1);break;case 5:w.rotate(0.5*Math.PI),w.scale(1,-1);break;case 6:w.rotate(0.5*Math.PI),w.translate(0,-e);break;case 7:w.rotate(0.5*Math.PI),w.translate(v,-e),w.scale(-1,1);break;case 8:w.rotate(-0.5*Math.PI),w.translate(-v,0)}}},k.getTransformedOptions=function(p,w,o){var u,e,q=l.call(k,p,w),v=q.orientation;if(v===!0&&o&&o.exif&&(v=o.exif.get("Orientation")),!v||v>8||1===v){return q}u={};for(e in q){q.hasOwnProperty(e)&&(u[e]=q[e])}switch(u.orientation=v,v){case 2:u.left=q.right,u.right=q.left;break;case 3:u.left=q.right,u.top=q.bottom,u.right=q.left,u.bottom=q.top;break;case 4:u.top=q.bottom,u.bottom=q.top;break;case 5:u.left=q.top,u.top=q.left,u.right=q.bottom,u.bottom=q.right;break;case 6:u.left=q.top,u.top=q.right,u.right=q.bottom,u.bottom=q.left;break;case 7:u.left=q.bottom,u.top=q.right,u.right=q.top,u.bottom=q.left;break;case 8:u.left=q.bottom,u.top=q.left,u.right=q.top,u.bottom=q.right}return u.orientation>4&&(u.maxWidth=q.maxHeight,u.maxHeight=q.maxWidth,u.minWidth=q.minHeight,u.minHeight=q.minWidth,u.sourceWidth=q.sourceHeight,u.sourceHeight=q.sourceWidth),u}})},,,,,,,,,,,,,,,function(d,b){function g(){var i=navigator.userAgent,h=i.indexOf("Opera")>-1;return h?"Opera":i.indexOf("Firefox")>-1?"FF":i.indexOf("Chrome")>-1?"Chrome":i.indexOf("Safari")>-1?"Safari":i.indexOf("compatible")>-1&&i.indexOf("MSIE")>-1&&!h?"IE":void 0}function a(){var h={Chrome:"-webkit-",FF:"-moz-",Opera:"-o-",Safari:"-webkit-"};return h[g()]||"-webkit-"}function f(h){return h in document.documentElement.style}function c(k){var j=k.originalEvent,l=j.touches,h=l?j.changedTouches[0]:null;return k=h?h:k}d.exports={getBrowserPrefix:a,isSupportStyle:f,getEvent:c}},,,,,function(a0,aL,aR){var aW=aR(125),aQ=aR(152),aN=aR(168),a5=aR(172),aM=aR(175),a2=aR(177),aK=aR(181),aT=aR(187),aP=aR(189),a1=aR(197),aX=aR(200),aZ=aR(204),aY=aR(212),aS=aR(226),aJ=aR(232),aG=aR(236),a3=aR(237),aH=aR(239),aI=aR(243),aU=aR(247),ay=aR(251),au=aR(279),aj=aR(283),am=aR(286),a6=aR(287),ai=aR(292),aD=aR(294),an=aR(295),aA=aR(297),aO=aR(301),aV=aR(304),aq=aR(305),aC=aR(306),ak=aR(310),ap=aR(311),az=aR(315),ax=aR(318),aB=aR(321),aF=aR(324),ao=aR(328),at=aR(330),af=aR(331),ah=aR(333),av=aR(335),ag=aR(341),aw=aR(344),ac=aR(346),ad=aR(350),al=aR(353),ab=aR(356).EqxTurntable,ar=aR(372).EqxSmashEgg,a4=aR(379).EqxScratchcard,ae=aR(384),aa=aR(387).EqxNineSquare,aE=aR(398);a0.exports={EqxReward:aI,11:aI,EqxRandomContent:an,10:an,EqxRedPacket:aU,9:aU,EqxNewText:ai,7:ai,EqxHotNewText:aD,1:aD,EqxText:aj,2:aj,x:aj,EqxDeepShare:am,298:am,EqxReport:a6,299:a6,EqxBackground:aH,3:aH,EqxImage:aQ,4:aQ,EqxTelephone:aP,8:aP,EqxComment:aY,b:aY,EqxShape:a2,h:a2,EqxCount:aS,i:aS,EqxLink:aN,l:aN,EqxChart:aW,t:aW,EqxVideo:aK,v:aK,EqxInteractiveVideo:aT,o:aT,EqxImageSlider:aM,p:aM,EqxMap:a5,m:a5,EqxRandom:aZ,n:aZ,EqxSound:a1,s:a1,EqxPv:aX,d:aX,EqxAdvertise:a3,g:a3,EqxDownTime:aJ,e:aJ,EqxUpTime:aG,f:aG,EqxUploadImages:ax,upload:ax,EqxScore:aC,a:aC,EqxCheckbox:ak,c:ak,EqxRadio:ap,r:ap,EqxDropDownList:aA,z:aA,EqxInput:aO,5:aO,501:aO,EqxInputPhone:aq,502:aq,EqxInputEmail:aV,503:aV,504:aO,EqxSubmitButton:az,6:az,601:az,12:aB,EqxWxNickName:at,201:at,EqxWxProfile:af,401:af,EqxWxUploadImage:ah,403:ah,EqxWxSoundPlay:aF,w01:aF,EqxWxSoundRecord:ao,w02:ao,EqxTextVote:av,k:av,EqxImgVote:ag,j:ag,EqxDrawingBoard:aw,u:aw,EqxPhotoWall:ay,13:ay,14:ad,EqxPipButton:al,16:al,17:ac,EqxTurntable:ab,18:ab,EqxSmashEgg:ar,19:ar,EqxScratchcard:a4,20:a4,EqxRedPackets:ae,21:ae,EqxNineSquare:aa,22:aa,EqxQrcode:aE,23:aE,EqxLongTouchSavePicButton:au,24:au}},function(v,A,j){function m(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function g(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var y=function(){function a(h,d){for(var l=0;l<d.length;l++){var c=d[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),B=function q(h,c,p){null===h&&(h=Function.prototype);var a=Object.getOwnPropertyDescriptor(h,c);if(void 0===a){var l=Object.getPrototypeOf(h);return null===l?void 0:q(l,c,p)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(p)}};j(126);var x=j(23).$loadChart,z=j(127),k=j(76).toGoodStr,f=j(76).isBadStr,w=function(c){function a(h,i){m(this,a);var d=g(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,h,i));return $.extend(!0,d.$ability,{style:{advanceStyle:{border:!1,shadow:!1,paddingTop:!1,borderWidth:!1,borderRadius:!1,borderStyle:!1,borderColor:!1,boxShadowSize:!1,boxShadowBlur:!1,boxShadowColor:!1,boxShadowDirection:!1}},trigger:{self:!1},sound:!1,link:!1}),d.pieOptions={segmentShowStroke:!1,showTooltips:!1,scaleFontColor:"#000",legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><%if(segments[i].label){%><span style="background-color:<%=segments[i].fillColor%>"></span><%=segments[i].label%><%}%></li><%}%></ul>',animation:!1,onAnimationComplete:function(){var E=this.chart.ctx,u=this.segments;E.textAlign="start",E.textBaseline="middle";for(var G=0,p=0;p<u.length;p++){G+=parseFloat(u[p].value)}E.fillText(G,E.width/2-20,E.height/2,100);for(var p=0;p<u.length;p++){var F=u[p].startAngle+(u[p].endAngle-u[p].startAngle)/2,D=(u[p].outerRadius-u[p].innerRadius)/1.5+u[p].innerRadius,l=u[p].x+Math.cos(F)*D,C=u[p].y+Math.sin(F)*D;E.textAlign="center",E.textBaseline="middle",E.fillStyle=this.options.scaleFontColor,E.font="normal 12px Helvetica",E.fillText(u[p].value,l,C)}}},d.barOptions={showTooltips:!1,scaleShowLabels:!0,scaleShowGridLines:!1,scaleBeginAtZero:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><%if(datasets[i].label){%><span style="background-color:<%=datasets[i].fillColor%>"></span><%=datasets[i].label%><%}%></li><%}%></ul>',animation:!1,onAnimationComplete:function(){var l=this.chart.ctx;l.fillStyle=this.options.scaleFontColor,l.font="normal 12px Helvetica",l.textAlign="center",l.textBaseline="bottom",this.datasets.forEach(function(e){e.bars.forEach(function(n){l.fillText(n.value,n.x,n.y)})})}},d.lineOptions={showTooltips:!1,scaleShowLabels:!0,scaleShowGridLines:!1,scaleBeginAtZero:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><%if(datasets[i].label){%><span style="background-color:<%=datasets[i].pointColor%>"></span><%=datasets[i].label%><%}%></li><%}%></ul>',animation:!1,onAnimationComplete:function(){var l=this.chart.ctx;l.font=this.scale.font,l.fillStyle=this.options.scaleFontColor,l.textAlign="center",l.textBaseline="bottom",this.datasets.forEach(function(e){e.points.forEach(function(p,o){0===o?l.fillText(p.value,p.x+10,p.y-5):o===e.points.length-1?l.fillText(p.value,p.x-10,p.y-5):l.fillText(p.value,p.x,p.y-5)})})}},d}return b(a,c),y(a,[{key:"create$context",value:function(){var p=this.compJson,h=$('<div class="create-chart" id="chart-'+p.id+'"></div>');this.perfectJson(p);var u=document.createElement("h5");u.setAttribute("class","chart-title"),h.append(u);var d=this.canvas=document.createElement("canvas");d.id=p.id,d.setAttribute("ctype",p.type),h.append(d);var s=document.createElement("div");s.id="legend-"+p.id,h.append(s);var l=this;return this.initedChart=new Promise(function(e){x().then(function(){l.initChart(s,d,u,p),e()})["catch"](function(i){return console.error(i)})}),h}},{key:"perfectJson",value:function(p){function h(i){u(i),d(i),s(i)}function u(i){i&&i.chartTitle&&(i.chartTitle=k(i.chartTitle))}function d(i){i&&i.segments&&i.segments.length&&i.segments.forEach(function(n){f(n.label)&&(n.label=k(n.label))})}function s(i){i&&i.lengends&&i.lengends.length&&i.lengends.forEach(function(e,o){f(e)&&(i.lengends[o]=k(e))})}var l=p.properties;u(l),h(l.pieChart),h(l.barChart),h(l.lineChart)}},{key:"initChart",value:function(C,G,l,p){var h,d=p.properties.chartType,E=G.getContext("2d"),H=parseFloat(p.css.width),D=parseFloat(p.css.height);$(G).css("width",H+"px"),$(G).css("height",D/2+"px"),G.width=parseInt(window.getComputedStyle(G).width),G.height=parseInt(window.getComputedStyle(G).height),"pie"===d?h=this.pieChart=this.createPieChart(E):"bar"===d?h=this.barChart=this.createBarChart(E):"line"!==d&&"curve"!==d||(h=this.lineChart=this.createLineChart(E,d)),p.properties.chartTitle&&(l.innerHTML=p.properties.chartTitle),"pie"===d&&p.properties.pieChart&&(h=this.pieChart=this.setPieChartView(p,E,h),$(G).data("pieChart",h)),"bar"===d&&p.properties.barChart&&(h=this.barChart=this.setBarChartView(p,E,h),$(G).data("barChart",h)),"line"!==d&&"curve"!==d||!p.properties.lineChart||(h=this.lineChart=this.setLineChartView(p,E,h),$(G).data("lineChart",h)),C.innerHTML=h.generateLegend();var F=p.properties.legPosition;"position-align"===F?$(C).addClass("position-align"):"position-right"===F?$(C).addClass("position-right"):"position-none"===F&&$(C).addClass("position-none")}},{key:"getChartValue",value:function(E){for(var I,p=[],D=[],h=[],d=[],G="",J="",F="",H="",C=0;C<E.segments.length;C++){I=E.segments[C],G=isNaN(I.value)||I.value<0?"":I.value,J=isNaN(I.value1)||I.value1<0?"":I.value1,F=isNaN(I.value2)||I.value2<0?"":I.value2,H=isNaN(I.value3)||I.value3<0?"":I.value3,(I.label||G||J||F||H)&&(d.push(I.label),J=G||J,p.push(J),D.push(F),h.push(H))}return{data1:p,data2:D,data3:h,xLabels:d}}},{key:"setLineChartView",value:function(u,E,l){var p=u.properties.lineChart,h=this.getChartValue(p),d=[],D=[];l.datasets.forEach(function(i){d.push(i.strokeColor),D.push(i.fillColor)});var F={labels:h.xLabels,datasets:[{label:p.lengends[0],fillColor:D[0],strokeColor:d[0],pointColor:d[0],pointStrokeColor:"#fff",data:h.data1},{label:p.lengends[1],fillColor:D[1],strokeColor:d[1],pointColor:d[1],pointStrokeColor:"#fff",data:h.data2},{label:p.lengends[2],fillColor:D[2],strokeColor:d[2],pointColor:d[2],pointStrokeColor:"#fff",data:h.data3}]},C=l.options;return p.options&&p.options.scaleFontColor&&(C.scaleFontColor=p.options.scaleFontColor),l.destroy(),l=new Chart(E).Line(F,C),l.datasets.forEach(function(n){var i=!0;n.points.forEach(function(o){o.value&&(i=!1)}),i?n.points.length=0:n.points.forEach(function(o){o.value||(o.value=0)})}),l.update(),l}},{key:"setBarChartView",value:function(s,l,C){var h=C.options,u=s.properties.barChart,p=this.getChartValue(u),d={labels:p.xLabels,datasets:[{fillColor:u.fillColors[0],strokeColor:"rgba(0,0,0,0)",data:p.data1,label:u.lengends[0]},{fillColor:u.fillColors[1],strokeColor:"rgba(0,0,0,0)",data:p.data2,label:u.lengends[1]},{fillColor:u.fillColors[2],strokeColor:"rgba(0,0,0,0)",data:p.data3,label:u.lengends[2]}]};return u.options&&u.options.scaleFontColor&&(h.scaleFontColor=u.options.scaleFontColor),C.destroy(),new Chart(l).Bar(d,h)}},{key:"setPieChartView",value:function(C,l,E){var h=E.options,D="#000",u=C.properties.pieChart;u.options&&u.options.scaleFontColor&&(D=u.options.scaleFontColor),h.scaleFontColor=D;var d=this.getChartValue(u),p=d.data1.map(function(n,i){return{value:n,color:u.fillColors[i],label:d.xLabels[i]}});return E.destroy(),new Chart(l).Pie(p,h)}},{key:"getPixelRatio",value:function(h){var d=h.webkitBackingStorePixelRatio||h.mozBackingStorePixelRatio||h.msBackingStorePixelRatio||h.oBackingStorePixelRatio||h.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/d}},{key:"createPieChart",value:function(h){var d=[{value:300,color:"#57c7d4",label:"1月"},{value:150,color:"#3aa99e",label:"2月"},{value:100,color:"#f2a654",label:"3月"},{value:140,color:"#f96868",label:"4月"},{value:120,color:"#926dde",label:"5月"}],i=new Chart(h).Pie(d,this.pieOptions);return i}},{key:"createBarChart",value:function(h){var d={labels:["1月","2月","3月","4月","5月"],datasets:[{fillColor:"#62a8ea",strokeColor:"rgba(0,0,0,0)",data:[60,70,80,56,40],label:"图例1"},{fillColor:"#926dde",strokeColor:"rgba(0,0,0,0)",data:[80,56,40,93,112],label:"图例2"},{fillColor:"#f2a654",strokeColor:"rgba(0,0,0,0)",data:[160,86,140,123,23],label:"图例3"}]},i=new Chart(h).Bar(d,this.barOptions);return i}},{key:"createLineChart",value:function(p,h){var u=["rgba(146,109,222,1)","rgba(87,199,212,1)","rgba(242,166,84,1)"],d=u.map(function(i){return i.replace(/[^,]+(?=\))/,"0")});this.lineOptions.bezierCurve=!1,"curve"===h&&(d=d.map(function(i){return i.replace(/[^,]+(?=\))/,"0.2")}),this.lineOptions.bezierCurve=!0);var s={labels:["1月","2月","3月","4月","5月"],datasets:[{label:"图例1",fillColor:d[0],strokeColor:u[0],pointColor:u[0],pointStrokeColor:"#fff",data:[28,24,40,19,27]},{label:"图例2",fillColor:d[1],strokeColor:u[1],pointColor:u[1],pointStrokeColor:"#fff",data:[123,132,146,118,189]},{label:"图例3",fillColor:d[2],strokeColor:u[2],pointColor:u[2],pointStrokeColor:"#fff",data:[201,232,256,215,278]}]},l=new Chart(p).Line(s,this.lineOptions);return l}},{key:"updateSize",value:function(C,p){var t=parseFloat(p.width),h=parseFloat(p.height),d=this.canvas,E=d.getContext("2d"),D=this.compJson,F=D.properties.chartType,s=null;$(d).css("width",t+"px"),$(d).css("height",h/2+"px"),d.width=parseInt(window.getComputedStyle(d).width),d.height=parseInt(window.getComputedStyle(d).height),"pie"===F?s=this.pieChart=this.createPieChart(E):"bar"===F?s=this.barChart=this.createBarChart(E):"line"!==F&&"curve"!==F||(s=this.lineChart=this.createLineChart(E,F)),"pie"===F&&D.properties.pieChart&&(s=this.pieChart=this.setPieChartView(D,E,s),$(d).data("pieChart",s)),"bar"===F&&D.properties.barChart&&(s=this.barChart=this.setBarChartView(D,E,s),$(d).data("barChart",s)),"line"!==F&&"curve"!==F||!D.properties.lineChart||(s=this.lineChart=this.setLineChartView(D,E,s),$(d).data("lineChart",s)),B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateSize",this).call(this,C,p)}}]),a}(z);v.exports=w},function(b,a){},function(R,D,J){function N(b,a,c){return a in b?Object.defineProperty(b,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):b[a]=c,b}function I(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function G(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?b:a}function V(b,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}var F=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),T=function C(d,b,g){null===d&&(d=Function.prototype);var a=Object.getOwnPropertyDescriptor(d,b);if(void 0===a){var f=Object.getPrototypeOf(d);return null===f?void 0:C(f,b,g)}if("value" in a){return a.value}var c=a.get;if(void 0!==c){return c.call(g)}};J(128);var B=J(22),L=J(129),H=J(44).parse,S=J(96).qiniuZoom,O=J(130),Q=J(131),P=J(133),K=J(134),A=J(135),j=J(73),U=j.perfectComp,q=J(142),z=J(144),M=function(b){function a(d){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I(this,a);var c=G(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return c.$ability={style:{self:!0,compFont:{self:!1,fontFamily:!1,fontSize:!1,fontColor:!1,baseStyle:!1,lineHeight:!1,letterSpacing:!1},compStyle:{self:!0},commonStyle:{self:!0,title:!0,display:!1,status:!1,size:!0,position:!0,rotate:!0,opacity:!0,align:!0,zIndex:!0},advanceStyle:{self:!0,border:!0,shadow:!0,sizePos:!0,paddingTop:!0,borderWidth:!0,borderRadius:!0,borderStyle:!0,borderColor:!0,boxShadowSize:!0,boxShadowBlur:!0,boxShadowColor:!0,boxShadowDirection:!0,lock:!0,variable:!1}},anim:!0,trigger:{self:!0,click:!0,shake:!0,taphold:!0,slide:!0,mediaCanplay:!0,mediaEnded:!0,mediaPlaying:!0,animStart:!0,animIteration:!0,animEnd:!0},sound:!0,link:!0,flexLine:"n,ne,e,se,s,sw,w,nw,r"},c.compJson=d,c.id=c.compJson.id,c.type=c.compJson.type,c.displayed=!1,"string"==typeof c.compJson.properties&&(c.compJson.properties={}),c.compJson.properties.initType=c.compJson.properties.initType||0,c.anim=c.compJson.properties.anim||[],c.eqxLayer=f,c.eqxPage=c.eqxLayer.eqxPage,c.eqxScene=c.eqxPage.eqxScene,c.parent=c.eqxPage,c}return V(a,b),F(a,[{key:"getZIndex",value:function(){return this.css.zIndex}},{key:"setZIndex",value:function(c){this.css.zIndex=c}},{key:"isGroupItem",value:function(){return !1}},{key:"getFtEditableProps",value:function(){var c=this.FtEditableProps,d=T(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtEditableProps",this).call(this);return d.concat([c.color.backgroundColor,c.color.borderColor,c.color.boxShadowColor])}},{key:"isPropCanEdit",value:function(d){var c=this.FtEditableProps,f=this.compJson.css;switch(d){case c.color.backgroundColor:return f.backgroundColor;case c.color.borderColor:return f.borderWidth;case c.color.boxShadowColor:return f.boxShadowSize;case c.link.url:return this.hasTrigger("link");case c.internalLink.internalLink:return this.hasTrigger("page");case c.sound.soundSrc:return this.hasTrigger("sound");case c.telephone.number:return this.hasTrigger("tel")}return !0}},{key:"getFtValue",value:function(f){var d=this.FtEditableProps,g=this.compJson.css;switch(f){case d.content.content:return this.compJson.content;case d.color.color:return g.color;case d.color.backgroundColor:return g.backgroundColor;case d.color.borderColor:return g.borderColor;case d.color.boxShadowColor:return q.parseBoxShadow(g.boxShadow).color;case d.link.url:var c=this.hasTrigger("link");return c?this.getRawLinkUrl():"http://";case d.internalLink.internalLink:return c=this.hasTrigger("page"),c?c.targetContent:this.eqxPage.pageJson.id;case d.sound.soundSrc:return this.compJson.sound;case d.telephone.number:return c=this.hasTrigger("tel"),c?c.targetContent:0}}},{key:"hasTrigger",value:function(d){var c=this.triggerManager;switch(d){case"link":return c.findEqxItemTriggerItem(this,"click","link");case"internalLink":case"page":return c.findEqxItemTriggerItem(this,"click","page");case"sound":case"video":return c.findEqxItemTriggerItem(this,"click","play");case"tel":return c.findEqxItemTriggerItem(this,"click","phone")}}},{key:"updateJson",value:function(c){return c=JSON.parse(JSON.stringify(c)),U(c,this.eqxScene.sceneJson,this.eqxPage.pageJson),delete c.id,delete c.num,delete c.pageId,delete c.sceneId,delete c.type,Object.assign(this.compJson,c),this}},{key:"getAbsolutePos",value:function(){var g=this.css,d=g.width,k=g.height,c=g.top,h=g.left,f=g.transform;return{width:parseFloat(d),height:parseFloat(k),top:parseFloat(c),left:parseFloat(h),transform:f}}},{key:"isFunTemplate",value:function(){var c=this.findTopGroup();return c!==this&&c.isFunTemplate()}},{key:"toJson",value:function(){return JSON.parse(JSON.stringify(this.compJson))}},{key:"isEditLock",value:function(){return this.getProp("editLock")}},{key:"updateDisplayStatus",value:function(){}},{key:"getImgSrc",value:function(f){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=this.eqxScene.config.disableQiniuZoom,c=d.width,g=d.height;return h?S(f):S(f,c,g)}},{key:"getName",value:function(){return this.compJson.name||"组件"}},{key:"getCss",value:function(d){var c=this.compJson.css;return d?c[d]:c}},{key:"toString",value:function(){var f=this.compJson,d=f.pageId,g=f.id,c=f.num;return"page-"+d+"-comp-"+g+"-num-"+c}},{key:"getProp",value:function(c){return this.compJson.properties[c]}},{key:"setProps",value:function(d){var c=this,f=this.compJson.properties;Object.keys(d).forEach(function(e){var g=d[e];"sound"===e?c.compJson.sound=g:null===g||void 0===g||""===g?delete f[e]:f[e]=g})}},{key:"setProp",value:function(d,c){this.setProps(N({},d,c))}},{key:"update$li",value:function(c){c&&(this.updateCss(c),this.$li&&this.$li.css(c))}},{key:"update$boxDiv",value:function(d){var c=this;this.updateCss(d),this.$boxDiv.css(d),Object.keys(d).forEach(function(e){"fontSize"===e&&c.$boxDiv.css({"font-size":d[e]+"px"}).find("#"+c.compJson.id).css({"font-size":d[e]+"px"})})}},{key:"onResize",value:function(d,c,f){}},{key:"rotate",value:function(c){this.onRotate("rotateZ("+c+"deg)")}},{key:"getTransform",value:function(){return this.compJson.css.transform||"rotateZ(0)"}},{key:"updateTransform",value:function(c){this.compJson.css.transform=c,this.$item.css({transform:c})}},{key:"updateCss",value:function(d){if(d){var c=this.compJson.css;Object.keys(d).forEach(function(e){c[e]=d[e]})}}},{key:"updateProp",value:function(d,c){var f=this.compJson.properties;f[d]=c}},{key:"updateTranslated3dZ",value:function(c){this.$li&&this.$li.css(c)}},{key:"updatePos2",value:function(d,c){throw new Error("updatePos2 deprecated")}},{key:"updateSize",value:function(d,c){this.updateCss(c),this.autoSize()}},{key:"resetStyle",value:function(){var d={opacity:1,transform:"rotateZ(0deg)"};this.update$li(d);var c={fontSize:"24px",color:"#676767",backgroundColor:"",fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",letterSpacing:0,borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",borderRadius:0,borderRadiusPerc:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:0,borderTopLeftRadius:0,paddingBottom:0,paddingTop:0,boxShadow:"0px 0px 0px rgba(0,0,0,0.5)",boxShadowDirection:0,boxShadowSize:0,transform:"none",opacity:1};this.update$boxDiv(c)}},{key:"render",value:function(){if(this.rendered){return this.$li}this.$li&&(this.$li.remove(),this.$li=null);var f=this.$li=this.create$li(),d=this.eqxScene.config,g=d.disableCompEvent,c=d.disableTrigger;return g||this.addEventListeners(),c||this.addSoundEvent(),this.addAnimationClass(),this.rendered=!0,f}},{key:"create$li",value:function(){function av(){var f=ae.GSensor,d=void 0===f?{}:f;if(d&&d.isUsed&&"edit"!==Z.mode){var c="positive"===d.direction?d.distance:-d.distance;ac.addClass("layer"),ac.attr("data-depth",c),console.log("初始化组件重力感应",am)}}function ag(v,E){if(E&&E.length){return""}var h="",m=/rotateZ\((-?\d*\.?\d*)(deg|)\)/.exec(E),g=/translate3d\((.*?)\)/.exec(E);m&&m.length&&(h+=m[0]+" ");var d=v.eqxPage.pageJson,x=d.properties.oneShot,aB=void 0===x?{}:x,w=v.eqxScene.config,y=v.compJson.properties.translate3dZ;if(aB.isOpen&&"view"===w.mode){if(g&&g.length){var k=/translate3d\((-?\d*(?:px)?),\s?(-?\d*(?:px)?),/,f=y?k.exec(g[0])[0]+y+"px)":g[0]}else{f="translate3d(0px, 0px, "+-(y||0)+"px)"}}return h+=f||""}var am=this,aq=am.eqxScene,al=am.compJson,aj=al.id,az=al.num,ah=al.type,ax=al.css,ae=al.properties,aw=al.sound,ar=ax.zIndex,au=ax.transform,at=ax.display,an=ax.opacity,ad="string"!=typeof au?"":au,Z=aq.config,ay=ag(am,ad),ab=am.getAbsolutePos(),ac=am.$li=$(H(L,{id:aj,num:az,type:ah})),ao=am.$boxDiv=ac.find(".element-box"),af=am.$boxContentDiv=ao.find(".element-box-contents"),aa={};ae.lock&&ac.addClass("alock"),ac.css({zIndex:ar,transform:ay,display:at,opacity:an}).attr("abs-pos","l-"+ab.left+"-t-"+ab.top+"-w-"+ab.width+"-h-"+ab.height).attr("eqx-id",aj),am._updateSize(),am.addClassToLi(ac),ao.css(Object.assign({},ax,{width:"100%",height:"100%",transform:"none",fontFamily:"",opacity:"",marginTop:"0px",marginBottom:"0px"}));var p=ad.indexOf("rotateX(180deg)")>-1,W=ad.indexOf("rotateY(180deg)")>-1;ax.turnOver||(p&&(ax.turnOver="rotateX(180deg)"),W&&(ax.turnOver=(ax.turnOver||"")+" rotateY(180deg)")),aa.transform=ax.turnOver,af.css(aa),aw&&aw.id&&"edit"===Z.mode&&am.addSoundIcon(),this.$contentsDiv=af,this.$context=this.create$context(),af.append(this.$context);var aA=aq.variableComps,l=aA.texts,X=aA.inputs,ai=aA.images,ak=aA.uploads;if(["501","502","503","504"].indexOf(ah.toString())!==-1){X.push(am)}else{if("7"===ah.toString()){var ap=ae["var"];ap&&ap.isUsed&&l.push(am)}else{if("upload"===ah){ak.push(am)}else{if("4"===ah.toString()){var Y=ae["var"];Y&&Y.isUsed&&ai.push(am)}}}}return av(),ac}},{key:"removeSoundIcon",value:function(){this.$soundIcon&&(this.$soundIcon.remove(),this.$soundIcon=null)}},{key:"addSoundIcon",value:function(){this.removeSoundIcon(),this.$soundIcon=$('<div class="comp-icon eqf-bell-f"></div>'),this.$boxDiv.after(this.$soundIcon)}},{key:"destroy",value:function(){this.eleHide(),this.$li.remove(),this.$li=null}},{key:"create$context",value:function(){return $()}},{key:"addClassToLi",value:function(c){}},{key:"addEventListeners",value:function(){this.bindAfterRenderEvent(this.$li,this.compJson),this.addAnimSoundEvent(),this.addInteractiveVideoEvent()}},{key:"eleHide",value:function(){this.$li&&!this.canAddHideIcon()&&this.$li.css({display:"none"}),this.$li&&this.canAddHideIcon()&&this.addHideIcon(),this.soundAgent&&this.soundAgent.update(new O("hide")),this.anim&&this.anim.length&&this.anim.forEach(function(c){c.sound&&c.soundAgent&&c.soundAgent.update(new O("stop"))}),this.stopAnimation(),this.flux&&this.flux.playing&&this.flux.stop()}},{key:"canAddHideIcon",value:function(){return"edit"===this.eqxScene.config.mode&&this.eqxPage.trigger.compHasTrigger(this.eqxPage.pageJson.properties.triggerGroup,this.compJson.id)}},{key:"addHideIcon",value:function(){this.$hideIcon=$('<div class="comp-icon" style="z-index: 999;"><em style="font-size: 14px" class="eqf-hidden-f"></em></div>'),this.$li.append(this.$hideIcon)}},{key:"removeHideIcon",value:function(){this.$hideIcon&&(this.$hideIcon.remove(),delete this.$hideIcon)}},{key:"addAnimationClass",value:function(){this.eqxCompAnim=new z(this,{}),this.eqxCompAnim.addAnimClassify()}},{key:"stopAnimation",value:function(){this.eqxCompAnim.stopAnimation()}},{key:"startAnimation",value:function(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=f.index,h=f.maxCount;if(f.reset){var c=this,g=function(){c.stopAnimation()}}this.eqxCompAnim.startAnimation({animIndex:d,maxCount:h,callback:g})}},{key:"previewAnimation",value:function(c){c&&this.eqxCompAnim.previewAnimation(c)}},{key:"eleShow",value:function(){if(this.eqxScene.config.disableCompAnim){var c=this.compJson.properties.anim||[];c[0]&&"typer"===c[0].type&&this.$context.css({opacity:1})}else{this.startAnimation()}this.$li&&this.$li.css({display:"block"}),this.$li&&this.canAddHideIcon()&&this.removeHideIcon(),this.flux&&this.compJson.properties.autoPlay&&(this.flux.stop(),this.flux.start())}},{key:"addInteractiveVideoEvent",value:function(){"o"===this.compJson.type&&this.compJson.src&&(this.interactiveVideoAgent=new K(this,this.eqxScene.soundManager))}},{key:"getLinkUrl",value:function(c){return/eqs\/link\?id=\d+&url=/.test(c)?c:(/^http:|^https:|^ftp:/.test(c)||(c="http://"+c),B.SERVER_1+"eqs/link?id="+this.eqxScene.meta.id+"&url="+encodeURIComponent(c))}},{key:"getRawLinkUrl",value:function(){var f=this.hasTrigger("link");if(f){var d=f.targetContent,g=/eqs\/link\?id=\d+&url=/.exec(d);if(g){var c=d.substr(g[0].length+g.index);return decodeURIComponent(c)}}}},{key:"addSoundEvent",value:function(){this.compJson.sound&&(this.soundAgent=new Q(this,this.eqxScene.soundManager))}},{key:"addAnimSoundEvent",value:function(){var d=this,c=this.anim;c&&c.length&&c.forEach(function(e){e.sound&&(e.soundAgent=new P(d,e,d.eqxScene.soundManager))})}},{key:"autoAdjustSize",value:function(){return{}}},{key:"bindAfterRenderEvent",value:function(d,c){}},{key:"$item",get:function(){return this.$li}},{key:"css",get:function(){return this.compJson.css}},{key:"zIndex",get:function(){return this.css.zIndex},set:function(c){return this.css.zIndex=c,c}},{key:"isEditLocked",get:function(){var d=this.compJson||{},c=d.properties;return c.editLock},set:function(d){var c=this.compJson||{},f=c.properties;f.editLock=d}},{key:"initType",get:function(){var d=this.compJson||{},c=d.properties;return c.initType},set:function(d){var c=this.compJson||{},f=c.properties;f.initType=d}}]),a}(A);R.exports=M},function(b,a){},function(b,a){b.exports='<li id="inside_#{id}" num="#{num}" ctype="#{type}" class="item item-comp" style="position: absolute"><div class="element-box" style="width: 100%; height: 100%"><div class="element-box-contents" style="width: 100%; height: 100%"></div></div></li>'},function(c,b){function f(h,g){if(!(h instanceof g)){throw new TypeError("Cannot call a class as a function")}}var a=function d(h){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,d),this.type=h,this.data=g};c.exports=a},function(v,A,j){function m(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function g(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var y=function(){function a(h,d){for(var l=0;l<d.length;l++){var c=d[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),B=j(24).resolveUrl,x=j(22),z=j(132),k=j(25).mobilecheck,f=j(25).isWeixin,w=j(82).getWxJSSDK,q=function(c){function a(h,i){m(this,a);var d=g(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,h,i));return d.manager=i,d.soundJson=d.master.compJson.sound,d.type=1,d.init(),d.register(),f()&&(d.wxJssdk=w()),d}return b(a,c),y(a,[{key:"init",value:function(){this.audio=new window.Audio,this.audio.src=B(x.FILE,this.soundJson.src)}},{key:"update",value:function(d){switch(d.type){case"stop":case"hide":this.stopPlay();break;case"down":this.audio.volume=0.1;break;case"restore":this.audio.volume=1;break;case"reset":this.audio.currentTime=0}}},{key:"addEventListeners",value:function(){var h=this,d=k()?"touchend":"click";this.master.$li.on(d,function(){return h.audio.paused?h.startPlay():h.stopPlay()}),$(this.audio).on("ended",function(){return h.manager.onEnd(h)})}},{key:"startPlay",value:function(){if(this.audio.paused){var d=this;f()?this.wxJssdk.then(function(){wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){d.audio.play()}})}):this.audio.play(),this.manager.onPlay(this)}}},{key:"stopPlay",value:function(){this.audio.paused||(this.audio.pause(),this.manager.onEnd(this))}}]),a}(z);v.exports=q},function(c,b){function f(h,g){if(!(h instanceof g)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function g(k,j){for(var l=0;l<j.length;l++){var h=j[l];h.enumerable=h.enumerable||!1,h.configurable=!0,"value" in h&&(h.writable=!0),Object.defineProperty(k,h.key,h)}}return function(h,j,e){return j&&g(h.prototype,j),e&&g(h,e),h}}(),d=function(){function g(h,e){f(this,g),this.master=h,this.manager=e}return a(g,[{key:"register",value:function(){this.manager.add(this)}},{key:"deregister",value:function(){this.manager.remove(this)}},{key:"update",value:function(h){}}]),g}();c.exports=d},function(j,q,f){function h(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function d(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var m=function(){function a(o,l){for(var r=0;r<l.length;r++){var c=l[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),v=f(132),k=f(24).resolveUrl,p=f(22),g=function(c){function a(o,s,l){h(this,a);var i=d(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,o,l));return i.manager=l,i.soundJson=s.sound,i.type=2,i.init(),i.addEventListeners(),i.register(),i}return b(a,c),m(a,[{key:"init",value:function(){this.audio=new Audio,this.audio.src=k(p.FILE,this.soundJson.path),this.audio.loop=!0}},{key:"startPlay",value:function(){this.audio.paused&&(this.audio.play(),this.manager.onPlay(this))}},{key:"stopPlay",value:function(){this.audio.paused||(this.audio.pause(),this.audio.currentTime=0,this.manager.onEnd(this))}},{key:"addEventListeners",value:function(){var i=this;$(i.audio).on("AnimSound.start",function(e,l){i.startPlay()}).on("AnimSound.end",function(e,l){i.stopPlay()})}},{key:"update",value:function(i){switch(i.type){case"stop":this.stopPlay();break;case"play":this.startPlay();break;case"down":this.audio.volume=0.1;break;case"restore":this.audio.volume=1}}}]),a}(v);j.exports=g},function(h,l,f){function g(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function d(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var k=function(){function a(p,o){for(var q=0;q<o.length;q++){var c=o[q];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(p,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}(),m=f(132),j=function(c){function a(o,p){g(this,a);var i=d(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,o,p));return i.manager=p,i.compJson=i.master.compJson,i.type=5,i.addEventListeners(),i.register(),i}return b(a,c),k(a,[{key:"addEventListeners",value:function(){var i=this;this.master.$context.on("ended",function(){i.end()})}},{key:"play",value:function(){this.master.$context[0].play(),this.manager.onPlay(this)}},{key:"end",value:function(){this.master.$context[0].pause(),this.manager.onEnd(this)}}]),a}(m);h.exports=j},function(k,w,g){function j(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var f=function(){function a(o,l){for(var p=0;p<l.length;p++){var c=l[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),b=g(136),q=g(138),x=g(139),m=g(140),v=m.FtEditableProps,h=g(141),d=function(){function a(){j(this,a),this.eqxLayer=null,this.parent=null,this.group=null,this.eventMap={},this.FtEditableProps=v}return f(a,[{key:"isOrphan",value:function(){return !this.eqxLayer||!this.eqxLayer.eqxItems.includes(this)}},{key:"destroy",value:function(){this.eqxLayer=null,this.parent=null,this.group=null}},{key:"isDirectItem",value:function(){return this.eqxLayer.getDirectItems().includes(this)}},{key:"isEqxLayer",value:function(){return !1}},{key:"updateTop",value:function(c){this.updateCss({top:this.css.top+c}),this.autoSize()}},{key:"getFtEditableProps",value:function(){return[]}},{key:"getFtValue",value:function(c){return 0}},{key:"filterEditableProps",value:function(i){var c=this;return(i||this.getFtEditableProps()).filter(function(l){return c.isPropCanEdit(l)})}},{key:"isPropCanEdit",value:function(){return !1}},{key:"toJson",value:function(){}},{key:"isFunTemplate",value:function(){return !1}},{key:"hasFtRules",value:function(){var c=this.eqxPage.ftManager.getEqxItemRelativeFtRules(this);return c.length>0}},{key:"updateSize",value:function(){}},{key:"getRotate",value:function(){var i=this.getTransform(),c=b.parseTransform(i);return c.rotate}},{key:"getTransform",value:function(){}},{key:"updateTransform",value:function(c){}},{key:"autoZIndex",value:function(){return this.$item&&this.$item.css({zIndex:this.getZIndex()}),this}},{key:"getZIndex",value:function(){}},{key:"onResizeStart",value:function(){return this.oldAbsolutePosition=this.getAbsolutePos(),this.oldAbsolutePosition}},{key:"onResize",value:function(){}},{key:"onResizeEnd",value:function(){this.oldAbsolutePosition=null}},{key:"onRotateStart",value:function(){return this.oldTransform=this.getTransform(),this.oldTransform}},{key:"onRotate",value:function(i,c){isNaN(i)||(i="rotateZ("+i+"deg)"),this.oldTransform||this.onRotateStart(),this.updateTransform(i),this.autoSize(c)}},{key:"onRotateEnd",value:function(){this.oldTransform=null}},{key:"updateLeftTop",value:function(p,l){var s=this.oldPos,c=s.left,r=s.top;this.updateCss({left:c+p,top:r+l})}},{key:"onMoveBefore",value:function(){this.oldPos=JSON.parse(JSON.stringify(this.getAbsolutePos()))}},{key:"canMove",value:function(){return !this.isEditLocked}},{key:"onMove",value:function(i,c){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.canMove()&&(this.oldPos||this.onMoveBefore(),this.updateLeftTop(i,c),this.autoSize())}},{key:"onMoveEnd",value:function(){this.oldPos=null}},{key:"moveToX",value:function(i){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.moveTo(i,void 0,c)}},{key:"moveToY",value:function(i){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.moveTo(void 0,i,c)}},{key:"moveTo",value:function(o,l){var p=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c={};void 0!==o&&(c.left=o),void 0!==l&&(c.top=l),this.updateCss(c),p&&this.autoSize()}},{key:"instantMove",value:function(i,c){var l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.onMoveBefore(),this.onMove(i,c,l),this.onMoveEnd()}},{key:"instantRotate",value:function(c){this.onResizeStart(),this.onRotate(c),this.onRotateEnd()}},{key:"update$item",value:function(c){this.updateCss(c),this._updateSize()}},{key:"updateCss",value:function(){}},{key:"isSubItemOf",value:function(){for(var o=this,l=arguments.length,p=Array(l),c=0;c<l;c++){p[c]=arguments[c]}return p.some(function(e){for(var i=o;i.group;){if(i.group===e){return !0}i=i.group}return !1})}},{key:"findTopGroup",value:function(){for(var c=this;c.group;){c=c.group}return c}},{key:"autoSizeTopDown",value:function(){this._updateSize(),this.fire("autoSizeTopDown.after")}},{key:"_updateSize",value:function(){return this.$item?(this.$item.css(this.getRelativePos()),this):null}},{key:"getRelativePos",value:function(){var R=this.getAbsolutePos(),F=R.width,J=R.height,N=R.top,I=R.left,G=R.transform,T=this.group;if(T){var C=T.getAbsolutePos(),L=C.left,H=C.top,S=C.width,O=C.height,Q=C.transform,P=b.parseTransform(Q).rotate,K=b.parseTransform(G).rotate;if(P){var B=new q(L,H,S,O),r=B.center(),U=new q(I,N,F,J),z=U.center(),A=z.pointRotate2Point(r,-P),M=A.x-z.x,D=A.y-z.y;U.move(M,D),I=U.p1.x,N=U.p1.y}I-=L,N-=H,G="rotate("+(K-P)+"deg)"}return{width:F,height:J,top:N,left:I,transform:G}}},{key:"updateMarker",value:function(){if(!this.$marker){var p=-25,l=-20,s="yellow";this.isGroupItem()&&(p=-40,l=-30),this.$marker=$('<div class="item-marker"></div>').css({width:70,fontSize:11,position:"absolute",top:l,left:p,background:s}),this.$item.append(this.$marker)}var c=this.getAbsolutePos(),r=(/\d+/.exec(this.getTransform())||[])[0]||0;this.$marker.html("("+parseInt(c.left)+","+parseInt(c.top)+") "+r+"°<br>w"+parseInt(c.width)+" h"+parseInt(c.height))}},{key:"getBoundingRect",value:function(){var u=this.getAbsolutePos(),p=u.width,A=u.height,l=u.top,y=u.left,r=u.transform,z=b.parseTransform(r).rotate;return new q(y,l,p,A).rotate(z).getBoundingRect()}},{key:"autoSize",value:function(c){this.findTopGroup().autoSizeTopDown(c)}},{key:"on",value:function(i,c){return this.eventMap[i]?this.eventMap[i].push(c):this.eventMap[i]=[c],this}},{key:"off",value:function(p){if("string"==typeof p){this.eventMap[p].length=[]}else{for(var l=Object.values(this.eventMap),s=0;s<l.length;s++){var c=l[s],r=c.indexOf(p);r>-1&&c.splice(r,1)}}return this}},{key:"fire",value:function(o){for(var l=arguments.length,p=Array(l>1?l-1:0),c=1;c<l;c++){p[c-1]=arguments[c]}(this.eventMap[o]||[]).forEach(function(i){return i.apply(void 0,p)})}},{key:"isSiblingOf",value:function(c){return this.parent&&c.parent&&this.parent===c.parent}},{key:"sameLayer",value:function(c){return this.eqxLayer===c.eqxLayer}},{key:"containsPoint",value:function(D,H){var y=this.getAbsolutePos(),A=y.width,s=y.height,F=y.top,G=y.left,z=y.transform,r=b.parseTransform(z).rotate,E=new x(G,F),B=new x(G+A,F+s),C=new q(E,B).rotate(r);return C.containsPoint(new x(D,H))}},{key:"centerInRect",value:function(p){var l=this.getAbsolutePos(),s=l.left+l.width/2,c=l.top+l.height/2,r=p.p1;return s>r.x&&s<r.x+p.width&&c>r.y&&c<r.y+p.height}},{key:"getAbsolutePos",value:function(){}},{key:"isGroupItem",value:function(){}},{key:"ft",get:function(){return this._ft||(this._ft=new h(this)),this._ft}},{key:"triggerManager",get:function(){return this.eqxLayer.eqxPage.triggerManager}},{key:"ftManager",get:function(){return this.eqxLayer.eqxPage.ftManager}},{key:"isEditLocked",get:function(){},set:function(c){}}],[{key:"findTopItems",value:function(i){var c=[];return i.forEach(function(l){var o=l.findTopGroup();c.includes(o)||c.push(o)}),c}},{key:"calItemsBoundingRect",value:function(z){for(var C=z[0],u=C.getBoundingRect(),y=u.width,p=u.height,l=u.left,B=u.top,D=1;D<z.length;D++){C=z[D];var A=C.getBoundingRect();A.left<l&&(y+=l-A.left,l=A.left),A.top<B&&(p+=B-A.top,B=A.top),y=Math.max(A.left+A.width-l,y),p=Math.max(A.height+A.top-B,p)}return{width:y,height:p,left:l,top:B}}}]),a}();k.exports=d},function(I,q,B){function E(a){return x(a,b)}function A(a){return x(a,parseFloat)}function x(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments[1];c+="";var d={rotate:0,rotateY:0,rotateX:0,scale:{x:1,y:1},translate3d:{x:0,y:0,z:0}};return c=c.replace(F,function(g,f){d.rotate=a(f)}),c=c.replace(G,function(g,f){d.rotateY=a(f)}),c=c.replace(H,function(g,f){d.rotateX=a(f)}),c=c.replace(C,function(g,f,h){d.scale={x:a(f),y:a(h)}}),c.replace(j,function(h,f,l,g){d.translate3d={x:a(f),y:a(l),z:a(g)}}),d}function L(a){return void 0!==a.rotate?"rotateZ("+a.rotate+"deg)":""}function w(d){if(d){var c=d.x,g=void 0===c?1:c,a=d.y,f=void 0===a?1:a;return"scale("+g+", "+f+")"}return""}function K(h){if(h){var f=h.x,m=void 0===f?0:f,d=h.y,l=void 0===d?0:d,g=h.z,c=void 0===g?0:g;return"translate3d("+m+"px, "+l+"px, "+c+"px)"}return""}function k(d){if(d){var c=d.match(/translate3d\((.*?)\)/),f=c&&c[1].split(","),a=c&&parseInt(f[2]);return a}return""}function D(c){var a=[],d=c.translate3d;return !d||0===d.x&&0===d.y&&0===d.z||a.push(K(c.translate3d)),null!==c.rotate&&void 0!==c.rotate&&a.push(L(c)),d=c.scale,!d||1===d.x&&1===d.y||a.push(w(c.scale)),z(a.join(" "))}function z(a){return a.trim().replace(/\s{2,}/," ")}function J(c,a){var f=E(c),d=Object.assign({},f,a);return D(d)}var F=/rotateZ\((-?\d*\.?\d*)(deg|)\)/,H=/rotateX\((-?\d*\.?\d*)(deg|)\)/,G=/rotateY\((-?\d*\.?\d*)(deg|)\)/,C=/scale\((-?\d+(?:\.\d+)?),\s?(\d+(?:\.\d+)?)\)/,j=/translate3d\((-?\d*(?:px)?),\s?(-?\d*(?:px)?),\s?(-?\d*(?:px)?)\)/,b=B(137).toInt;I.exports={scaleReg:C,translate3dReg:j,parseTransform:E,getRotateStr:L,getScaleStr:w,getTranslate3dStr:K,getTransformStr:D,trimTransformStr:z,updateTransformStr:J,parseTransformInFloat:A,getTranslateZStr:k}},function(h,d){function k(i,a){return"number"!=typeof i&&(i=parseFloat(i)),parseFloat(i.toFixed(a))}function c(a){return k(a,0)}function j(a){return k(a,1)}function g(a){return k(a,2)}function b(a){return a.toFixed(2)}function f(a){return(!a||a<0)&&(a=0),a<1024?a+" KB":(a/=1024,a<1024?b(a)+" MB":(a/=1024,a<1024?b(a)+" GB":(a/=1024,b(a)+" TB")))}h.exports={toFixed:k,toFixed1:j,toFixed2:g,toInt:c,size:f}},function(h,d,k){function c(i,a){if(!(i instanceof a)){throw new TypeError("Cannot call a class as a function")}}var j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(o,m){for(var p=0;p<m.length;p++){var l=m[p];l.enumerable=l.enumerable||!1,l.configurable=!0,"value" in l&&(l.writable=!0),Object.defineProperty(o,l.key,l)}}return function(l,m,e){return m&&a(l.prototype,m),e&&a(l,e),l}}(),b=k(139),f=function(){function a(){c(this,a);var x=null,m=null;switch(arguments.length){case 1:var e=arguments[0];"object"===("undefined"==typeof e?"undefined":j(e))&&(e.p1&&e.p2?(x=new b(e.p1),m=new b(e.p2)):void 0!==e.left&&null!==e.left&&(x=new b(e.left,e.top),m=new b(e.left+e.width,e.top+e.height)));break;case 2:x=new b(arguments[0]),m=new b(arguments[1]);break;case 3:arguments[1] instanceof b?(x=new b(arguments[0]),m=new b(arguments[1]),this.angle=arguments[2]):isNaN(arguments[1])||(x=new b(arguments[0]),m=new b(x.x+arguments[1],x.y+arguments[2]));break;case 4:x=new b(arguments[0],arguments[1]),m=new b(x.x+arguments[2],x.y+arguments[3]);break;default:throw new Error("Invalid arguments for Rect")}if(this.angle){this.p1=x,this.p2=m;var y=this.p1.transform2RotateCoord(this.angle),v=this.p2.transform2RotateCoord(this.angle);this.nw=this.p1,this.ne=new b(v.x,y.y).transform2RotateCoord(-this.angle),this.se=this.p2,this.sw=new b(y.x,v.y).transform2RotateCoord(-this.angle),this.width=this.nw.distance2Point(this.ne),this.height=this.nw.distance2Point(this.sw)}else{var w=x.x,o=m.x,i=x.y,q=m.y;(w>o||i>q)&&(w>o&&(w=[o,o=w][0]),i>q&&(i=[q,q=i][0]),x=new b(w,i),m=new b(o,q)),this.p1=x,this.p2=m,this.width=m.x-x.x,this.height=m.y-x.y,this.nw=this.p1,this.ne=new b(this.p2.x,this.p1.y),this.se=this.p2,this.sw=new b(this.p1.x,this.p2.y)}}return g(a,[{key:"contains",value:function(e){return e instanceof b?this.containsPoint(e):e instanceof a&&this.containsRect(e)}},{key:"getBoundingRect",value:function(){var l=Number.MIN_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER,q=Number.MAX_SAFE_INTEGER;[this.nw,this.ne,this.sw,this.se].forEach(function(i){i.x>l&&(l=i.x),i.x<u&&(u=i.x),i.y>e&&(e=i.y),i.y<q&&(q=i.y)});var p=new b(u,q),m=new b(l,e);return new a(p,m)}},{key:"toString",value:function(){var q=this.left,m=this.top,u=this.width,l=this.height,s=this.angle,p=void 0===s?0:s;return JSON.stringify({l:parseInt(q),t:parseInt(m),w:parseInt(u),h:parseInt(l),r:parseInt(p)})}},{key:"containsPoint",value:function(o){var m=new b(o).transform2RotateCoord(this.angle),p=this.p1.transform2RotateCoord(this.angle),l=this.p2.transform2RotateCoord(this.angle);return m.x>=p.x&&m.x<=l.x&&m.y>=p.y&&m.y<=l.y}},{key:"containsRect",value:function(i){return i&&this.containsPoint(i.nw)&&this.containsPoint(i.ne)&&this.containsPoint(i.sw)&&this.containsPoint(i.se)}},{key:"move",value:function(l,i){this.p1.x+=l,this.p2.x+=l,this.p1.y+=i,this.p2.y+=i,this.nw=this.p1,this.ne=new b(this.p2.x,this.p1.y),this.se=this.p2,this.sw=new b(this.p1.x,this.p2.y)}},{key:"moveX",value:function(i){this.move(i,0)}},{key:"moveY",value:function(i){this.move(0,i)}},{key:"center",value:function(){var l=(this.p1.x+this.p2.x)/2,i=(this.p1.y+this.p2.y)/2;return new b(l,i)}},{key:"rotate",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,m=this.p1.pointRotate2Point(this.center(),l),e=this.p2.pointRotate2Point(this.center(),l);return new a(m,e,(l+(this.angle||0)+360)%360)}},{key:"left",get:function(){return this.p1.x}},{key:"top",get:function(){return this.p1.y}},{key:"right",get:function(){return this.p2.x}},{key:"bottom",get:function(){return this.p2.y}}],[{key:"getContainingRect",value:function(y,p){for(var v=Number.MAX_SAFE_INTEGER,m=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER,z=Number.MIN_SAFE_INTEGER,w=[],x=0;x<y.length;x++){y[x] instanceof a?(w.push(y[x].p1.transform2RotateCoord(p)),w.push(y[x].p2.transform2RotateCoord(p))):y[x] instanceof b&&w.push(y[x].transform2RotateCoord(p))}for(var q=0;q<w.length;q++){w[q].x<v&&(v=w[q].x),w[q].x>e&&(e=w[q].x),w[q].y<m&&(m=w[q].y),w[q].y>z&&(z=w[q].y)}return new a(new b(v,m).transform2RotateCoord(-p),new b(e,z).transform2RotateCoord(-p))}},{key:"getBoundingRect",value:function(m,x){var l=Number.MIN_SAFE_INTEGER,v=Number.MAX_SAFE_INTEGER,q=Number.MIN_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER;[m.nw,m.ne,m.sw,m.se].map(function(i){return i.transform2RotateCoord(x)}).forEach(function(i){i.x>l&&(l=i.x),i.x<v&&(v=i.x),i.y>q&&(q=i.y),i.y<p&&(p=i.y)});var w=new b(v,p).transform2RotateCoord(-x),e=new b(l,q).transform2RotateCoord(-x);return new a(w,e,x)}}]),a}();window.Rect=f,h.exports=f},function(c,b,f){function a(){if(1===arguments.length){this.x=arguments[0].x||0,this.y=arguments[0].y||0}else{if(2!==arguments.length){throw new Error("Invalid arguments for Point")}this.x=parseFloat(arguments[0])||0,this.y=parseFloat(arguments[1])||0}}var d=f(138);a.prototype.toString=function(){return"("+this.x+", "+this.y+")"},a.prototype.moveX=function(g){return this.move(g,0)},a.prototype.moveY=function(g){return this.move(0,g)},a.prototype.move=function(h,g){return this.x+=h,this.y+=g,this},a.prototype.update=function(h,g){this.x=h,this.y=g},a.prototype.equals=function(g){return this.x===g.x&&this.y===g.y},a.prototype.between=function(h,g){return new d(h,g).contains(this)},a.prototype.offset=function(g){return{x:g.x-this.x,y:g.y-this.y}},a.prototype.distance2Point=function(g){return Math.sqrt(Math.pow(this.x-g.x,2)+Math.pow(this.y-g.y,2))},a.prototype.angle2Point=function(l,j){var p=this.offset(l),h=this.distance2Point(l),m=Math.acos(Math.abs(p.x)/h),k=180*m/Math.PI;if(!h){return 0}if(0===p.x&&p.y>0){var g=90}else{p.x>0&&0===p.y?g=0:0===p.x&&p.y<0?g=270:p.x<0&&0===p.y?g=180:p.x<0&&p.y<0?g=180+k:p.x<0&&p.y>0?g=180-k:p.x>0&&p.y>0?g=k:p.x>0&&p.y<0&&(g=360-k)}return(g-(j||0)+360)%360},a.prototype.pointRotate2Point=function(j,h){var l=j.angle2Point(this),k=(l+h+360)%360,i=this.distance2Point(j),g=k*Math.PI/180;return new a(j.x+i*Math.cos(g),j.y+i*Math.sin(g))},a.prototype.transform2RotateCoord=function(j){if(!j){return this}var h=new a(0,0),l=h.angle2Point(this),k=(l-j+360)%360,i=this.distance2Point(h),g=k*Math.PI/180;return new a({x:i*Math.cos(g),y:i*Math.sin(g)})},window.Point=a,c.exports=a},function(h,l){function f(a){return 0===a.indexOf(j.color.fill)?m[j.color.fill]+(+a.split("-")[1]+1):m[a]}var g={content:{name:"文本内容",props:{content:{name:"文本内容"}}},image:{name:"图片内容",props:{imageSrc:{name:"图片内容"}}},color:{name:"颜色",props:{backgroundColor:{name:"背景颜色"},borderColor:{name:"边框颜色"},boxShadowColor:{name:"阴影颜色"},color:{name:"文本颜色"},counterColor:{name:"计数器颜色"},fill:{name:"形状颜色"}}},link:{name:"链接内容",props:{url:{name:"链接内容"}}},telephone:{name:"电话内容",props:{number:{name:"电话内容"}}},sound:{name:"音效内容",props:{soundSrc:{name:"音效内容"}}},time:{name:"计时时间",props:{time:{name:"计时时间"}}},internalLink:{name:"跳转页面",props:{internalLink:{name:"跳转页面"}}},input:{name:"输入框类型",props:{input:{name:"输入框类型"}}},video:{name:"视频内容",props:{video:{name:"视频内容"}}},tRandom:{name:"随机文本内容",props:{tRandom:{name:"随机文本内容"}}},iRandom:{name:"随机图片内容",props:{iRandom:{name:"随机图片内容"}}},code:{name:"代码内容",props:{code:{name:"代码内容"}}},addGroup:{name:"添加组合",props:{addGroup:{name:"添加组合"}}},moveGroup:{name:"移动组合",props:{moveGroup:{name:"移动组合"}}},deleteGroup:{name:"删除组合",props:{deleteGroup:{name:"删除组合"}}},editGroup:{name:"编辑组合",props:{editGroup:{name:"编辑组合"}}}},d={},b={},k={},m={},j=k;Object.keys(g).forEach(function(c){d[c]=c,b[c]=g[c].name;var a=g[c].props;k[c]={},Object.keys(a).forEach(function(e){k[c][e]=c+"."+e,m[c+"."+e]=a[e].name})}),h.exports=window.ftRuleType={FtRuleType:d,FtEditableProps:k,FtEditablePropName:m,getEditPropName:f,FtRuleName:b}},function(h,l,f){function g(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function a(w,z){var u=[],v=!0,q=!1,p=void 0;try{for(var y,A=w[Symbol.iterator]();!(v=(y=A.next()).done)&&(u.push(y.value),!z||u.length!==z);v=!0){}}catch(x){q=!0,p=x}finally{try{!v&&A["return"]&&A["return"]()}finally{if(q){throw p}}}return u}return function(c,e){if(Array.isArray(c)){return c}if(Symbol.iterator in Object(c)){return a(c,e)}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(){function a(p,o){for(var q=0;q<o.length;q++){var c=o[q];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(p,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}(),k=f(140),m=k.getEditPropName,j=function(){function a(c){g(this,a),this.eqxItem=c,this.ftManager=c.eqxPage.ftManager;var e=c.getFtEditableProps();this.props=e.map(function(i){return{key:i,name:m(i),ftTerm:null,select:!1,show:!1}}),this.updatePropsState()}return b(a,[{key:"isPropSelect",value:function(i){var c=this.props.find(function(e){return e.key===i});return c&&c.show&&c.select}},{key:"updatePropsState",value:function(){var i=this,c=this.ftManager,o=this.eqxItem;this.props.forEach(function(e){var n=c.findFtTerm(o,e.key);e.ftTerm=n,e.select=!!n,n&&(n.ftProp=e),e.show=i.eqxItem.isPropCanEdit(e.key)}),this.updateSelectAll()}},{key:"updateSelectAll",value:function(){var c=this.props.filter(function(i){return i.show});this.selectAll=c.length&&c.every(function(i){return i.select})}},{key:"toggleAllProps",value:function(){var i=this,c=this;c.selectAll?c.props.forEach(function(e){e.show&&!e.select&&i.selectProp(e)}):c.props.forEach(function(e){e.show&&e.select&&i.unSelectProp(e)})}},{key:"selectProp",value:function(v){var p=this.ftManager,w=v.key.split("."),o=d(w,2),u=o[0],c=o[1],q=this.eqxItem.getFtValue(v.key);p.addFtRule({type:u,value:q,comps:[{id:this.eqxItem.id,properties:[c]}]}),this.updatePropsState()}},{key:"unSelectProp",value:function(i){var c=i.ftTerm;c?(c.deleteSelf(!0),this.updatePropsState()):console.error("toggle no ftTerm")}},{key:"toggleProp",value:function(c){c.select?this.selectProp(c):this.unSelectProp(c)}}]),a}();h.exports=j},function(h,m,f){function g(){var v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0px 0px 0px rgba(0,0,0,0.5)",q=arguments[1],x=arguments[2],c="";v=v.replace(j,function(i){return c=i,""});var w=v.trim().split(" "),r=parseFloat(w[0]),a=parseFloat(w[1]),u=k(Math.atan(a/r))||0;return r<0&&(u+=180),r>0&&a<0&&(u=360+u),u=(u+270)%360,x&&(u=x),l.direction=b(u),l.size=b(q||Math.hypot(r,a)),l.blur=b(w[2]),l.color=c,l}function d(o){var c=(o.direction+90)%360,q=b(o.size*Math.cos(p(c))),a=b(o.size*Math.sin(p(c)));return q+"px "+a+"px "+o.blur+"px "+o.color}var b=f(137).toInt,k=f(143).arc2deg,p=f(143).deg2arc,j=/rgba\([^)]*\)/,l={direction:"",size:"",blur:"",color:""};h.exports={parseBoxShadow:g,getBoxShadowStr:d}},function(c,b){function d(f){return f/180*Math.PI}function a(f){return 180*f/Math.PI}c.exports={deg2arc:d,arc2deg:a}},function(h,m,f){function g(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function a(q,o){for(var r=0;r<o.length;r++){var c=o[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(q,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}();f(145),f(146);var b=f(75).ANIMATION_TYPE,k=f(147),p=k.animInstanceMap,j=k.AnimClassifyMap,l=function(){function a(c,e){g(this,a),this.eqxComp=c,this.config=e}return d(a,[{key:"startAnimation",value:function(w){function v(){if(r++,r>=q.length){z&&z()}else{var n=q[r].type,u=b[n];if(!u){return v()}var c=q[r].animClassify,i=void 0===c?"0":c,t=p.find(function(o){return o.key==i});t===-1&&(t=p[0]),y[t.name].doAnimation(q[r],s,q.length,s).then(function(){v()})}}var z=w.callback,s=w.maxCount,x=this.eqxComp.compJson,q=x.properties.anim||[];q&&!Array.isArray(q)&&(q=[q]);var y=this,r=-1;v()}},{key:"previewAnimation",value:function(u){var s=this,x=u.type,r=b[x];if(r){var v=u.animClassify,q=void 0===v?"0":v,w=p.find(function(c){return c.key==q});w===-1&&(w=p[0]),this[w.name].doAnimation(u).then(function(){s.stopAnimation()})}}},{key:"stopAnimation",value:function(){var i=this.eqxComp,c=p.find(function(n){return 1===n.key});if(this[c.name]&&this[c.name].stopAnimation(),i.$boxDiv.css({animation:""}),i.$contextCopy){var o=i.$contextCopy.data("typed");o&&o.reset()}}},{key:"addAnimClassify",value:function(){var i=this,c=String(this.eqxComp.type),o="2"===c||"7"===c;p.forEach(function(n){var e=n.key;(o||1!==e)&&(i[n.name]=i.getAnimClass(n.key))})}},{key:"getAnimClass",value:function(i){var c=j[i];return c?new c(this.eqxComp,this.config):void console.error("In Valid Anim Type")}}]),a}();h.exports=l},function(b,a){},function(b,a){},function(g,d,j){var c=j(148),h=j(150),f=[{key:0,name:"compAnim"},{key:1,name:"textAnim"}],b={COMPANIM:c,0:c,TEXTANIM:h,1:h};g.exports={animInstanceMap:f,AnimClassifyMap:b}},function(j,q,f){function h(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function a(o,l){for(var r=0;r<l.length;r++){var c=l[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),b=f(75).ANIMATION_TYPE,m=f(23).$canvas,v=f(23).$loadTyped,k=f(149).Particles,p=f(22),g=function(){function a(c,e){h(this,a),this.eqxComp=c,this.config=e}return d(a,[{key:"doAnimation",value:function(u,s,x,r){var w=this,c=new Promise(function(U,Q){var aa=w.eqxComp,X=aa.$li,Z=aa.$boxDiv,Y=aa.$context,R=aa.compJson,H=u.type,B=u.direction,ab=u.duration,F=void 0===ab?0.1:ab,G=u.linear,V=u.count,J=u.countNum,D=void 0===J?1:J,n=u.delay,o=void 0===n?0:n,ac=u.interval;0===F&&(F=0.1),null==o&&(o=0);var e=b[H],i=G?"linear":"ease",t=e[B]||b[H][0],K=V?"infinite":D;if(s&&(K=1),Z.css({"animation-name":"","animation-duration":"","animation-timing-function":"","animation-delay":"","animation-iteration-count":""}),"typer"===t){Y.css({opacity:0}),v().then(function(){var y=aa.create$context(),l={position:"absolute","pointer-events":"none"};aa.compJson.css.writingMode&&"vertical-rl"===aa.compJson.css.writingMode?l.left="-30px":l.top="0px",y.attr("context-copy",1).css(l),Y.after(y),aa.$contextCopy=y;var A=function(){aa.$contextCopy=null,setTimeout(function(){y.remove(),y=null,aa.$contextCopy||Y.css({opacity:1}),U()},100)};y.typed({strings:[R.content],contentType:"html",showCursor:!1,typeSpeed:1000*ac||0,startDelay:1000*o||0,onFirstTyped:function(){setTimeout(function(){y&&y.css({opacity:1})},0)},callback:function(){clearInterval(y.data("typed").timeout),y.removeData("typed"),A()},resetCallback:function(){A()}})},function(){Y.css({opacity:1})})}else{if("particles"===t){var M=function(){if("number"==typeof K){if(1==K){return void U()}K>1&&W(),K--}else{W()}},W=function(){var y=Math.abs(parseInt(Z.find("img").css("marginLeft"))),l=Math.abs(parseInt(Z.find("img").css("marginTop")));Z.css("opacity","0");var A=new k({type:aa.compJson.type,top:y,left:l,$parEle:X,imgUrl:p.FILE+aa.compJson.properties.src,startX:aa.compJson.css.width,startY:aa.compJson.css.height,imgX:0,imgY:0,delay:1000*o,duration:1000*F,interval:0,ease:"linear"},M);A.animate()};X.remove("canvas"),"h"==aa.compJson.type?(Z.css("opacity","0"),m().then(function(){W()})):W()}else{var z={"animation-name":t,"animation-duration":F+"s","animation-timing-function":i,"animation-delay":o+"s","animation-iteration-count":K,"animation-direction":"normal","animation-fill-mode":"both"},N=Object.keys(z).map(function(l){return z[l]}).join(" ");Z.css("animation",N),Z.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){x<r-1&&Z.css({"animation-name":"","animation-duration":"","animation-timing-function":"","animation-delay":"","animation-iteration-count":""}),setTimeout(function(){U()},0)})}}});return c}}]),a}();j.exports=g},function(h,d){function k(i,a){if(!(i instanceof a)){throw new TypeError("Cannot call a class as a function")}}function c(i,a,l){return a in i?Object.defineProperty(i,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[a]=l,i}var j,g=function(){function a(o,m){for(var p=0;p<m.length;p++){var l=m[p];l.enumerable=l.enumerable||!1,l.configurable=!0,"value" in l&&(l.writable=!0),Object.defineProperty(o,l.key,l)}}return function(l,m,e){return m&&a(l.prototype,m),e&&a(l,e),l}}(),b=(j={easeInOutBack:function(m,l,q,a,p){return void 0==p&&(p=1.70158),(m/=a/2)<1?q/2*(m*m*(((p*=1.525)+1)*m-p))+l:q/2*((m-=2)*m*(((p*=1.525)+1)*m+p)+2)+l},linear:function(m,l,o,a){return o*m/a+l},easeInOutQuad:function(m,l,o,a){return m/=a/2,m<1?o/2*m*m+l:(m--,-o/2*(m*(m-2)-1)+l)},easeOutQuad:function(m,l,o,a){return m/=a,-o*m*(m-2)+l}},c(j,"easeOutQuad",function(m,l,o,a){return m/=a,-o*m*(m-2)+l}),c(j,"easeInCubic",function(m,l,o,a){return m/=a,o*m*m*m+l}),c(j,"easeOutCubic",function(m,l,o,a){return m/=a,m--,o*(m*m*m+1)+l}),c(j,"easeInOutCubic",function(m,l,o,a){return m/=a/2,m<1?o/2*m*m*m+l:(m-=2,o/2*(m*m*m+2)+l)}),c(j,"easeInQuart",function(m,l,o,a){return m/=a,o*m*m*m*m+l}),c(j,"easeOutQuart",function(m,l,o,a){return m/=a,m--,-o*(m*m*m*m-1)+l}),c(j,"easeInOutQuart",function(m,l,o,a){return m/=a/2,m<1?o/2*m*m*m*m+l:(m-=2,-o/2*(m*m*m*m-2)+l)}),c(j,"easeInQuint",function(m,l,o,a){return m/=a,o*m*m*m*m*m+l}),c(j,"easeOutQuint",function(m,l,o,a){return m/=a,m--,o*(m*m*m*m*m+1)+l}),c(j,"easeInOutQuint",function(m,l,o,a){return m/=a/2,m<1?o/2*m*m*m*m*m+l:(m-=2,o/2*(m*m*m*m*m+2)+l)}),c(j,"easeInSine",function(m,l,o,a){return -o*Math.cos(m/a*(Math.PI/2))+o+l}),c(j,"easeOutSine",function(m,l,o,a){return o*Math.sin(m/a*(Math.PI/2))+l}),c(j,"easeInOutSine",function(m,l,o,a){return -o/2*(Math.cos(Math.PI*m/a)-1)+l}),c(j,"easeInExpo",function(m,l,o,a){return o*Math.pow(2,10*(m/a-1))+l}),c(j,"easeOutExpo",function(m,l,o,a){return o*(-Math.pow(2,-10*m/a)+1)+l}),j),f=function(){function a(l,e){k(this,a),this.colNumber=3,this.$parEle=l.$parEle,this.canvas={},this.image={},this.requestId=0,this.startTime=0,this.array=[],this.startX=l.startX,this.startY=l.startY,this.callBackFn=e,this.param=l,this.init()}return g(a,[{key:"randomX",value:function(){return parseInt(Math.random()*this.startX)}},{key:"randomY",value:function(){return parseInt(Math.random()*this.startY)}},{key:"init",value:function(){var l=this;if(this.$parEle.find("canvas").remove(),this.$canvas=$("<canvas></canvas>"),this.$parEle.prepend(this.$canvas),this.$canvas.css({position:"absolute",top:0,left:0}),this.canvas=this.$canvas[0],this.image.isLoaded=!1,this.canvas.width=this.$parEle.width(),this.canvas.height=this.$parEle.height(),this.canvas.width>300&&this.canvas.height>300&&(this.colNumber=4),this.canvas.ctx=this.canvas.getContext("2d"),"h"===this.param.type){return void setTimeout(function(){canvg(l.canvas,l.$parEle.find(".element-box-contents")[0],{ignoreMouse:!0,ignoreAnimation:!0}),l.calCanvas()},10)}if(this.canvas&&this.canvas.getContext){var i=new Image;i.onload=function(){var q=l.$parEle.find("img").width(),e=l.$parEle.find("img").height(),p=i.height/e,m=i.width/q;l.canvas.ctx.drawImage(i,l.param.top*m,l.param.left*p,m*l.canvas.width,p*l.canvas.height,0,0,l.canvas.width,l.canvas.height),l.calCanvas()},i.crossOrigin="anonymous",i.src=this.param.imgUrl}}},{key:"draw",value:function(){this.image.isLoaded?this._draw():setTimeout(this.draw.bind(this))}},{key:"animate",value:function(){this.image.isLoaded?this._animate(this.param.delay):setTimeout(this.animate.bind(this))}},{key:"_calculate",value:function(v){for(var z=this.image.imgData.data,p=v.cols,q=v.rows,m=Math.round(this.canvas.width/p),l=Math.round(this.canvas.height/q),x=0,A={},w=0;w<p;w++){for(var y=0;y<q;y++){x=4*(y*l*this.canvas.width+w*m),z[x+3]>25&&(A={x0:this.randomX(),y0:this.randomY(),x1:this.param.imgX+w*m,y1:this.param.imgY+y*l,delay:y/20,currTime:0,count:0,duration:parseInt(v.duration/16.66)+1,interval:parseInt(10*Math.random()*v.interval),ease:v.ease,ratioX:v.ratioX,ratioY:v.ratioY},A.fillStyle="rgba("+z[x]+", "+z[x+1]+", "+z[x+2]+","+z[x+3]+")",this.array.push(A))}}}},{key:"_draw",value:function(){this.canvas.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var l=this.array.length,i=null,m=0;m<l;m++){i=this.array[m],this.canvas.ctx.fillStyle=i.fillStyle,this.canvas.ctx.fillRect(i.x1,i.y1,1,1)}}},{key:"_render",value:function(){var z=this;this.canvas.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var D,w,y=this.array,v=y.length,m=null,E=0,B=0,C=0,x=1,q=1,A=0;A<v;A++){if(m=y[A],m.count++>m.delay){if(this.canvas.ctx.fillStyle=m.fillStyle,E=m.currTime,B=m.duration,C=m.interval,1!==m.ratioX?x=m.ratioX+2*Math.random():1,1!==m.ratioY?q=m.ratioY+2*Math.random():1,y[v-1].duration+y[v-1].interval<0.9*y[v-1].currTime){return this.canvas=null,cancelAnimationFrame(this.requestId),this.$parEle.find("canvas").remove(),this.$parEle.find(".element-box").css("opacity","1"),void setTimeout(function(){z.callBackFn()},300)}E<B+C?E>=C&&(D=b[m.ease]((E-C)*x,m.x0,(m.x1-m.x0)*x,B),w=b[m.ease]((E-C)*q,m.y0,(m.y1-m.y0)*q,B),this.canvas.ctx.fillRect(D,w,1,1)):this.canvas.ctx.fillRect(m.x1,m.y1,1,1),m.currTime+=Math.random()+0.5}}this.requestId=requestAnimationFrame(this._render.bind(this))}},{key:"_animate",value:function(l){var i=this;this.startTime+l<(new Date).getTime()?this.requestId=requestAnimationFrame(this._render.bind(this)):setTimeout(function(){i._animate(l)})}},{key:"calCanvas",value:function(){var i=this.param;this.image.imgData=this.canvas.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this.canvas.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this._calculate({duration:i.duration||0,delay:i.delay||0,interval:i.interval||0,ease:i.ease,ratioX:1,ratioY:1,cols:Math.ceil(this.canvas.width/this.colNumber)||100,rows:Math.ceil(this.canvas.height/this.colNumber)||100}),this.image.isLoaded=!0,this.startTime=(new Date).getTime()}}]),a}();h.exports={Particles:f}},function(h,l,f){function g(c){if(Array.isArray(c)){for(var a=0,i=Array(c.length);a<c.length;a++){i[a]=c[a]}return i}return Array.from(c)}function d(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var b=function(){function a(p,o){for(var q=0;q<o.length;q++){var c=o[q];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(p,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}(),k=f(151),m=f(75).ANIMATION_TYPE,j=function(){function a(e,o,c){d(this,a),this.eqxComp=e,this.config=o,this.currentAnim=c,this.$textNode=null,this.$parentNode=null,this.isPlaying=!1,this.playDelayToIdx=void 0,this.interIdx=void 0,this.playEndToIdx=void 0,this.infinity=!1}return b(a,[{key:"doAnimation",value:function(i,c){var o=this;return this.isPlaying&&this.stopAnimation(),new Promise(function(V,N){o.isPlaying=!0;var ae=o.eqxComp,J=void 0;J="2"===String(ae.type)?ae.$context:ae.$context.find("span"),o.$textNode=J;var X=J.clone(!0),U=o.$parentNode=J.parent();J.remove(),U.append(X);var ad=[],aa=i.type,ac=i.direction,ab=i.duration,W=i.delay,H=i.countNum,B=i.count,af=i.textInterval,F=i.order;W*=1000,af*=1000,ab*=1000;for(var G="animation-duration: "+ab+"ms;",Y=m[aa][ac||0],K=void 0,D=["access","emphasize","exit"],n=Object.keys(k),s=0;s<n.length;s++){if(k[s].includes(aa)){K=D[s];break}}var ag=document,e="access"===K?"animTextCharPlace animHidden":"animTextCharPlace",t=function(q){var p=$(ag.createDocumentFragment());return q.split("").forEach(function(r){var u=void 0;"\n"===r?u=ag.createElement("br"):(32===r.charCodeAt(0)&&(r=String.fromCharCode(160)),u=ag.createElement("span"),u.innerText=r,u.className=e),ad.push(u),p.append(u)}),p},M=function z(w){var u=$(w),y=u.clone(!0).get(0).childNodes;w.innerHTML="";for(var q=0,x=y.length;q<x;q++){var v=y[q];if(3===v.nodeType){u.append(t(v.data))}else{if("BR"===v.tagName){u.append("<br>")}else{if(v.children.length){z(v)}else{var p=v.innerText;v.innerText="",$(v).append(t(p))}u.append(v),q--,x--}}}};M(X.get(0));var Q=function(){if(2===F){ad=ad.reverse()}else{if(3===F){var q=ad.length,p=[].concat(g(ad));for(ad.length=0;q--;){ad.push(p.splice(Math.floor(Math.random()*q),1)[0])}}}},Z=function R(r){var q=0,p=ad.length;o.interIdx=setInterval(function(){if(q<p){var u=ad[q++];u.className&&(u.className+=" animTextChar "+Y,1000!==ab&&(u.style.cssText+=G))}else{clearInterval(o.interIdx),o.playEndToIdx=setTimeout(function(){--r>0||o.infinity?(ad.forEach(function(v){v.className="animTextCharPlace"}),R(r)):V()},ab)}},af)};Q(),o.playDelayToIdx=setTimeout(function(){Z(c?1:B?1/0:H)},W)})}},{key:"stopAnimation",value:function(){if(this.isPlaying){this.infinity=!1,clearTimeout(this.playDelayToIdx),clearInterval(this.interIdx),clearTimeout(this.playEndToIdx);var i=this.$parentNode,c=this.$textNode;if(i&&c){var o=i[0];o.replaceChild(c[0],o.firstChild)}this.isPlaying=!1}}}]),a}();h.exports=j},function(b,a){b.exports={0:[0,1,20,2,24,12,3,13,4,26,27,31],1:[6,5,8,9,23,29,30,21,22],2:[10,17,19,11,14,18,15,25,16,28,32]}},function(L,z,E){function H(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function D(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?b:a}function B(b,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}var P=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),A=function k(d,b,g){null===d&&(d=Function.prototype);var a=Object.getOwnPropertyDescriptor(d,b);if(void 0===a){var f=Object.getPrototypeOf(d);return null===f?void 0:k(f,b,g)}if("value" in a){return a.value}var c=a.get;if(void 0!==c){return c.call(g)}},N=E(153),w=E(127),G=E(119).isSupportStyle,C=E(156),M=E(136),I=E(96),K=I.initEffectImgPath,J=I.loadImg,F=E(22),q=E(167).stackBlurImage,j=E(119).getEvent,O=function(b){function a(d,f){H(this,a);var c=D(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,f));return $.extend(!0,c.$ability,{style:{compStyle:{backgroundColor:!0},commonStyle:{tip:!0},advanceStyle:{variable:!0,variableImg:!0,gSensor:!0,scratch:!0,replace:!0}}}),c}return B(a,b),P(a,[{key:"getFtEditableProps",value:function(){var c=A(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtEditableProps",this).call(this),d=this.FtEditableProps;return c.concat([d.image.imageSrc,d.link.url,d.internalLink.internalLink,d.telephone.number,d.sound.soundSrc])}},{key:"getFtValue",value:function(c){var d=this.FtEditableProps;return c===d.image.imageSrc?this.getProp("src"):A(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtValue",this).call(this,c)}},{key:"getImgSrc",value:function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.eqxScene.config.mobileEdit&&(d.width&&(d.width*=2),d.height&&(d.height*=2)),A(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getImgSrc",this).call(this,c,d)}},{key:"updateSize",value:function(d,f){if(this.$width&&this.$height){var c=this.$width/this.$height;this.updateImageSize(c,d,f)}A(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateSize",this).call(this,d,f)}},{key:"updateTurnOver",value:function(c){this.$boxContentDiv.css("transform",c)}},{key:"pinchEnd",value:function(){var ad=this.compJson,R=ad.properties,W=ad.css,Z=R.imgStyle,V=this.$context[0],T=M.parseTransformInFloat(V.style.transform),af=T.scale.x,S=T.scale.y,ae=Z.width,Q=Z.height,Y=Z.marginTop,U=Z.marginLeft,aa=ae*af,ac=Q*S,ab=Math.max(W.height/ac,W.width/aa,1);ac*=ab,aa*=ab;var X=U-(aa-ae)/2,x=Y-(ac-Q)/2,d=this.validateImgStyle({width:aa,height:ac,marginTop:x,marginLeft:X},W);this.$context.css("transform","").css(d),R.imgStyle=d}},{key:"validateImgStyle",value:function(g,d){var l=g.width,c=g.height,h=g.marginTop,f=g.marginLeft;return h<0?h+c<d.height&&(h=d.height-c):h=0,f<0?f+l<d.width&&(f=d.width-l):f=0,{width:l,height:c,marginTop:h,marginLeft:f}}},{key:"moveEnd",value:function(){var h=this.compJson,f=h.properties,m=h.css,d=f.imgStyle,l=parseInt(this.$context.css("marginLeft")),g=parseInt(this.$context.css("marginTop")),c=this.validateImgStyle({width:d.width,height:d.height,marginLeft:l,marginTop:g},m);this.$context.css(c),f.imgStyle=c}},{key:"updateImageSize",value:function(T,Y,x){T||(this.$width&&this.$height?T=this.$width/this.$height:console.error("no imageRatio!")),Y||(Y=this.compJson.css),x||(x=this.compJson.css),void 0===x.height&&(x.height=Y.height),void 0===x.width&&(x.width=Y.width),void 0===x.borderWidth&&(x.borderWidth=parseInt(Y.borderWidth||this.compJson.css.borderWidth||0));var Q=this.compJson,v=Q.properties,g=(x.width-2*x.borderWidth)/(x.height-2*x.borderWidth),W=v.imgStyle;if(g>T){var Z=x.width-2*x.borderWidth,V=Z/T,X=-(V+2*x.borderWidth-x.height)/2,y=0;W={width:Z,height:V,marginTop:X,marginLeft:y}}else{var m=x.height-2*x.borderWidth,U=T*m,R=-(U+2*x.borderWidth-x.width)/2,S=0;W={width:U,height:m,marginLeft:R,marginTop:S}}this.$context.css(W),this.canvas&&$(this.canvas).css(W),v.imgStyle=W}},{key:"_getContextImgSrc",value:function(){var f=this.compJson,d=f.properties;d=void 0===d?{}:d;var g=d.src,c=d.imgStyle;return g=K(g),c&&!this.eqxPage.notImageCut&&(g=this.getImgSrc(g,{width:c.width,height:c.height})),g}},{key:"create$context",value:function(){var m=this.compJson,Q=m.id,h=m.type,l=m.properties,g=l.scratch,c=l.imgStyle,x=l.maskSrc,R=l.filter;R=void 0===R?{}:R;var y=R.type;m.properties.isReplace=m.properties.isReplace||!1;var f=this._getContextImgSrc();if(Number.isInteger(y)&&y>0){var v=$(N.filterImg({id:Q,type:h,src:f,filterType:y}))}else{v=$(N.img({id:Q,type:h,src:f}))}return G("WebkitMaskBoxImage")&&x&&this.$contentsDiv.addClass("img_mask").css({"-webkit-mask-box-image":"url("+x+")"}),c&&v.css(c),g&&this.addScratch(),v}},{key:"eleShow",value:function(){var c=this,d=this.compJson.properties.src;d&&/.gif/.test(d)&&setTimeout(function(){var e=c.$context.prop("src");c.$context.show().each(function(){void this.offsetHeight}).prop("src",e)},1),A(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleShow",this).call(this)}},{key:"updateImgSrc",value:function(){this.$context=this.create$context(),this.$contentsDiv.empty(),this.$contentsDiv.append(this.$context)}},{key:"updateImageSrc",value:function(d,c,f){d=this.getImgSrc(F.FILE+d,{width:c,height:f}),this.$context.attr("src",d)}},{key:"addScratch",value:function(){var c=this;this.$contentsDiv[0].style.position="relative",this.canvas=this.createCanvas(),this.ctx=this.canvas.getContext("2d"),this.$contentsDiv.prepend(this.canvas),this.drawCanvas().then(function(){"view"===c.eqxScene.config.mode&&c.addCanvasEvent()})}},{key:"createCanvas",value:function(){var c=document.createElement("canvas");return c.style.position="absolute",$(c).css(this.compJson.properties.imgStyle),c}},{key:"drawCanvas",value:function(){var f=this,d=this.compJson.properties,g=d.src,c=d.imgStyle;return g=this.getImgSrc(g,{width:c.width,height:c.height}),J(g,!0).then(function(e){f.ctx.globalCompositeOperation="source-over",f.canvas.width=e.width,f.canvas.height=e.height,f.ctx.drawImage(e,0,0),f.ctx.globalCompositeOperation="destination-out",q(f.canvas,30,!0)})}},{key:"addCanvasEvent",value:function(){function l(i){p++,u(),i.preventDefault(),i.stopPropagation();var n=j(i);f=n.pageX-$(v.canvas).offset().left,d=n.pageY-$(v.canvas).offset().top,v.ctx.moveTo(g,h),v.ctx.lineTo(f,d),v.ctx.stroke(),g=f,h=d}function u(){setTimeout(function(){p>=45&&!m&&(m=!0,$(v.canvas).fadeOut(500,function(){setTimeout(function(){v.deleScratch()},500)}))},200)}this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.lineWidth=40;var g,h,f,d,p=0,v=this,m=!1;$(this.canvas).on("mousedown touchstart",function(c){c.preventDefault(),c.stopPropagation();var e=j(c);g=e.pageX-$(v.canvas).offset().left,h=e.pageY-$(v.canvas).offset().top,$(v.canvas).on("mousemove touchmove",l),$(v.canvas).on("mouseup touchend mouseleave",function(){$(v.canvas).off("mousemove touchmove",l)})})}},{key:"deleScratch",value:function(){$(this.canvas).off(),$(this.canvas).remove(),delete this.canvas}},{key:"editImage",value:function(l,f){function p(i){return JSON.parse(JSON.stringify(i))}var d=this.compJson;if(f){var m=Promise.resolve(f)}else{m=J(this._getContextImgSrc()).then(function(s){var r=s.width,u=s.height,o=r/u;return{width:r,height:u,ratio:o}})}var h=p(d);l=p(l);var c=h.properties;c.imgStyle=l.imgStyle,c.cropSize=l.cropSize,c.src=l.src,c.originSrc=l.originSrc,c.maskSrc=l.maskSrc;var g=this.updateJson(h);return this.eqxPage.renderEqxComp(g,!0),m.then(function(s){var r=s.width,u=s.height,o=s.ratio;g.$width=r,g.$height=u,g.updateImageSize(o),g.findTopGroup().autoSizeTopDown()}),g}}],[{key:"getImageStyles",value:function(){return C}}]),a}(w);L.exports=O},function(h,d,k){function c(v){var y=v.id,q=v.type,s=v.src,m=v.filterType,w=void 0===m?f[0].value:m,x="filter-"+y,r=f.find(function(i){return i.value===w})||w[0],a=r.path;return b(g,{id:y,type:q,filterId:x,src:s,path:a})}function j(m){var l=m.id,o=m.type,a=m.src;return'<img id="'+l+'" ctype="'+o+'" class="element comp_image editable-image" style="display:block;" draggable="false" src="'+a+'">'}k(154);var g=k(155),b=k(44).parse;h.exports={img:j,filterImg:c};var f=[{value:1,path:"1.7 0.1 0.1 0 -0.287 0 1.7 0.1 0 -0.287 0 0.1 1.6 0 -0.287 0 0 0 1.0 0"},{value:2,path:"2.1 -1.4 0.6 0.0 -0.12 -0.3 2.0 -0.3 0.0 -0.12 -1.1 -0.2 2.6 0.0 -0.12 0.0 0.0 0.0 1.0 0.0"},{value:3,path:"1.9 -0.3 -0.2 0 -0.341 -0.2  1.7 -0.1  0 -0.341 -0.1 -0.6 2.0 0 -0.341 0 0 0 1.0 0"},{value:4,path:"1.0 0.0 0.0 0.0 -0.26 0.0 1.1 0.0 0.0 -0.26 0.0 0.0 1.0 0.0 -0.26 0.0 0.0 0.0 1.0 0.0"},{value:5,path:"1.2 0.0 0.0 0.0 0.0 0.0 0.9 0.0 0.0 0.0 0.0 0.0 0.8 0.0 0.0 0 0 0 1.0 0"},{value:6,path:"0.8 0.3 0.1 0.0 0.182 0.1 0.9 0.0 0.0 0.182 0.1 0.3 0.7 0.0 0.182 0.0 0.0 0.0 1.0 0.0"},{value:7,path:"0.9 0 0 0 0.255 0 0.9 0 0 0.255 0 0 0.9 0 0.255 0 0 0 1.0 0"},{value:8,path:"0.6 0.3 0.1 0 0.28745 0.2 0.7 0.1 0 0.28745 0.2 0.3 0.4 0 0.28745 0 0 0 1.0 0"},{value:9,path:"0.8 1.6 0.2 0 -0.639 0.8 1.6 0.2 0 -0.639 0.8 1.6 0.2 0 -0.639 0 0 0 1.0 0"},{value:10,path:"0.2 0.5 0.1 0 0.16 0.2 0.5 0.1 0 0.16 0.2 0.5 0.1 0 0.16 0 0 0 1 0"},{value:11,path:"4.8 -1.0 -0.1 0 -1.523 -0.5 4.4 -0.1 0 -1.523 -0.5 -1.0 5.2 0 -1.523 0 0 0 1.0 0"}]},function(b,a){},function(b,a){b.exports='<div id="#{id}" ctype="#{type}" class="element comp_image editable-image"><svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg"><g><image width="100%" height="100%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#{src}" filter="url(##{filterId})" draggable="false"></image><defs><filter id="#{filterId}"><feColorMatrix class="saturation" color-interpolation-filters="sRGB" type="matrix" values="#{path}"></feColorMatrix></filter></defs></g></svg></div>'},function(c,b,d){var a=[{name:"圆形",path:d(157)},{name:"菱形",path:d(158)},{name:"心形",path:d(159)},{name:"矩形2",path:d(160)},{name:"矩形3",path:d(161)},{name:"矩形4",path:d(162)},{name:"星形1",path:d(163)},{name:"星形2",path:d(164)},{name:"星形3",path:d(165)},{name:"三角形",path:d(166)}];c.exports=a},function(b,a,c){b.exports=c.p+"images/circle-6daa4d.svg"},function(b,a,c){b.exports=c.p+"images/diamond-a61c24.svg"},function(b,a,c){b.exports=c.p+"images/heart-d692b9.svg"},function(b,a,c){b.exports=c.p+"images/rect2-007f3e.svg"},function(b,a,c){b.exports=c.p+"images/rect3-896f69.svg"},function(b,a,c){b.exports=c.p+"images/rect4-fb3aef.svg"},function(b,a,c){b.exports=c.p+"images/star1-42a9b6.svg"},function(b,a,c){b.exports=c.p+"images/star2-b75251.svg"},function(b,a,c){b.exports=c.p+"images/star3-343bf6.svg"},function(b,a,c){b.exports=c.p+"images/triangle-170329.svg"},function(h,d){function k(o,l,p){var m=o.width,i=o.height;isNaN(l)||l<1||(p?c(o,0,0,m,i,l):j(o,0,0,m,i,l))}function c(aI,av,az,aE,ay,aK){if(!(isNaN(aK)||aK<1)){aK|=0;var au,aB=aI.getContext("2d");try{try{au=aB.getImageData(av,az,aE,ay)}catch(ax){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),au=aB.getImageData(av,az,aE,ay)}catch(ax){throw new Error("unable to access local image data: "+ax)}}}catch(ax){throw new Error("unable to access image data: "+ax)}var aJ,aF,aH,aG,aA,at,ap,aL,aq,ar,aC,ai,ae,Q,Y,aM,K,an,Z,ak,aw,aD,ac,am,X=au.data,ab=aK+aK+1,aj=aE-1,ah=ay-1,al=aK+1,ao=al*(al+1)/2,aa=new g,ad=aa;for(aH=1;aH<ab;aH++){if(ad=ad.next=new g,aH==al){var a=ad}}ad.next=aa;var s=null,af=null;ap=at=0;var r=b[aK],ag=f[aK];for(aF=0;aF<ay;aF++){for(aM=K=an=Z=aL=aq=ar=aC=0,ai=al*(ak=X[at]),ae=al*(aw=X[at+1]),Q=al*(aD=X[at+2]),Y=al*(ac=X[at+3]),aL+=ao*ak,aq+=ao*aw,ar+=ao*aD,aC+=ao*ac,ad=aa,aH=0;aH<al;aH++){ad.r=ak,ad.g=aw,ad.b=aD,ad.a=ac,ad=ad.next}for(aH=1;aH<al;aH++){aG=at+((aj<aH?aj:aH)<<2),aL+=(ad.r=ak=X[aG])*(am=al-aH),aq+=(ad.g=aw=X[aG+1])*am,ar+=(ad.b=aD=X[aG+2])*am,aC+=(ad.a=ac=X[aG+3])*am,aM+=ak,K+=aw,an+=aD,Z+=ac,ad=ad.next}for(s=aa,af=a,aJ=0;aJ<aE;aJ++){X[at+3]=ac=aC*r>>ag,0!=ac?(ac=255/ac,X[at]=(aL*r>>ag)*ac,X[at+1]=(aq*r>>ag)*ac,X[at+2]=(ar*r>>ag)*ac):X[at]=X[at+1]=X[at+2]=0,aL-=ai,aq-=ae,ar-=Q,aC-=Y,ai-=s.r,ae-=s.g,Q-=s.b,Y-=s.a,aG=ap+((aG=aJ+aK+1)<aj?aG:aj)<<2,aM+=s.r=X[aG],K+=s.g=X[aG+1],an+=s.b=X[aG+2],Z+=s.a=X[aG+3],aL+=aM,aq+=K,ar+=an,aC+=Z,s=s.next,ai+=ak=af.r,ae+=aw=af.g,Q+=aD=af.b,Y+=ac=af.a,aM-=ak,K-=aw,an-=aD,Z-=ac,af=af.next,at+=4}ap+=aE}for(aJ=0;aJ<aE;aJ++){for(K=an=Z=aM=aq=ar=aC=aL=0,at=aJ<<2,ai=al*(ak=X[at]),ae=al*(aw=X[at+1]),Q=al*(aD=X[at+2]),Y=al*(ac=X[at+3]),aL+=ao*ak,aq+=ao*aw,ar+=ao*aD,aC+=ao*ac,ad=aa,aH=0;aH<al;aH++){ad.r=ak,ad.g=aw,ad.b=aD,ad.a=ac,ad=ad.next}for(aA=aE,aH=1;aH<=aK;aH++){at=aA+aJ<<2,aL+=(ad.r=ak=X[at])*(am=al-aH),aq+=(ad.g=aw=X[at+1])*am,ar+=(ad.b=aD=X[at+2])*am,aC+=(ad.a=ac=X[at+3])*am,aM+=ak,K+=aw,an+=aD,Z+=ac,ad=ad.next,aH<ah&&(aA+=aE)}for(at=aJ,s=aa,af=a,aF=0;aF<ay;aF++){aG=at<<2,X[aG+3]=ac=aC*r>>ag,ac>0?(ac=255/ac,X[aG]=(aL*r>>ag)*ac,X[aG+1]=(aq*r>>ag)*ac,X[aG+2]=(ar*r>>ag)*ac):X[aG]=X[aG+1]=X[aG+2]=0,aL-=ai,aq-=ae,ar-=Q,aC-=Y,ai-=s.r,ae-=s.g,Q-=s.b,Y-=s.a,aG=aJ+((aG=aF+al)<ah?aG:ah)*aE<<2,aL+=aM+=s.r=X[aG],aq+=K+=s.g=X[aG+1],ar+=an+=s.b=X[aG+2],aC+=Z+=s.a=X[aG+3],s=s.next,ai+=ak=af.r,ae+=aw=af.g,Q+=aD=af.b,Y+=ac=af.a,aM-=ak,K-=aw,an-=aD,Z-=ac,af=af.next,at+=aE}}aB.putImageData(au,av,az)}}function j(aA,am,aq,aw,ap,aC){if(!(isNaN(aC)||aC<1)){aC|=0;var al,at=aA.getContext("2d");try{try{al=at.getImageData(am,aq,aw,ap)}catch(ao){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),al=at.getImageData(am,aq,aw,ap)}catch(ao){throw alert("Cannot access local image"),new Error("unable to access local image data: "+ao)}}}catch(ao){throw alert("Cannot access image"),new Error("unable to access image data: "+ao)}var aB,ax,az,ay,ar,ak,ah,aD,ai,aj,au,aa,Y,s,H,aE,r,af,K,ac,an=al.data,av=aC+aC+1,V=aw-1,ae=ap-1,G=aC+1,U=G*(G+1)/2,ab=new g,Z=ab;for(az=1;az<av;az++){if(Z=Z.next=new g,az==G){var ad=Z}}Z.next=ab;var ag=null,Q=null;ah=ak=0;var X=b[aC],a=f[aC];for(ax=0;ax<ap;ax++){for(s=H=aE=aD=ai=aj=0,au=G*(r=an[ak]),aa=G*(af=an[ak+1]),Y=G*(K=an[ak+2]),aD+=U*r,ai+=U*af,aj+=U*K,Z=ab,az=0;az<G;az++){Z.r=r,Z.g=af,Z.b=K,Z=Z.next}for(az=1;az<G;az++){ay=ak+((V<az?V:az)<<2),aD+=(Z.r=r=an[ay])*(ac=G-az),ai+=(Z.g=af=an[ay+1])*ac,aj+=(Z.b=K=an[ay+2])*ac,s+=r,H+=af,aE+=K,Z=Z.next}for(ag=ab,Q=ad,aB=0;aB<aw;aB++){an[ak]=aD*X>>a,an[ak+1]=ai*X>>a,an[ak+2]=aj*X>>a,aD-=au,ai-=aa,aj-=Y,au-=ag.r,aa-=ag.g,Y-=ag.b,ay=ah+((ay=aB+aC+1)<V?ay:V)<<2,s+=ag.r=an[ay],H+=ag.g=an[ay+1],aE+=ag.b=an[ay+2],aD+=s,ai+=H,aj+=aE,ag=ag.next,au+=r=Q.r,aa+=af=Q.g,Y+=K=Q.b,s-=r,H-=af,aE-=K,Q=Q.next,ak+=4}ah+=aw}for(aB=0;aB<aw;aB++){for(H=aE=s=ai=aj=aD=0,ak=aB<<2,au=G*(r=an[ak]),aa=G*(af=an[ak+1]),Y=G*(K=an[ak+2]),aD+=U*r,ai+=U*af,aj+=U*K,Z=ab,az=0;az<G;az++){Z.r=r,Z.g=af,Z.b=K,Z=Z.next}for(ar=aw,az=1;az<=aC;az++){ak=ar+aB<<2,aD+=(Z.r=r=an[ak])*(ac=G-az),ai+=(Z.g=af=an[ak+1])*ac,aj+=(Z.b=K=an[ak+2])*ac,s+=r,H+=af,aE+=K,Z=Z.next,az<ae&&(ar+=aw)}for(ak=aB,ag=ab,Q=ad,ax=0;ax<ap;ax++){ay=ak<<2,an[ay]=aD*X>>a,an[ay+1]=ai*X>>a,an[ay+2]=aj*X>>a,aD-=au,ai-=aa,aj-=Y,au-=ag.r,aa-=ag.g,Y-=ag.b,ay=aB+((ay=ax+G)<ae?ay:ae)*aw<<2,aD+=s+=ag.r=an[ay],ai+=H+=ag.g=an[ay+1],aj+=aE+=ag.b=an[ay+2],ag=ag.next,au+=r=Q.r,aa+=af=Q.g,Y+=K=Q.b,s-=r,H-=af,aE-=K,Q=Q.next,ak+=aw}}at.putImageData(al,am,aq)}}function g(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var b=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],f=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];h.exports={stackBlurImage:k}},function(x,C,k){function q(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function j(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}function A(K){var N=K.id,u=K.type,G=K.title,p=void 0===G?"":G,d=K.imgSrc,M=void 0===d?"":d,O=K.width,L=void 0===O?0:O,F=K.height,H=void 0===F?0:F,J=K.padding;L=B(L),H=B(H);var I=p.replace(/ /g,"&nbsp;"),E=M?'<img style="width: 100%; height: 100%;" src="'+M+'">':I;return y(g,{id:N,type:u,width:L,height:H,content:E,padding:J})}var D=function(){function a(f,d){for(var h=0;h<d.length;h++){var c=d[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),z=function w(f,c,l){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var h=Object.getPrototypeOf(f);return null===h?void 0:w(h,c,l)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(l)}};k(169);var B=k(170).addSuffixPx,m=k(127),g=k(171),y=k(44).parse,v=(k(24).openUrl,function(c){function a(f,h){q(this,a);var d=j(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,h));return $.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!0}},trigger:{self:!1},sound:!1,link:!1}),d}return b(a,c),D(a,[{key:"getFtEditableProps",value:function(){var d=z(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtEditableProps",this).call(this),f=this.FtEditableProps;return d.concat([f.link.url,f.internalLink.internalLink,f.telephone.number])}},{key:"create$context",value:function(){var F=this.compJson,I=F.id,h=F.type,E=F.properties,f=E.imgSrc,d=E.title,J=F.css,G=J.width,H=J.height;if(f){f=this.getImgSrc(f,{width:G,height:H});var p="0"}else{p="0 8px"}return this.$context=$(A({id:I,type:h,imgSrc:f,title:d,width:G,height:H,padding:p})),this.$context}},{key:"bindAfterRenderEvent",value:function(f,d){}},{key:"updateBtnTitle",value:function(d){this.compJson.properties.imgSrc||(this.$context[0].innerText=d)}},{key:"deleteImage",value:function(){this.compJson.properties.imgSrc||(this.$context[0].innerText="")}}]),a}(m));x.exports=v},function(b,a){},function(d,b){function g(k){var j=document.getElementsByTagName("style")[0];if(!j){j=document.createElement("style");var l=document.head||document.getElementsByTagName("head")[0];j.type="text/css",l.appendChild(j)}var h=document.createTextNode(k);j.appendChild(h)}function a(h){return h=""+h,h.indexOf("px")===-1&&(h+="px"),h}function f(k,j,l){var h=c.js+j.substring(0,1).toUpperCase()+j.substring(1,j.length);k.style[h]=l}var c=function(){var i=window.getComputedStyle(document.documentElement,""),h=(Array.prototype.slice.call(i).join("").match(/-(moz|webkit|ms)-/)||""===i.OLink&&["","o"])[1],j="WebKit|Moz|MS|O".match(new RegExp("("+h+")","i"))[1];return{dom:j,lowercase:h,css:"-"+h+"-",js:h[0].toUpperCase()+h.substr(1)}}();d.exports={addGlobalStyle:g,addSuffixPx:a,preFixCss:f,prefix:c}},function(b,a){b.exports='<span id="#{id}" ctype="#{type}" class="element eqx-link editable-text" style="cursor: default; width: 100%; height: 100%; display: flex;\n   justify-content: center; align-items:center; padding: #{padding}" data-event="1120601">#{content}</span>'},function(m,y,h){function k(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function g(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var w=function(){function a(l,d){for(var o=0;o<d.length;o++){var c=d[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),z=h(23).$loadQQMap,v=h(127),x=h(44).parse;h(173);var j=h(174),f=h(24).openUrl,q=function(c){function a(i,l){k(this,a);var d=g(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,i,l));return $.extend(!0,d.$ability,{style:{advanceStyle:{shadow:!1,paddingTop:!1,borderWidth:!0,borderRadius:!0,borderStyle:!0,borderColor:!0,boxShadowSize:!1,boxShadowBlur:!1,boxShadowColor:!1,boxShadowDirection:!1}},trigger:{self:!1},sound:!1,link:!1}),d}return b(a,c),w(a,[{key:"create$context",value:function(){var L=this,B=this.compJson,F=B.id,H=B.type,E=B.content,C=B.css.width,P=B.properties,N=P.lat,D=void 0===N?39.916527:N,M=P.lng,I=void 0===M?116.397128:M,K=P.zoom,J=void 0===K?11:K,G=P.address,A=P.version,l=B.content||B.properties.address;if(1==A){var O="https://3gimg.qq.com/lightmap/v1/marker/index.html?marker=coord:"+D+","+I+";title:"+E+";addr:"+G+"&referer=myapp",s="";s="customer"===B.properties.layout?j.$customerHtml({contentDes:l}):j.$defalutHtml({url:O})}else{s="customer"===B.properties.layout?j.$customerHtml({contentDes:l}):j.$htmlText({content:E,address:G,width:C})}var u=$(x(s,{id:F,type:H})).css({width:"100%",height:"100%"}).on("mousedown mousemove mouseup mouseleave touchstart touchmove touchend",function(d){d.stopPropagation()});return 1==A&&"view"==this.eqxScene.config.mode?console.log("不加载QQMap地图"):z().then(function(){1!=A&&"customer"!==B.properties.layout&&L.initQQMap({$context:u,content:E,lat:D,lng:I,zoom:J})}),this.updateOmit(),u}},{key:"updateContent",value:function(){this.$context.remove(),this.$context=this.create$context(),this.$contentsDiv.append(this.$context)}},{key:"initQQMap",value:function(B){var F=B.$context,p=B.content,A=B.lat,l=B.lng,d=B.zoom,D=new qq.maps.LatLng(A,l),G={disableDefaultUI:!0,center:D,zoom:parseFloat(d)},C=this.map=new qq.maps.Map(F[0],G);p&&(this.label=new qq.maps.Label({position:D,map:C,content:p}));var E=new qq.maps.Marker({map:C,position:D});F.data("marker",E)}},{key:"updateOmit",value:function(){function i(){var t=d.$boxDiv.find(".navigation"),A=d.$boxDiv.find(".navigation_pad"),p=t.parent().height(),u=A.height();if(p-12<u){t.removeClass("omits"),t.removeClass("omit-height");var s=p-12-30,l=parseInt(s/20)+1;t.addClass("omits"),t.css("-webkit-line-clamp",""+l)}else{t.removeClass("omits"),t.addClass("omit-height")}}var d=this;setTimeout(function(){i()},0)}},{key:"bindAfterRenderEvent",value:function(E,J){var B=J.pageId,D=J.properties,A=D.lat,p=void 0===A?39.916527:A,H=D.lng,K=void 0===H?116.397128:H,G=D.address,I=D.layout,C=D.version,F="http://apis.map.qq.com/tools/routeplan/eword="+G+"&epointx="+K+"&epointy="+p+"?referer=myapp&key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77";"customer"===I?$(E).click(function(){f(F,B)}):0==C&&"default"==I&&$(E).find(".map-nav-box").click(function(){f(F,B)})}}]),a}(v);m.exports=q},function(b,a){},function(c,b){function f(h){var g=h.contentDes,i='<div id="#{id}" ctype="#{type}" class="element">\n                                <span class="mapBtn_div navigation">\n                                     <i class="eqf-address-f address"></i>\n                                     <span class="style-btn default  navigation_pad">\n                                         导航至'+g+"\n                                     </span>\n                                </span>\n                           </div>";return $(i)}function a(h){var g=h.url,i='<div id="#{id}" ctype="#{type}" class="element"><iframe src='+g+' width="100%" height="100%" class="map-iframe"></iframe></div>';return $(i)}function d(j){var h=j.content,l=j.address,g=j.width,k='<div id="#{id}" ctype="#{type}" class="element">\n                        <div class="map-nav-box">\n                            <div class="address-name">\n                                <p style="max-width: '+(g-120)+'px">'+h+'</p>\n                                <p style="max-width: '+(g-120)+'px">'+l+'</p>\n                            </div>\n                            <div class="go-here">\n                                <i class="eqf-send-l"></i>\n                                <span>去这里</span>\n                            </div>\n                        </div>\n                    </div>';return $(k)}c.exports={$customerHtml:f,$defalutHtml:a,$htmlText:d}},function(v,A,j){function m(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function g(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}function y(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f[0].value;return f.find(function(c){var d=c.value;return d===a})}function B(u){var h=u.imgW,D=u.imgH,d=u.containerW,C=u.containerH,p={},c=h/D,l=d/C;return c>l?(p.width=d,p.height=d/c):(p.height=C,p.width=C*c),p.margin=(C-D)/2+"px "+(d-h)/2+"px",p}var x=function(){function a(h,d){for(var l=0;l<d.length;l++){var c=d[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),z=function q(h,c,p){null===h&&(h=Function.prototype);var a=Object.getOwnPropertyDescriptor(h,c);if(void 0===a){var l=Object.getPrototypeOf(h);return null===l?void 0:q(l,c,p)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(p)}};j(176);var k=j(127),f=[{value:1,desc:"轮播",name:"slide"},{value:2,desc:"下落",name:"bars"},{value:3,desc:"百页窗",name:"blinds"},{value:4,desc:"消隐",name:"blocks"},{value:5,desc:"渐变",name:"blocks2"},{value:9,desc:"梳理",name:"zip"},{value:11,desc:"翻转",name:"bars3d"},{value:13,desc:"立方体",name:"cube"},{value:14,desc:"棋盘",name:"tiles3d"},{value:16,desc:"飞出",name:"explode"}],w=function(c){function a(h,i){m(this,a);var d=g(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,h,i));return d.intervalObj={},$.extend(!0,d.$ability,{style:{self:!0,compStyle:{backgroundColor:!0}},anim:!0,trigger:{self:!1},sound:!1,link:!1}),d}return b(a,c),x(a,[{key:"updateSize",value:function(d,h){h.width&&h.height&&(this.flux.width=h.width,this.flux.height=h.height,this.$context.find(".fluxslider, .images, .image1, .image2").css({width:h.width,height:h.height}),z(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateSize",this).call(this,d,h))}},{key:"create$context",value:function(){var I=this,N=this.compJson,E=N.id,G=N.type,D=N.properties;D=void 0===D?{}:D;var s=D.children,L=void 0===s?[]:s,K=D.bgColor,M=N.css,F=M.width,C=M.height,J=$('<div id="'+E+'" class="imageSlider element" ctype="'+G+'"></div>').css("background-color",K);if(L.length){var H=L.map(function(e){var p=e.width,d=e.height,l=e.src,h=B({imgW:p,imgH:d,containerW:F,containerH:C});return l=I.getImgSrc(l,{width:F,height:C}),$('<img src="'+l+'">').css(h)});J.append(H),this.deleteInterval(E),this.initFlux(J)}return J}},{key:"initFlux",value:function(K){var O=this,F=this.compJson,H=F.id,E=F.properties,C=E.autoPlay,P=void 0!==C&&C,M=E.interval,N=E.picStyle,G=F.css,D=G.width,L=G.height,I=G.bgColor,J=flux.slider;this.flux=new J(K,{autoplay:P,delay:M,pagination:!1,transitions:[y(N).name],width:D,height:L,bgColor:I,onStartEnd:function(d){return O.addInterval(H,d)}})}},{key:"bindAfterRenderEvent",value:function(){return !1}},{key:"addInterval",value:function(h,d){this.intervalObj[h]=d}},{key:"deleteInterval",value:function(d){this.intervalObj[d]&&(clearInterval(this.intervalObj[d]),delete this.intervalObj[d])}},{key:"clearInterval",value:function(){for(var d in this.intervalObj){this.deleteInterval(d)}}}]),a}(k);v.exports=w},function(b,a){window.flux={version:"1.4.4"},function(c){flux.slider=function(p,f){flux.browser.init(),flux.browser.supportsTransitions||window.console&&window.console.error&&console.error("Flux Slider requires a browser that supports CSS3 transitions");var h=this;this.element=c(p),this.transitions=[];for(var e in flux.transitions){this.transitions.push(e)}this.options=c.extend({autoplay:!0,transitions:this.transitions,delay:4000,pagination:!0,controls:!1,captions:!1,width:null,height:null,onTransitionEnd:null,onStartEnd:null,bgColor:""},f),this.height=this.options.height?this.options.height:null,this.width=this.options.width?this.options.width:null;var d=[];c(this.options.transitions).each(function(r,o){var s=new flux.transitions[o](this),l=!0;s.options.requires3d&&!flux.browser.supports3d&&(l=!1),s.options.compatibilityCheck&&(l=s.options.compatibilityCheck()),l&&d.push(o)}),this.options.transitions=d,this.images=[],this.imageLoadedCount=0,this.currentImageIndex=0,this.nextImageIndex=1,this.playing=!1,this.container=c('<div class="fluxslider"></div>').appendTo(this.element),this.surface=c('<div class="surface" style="position: relative"></div>').appendTo(this.container),this.container.bind("click",function(i){c(i.target).hasClass("hasLink")&&(window.location=c(i.target).data("href"))}),this.imageContainer=c('<div class="images loading1"></div>').css({position:"relative",overflow:"hidden"}).appendTo(this.surface),this.width&&this.height&&this.imageContainer.css({width:this.width+"px",height:this.height+"px"}),this.image1=c('<div class="image1" style="height: 100%; width: 100%"></div>').appendTo(this.imageContainer),this.image2=c('<div class="image2" style="height: 100%; width: 100%"></div>').appendTo(this.imageContainer),c(this.image1).add(this.image2).css({position:"absolute",top:"0px",left:"0px"}),this.element.find("img, a img").each(function(i,u){var s=u.cloneNode(!1),l=c(u).parent();l.is("a")&&c(s).data("href",l.attr("href")),h.images.push(s),c(u).remove()});for(var k=0;k<this.images.length;k++){var q=new Image;q.onload=function(){h.imageLoadedCount++,h.width=h.width?h.width:this.width,h.height=h.height?h.height:this.height,h.imageLoadedCount>=h.images.length&&(h.finishedLoading(),h.setupImages())},q.src=this.images[k].src}this.element.bind("fluxTransitionEnd",function(l,i){h.options.onTransitionEnd&&(l.preventDefault(),h.options.onTransitionEnd(i))}),this.transitionEndLock=!1;var j={},m={},g=20;this.element.bind("mousedown touchstart",function(i){"touchstart"===i.type?j.left=i.originalEvent.touches[0].pageX:"mousedown"===i.type&&(j.left=i.pageX)}).bind("mouseup touchend",function(i){"touchend"===i.type?m.left=i.originalEvent.changedTouches[0].pageX:"mouseup"===i.type&&(m.left=i.pageX),m.left-j.left>g?h.prev(null,{direction:"right"}):j.left-m.left>g&&h.next(null,{direction:"left"}),h.options.autoplay&&(h.stop(),h.start())})},flux.slider.prototype={constructor:flux.slider,playing:!1,start:function(){var d=this;this.playing=!0,this.transitionEndLock=!1,this.interval=setInterval(function(){!d.transitionEndLock&&d.transition()},this.options.delay),"function"==typeof this.options.onStartEnd&&this.options.onStartEnd(this.interval)},stop:function(){this.playing=!1,clearInterval(this.interval),this.interval=null},isPlaying:function(){return this.playing},next:function(f,d){d=d||{},d.direction="left",this.showImage(this.currentImageIndex+1,f,d)},prev:function(f,d){d=d||{},d.direction="right",this.showImage(this.currentImageIndex-1,f,d)},showImage:function(f,d,g){this.setNextIndex(f),this.setupImages(),this.transition(d,g)},finishedLoading:function(){var e=this;if(this.container.css({width:this.width+"px",height:this.height+"px"}),this.imageContainer.removeClass("loading1"),this.options.pagination&&(this.pagination=c('<ul class="pagination"></ul>').css({margin:"0px",padding:"0px","text-align":"center"}),this.pagination.bind("click",function(g){g.preventDefault(),e.showImage(c(g.target).data("index"))}),c(this.images).each(function(j,g){var h=c('<li data-index="'+j+'">'+(j+1)+"</li>").css({display:"inline-block","margin-left":"0.5em",cursor:"pointer"}).appendTo(e.pagination);0==j&&h.css("margin-left",0).addClass("current")}),this.container.append(this.pagination)),c(this.imageContainer).css({width:this.width+"px",height:this.height+"px"}),c(this.image1).css({width:this.width+"px",height:this.height+"px"}),c(this.image2).css({width:this.width+"px",height:this.height+"px"}),this.container.css({width:this.width+"px",height:this.height+(this.options.pagination?this.pagination.height():0)+"px"}),this.options.controls){var f={padding:"4px 10px 10px","font-size":"60px","font-family":"arial, sans-serif","line-height":"1em","font-weight":"bold",color:"#FFF","text-decoration":"none",background:"rgba(0,0,0,0.5)",position:"absolute","z-index":2000};this.nextButton=c('<a href="#">»</a>').css(f).css3({"border-radius":"4px"}).appendTo(this.surface).bind("click",function(g){g.preventDefault(),e.next()}),this.prevButton=c('<a href="#">«</a>').css(f).css3({"border-radius":"4px"}).appendTo(this.surface).bind("click",function(g){g.preventDefault(),e.prev()});var d=(this.height-this.nextButton.height())/2;this.nextButton.css({top:d+"px",right:"10px"}),this.prevButton.css({top:d+"px",left:"10px"})}this.options.captions&&(this.captionBar=c('<div class="caption"></div>').css({background:"rgba(0,0,0,0.6)",color:"#FFF","font-size":"16px","font-family":"helvetica, arial, sans-serif","text-decoration":"none","font-weight":"bold",padding:"1.5em 1em",opacity:0,position:"absolute","z-index":110,width:"100%",bottom:0}).css3({"transition-property":"opacity","transition-duration":"800ms","box-sizing":"border-box"}).prependTo(this.surface)),this.updateCaption()},setupImages:function(){var d=this.getImage(this.currentImageIndex),e={background:'url("'+d.src+'") 50% 50% / contain no-repeat '+this.options.bgColor,zIndex:101,cursor:"auto"};c(d).data("href")?(e.cursor="pointer",this.image1.addClass("hasLink"),this.image1.data("href",c(d).data("href"))):(this.image1.removeClass("hasLink"),this.image1.data("href",null)),this.image1.css(e).children().remove(),this.image2.css({background:'url("'+this.getImage(this.nextImageIndex).src+'") 50% 50% / contain no-repeat '+this.options.bgColor,zIndex:100,display:"none"}),this.options.pagination&&this.pagination&&(this.pagination.find("li.current").removeClass("current"),c(this.pagination.find("li")[this.currentImageIndex]).addClass("current"))},transition:function(f,j){if(void 0==f||!flux.transitions[f]){var e=Math.floor(Math.random()*this.options.transitions.length);f=this.options.transitions[e]}var h=null;try{h=new flux.transitions[f](this,c.extend(this.options[f]?this.options[f]:{},j))}catch(g){var d=flux.transition;h=new d(this,{fallback:!0})}h.run(),this.currentImageIndex=this.nextImageIndex,this.setNextIndex(this.currentImageIndex+1),this.updateCaption()},updateCaption:function(){var d=c(this.getImage(this.currentImageIndex)).attr("title");this.options.captions&&this.captionBar&&(""!==d&&this.captionBar.html(d),this.captionBar.css("opacity",""===d?0:1))},getImage:function(d){return d%=this.images.length,this.images[d]},setNextIndex:function(d){void 0==d&&(d=this.currentImageIndex+1),this.nextImageIndex=d,this.nextImageIndex>this.images.length-1&&(this.nextImageIndex=0),this.nextImageIndex<0&&(this.nextImageIndex=this.images.length-1)},increment:function(){this.currentImageIndex++,this.currentImageIndex>this.images.length-1&&(this.currentImageIndex=0)}}}(window.jQuery||window.Zepto),function(c){flux.browser={init:function(){if(void 0===flux.browser.supportsTransitions){var e=["-webkit","-moz","-o","-ms"];if(window.Modernizr&&void 0!==window.Modernizr.csstransitions?flux.browser.supportsTransitions=window.Modernizr.csstransitions:flux.browser.supportsTransitions=this.supportsCSSProperty("Transition"),window.Modernizr&&void 0!==window.Modernizr.csstransforms3d){flux.browser.supports3d=window.Modernizr.csstransforms3d}else{if(flux.browser.supports3d=this.supportsCSSProperty("Perspective"),flux.browser.supports3d&&"webkitPerspective" in c("body").get(0).style){var f=c('<div id="csstransform3d"></div>'),d=c('<style media="(transform-3d), ('+e.join("-transform-3d),(")+'-transform-3d)">div#csstransform3d { position: absolute; left: 9px }</style>');c("body").append(f),c("head").append(d),flux.browser.supports3d=9==f.get(0).offsetLeft,f.remove(),d.remove()}}}},supportsCSSProperty:function(g){for(var f=document.createElement("div"),j=["Webkit","Moz","O","Ms"],d=!1,h=0;h<j.length;h++){j[h]+g in f.style&&(d=d||!0)}return d},translate:function(f,d,g){return f=void 0!=f?f:0,d=void 0!=d?d:0,g=void 0!=g?g:0,"translate"+(flux.browser.supports3d?"3d(":"(")+f+"px,"+d+(flux.browser.supports3d?"px,"+g+"px)":"px)")},rotateX:function(d){return flux.browser.rotate("x",d)},rotateY:function(d){return flux.browser.rotate("y",d)},rotateZ:function(d){return flux.browser.rotate("z",d)},rotate:function(f,d){return f in {x:"",y:"",z:""}||(f="z"),d=void 0!=d?d:0,flux.browser.supports3d?"rotate3d("+("x"==f?"1":"0")+", "+("y"==f?"1":"0")+", "+("z"==f?"1":"0")+", "+d+"deg)":"z"==f?"rotate("+d+"deg)":""}},c(function(){flux.browser.init()})}(window.jQuery||window.Zepto),function(c){c.fn.css3=function(g){var f={},j=["webkit","moz","ms","o"];for(var d in g){for(var h=0;h<j.length;h++){f["-"+j[h]+"-"+d]=g[d]}f[d]=g[d]}return this.css(f),this},c.fn.transitionEnd=function(e){for(var f=["webkitTransitionEnd","transitionend","oTransitionEnd"],d=0;d<f.length;d++){this.bind(f[d],function(g){for(var h=0;h<f.length;h++){c(this).unbind(f[h])}e&&e.call(this,g)})}return this},flux.transition=function(e,f){if(this.options=c.extend({requires3d:!1,after:function(){}},f),this.slider=e,this.options.requires3d&&!flux.browser.supports3d||!flux.browser.supportsTransitions||this.options.fallback===!0){var d=this;this.options.after=void 0,this.options.setup=function(){d.fallbackSetup()},this.options.execute=function(){d.fallbackExecute()}}},flux.transition.prototype={constructor:flux.transition,hasFinished:!1,run:function(){var d=this;void 0!==this.options.setup&&this.options.setup.call(this),this.slider.image1.css({"background-image":"none"}),this.slider.imageContainer.css("overflow",this.options.requires3d?"visible":"hidden"),setTimeout(function(){void 0!==d.options.execute&&d.slider.image1.css("background-color",""),d.options.execute.call(d),d.slider.options.autoplay&&(d.slider.transitionEndLock=!0)},5)},finished:function(){this.hasFinished||(this.hasFinished=!0,this.options.after&&this.options.after.call(this),this.slider.imageContainer.css("overflow","hidden"),this.slider.setupImages(),this.slider.element.trigger("fluxTransitionEnd",{currentImage:this.slider.getImage(this.slider.currentImageIndex)}),this.slider.options.autoplay&&(this.slider.transitionEndLock=!1))},fallbackSetup:function(){},fallbackExecute:function(){this.finished()}},flux.transitions={},flux.transition_grid=function(e,f){var d=flux.transition;return new d(e,c.extend({columns:10,rows:10,forceSquare:!1,setup:function(){var w=this.slider.image1.width(),C=this.slider.image1.height(),F=Math.floor(w/this.options.columns),B=Math.floor(C/this.options.rows);this.options.forceSquare&&(B=F,this.options.rows=Math.floor(C/B));for(var z=w-this.options.columns*F,L=Math.ceil(z/this.options.columns),x=C-this.options.rows*B,K=Math.ceil(x/this.options.rows),q=0,E=0,A=document.createDocumentFragment(),J=0;J<this.options.columns;J++){var G=F;if(E=0,z>0){var I=z>=L?L:z;G+=I,z-=I}for(var H=0;H<this.options.rows;H++){var D=B,k=x;k>0&&(I=k>=K?K:k,D+=I,k-=I);var j=c('<div class="tile tile-'+J+"-"+H+'"></div>').css({width:G+"px",height:D+"px",position:"absolute",top:E+"px",left:q+"px",overflow:"hidden"}).append("<div></div>");this.options.renderTile.call(this,j,J,H,G,D,q,E),A.appendChild(j.get(0)),E+=D}q+=G}this.slider.image1.get(0).appendChild(A)},execute:function(){var h=this,g=this.slider.image1.height(),i=this.slider.image1.find("div.barcontainer");this.slider.image2.hide(),i.last().transitionEnd(function(j){h.slider.image2.show(),h.finished()}),i.css3({transform:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,g/2,g/2)})},renderTile:function(l,j,p,h,m,k,g){}},f))}}(window.jQuery||window.Zepto),function(c){flux.transitions.bars=function(e,f){var d=flux.transition_grid;return new d(e,c.extend({columns:10,rows:1,delayBetweenBars:40,renderTile:function(j,p,h,m,l,g,k){c(j).children().css({position:"absolute",top:-k+"px",left:-g+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).parent().css3({"transition-duration":"400ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":p*this.options.delayBetweenBars+"ms"})},execute:function(){var h=this,j=this.slider.image1.height(),g=this.slider.image1.find("div.tile");c(g[g.length-1]).transitionEnd(function(){h.finished()}),setTimeout(function(){g.css({opacity:"0.5"}).css3({transform:flux.browser.translate(0,j)})},50)}},f))}}(window.jQuery||window.Zepto),function(c){flux.transitions.bars3d=function(e,f){var d=flux.transition_grid;return new d(e,c.extend({requires3d:!0,columns:7,rows:1,delayBetweenBars:150,perspective:1000,renderTile:function(z,k,q,j,g,x,A){var w=c('<div class="bar-'+k+'"></div>').css({width:j+"px",height:"100%",position:"absolute",top:"0px",left:"0px","z-index":200,overflow:"hidden"}).css3({"backface-visibility":"hidden"}),y=c("<div></div>").css({position:"absolute",top:-A+"px",left:-x+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).appendTo(w),m=c(w.get(0).cloneNode(!1)).css3({transform:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-g/2,g/2)});c(y.get(0).cloneNode(!1)).css({"background-image":this.slider.image2.css("background-image")}).appendTo(m);var h=c('<div class="side bar-'+k+'"></div>').css({width:g+"px",height:g+"px",position:"absolute",top:"0px",left:"0px",background:"#222","z-index":190}).css3({transform:flux.browser.rotateY(90)+" "+flux.browser.translate(g/2,0,-g/2)+" "+flux.browser.rotateY(180),"backface-visibility":"hidden"}),v=c(h.get(0).cloneNode(!1)).css3({transform:flux.browser.rotateY(90)+" "+flux.browser.translate(g/2,0,j-g/2)});c(z).empty().css({overflow:"visible",width:j+"px",height:"100%",position:"absolute",top:"0px",left:x+"px","z-index":k>this.options.columns/2?1000-k:1000}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"all","transition-delay":k*this.options.delayBetweenBars+"ms","transform-style":"preserve-3d"}).append(w).append(m).append(h).append(v)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).css({"-moz-transform":"perspective("+this.options.perspective+"px)","-moz-perspective":"none","-moz-transform-style":"preserve-3d"});var h=this,g=this.slider.image1.height(),i=this.slider.image1.find("div.tile");this.slider.image2.hide(),i.last().transitionEnd(function(j){h.slider.image1.css3({"transform-style":"flat"}),h.slider.image2.show(),h.finished()}),setTimeout(function(){i.css3({transform:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,g/2,g/2)})},50)}},f))}}(window.jQuery||window.Zepto),function(c){flux.transitions.blinds=function(e,f){var d=flux.transitions.bars;return new d(e,c.extend({execute:function(){var g=this,h=this.slider.image1.find("div.tile");c(h[h.length-1]).transitionEnd(function(){g.finished()}),setTimeout(function(){h.css({opacity:"0.5"}).css3({transform:"scalex(0.0001)"})},50)}},f))}}(window.jQuery||window.Zepto),function(c){flux.transitions.zip=function(e,f){var d=flux.transitions.bars;return new d(e,c.extend({execute:function(){var h=this,j=this.slider.image1.height(),g=this.slider.image1.find("div.tile");c(g[g.length-1]).transitionEnd(function(){h.finished()}),setTimeout(function(){g.each(function(l,k){c(k).css({opacity:"0.3"}).css3({transform:flux.browser.translate(0,l%2?"-"+2*j:j)})})},20)}},f))}}(window.jQuery||window.Zepto),function(c){flux.transitions.blocks=function(e,f){var d=flux.transition_grid;return new d(e,c.extend({forceSquare:!0,delayBetweenBars:100,renderTile:function(j,q,h,m,l,g,k){var p=Math.floor(10*Math.random()*this.options.delayBetweenBars);c(j).children().css({position:"absolute",top:-k+"px",left:-g+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).parent().css3({"transition-duration":"350ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":p+"ms"}),void 0===this.maxDelay&&(this.maxDelay=0),p>this.maxDelay&&(this.maxDelay=p,this.maxDelayTile=j)},execute:function(){var g=this,h=this.slider.image1.find("div.tile");this.maxDelayTile.transitionEnd(function(){g.finished()}),setTimeout(function(){h.each(function(i,j){c(j).css({opacity:"0"}).css3({transform:"scale(0.8)"})})},50)}},f))}}(window.jQuery||window.Zepto),function(c){flux.transitions.blocks2=function(e,f){var d=flux.transition_grid;return new d(e,c.extend({cols:12,forceSquare:!0,delayBetweenDiagnols:150,renderTile:function(j,p,h,m,l,g,k){c(j).children().css({position:"absolute",top:-k+"px",left:-g+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).parent().css3({"transition-duration":"350ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":(p+h)*this.options.delayBetweenDiagnols+"ms","backface-visibility":"hidden"})},execute:function(){var g=this,h=this.slider.image1.find("div.tile");h.last().transitionEnd(function(){g.finished()}),setTimeout(function(){h.each(function(i,j){c(j).css({opacity:"0"}).css3({transform:"scale(0.8)"})})},50)}},f))}}(window.jQuery||window.Zepto),function(c){flux.transitions.cube=function(e,f){var d=flux.transition;return new d(e,c.extend({requires3d:!0,barWidth:100,direction:"left",perspective:1000,setup:function(){var h=this.slider.image1.width(),l=this.slider.image1.height();this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}),this.cubeContainer=c('<div class="cube"></div>').css({width:h+"px",height:l+"px",position:"relative"}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"all","transform-style":"preserve-3d"});var g={height:"100%",width:"100%",position:"absolute",top:"0px",left:"0px"},k=c('<div class="face current"></div>').css(c.extend(g,{background:this.slider.image1.css("background")})).css3({"backface-visibility":"hidden"});this.cubeContainer.append(k);var j=c('<div class="face next"></div>').css(c.extend(g,{backgroundImage:this.slider.image2.css("background-image")})).css3({transform:this.options.transitionStrings.call(this,this.options.direction,"nextFace"),"backface-visibility":"hidden"});this.cubeContainer.append(j),this.slider.image1.append(this.cubeContainer)},execute:function(){var g=this;this.slider.image2.hide(),this.cubeContainer.transitionEnd(function(){g.slider.image2.show(),g.finished()}),setTimeout(function(){g.cubeContainer.css3({transform:g.options.transitionStrings.call(g,g.options.direction,"container")})},50)},transitionStrings:function(j,h){var l=this.slider.image1.width(),g=this.slider.image1.height(),k={up:{nextFace:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,g/2,g/2),container:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-g/2,g/2)},down:{nextFace:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-g/2,g/2),container:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,g/2,g/2)},left:{nextFace:flux.browser.rotateY(90)+" "+flux.browser.translate(l/2,0,l/2),container:flux.browser.rotateY(-90)+" "+flux.browser.translate(-l/2,0,l/2)},right:{nextFace:flux.browser.rotateY(-90)+" "+flux.browser.translate(-l/2,0,l/2),container:flux.browser.rotateY(90)+" "+flux.browser.translate(l/2,0,l/2)}};return !(!k[j]||!k[j][h])&&k[j][h]}},f))}}(window.jQuery||window.Zepto),function(c){flux.transitions.tiles3d=function(e,f){var d=flux.transition_grid;return new d(e,c.extend({requires3d:!0,forceSquare:!0,columns:5,perspective:600,delayBetweenBarsX:200,delayBetweenBarsY:150,renderTile:function(q,j,k,h,g,m,v){var l=c("<div></div>").css({width:h+"px",height:g+"px",position:"absolute",top:"0px",left:"0px",background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+m+"px -"+v+"px","background-repeat":"no-repeat","-moz-transform":"translateZ(1px)"}).css3({"backface-visibility":"hidden"}),p=c(l.get(0).cloneNode(!1)).css({"background-image":this.slider.image2.css("background-image")}).css3({transform:flux.browser.rotateY(180),"backface-visibility":"hidden"});c(q).empty().css({overflow:"visible","z-index":(j>this.options.columns/2?500-j:500)+(k>this.options.rows/2?500-k:500)}).css3({"transition-duration":"800ms","transition-timing-function":"ease-out","transition-property":"all","transition-delay":j*this.options.delayBetweenBarsX+k*this.options.delayBetweenBarsY+"ms","transform-style":"preserve-3d"}).append(l).append(p)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"});var h=this,g=this.slider.image1.find("div.tile");this.slider.image2.hide(),g.last().transitionEnd(function(i){h.slider.image2.show(),h.finished()}),setTimeout(function(){g.css3({transform:flux.browser.rotateY(180)})},50)}},f))}}(window.jQuery||window.Zepto),function(c){flux.transitions.turn=function(e,f){var d=flux.transition;return new d(e,c.extend({requires3d:!0,perspective:1300,direction:"left",setup:function(){var h=c('<div class="tab"></div>').css({width:"50%",height:"100%",position:"absolute",top:"0px",left:"left"===this.options.direction?"50%":"0%","z-index":101}).css3({"transform-style":"preserve-3d","transition-duration":"1000ms","transition-timing-function":"ease-out","transition-property":"all","transform-origin":"left"==this.options.direction?"left center":"right center"});c("<div></div>").appendTo(h).css({background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"==this.options.direction?"-"+this.slider.image1.width()/2:0)+"px 0",width:"100%",height:"100%",position:"absolute",top:"0",left:"0","-moz-transform":"translateZ(1px)"}).css3({"backface-visibility":"hidden"}),c("<div></div>").appendTo(h).css({background:this.slider.image2.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"===this.options.direction?0:"-"+this.slider.image1.width()/2)+"px 0",width:"100%",height:"100%",position:"absolute",top:"0",left:"0"}).css3({transform:flux.browser.rotateY(180),"backface-visibility":"hidden"});var k=c("<div></div>").css({position:"absolute",top:"0",left:"left"===this.options.direction?"0":"50%",width:"50%",height:"100%",background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"===this.options.direction?0:"-"+this.slider.image1.width()/2)+"px 0","z-index":100}),g=c('<div class="overlay"></div>').css({position:"absolute",top:"0",left:"left"===this.options.direction?"50%":"0",width:"50%",height:"100%",background:"#000",opacity:1}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"opacity"}),j=c("<div></div>").css3({width:"100%",height:"100%"}).css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).append(h).append(k).append(g);this.slider.image1.append(j)},execute:function(){var g=this;this.slider.image1.find("div.tab").first().transitionEnd(function(){g.finished()}),setTimeout(function(){g.slider.image1.find("div.tab").css3({transform:flux.browser.rotateY("left"==g.options.direction?-179:179)}),g.slider.image1.find("div.overlay").css({opacity:0})},50)}},f))}}(window.jQuery||window.Zepto),function(c){flux.transitions.slide=function(e,f){var d=flux.transition;return new d(e,c.extend({direction:"left",setup:function(){var h=this.slider.image1.width(),k=this.slider.image1.height(),g=c('<div class="current"></div>').css({height:k+"px",width:h+"px",position:"absolute",top:"0px",left:"0px",background:this.slider["left"===this.options.direction?"image1":"image2"].css("background")}).css3({"backface-visibility":"hidden"}),j=c('<div class="next"></div>').css({height:k+"px",width:h+"px",position:"absolute",top:"0px",left:h+"px",background:this.slider["left"===this.options.direction?"image2":"image1"].css("background")}).css3({"backface-visibility":"hidden"});this.slideContainer=c('<div class="slide"></div>').css({width:2*h+"px",height:k+"px",position:"relative",left:"left"===this.options.direction?"0px":-h+"px","z-index":101}).css3({"transition-duration":"600ms","transition-timing-function":"ease-in","transition-property":"all"}),this.slideContainer.append(g).append(j),this.slider.image1.append(this.slideContainer)},execute:function(){var h=this,g=this.slider.image1.width();"left"===this.options.direction&&(g=-g),this.slideContainer.transitionEnd(function(){h.finished()}),setTimeout(function(){h.slideContainer.css3({transform:flux.browser.translate(g)})},50)}},f))}}(window.jQuery||window.Zepto),function(c){flux.transitions.explode=function(e,f){var d=flux.transition_grid;return new d(e,c.extend({columns:10,forceSquare:!0,delayBetweenBars:30,perspective:800,requires3d:!0,renderTile:function(j,q,h,m,l,g,k){var p=Math.floor(10*Math.random()*this.options.delayBetweenBars);c(j).children().css({position:"absolute",top:-k+"px",left:-g+"px",width:this.slider.width+"px ",height:this.slider.height+"px",background:this.slider.image1.css("background")}).parent().css3({"transition-duration":"500ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":p+"ms"}),void 0===this.maxDelay&&(this.maxDelay=0),p>this.maxDelay&&(this.maxDelay=p,this.maxDelayTile=j)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).css({"-moz-transform":"perspective("+this.options.perspective+"px)","-moz-perspective":"none","-moz-transform-style":"preserve-3d"});var g=this,h=this.slider.image1.find("div.tile");this.maxDelayTile.transitionEnd(function(){g.slider.image1.css3({"transform-style":"flat"}),g.finished()}),setTimeout(function(){h.each(function(i,j){c(j).css({opacity:"0"}).css3({transform:flux.browser.translate(0,0,700)+" rotate3d("+(Math.round(2*Math.random())-1)+", "+(Math.round(2*Math.random())-1)+", "+(Math.round(2*Math.random())-1)+", 90deg) "})})},50)}},f))}}(window.jQuery||window.Zepto)},function(z,E,m){function v(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function k(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}function C(a){return new Promise(function(d,c){m.e(9,function(){var f=m(180),e=f[a];/^<path.*>$/.test(e)?d(e):c(a+" does not match <path />")})})}var F=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),B=function x(f,c,h){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var g=Object.getPrototypeOf(f);return null===g?void 0:x(g,c,h)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(h)}},D=m(41).$getSvg,q=m(178),j=m(179),A=m(127),w="http://www.w3.org/2000/svg",y=function(c){function a(f,g){v(this,a);var d=k(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return $.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!0}}}),d}return b(a,c),F(a,[{key:"getFtEditableProps",value:function(){var f=B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtEditableProps",this).call(this),h=this.FtEditableProps,d=this.compJson.properties.items,g=(d||[]).map(function(l,i){return h.color.fill+"-"+i});return f.concat([h.sound.soundSrc,h.link.url,h.internalLink.internalLink,h.telephone.number],g)}},{key:"getFtValue",value:function(f){var g=this.FtEditableProps;if(f.includes(g.color.fill)){var d=f.split("-")[1];return this.getProp("items")[d].fill}return B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtValue",this).call(this,f)}},{key:"updateFillColor",value:function(g,f){var l=$(this.$li).find("[fill], [style*='fill']"),d=this.getProp("items")[g];if(d){var h=d.elements;d.fill=f,l.each(function(o){if(h.indexOf(o)>-1){var n=$.Color(f).toString();l.eq(o).css({fill:n})}})}}},{key:"create$context",value:function(){var R=this.compJson,H=this;this.$contentsDiv.css({position:"relative"});var L=R.id,O=R.properties,K=O.viewBox,J=void 0===K?"0 0 64 64":K,I=O.type,T=void 0===I?"":I,S=O.src,Q=O.items,P=R.css.color,M=void 0===P?"#555":P;if(S){var u=document.createElementNS(w,"svg");return u.setAttribute("class","element svg-element"),D(S).then(function(W){var n=W.getElementsByTagName("svg"),e=n[0].viewBox.baseVal,ad=parseFloat($(n).attr("width"))||e.width,af=parseFloat($(n).attr("height"))||e.height,aa=$(n).find("[fill], [style*='fill']")||[];if(Q){if(aa.length==Q.length){for(var ae=0;ae<Q.length;ae++){aa.eq(ae).css({fill:Q[ae].fill})}}else{$.each(aa,function(r,g){for(var ag=0;ag<Q.length;ag++){for(var d=Q[ag].elements||[],s=0;s<d.length;s++){r==d[s]&&(""!=Q[ag].fill?aa.eq(r).css({fill:Q[ag].fill}):aa.eq(r).css({fill:"none"}))}}})}}else{var V=[],f={};$.each(aa,function(ag,g){var ai=$(g).attr("style");if(ai){for(var d=ai.split(";")||[],ah=0,s=d.length;ah<s;ah++){if(d[ah].includes("fill:")){V.push(d[ah].split(":")[1]);break}}}else{V.push($(g).attr("fill"))}});for(var Z=0;Z<V.length;Z++){f[V[Z]]||(f[V[Z]]=1,"none"!=V[Z]?Q.push({fill:V[Z],svgFill:V[Z]}):Q.push({fill:"",svgFill:"none"}))}for(var X=0;X<Q.length;X++){var Y=[];$.each(aa,function(ah,s){var aj,g=$(s).attr("style");if(g){for(var ai=g.split(";"),ag=0,d=ai.length;ag<d;ag++){if(ai[ag].includes("fill:")){aj=ai[ag].split(":")[1];break}}}else{aj=$(s).attr("fill")}aj==Q[X].svgFill&&Y.push(ah)}),Q[X].elements=Y}R.properties.items=Q}var t="0 0 "+ad+" "+af,ac=H.$contentsDiv;ac.empty();var ab=H.$contentsDiv[0];u=n[0],ab.appendChild(u),u.getAttribute("viewBox")||u.setAttribute("viewBox",t),u.setAttribute("preserveAspectRatio","none"),u.setAttribute("width","100%"),u.setAttribute("height","100%"),u.id=L,u.setAttribute("class","element svg-element"),H.$context=$(u)})["catch"](function(){var d;(d=console).error.apply(d,arguments)}),$(u)}var h=J.split(" "),U=h[2]||64,l=h[3]||64;if(T.includes("symbols")){var p=$(j.svg({id:L,viewBox:J}))[0];return C(T.replace(/^symbols-/,"")).then(function(d){p.innerHTML=j.g({id:L,color:M,path:d})})["catch"](function(){var d;(d=console).error.apply(d,arguments)}),$(p)}var N=T.replace(/-([a-z])/g,function(f,d){return d.toUpperCase()});if(q[N]){var G=$(q[N](U,l)).attr("fill",M);return $(j.svg({id:L,viewBox:J,content:G[0].outerHTML}))}console.error("shape#"+L+" does not match any!")}},{key:"updateTurnOver",value:function(d){this.$boxContentDiv.css("transform",d)}}]),a}(A);z.exports=y},function(G,k){function z(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function C(c){for(var a=[];c.length>=2;){a.push(c.shift()+","+c.shift())}return a.join(" ")}function y(d,c){var a=z("rect");return a.setAttribute("width",d),a.setAttribute("height",c),a}function w(d,c){var a=z("ellipse");return a.setAttribute("rx",d/2),a.setAttribute("ry",c/2),a.setAttribute("cx",d/2),a.setAttribute("cy",c/2),a}function J(c,a){var d=z("polygon");return d.setAttribute("points",C([c/2,0,c,a,0,a])),d}function q(c,a){var d=z("polygon");return d.setAttribute("points",C([0,0,c,0,c/2,a])),d}function I(c,a){var d=z("polygon");return d.setAttribute("points",C([0,a/2,c,0,c,a])),d}function j(c,a){var d=z("polygon");return d.setAttribute("points",C([c,a/2,0,a,0,0])),d}function B(c,a){var d=z("polygon");return d.setAttribute("points",C([0.5*c,0,c,0.5*a,0.7*c,0.5*a,0.7*c,a,0.3*c,a,0.3*c,0.5*a,0,0.5*a,0.5*c,0])),d}function x(c,a){var d=z("polygon");return d.setAttribute("points",C([0.5*c,a,c,0.5*a,0.7*c,0.5*a,0.7*c,0,0.3*c,0,0.3*c,0.5*a,0,0.5*a,0.5*c,a])),d}function H(c,a){var d=z("polygon");return d.setAttribute("points",C([c,0.3*a,0.5*c,0.3*a,0.5*c,0,0,0.5*a,0.5*c,a,0.5*c,0.7*a,c,0.7*a,c,0.3*a])),d}function D(c,a){var d=z("polygon");return d.setAttribute("points",C([0,0.3*a,0.5*c,0.3*a,0.5*c,0,c,0.5*a,0.5*c,a,0.5*c,0.7*a,0,0.7*a])),d}function F(i,K,g){var d=z("polygon"),n=[];if(3===g){n=[i/2,0,i,K,0,K]}else{if(g>3){for(var L=i/2,m=K/2,v=0;g>v;v++){var h=L+L*Math.cos(2*Math.PI*v/g),f=m+m*Math.sin(2*Math.PI*v/g);h=Math.round(10*h)/10,f=Math.round(10*f)/10,n.push(h),n.push(f)}}}return d.setAttribute("points",C(n)),d}function E(c,a){return F(c,a,4)}function A(c,a){return F(c,a,8)}G.exports={rect:y,ellipse:w,circle:w,triangleUp:J,triangleDown:q,triangleLeft:I,triangleRight:j,arrowUp:B,arrowDown:x,arrowLeft:H,arrowRight:D,diamond:E,octagon:A};var b=z("rect");b.attr=b.setAttribute},function(c,b){function f(j){var h=j.color,k=j.id,g=j.path;return'<g fill="'+h+'" id="path_'+k+'">'+g+"</g>"}function a(k){var h=k.id,l=k.viewBox,g=k.content,j=void 0===g?"":g;return'\n<svg id="'+h+'" class="element svg-element" xmlns="'+d+'" version="1.1" width="100%"\n     height="100%" preserveAspectRatio="none" viewBox="'+l+'">\n    '+j+"\n</svg>"}var d="http://www.w3.org/2000/svg";c.exports={g:f,svg:a}},,function(B,G,q){function x(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function k(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var E=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),H=function v(f,c,h){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var g=Object.getPrototypeOf(f);return null===g?void 0:v(g,c,h)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(h)}},D=q(182),F=q(127),w=q(184),j=q(186),C=q(44).parse,y=q(25).mobilecheck,A={POP:0,INLINE:1},z=function(c){function a(f,g){x(this,a);var d=k(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return d.bgm=d.eqxScene.bgm,d.$close=null,d.$video=null,$.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!1}},trigger:{self:!1},sound:!1,link:!1,flexLine:"r,ne,se,sw,nw"}),d}return b(a,c),E(a,[{key:"create$context",value:function(){var m=this.compJson,g=m.id,u=m.type,f=m.properties.cover,p=m.css,l=p.width,d=p.height;if(f){f=this.getImgSrc(f,{width:l,height:d});var h=$(C(w,{id:g,type:u,cover:f}))}else{h=$(C(j,{id:g,type:u}))}return h.css({height:d,width:l}),h}},{key:"addClassToLi",value:function(d){d.addClass("wsite-video")}},{key:"eleHide",value:function(){H(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleHide",this).call(this),this.hide()}},{key:"update",value:function(d){switch(d.type){case"hide":this.hide()}}},{key:"bindAfterRenderEvent",value:function(g,f){var h=this,d=f.properties.style;return g.click(function(){switch(h._isPlayingVideo=!0,h.bgm&&h.bgm.hide&&h.bgm.hide(),h.eqxScene.soundManager.stopAll(),d){case A.INLINE:h.initInlineVideo();break;case A.POP:default:h.initPopVideo()}}),!0}},{key:"initInlineVideo",value:function(){var g=this.compJson,f=g.properties.src,h=g.css;f=f.replace(/('|")?allowfullscreen\1(=('|")?\3)?/,"");var d=this.$iframe=$(f).css({width:h.width,height:h.height,zIndex:3,position:"fixed",top:0});y()||d.css("position","absolute"),$(this.context).find("img").css("display","none"),this.$li.find(".inline-video").append(d)}},{key:"initPopVideo",value:function(){var p=this,K=this.compJson,g=K.id,m=K.properties.src,f=this.$li;f.hide();var d=f.parent().css("transform").match(/-?[\d.]+/g)||f.parents(".edit_wrapper").css("transform").match(/-?[\d.]+/g),I=0;d&&(I=-parseInt(d[5]));var L=this.$video=$(D.videoDiv(g));y()||L.css("position","absolute");var J=this.$close=$(D.close(g)),h=$(m).css({position:"absolute",top:"20%",width:"100%",minHeight:"45%",maxHeight:"100%"}).removeAttr("height");L.append(h),f.parent().append(L,J),L.css({top:I}),J.css({top:I+15}),J.bind("click",function(){p.hide()})}},{key:"hide",value:function(){if(this._isPlayingVideo){this._isPlayingVideo=!1,this.bgm&&this.bgm.show&&this.bgm.show(),this.eqxScene.soundManager.restoreAll();var f=this.compJson.properties.style,d=void 0===f?0:f;switch(d){case A.INLINE:this.$iframe&&(this.$iframe.remove(),this.$iframe=null);break;case A.POP:this.$close&&(this.$li.show(),this.$close.unbind("click"),this.$video.remove(),this.$close.remove(),this.$video=null,this.$close=null)}}}}]),a}(F);z.STYLE=A,B.exports=z},function(d,b,g){function a(i){var h=i.id,j=i.type;return'<a class="element video_area" id="'+h+'" ctype="'+j+'" style="width:100%;height:100%;"></a>'}function f(h){return'<div class="video_mask page_effect lock" id="mask_'+h+'"></div>'}function c(h){return'<a class="close_mask eqf-no" id="close_'+h+'"></a>'}g(183),d.exports={compDiv:a,videoDiv:f,close:c}},function(b,a){},function(b,a,c){b.exports='<div class="inline-video" id="#{id}" ctype="#{type}"><img class="cover" alt="video-cover" src="#{cover}"> <img class="center play" src="'+c(185)+'" alt="video-play-button"></div>'},function(b,a,c){b.exports=c.p+"images/play-a830cb.svg"},function(b,a){b.exports='<a class="element video_area" id="#{id}" ctype="#{type}" style="width:100%;height:100%"></a>'},function(I,q,B){function E(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function A(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function x(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var L=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),w=function b(f,c,h){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var g=Object.getPrototypeOf(f);return null===g?void 0:b(g,c,h)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(h)}},K=B(127),k=B(188),D=B(82).getWxJSSDK,z=B(25).isWeixin,J=B(25).isAndroid,F=B(77).RAW_EVENT,H=B(77).EQX_EVENT,G=B(25).mobilecheck,C=G()?"touchend":"click",j=function(c){function a(f,g){E(this,a);var d=A(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return $.extend(!0,d.$ability,{style:{commonStyle:{self:!1},advanceStyle:{self:!1}},anim:!1,trigger:{mediaCanplay:!0,mediaEnded:!0,mediaPlaying:!0},sound:!1,link:!1}),d}return x(a,c),L(a,[{key:"getFtEditableProps",value:function(){var d=w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtEditableProps",this).call(this),f=this.FtEditableProps;return d.concat([f.video.video])}},{key:"getFtValue",value:function(d){var f=this.FtEditableProps;return d===f.video.video?this.compJson.src:w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtValue",this).call(this,d)}},{key:"updateSize",value:function(d,f){this.$context.css({width:f.width,height:f.height}),w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateSize",this).call(this,d,f)}},{key:"create$context",value:function(){var h=this.compJson,f=h.css,m=f.width,d=f.height,l=h.properties.loop;this.$source=$('<source type="video/mp4">');var g=$('<video x5-video-player-fullscreen="false" playsinline="true" webkit-playsinline width="'+m+'" height="'+d+'" poster="'+k+'" audoplay></video>');return l&&g.attr("loop","loop"),g.append(this.$source),g}},{key:"eleShow",value:function(){w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleShow",this).call(this),this.compJson.autoplay&&"1"===this.compJson.autoplay.toString()&&(this.$context.attr("autoplay","autoplay"),this.playVideo())}},{key:"eleHide",value:function(){w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleHide",this).call(this),this.$context[0].pause(),this.interactiveVideoAgent&&this.interactiveVideoAgent.end()}},{key:"addTriggerGroupListeners",value:function(){function g(){f.playVideo()}var f=this;this.$context.on("play",function(){$(document.body).unbind(C,g)});var l=[5,6,7,8,9,10],d=this.eqxPage.pageJson.properties.triggerGroup,h=d.some(function(i){return l.indexOf(i.eventType)>-1});d.length&&!h||$(document.body).bind(C,g)}},{key:"playVideo",value:function(){var f=this.interactiveVideoAgent;if(this.compJson.src&&this.$source.attr("src")){try{this.$li.show();var d=this.$context[0];d.currentTime=0,z()?this.wxJssdk.then(function(){wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){d.paused?f.play():f.end()}})}):d.paused?f.play():f.end()}catch(g){this.$li.hide()}}}},{key:"bindAfterRenderEvent",value:function(g,f){var h=this;f.src&&this.$source.attr("src",f.src);var d=this.eqxPage.pageJson.properties.triggerGroup.some(function(i){return i.sourceId===f.id&&i.targetId===f.id&&i.eventType===F.click&&i.targetState==H.play});return this.compJson.autoplay&&"1"===this.compJson.autoplay.toString()&&!d&&J()&&this.$li.on("click",function(){h.playVideo()}),z()&&(this.wxJssdk=D()),this.$boxDiv.css({borderWidth:0}),this.$li.hide(),!0}}]),a}(K);I.exports=j},function(b,a,c){b.exports=c.p+"images/play-32e9c9.png"},function(k,w,g){function j(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function f(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var q=function(){function a(o,l){for(var p=0;p<l.length;p++){var c=l[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),x=function d(p,c,u){null===p&&(p=Function.prototype);var a=Object.getOwnPropertyDescriptor(p,c);if(void 0===a){var s=Object.getPrototypeOf(p);return null===s?void 0:d(s,c,u)}if("value" in a){return a.value}var l=a.get;if(void 0!==l){return l.call(u)}};g(190);var m=(g(191).$postDialRecord,g(192)),v=(g(196).isPhoneNumber,g(127)),h=function(c){function a(l,o){j(this,a);var i=f(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,l,o));return $.extend(!0,i.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!0}},trigger:{self:!1},sound:!1,link:!1}),i}return b(a,c),q(a,[{key:"getFtEditableProps",value:function(){var i=x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtEditableProps",this).call(this),l=this.FtEditableProps;return i.concat([l.link.url,l.internalLink.internalLink,l.telephone.number])}},{key:"create$context",value:function(){var C=this.compJson,F=C.id,z=C.type,B=C.css,y=B.width,p=B.height,D=C.properties,G=D.title,E=D.imgSrc;if(E){E=this.getImgSrc(E,{width:y,height:p});var A="0"}return this.$context=$(m.compDiv({id:F,title:G,type:z,imgSrc:E,padding:A})),this.$context}},{key:"updateBtnTitle",value:function(i){this.compJson.properties.imgSrc||(this.$context[0].innerText=i)}},{key:"deleteImage",value:function(){this.compJson.properties.imgSrc||(this.$context[0].innerText="")}},{key:"bindAfterRenderEvent",value:function(){}}]),a}(v);k.exports=h},function(b,a){},function(d,b,g){function a(h){return f({type:"POST",url:c.SERVER_1+"eqs/dial",data:h})}var f=g(21).ajax,c=g(22);d.exports={$postDialRecord:a}},function(h,l,f){function g(a){return a.imgSrc?b(a):d(a)}function d(o){var c=o.id,p=o.title,a=o.type;return p=p?p.replace(/ /g,"&nbsp;"):"",j(k,{id:c,title:p,type:a})}function b(p){var c=p.id,r=p.imgSrc,a=p.type,q=p.padding;return j(m,{id:c,src:r,type:a,padding:q})}f(193);var k=f(194),m=f(195),j=f(44).parse;h.exports={compDiv:g}},function(b,a){},function(b,a){b.exports='<a id="#{id}" ctype="#{type}" class="element eqx-tel editable-text" style="display: flex; justify-content: center; align-items: center" data-event="1120602" style="cursor: default; width: 100%">#{title}</a>'},function(b,a){b.exports='<a id="#{id}" ctype="#{type}" class="element eqx-tel editable-text" style="cursor: default; width: 100%;height: 100%;padding: #{padding}"><img style="width: 100%; height: 100%" src="#{src}"></a>'},function(c,b){function d(g){var f=/(\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$/;return f.test(g)}function a(g){var f=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return f.test(g)}c.exports={isPhoneNumber:d,isEmail:a}},function(m,y,h){function k(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function g(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var w=function(){function a(l,d){for(var o=0;o<d.length;o++){var c=d[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),z=function q(l,c,s){null===l&&(l=Function.prototype);var a=Object.getOwnPropertyDescriptor(l,c);if(void 0===a){var p=Object.getPrototypeOf(l);return null===p?void 0:q(p,c,s)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(s)}};h(198);var v=h(199),x=h(127),j=h(44).parse,f=function(c){function a(i,l){k(this,a);var d=g(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,i,l));return $.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),d}return b(a,c),w(a,[{key:"getFtEditableProps",value:function(){var d=z(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtEditableProps",this).call(this),i=this.FtEditableProps;return d.concat([i.sound.soundSrc])}},{key:"create$context",value:function(){var E=this.compJson,I=E.id,C=E.type,D=E.properties,B=D.imgSrc,l=D.title,G=E.css,J=G.height,H=G.width;if(B){B=this.getImgSrc(B,{width:H,height:J});var A="0",F='<img style="width: 100%; height: 100%;" src="'+B+'">'}return l&&(F=l.replace(/ /g,"&nbsp;"),A="0 8px",B=""),B||l||(F=""),$(j(v,{id:I,type:C,content:F,padding:A}))}},{key:"updateBtnTitle",value:function(d){this.compJson.properties.imgSrc||(this.$context[0].innerText=d)}},{key:"deleteImage",value:function(){this.compJson.properties.imgSrc||(this.$context[0].innerText="")}}]),a}(x);m.exports=f},function(b,a){},function(b,a){b.exports='<a id="#{id}" ctype="#{type}" class="element eqx-sound editable-text" data-event="1120604" style="cursor: default; width: 100%;height: 100%; padding: #{padding};\ndisplay: flex; justify-content: center; align-items: center">#{content}</a>'},function(z,E,m){function v(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function k(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}function C(l){var f=l.id,u=l.type,d=l.layout,p=l.size,h=l.icon,c=l.color,g=$(w(A,{layout:d,size:p,id:f,type:u,icon:h}));return g.find("i, span").css("color",c),g}var F=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),B=function x(f,c,h){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var g=Object.getPrototypeOf(f);return null===g?void 0:x(g,c,h)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(h)}};m(201);var D=m(83).$getPvCount,q=m(202).fixedNum,j=m(127),A=m(203),w=m(44).parse,y=function(c){function a(f,g){v(this,a);var d=k(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return $.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),d}return b(a,c),F(a,[{key:"eleShow",value:function(){B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleShow",this).call(this),this.getPvCount()}},{key:"create$context",value:function(){var L=this.compJson;L.properties.color&&(L.css.color=L.properties.color,delete L.properties.color);var P=L.id,H=L.type,J=L.properties,G=J.layout,f=J.size,Q=J.icon,N=L.css,O=N.lineHeight,I=N.width,g=N.height,M=N.color,K=C({id:P,type:H,layout:G,size:f,icon:Q,css:{width:I,height:g,lineHeight:O,color:M}});return K}},{key:"getPvCount",value:function(){var d=this;if("view"==this.eqxScene.config.mode&&!this.eqxScene.config.disablePv){return D(this.compJson.sceneId).then(function(f){return q(f)||0}).then(function(e){d.$li.find(".counter-number").text(e)})}}},{key:"updateLayout",value:function(){this.$context.remove(),this.$li.css({height:this.compJson.css.height,lineHeight:this.compJson.css.lineHeight}),this.$context=this.create$context(),this.$contentsDiv.append(this.$context)}}]),a}(j);z.exports=y},function(b,a){},function(c,b){function d(g){var f;return g<10000?f=g:g>=10000&&g<100000000?f=(g/10000).toFixed(2)+"万":g>=100000000&&(f=(g/100000000).toFixed(2)+"亿"),f}function a(g){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(Math.random()*g)%g+f}c.exports={fixedNum:d,random:a}},function(b,a){b.exports='<div class="element comp_counter editable-text #{layout} #{size}" id="#{id}" ctype="#{type}"><div class="counter-container"><i class="counter-elem counter-icon #{icon}"></i><span class="counter-elem counter-number">0</span></div></div>'},function(x,C,k){function q(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function j(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}function A(d){var c=d.id,h=d.type,a=d.pics,f=a.map(function(i){return D(i.path)}).join("");return $('\n<div id="'+c+'" class="random-event element comp_image editable-image" ctype="'+h+'"\n     style="width: 100%; height: 100%;">\n     '+f+"\n</div>")}function D(a){return'<img src="'+(m.FILE+a)+'" style="width: 100%; height: 100%; display: none;">'}var z=function(){function a(f,d){for(var h=0;h<d.length;h++){var c=d[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}();k(205);var B=k(127),m=k(22),g=k(206),y=k(209),v=k(202).random,w=function(c){function a(f,h){q(this,a);var d=j(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,h));return d.randomIndex=-1,d.busy=!1,$.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!0}},trigger:{self:!1},sound:!1,link:!1}),d}return b(a,c),z(a,[{key:"create$context",value:function(){var h=this.compJson,f=h.id,l=h.type,d=h.properties.pics;return this.randomMax=d.length,A({id:f,type:l,pics:d})}},{key:"addTriggerEvent",value:function(){var f=this.compJson.trigger,d=this.eqxScene.eventManager;f&&(f.sends&&(this.triggerEventAgent=new g(this,f,d)),f.receives&&(this.receiveEventAgent=new y(this,f,d)))}},{key:"showRandomImg",value:function(){var f=this.$context.find("img");f.css("display","none");var d=this.randomIndex;if(1!=this.randomMax){do{d=v(this.randomMax)}while(d==this.randomIndex)}else{d=0}$(f[d]).css("display","block"),this.randomIndex=d}}]),a}(B);x.exports=w},function(b,a){},function(m,y,h){function k(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function g(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var w=function(){function a(l,d){for(var o=0;o<d.length;o++){var c=d[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),z=function q(l,c,s){null===l&&(l=Function.prototype);var a=Object.getOwnPropertyDescriptor(l,c);if(void 0===a){var p=Object.getPrototypeOf(l);return null===p?void 0:q(p,c,s)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(s)}},v=h(207),x=h(77).RAW_EVENT,j=h(77).INIT_EVENT,f=function(c){function a(i,l,d){return k(this,a),g(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,i,l,d))}return b(a,c),w(a,[{key:"addEventListener",value:function(){var l=this,o=this.triggerJson.sends,d=this.master.compJson.id;this.master.$li.attr("data-event","1120603"),o&&"[object Array]"===toString.apply(o)&&o.forEach(function(e){e.type===x.click?l.master.$li.on("click",function(){l.publish(d,e)}):z(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"addEventListener",l).call(l)})}},{key:"preHandle",value:function(){var d=this.master.compJson.properties.initType;d==j.show?this.master.$li.show():d==j.hide&&this.master.$li.hide()}}]),a}(v);m.exports=f},function(g,d,j){function c(i,a){if(!(i instanceof a)){throw new TypeError("Cannot call a class as a function")}}var h=function(){function a(m,l){for(var o=0;o<l.length;o++){var k=l[o];k.enumerable=k.enumerable||!1,k.configurable=!0,"value" in k&&(k.writable=!0),Object.defineProperty(m,k.key,k)}}return function(k,l,e){return l&&a(k.prototype,l),e&&a(k,e),k}}(),f=j(208).getHash,b=function(){function a(e,k,i){c(this,a),this.triggerJson=k,this.master=e,this.manager=i,this.addEventListener()}return h(a,[{key:"addEventListener",value:function(){}},{key:"preHandle",value:function(){}},{key:"removeEventListener",value:function(){}},{key:"publish",value:function(k,i){var l=this;i.handles.forEach(function(e){var m=f(k,e.type);l.manager.publish(m,{sender:l.master,delay:1000*i.delay})})}}]),a}();g.exports=b},function(g,d,j){function c(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.some(function(i){return i.type===f.shake})}function h(i,a){return"sender-"+i+"-type-"+a+"-"+b[a]}var f=j(77).RAW_EVENT,b=j(77).EQX_EVENT;g.exports={hasShakeEvent:c,getHash:h}},function(m,y,h){function k(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function g(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var w=function(){function a(l,d){for(var o=0;o<d.length;o++){var c=d[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),z=function q(l,c,s){null===l&&(l=Function.prototype);var a=Object.getOwnPropertyDescriptor(l,c);if(void 0===a){var p=Object.getPrototypeOf(l);return null===p?void 0:q(p,c,s)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(s)}},v=h(210),x=h(77).EQX_EVENT,j=h(27).noop,f=function(c){function a(i,l,d){return k(this,a),g(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,i,l,d))}return b(a,c),w(a,[{key:"getHandler",value:function(d){return d===x.random?function(o,n){var l=h(204);if(!(o instanceof l)){if(_DEBUG_){throw new Error("Expect EqxRandom, Invalid element type: "+o)}return j}o.busy||(o.busy=!0,setTimeout(function(){o.showRandomImg(),o.busy=!1},n.delay))}:z(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getHandler",this).call(this,d)}}]),a}(v);m.exports=f},function(m,y,h){function k(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function g(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var w=function(){function a(l,d){for(var o=0;o<d.length;o++){var c=d[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),z=function q(l,c,s){null===l&&(l=Function.prototype);var a=Object.getOwnPropertyDescriptor(l,c);if(void 0===a){var p=Object.getPrototypeOf(l);return null===p?void 0:q(p,c,s)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(s)}},v=h(211),x=h(77).EQX_EVENT,j=h(77).INIT_EVENT,f=function(c){function a(i,l,d){return k(this,a),g(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,i,l,d))}return b(a,c),w(a,[{key:"getPreHandler",value:function(d,i){if(i!=j["default"]){return z(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getPreHandler",this).call(this,d,i)}switch(d){case x.show:return function(l){l.$li.hide()};case x.hide:return function(l){l.$li.show()};default:return z(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getPreHandler",this).call(this,d,i)}}},{key:"getHandler",value:function(d){switch(d){case x.show:return function(l,i){setTimeout(function(){return l.$li.show()},i.delay)};case x.hide:return function(l,i){setTimeout(function(){return l.$li.hide()},i.delay)};case x.play:return function(l,i){setTimeout(function(){return l.playVideo()},i.delay)};default:return z(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getHandler",this).call(this,d)}}}]),a}(v);m.exports=f},function(h,d,k){function c(i,a){if(!(i instanceof a)){throw new TypeError("Cannot call a class as a function")}}var j=function(){function a(o,m){for(var p=0;p<m.length;p++){var l=m[p];l.enumerable=l.enumerable||!1,l.configurable=!0,"value" in l&&(l.writable=!0),Object.defineProperty(o,l.key,l)}}return function(l,m,e){return m&&a(l.prototype,m),e&&a(l,e),l}}(),g=k(27).noop,b=k(208).getHash,f=function(){function a(e,l,i){c(this,a),this.master=e,this.triggerJson=l,this.manager=i,this.events=[],this.subscribe(),this.preHandle()}return j(a,[{key:"subscribe",value:function(){var i=this;this.triggerJson.receives.forEach(function(e){(e.ids||[]).forEach(function(q){var l=b(q,e.type);i.manager.subscribe(l,i);var p=i.events.findIndex(function(n){return n.hash===l});p>-1&&i.events.splice(p,1);var m={hash:l,preHandler:i.getPreHandler(e.type,i.master.compJson.properties.initType),handler:i.getHandler(e.type)};i.events.push(m)})})}},{key:"update",value:function(o){var m=o.type,p=o.data,l=this.events.find(function(i){return i.hash===m});l&&l.handler.call(this,this.master,p)}},{key:"preHandle",value:function(){var i=this;this.events.forEach(function(e){return e.preHandler.call(i,i.master)})}},{key:"getHandler",value:function(i){return g}},{key:"getPreHandler",value:function(i){return g}}]),a}();h.exports=f},function(N,B,G){function J(b){if(Array.isArray(b)){for(var a=0,c=Array(b.length);a<b.length;a++){c[a]=b[a]}return c}return Array.from(b)}function F(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function D(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?b:a}function R(b,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}var C=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),P=function q(d,b,g){null===d&&(d=Function.prototype);var a=Object.getOwnPropertyDescriptor(d,b);if(void 0===a){var f=Object.getPrototypeOf(d);return null===f?void 0:q(f,b,g)}if("value" in a){return a.value}var c=a.get;if(void 0!==c){return c.call(g)}},A=G(213),I=G(127),E=G(82).getWeChatUser,O=G(25).isWeixin,K=G(81).$getUserWxInfo,M=G(82).setWeChatUser,L=G(82).hrefToWxAuth,H=G(84).popUpModal,z=G(24).setUrlHistory,j=G(223),Q=G(25).mobilecheck,k=function(b){function a(h,l){F(this,a);var d=D(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,h,l)),g=d.compJson.properties.style;"barrage"===g&&(d.Barrage=new j,d.isBarragePlaying=!1,d.barrageComments=[]);var i=new Promise(function(){});if(d.commentManager=d.eqxScene.commentManager,d.commentManager){d.commentManager.register(d);var f=d.commentManager.getComments();i=f.length?Promise.resolve():d.commentManager.loadInitComments(50),i.then(function(){if("barrage"===g){var c;(c=d.barrageComments).push.apply(c,J(f)),d.eleShow()}})}return $.extend(!0,d.$ability,{style:{advanceStyle:{border:!1,shadow:!1,paddingTop:!1,borderWidth:!1,borderRadius:!1,borderStyle:!1,borderColor:!1,boxShadowSize:!1,boxShadowBlur:!1,boxShadowColor:!1,boxShadowDirection:!1}},trigger:{self:!1},sound:!1,link:!1}),d}return R(a,b),C(a,[{key:"setProps",value:function(c){c.style&&this.getProp("style")!=c.style&&this.updateStyle(c.style),"meslabel" in c&&this.getProp("mesLabel")!=c.meslabel&&this.updateMesLabel(c.meslabel),"morelabel" in c&&this.getProp("morelabel")!=c.morelabel&&this.updateMoreLabel(c.morelabel),P(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setProps",this).call(this,c)}},{key:"getStyles",value:function(){return G(225)}},{key:"updateStyle",value:function(c){this.$boards&&"barrage"===c?this.compJson.css.backgroundColor="transparent":this.$boards&&this.$boards.removeClass().addClass("boards-"+c)}},{key:"updateMesLabel",value:function(c){this.$context.find("a.replay").html(c||"")}},{key:"updateMoreLabel",value:function(c){this.$context.find("a.more").html(c||"")}},{key:"eleShow",value:function(){P(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleShow",this).call(this);var d=this.compJson.properties,g=d.style,c=d.auto;if(this.$panel.parent().length||(this.$panel.hide(),this.$panel.insertBefore(this.$li.parent().parent())),"barrage"!==g){var f=this.commentManager?this.commentManager.getComments().slice(0,5).map(function(h){return A.record(h)}):[];f.length?(this.$boards.find(".empty-boards").length&&this.$boards.find(".empty-boards").remove(),this.$boards.find(".record").remove(),this.$boards.prepend(f)):this.$boards.append(A.emptyBoards(g))}else{c&&this.playBarrageScroll()}}},{key:"eleHide",value:function(){P(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleHide",this).call(this);var c=this.compJson.properties.style;"barrage"!==c?(this.$boards.find(".record").remove(),this.$boards.find(".empty-boards").remove(),this.$panel.hide()):this.stopBarrageScroll()}},{key:"addClassToLi",value:function(c){c.addClass("wsite-boards"),c.attr("min-h",60).attr("min-w",230)}},{key:"updateComments",value:function(){var c=this.compJson.properties.style;"barrage"!==c&&this.$boards&&this.$panel&&this.eleShow()}},{key:"create$context",value:function(){var c=this.compJson.properties.style;return this.$ele="barrage"===c?this.initBarrageDiv():this.initCommentStyleDiv(),this.$ele}},{key:"playBarrageScroll",value:function(){var l=this;if(!this.isBarragePlaying&&this.barrageComments.length){this.isBarragePlaying=!0;var u=this.$boards.find("a.barrage-play");u.removeClass("off").addClass("on");var g=this.compJson,h=g.css,f=h.width,d=h.height,p=g.properties.mode,v=this.$boards.find(".barrage-comments").get(0),m=devicePixelRatio||1;v.width=f*m,v.height=d*m,setTimeout(function(){l.Barrage.render(v,l.barrageComments,"0"===p.toString())})}}},{key:"stopBarrageScroll",value:function(){if(this.isBarragePlaying){this.isBarragePlaying=!1;var c=this.$boards.find("a.barrage-play");c.removeClass("on").addClass("off"),this.Barrage&&this.Barrage.stop()}}},{key:"initBarrageDiv",value:function(){var l=this.compJson,u=l.id,g=l.type,h=l.properties,f=h.style,d=h.auto,p=h.editable,v=$(A.compDiv({id:u,type:g,style:f})),m=this.$boards=v.find(".boards-"+f);return m.append(A.barrageComments()),m.append(A.barrageTools(d,p)),this.$panel=$(A.panel({style:"default"})),this.$panelList=this.$panel.find(".list"),this.$contentText=this.$panel.find(".content-text"),this.$contentTip=this.$panel.find(".content-tip"),this.$submit=this.$panel.find(".record-btn"),this.$more=this.$panel.find(".more-mes"),this.$close=this.$panel.find(".eqf-no"),this.maxLength=this.$contentText.attr("maxLength"),v}},{key:"initCommentStyleDiv",value:function(){var w=this.compJson,T=w.id,m=w.type,v=w.properties,h=v.meslabel,f=v.morelabel,S=v.style,U=$(A.compDiv({id:T,type:m,style:S})),y=this.$boards=U.find(".boards-"+S);y.append(A.tool({meslabel:h||"",morelabel:f||""})),this.$trigger=y.find(".tool a");var u=this.$panel=$(A.panel({style:S}));if(this.$close=u.find(".eqf-no"),this.$contentText=u.find(".content-text"),this.$contentTip=u.find(".content-tip"),this.$submit=u.find(".record-btn"),this.$more=u.find(".more-mes"),this.$panelList=u.find(".list"),this.maxLength=this.$contentText.attr("maxLength"),this.eqxScene.config.disableCommentManager){var g=(new Date).getTime(),x=[1,2,3].map(function(c){return A.record({content:"赞一个！好多新功能哦~",name:"匿名用户",createTime:g+10000*c,isEditor:!0})});y.append(x)}return U}},{key:"bindAfterRenderEvent",value:function(v,Z){function g(){m.commentManager&&m.commentManager.loadMoreComments().then(function(c){m.$more.before(c.map(function(i){return A.record(i)}))})["catch"](function(){m.$more.html("没有更多"),m.$more.unbind("click")})}function u(){var y=m.compJson.properties.style,n=m.commentManager.getComments().map(function(i){return A.record(i)});m.$panelList.find(".record").remove(),m.$panelList.prepend(n),m.$panel.show();var l=m.eqxPage,S=l.$editDiv.css("transform")||"",x=S.match(/matrix.*, (.*)\)/),c=x?x[1]:0,w=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;m.$panel.css({top:Math.abs(c)+"px",height:(Q()?w:486)+"px"}),"barrage"===y&&m.stopBarrageScroll(),g()}var f=this,d=Z.sceneId,W=Z.pageId,ab=Z.properties,T=ab.style,h=void 0===T?"default":T,U=ab.editable,V=E(),Y=K,m=this;this.$panel.on("touchstart touchmove touchend mousedown mouseup mousemove",function(c){c.stopPropagation()}),this.$contentText.on("input",function(i){var c=i.target.value,l=c.length+c.split("\n").length-1;f.$contentTip.html(l+"/"+f.maxLength)});var aa=!1;if(this.$submit.on("click",function(){if(!aa){aa=!0,f.$submit.addClass("submit-disabled");var i=$.trim(f.$contentText.val())||f.$contentText.attr("placeholder"),c=i.length+i.split("\n").length-1;c>f.maxLength&&(i=i.slice(0,f.maxLength));var l={sceneId:d,content:i,url:V.headimgurl||"",name:V.nickname||"匿名用户"};f.commentManager.postComment(l).then(function(o){var n=A.record(o);H(""+("barrage"===h?"发送弹幕成功，谢谢参与！":"留言成功，谢谢参与！")),f.$contentText.val(""),f.$panelList.parent().scrollTop(0),f.$panelList.prepend(n),f.$contentTip.html("0/"+f.maxLength),"barrage"===h&&f.barrageComments.unshift(o)})["catch"](function(){H("file:"===window.location.protocol?"请发布后再提交！":"提交失败，请重新提交")})["finally"](function(){var r=10,o=function s(){r?(f.$submit.text("提交留言("+r--+"秒)"),setTimeout(function(){s()},1000)):(f.$submit.text("提交留言"),f.$submit.removeClass("submit-disabled"),aa=!1)};o()})}}),this.$close.on("click",function(){f.$panel.hide(),f.eleShow()}),this.$more.on("click",function(){g()}),"barrage"===h){var X=this.$boards.find("a.barrage-submit"),p=this.$boards.find("a.barrage-play");X.click(function(){U&&(O()&&!V.nickname?Y().then(function(c){c.obj?(M(c.obj),u()):(z(W),L())})["catch"](function(){u()}):u())}),p.click(function(){f.isBarragePlaying?f.stopBarrageScroll():f.playBarrageScroll()})}else{this.$trigger.on("click",function(){O()&&!V.nickname?Y().then(function(c){c.obj?(M(c.obj),u()):(z(W),L())})["catch"](function(){u()}):u()})}return !0}}]),a}(I);N.exports=k},function(z,E,m){function v(d){var c=d.id,g=d.type,a=d.style,f=void 0===a?"default":a;return x(y,{id:c,type:g,style:f})}function k(){return'<canvas class="barrage-comments"></canvas>'}function b(c,a){return'<div class="barrage-tools">\n                '+(a?'<a class="barrage-submit eqf-pen-f"></a>':"")+'\n                <a class="barrage-play '+(c?"on":"off")+'">弹<i class="eqf-slash-l"></i></a>\n            </div>'}function C(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",a=m(217)("./"+c+"_boards.png");return'<div class="empty-boards"><img style="margin-top:-20px;" src="'+a+'" /></div>'}function F(c){var a=c.meslabel,d=c.morelabel;return'<div class="tool"><a class="replay">'+a+'</a><a class="more">'+d+"</a></div>"}function B(a){return'<div class="headimg" style="background-image:url('+a+')"></div>'}function D(){return'<div class="headimg headimg-bg"><em class="eqf-eqxiulogo"></em></div>'}function q(h){var f=h.url,p=h.name,d=h.content,l=h.createTime,g=f?B(f):D();if((new Date).getTime()-l<60000){var c="刚刚"}else{c=A(new Date(l),"MM月dd日 hh:mm")}return'<div class="record">\n                '+g+'\n                <div class="name ellipsis">'+p+'</div>\n                <div class="mes">'+d+'</div>\n                <div class="time">'+c+"</div>\n            </div>"}function j(c){var a=c.style,d=void 0===a?"default":a;return x(w,{style:d})}m(214);var A=m(43).dateFormat,w=m(215),y=m(216),x=m(44).parse;z.exports={compDiv:v,emptyBoards:C,tool:F,headImgUser:B,headImgEqxView:D,record:q,panel:j,barrageTools:b,barrageComments:k}},function(b,a){},function(b,a){b.exports='<div class="boards-panel boards-#{style}"><div class="boards-top"><div class="head">留言板<em class="eqf-no"></em></div><div class="boards-form"><textarea placeholder="踩一下！" maxlength="140" class="content-text"></textarea><span class="content-tip">0/140</span> <a class="record-btn" data-event="11207">提交留言</a></div><div class="spline-con"><span>更多留言</span> <span class="spline"></span></div></div><div class="boards-con ios-boards-con"><div class="list"><div class="more-mes">查看更多</div></div></div></div>'},function(b,a){b.exports='<div class="element-box-contents eqx-comp-comment" style="width: 100%; height: 100%"><div id="#{id}" class="element boards-#{style}" ctype="#{type}"></div></div>'},function(d,b,g){function a(h){return g(f(h))}function f(h){return c[h]||function(){throw new Error("Cannot find module '"+h+"'.")}()}var c={"./black_boards.png":218,"./blue_boards.png":219,"./default_boards.png":220,"./pink_boards.png":221,"./yellow_boards.png":222};a.keys=function(){return Object.keys(c)},a.resolve=f,d.exports=a,a.id=217},function(b,a,c){b.exports=c.p+"images/black_boards-ba4922.png"},function(b,a,c){b.exports=c.p+"images/blue_boards-f58067.png"},function(b,a,c){b.exports=c.p+"images/default_boards-f58067.png"},function(b,a,c){b.exports=c.p+"images/pink_boards-a2ae42.png"},function(b,a,c){b.exports=c.p+"images/yellow_boards-f58067.png"},function(V,G,M){function Q(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function L(a){this.realCav=a,this.realCtx=this.realCav.getContext("2d"),this.cavWidth=this.cav.width=this.realCav.width,this.cavHeight=this.cav.height=this.realCav.height,this.limitTextWidth=this.cavWidth-A-2*F-z-B,this.ctx.font=B+"px Arial"}function J(b){var a=this;this.barrageArr=[],b.forEach(function(c){a.barrageArr.push({logo:c.url||M(224),text:c.content})})}function Z(){for(var c=0;c<this.barrageArr.length;c++){var b=this.barrageArr[c],d=this.ctx.measureText(b.text).width,a=new Image;a.src=b.logo,b.image=a,b.rectWidth=A+z+d+2*F,b.rectHeight=A+2*F,H.call(this,b)}}function H(b){var a=A+2*F+P,c=Math.floor(this.cav.height/a);b.left=this.cavWidth,b.top=R(0,c<=0?0:c-1)*(b.rectHeight+P),b.speed=R(50,100)/100*Y}function X(c){for(var b=0;b<this.barrageArr.length;b++){var f=this.barrageArr[b-1],a=this.barrageArr[b],d=new Image;d.src=a.logo,c||(a.left=0,a.speed=Y,a.image=d,a.textRows=U(this.barrageArr[b].text,this.limitTextWidth,this.ctx),a.oneLineTextHeight=1.2*B,a.oneLineTextWidth=this.ctx.measureText(a.textRows[0]).width,a.mutilLineTextHeight=a.oneLineTextHeight*a.textRows.length,a.rectWidth=A+z+a.oneLineTextWidth+2*F,a.mutilLineTextHeight>A?a.rectHeight=a.mutilLineTextHeight+2*F-0.2*B:a.rectHeight=A+2*F),a.top=f?f.top+f.rectHeight+P:this.cavHeight}}function D(){W.call(this),this.isH?O.call(this):K.call(this),this.realCtx.drawImage(this.cav,0,0,this.cavWidth,this.cavHeight),this.animationId=requestAnimationFrame(D.bind(this))}function O(){for(var k=0;k<this.barrageArr.length;k++){var v=this.barrageArr[k];this.barrageArr[k].left+v.rectWidth<=0&&H.call(this,v);var f=this.barrageArr[k].left-=this.barrageArr[k].speed,h=f,d=f+F,b=d+A+z,p=this.barrageArr[k].top,m=p,s=p+F,g=s+3*Y;N(h,m,v.rectWidth,v.rectHeight,this.ctx),C(v.image,d,s,A,this.ctx),T(this.barrageArr[k].text,b,g,this.ctx)}}function K(){for(var k=0;k<this.barrageArr.length;k++){var w=this.barrageArr[k],f=this.barrageArr[this.barrageArr.length-1];f.top+f.rectHeight<=0&&X.call(this,!0);var h=w.left,d=h+F,b=d+A+z,m=w.top-=w.speed,x=m,v=m+F,g=w.textRows.length>1?v:v+3*Y;N(h,x,w.rectWidth,w.rectHeight,this.ctx),C(w.image,d,v,A,this.ctx);for(var c=0;c<w.textRows.length;c++){T(w.textRows[c],b,g+w.oneLineTextHeight*c,this.ctx)}}}function W(){this.realCtx&&(this.ctx.clearRect(0,0,this.cavWidth,this.cavHeight),this.realCtx.clearRect(0,0,this.cavWidth,this.cavHeight))}function R(b,a){var c=a-b+1;return Math.floor(Math.random()*c+b)}function U(g,d,k){for(var c=g.split(""),h="",f=[],b=0;b<c.length;b++){k.measureText(h).width>=d&&(f.push(h),h=""),h+=c[b]}return f.push(h),f}function T(c,b,d,a){a.fillStyle="#fff",a.textBaseline="top",a.fillText(c,b,d)}function N(d,b,g,a,f){var c=3*Y;g<2*c&&(c=g/2),a<2*c&&(c=a/2),f.fillStyle="rgba(0,0,0,.3)",f.beginPath(),f.moveTo(d+c,b),f.arcTo(d+g,b,d+g,b+a,c),f.arcTo(d+g,b+a,d,b+a,c),f.arcTo(d,b+a,d,b,c),f.arcTo(d,b,d+g,b,c),f.fill()}function C(c,b,f,a,d){d.beginPath(),d.arc(b+a/2,f+a/2,a/2,0,2*Math.PI,!0),d.closePath(),d.save(),d.clip(),d.drawImage(c,b,f,a,a),d.restore()}var q=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),Y=devicePixelRatio||1,A=20*Y,B=12*Y,P=5*Y,F=5*Y,z=5*Y,j=function(){function a(){Q(this,a),this.cav=document.createElement("canvas"),this.ctx=this.cav.getContext("2d"),this.realCav=null,this.realCtx=null,this.cavWidth=0,this.cavHeight=0,this.barrageArr=[],this.isH=!0,this.animationId=null,this.limitTextWidth=0}return q(a,[{key:"render",value:function(c,b,d){cancelAnimationFrame(this.animationId),this.stop(),this.isH=d,L.call(this,c),J.call(this,b),this.isH?Z.call(this):X.call(this,!1),this.animationId=requestAnimationFrame(D.bind(this))}},{key:"stop",value:function(){cancelAnimationFrame(this.animationId),W.call(this)}}]),a}();V.exports=j},function(b,a,c){b.exports=c.p+"images/head-38c163.png"},function(b,a){b.exports=[{name:"默认",value:"default"},{name:"简约黑",value:"black"},{name:"少女粉",value:"pink"},{name:"邮票风",value:"blue"},{name:"便签风",value:"yellow"},{name:"弹幕风",value:"barrage"}]},function(B,G,q){function x(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function k(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var E=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),H=function v(f,c,h){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var g=Object.getPrototypeOf(f);return null===g?void 0:v(g,c,h)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(h)}};q(201);var D=q(227).$postCount,F=q(202).fixedNum,w=q(228),j=q(127),C=q(25).isWeixin,y=q(230),A=q(84).popUpModal,z=function(c){function a(f,g){x(this,a);var d=k(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return $.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!0}},trigger:{self:!1},sound:!1,link:!1}),d}return b(a,c),E(a,[{key:"getFtEditableProps",value:function(){var d=H(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtEditableProps",this).call(this),f=this.FtEditableProps;return d.concat([f.color.counterColor])}},{key:"getFtValue",value:function(d){var f=this.FtEditableProps;return d===f.color.counterColor?this.getProp("color"):H(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtValue",this).call(this,d)}},{key:"updateSize",value:function(d,f){f.height&&(f.lineHeight=f.height+"px",this.$context.css({lineHeight:f.lineHeight})),H(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateSize",this).call(this,d,f)}},{key:"bindAfterRenderEvent",value:function(K){var M=this,m=this.compJson,I=m.id,h=m.sceneId,d=m.pageId,L=this.eqxScene.sceneJson.meta.code,N=this.$context;this.eqxScene.statManager.getCounterValues().then(function(i){var g=i[I]||0;N.find(".counter-number").attr("data-counter-number",g).html(F(g))});var u=this.$li.find(".comp_counter"),f=u.find(".counter-number"),J="rating-l";return u.click(function(){M.compJson.properties&&M.compJson.properties.clickFarmer?C()?D({sceneId:h,elementId:I,pageId:d},L).then(function(){u.unbind("click").removeClass("not-voted");var i=Number.parseInt(f.attr("data-counter-number"))||0,g=i+1;f.attr("data-counter-number",g).text(F(g))})["catch"](function(e){120504===e.code?y.modal(K,J,!1,null,"请到微信中打开使用"):120505===e.code||120603===e.code?y.modal(K,J,!1,null,"请不要重复提交"):A("服务器异常!")}):y.modal(K,J,!1,null,"请到微信中打开使用"):D({sceneId:h,elementId:I,pageId:d},L).then(function(){u.unbind("click").removeClass("not-voted");var i=Number.parseInt(f.attr("data-counter-number"))||0,g=i+1;f.attr("data-counter-number",g).text(F(g))})["catch"](function(e){120603===e.code?y.modal(K,J,!1,null,"请不要重复提交"):A("服务器异常!")})}),!0}},{key:"create$context",value:function(){var m=this.compJson,L=m.id,h=m.type,l=m.properties,g=l.layout,d=l.imgSrc,J=l.color,M=l.icon,I=l.size,K=m.css.textAlign,f=w.$compDiv({id:L,layout:g,size:I,type:h,icon:M,color:J,imgSrc:d});return"center"===K&&f.find("img").css("margin","0 auto"),f}},{key:"update$img",value:function(d){this.$context.find("img").attr("src",d)}},{key:"iconToImg",value:function(d){this.$context.find("i").remove().prepend(w.img(d))}},{key:"updateLayout",value:function(){this.$context.remove(),this.$li.css({height:this.compJson.css.height,lineHeight:this.compJson.css.lineHeight}),this.$context=this.create$context(),this.$contentsDiv.append(this.$context)}},{key:"update$iconColor",value:function(d){this.$context.find(".counter-container").css({color:d}),this.updateProp("color",d)}},{key:"deleteImage",value:function(){this.compJson.properties.imgSrc||this.$context.find("img").remove()}}]),a}(j);B.exports=z},function(g,d,j){function c(i,a){var k=b.SERVER_1+"eqs/scene/count";return a&&(k=k+"?code="+a),f({type:"POST",url:k,data:i})}function h(a){return f({type:"POST",url:b.SERVER_1+"eqs/scene/counter/values",data:a})}var f=j(21).ajax,b=j(22);g.exports={$postCount:c,$getCountValues:h}},function(h,m,f){function g(w){var y=w.id,c=w.layout,q=w.size,z=w.type,o=w.icon,a=w.color,x=w.imgSrc,r=x?b(x):d(o),v=x?1120609:k(o),u=$(l(j,{layout:c,size:q,id:y,type:z,i:r,dataEvent:v}));return u.find(".counter-container").css({color:a}),u}function d(a){return'<i class="counter-elem counter-icon '+a+'" ></i>'}function b(c){var a=p.FILE+c;return'<img class="counter-elem counter-icon"\n             style="width: 115px; height: 115px;" src="'+a+'">'}function k(c){var a={"eqf-heart-f":1120605,"eqf-zan-f":1120606,"eqf-flower2":1120607,"eqf-vote":1120608};return a[c]}var p=f(22),j=f(229),l=f(44).parse;h.exports={$compDiv:g}},function(b,a){b.exports='<div class="element comp_counter not-voted editable-text #{layout} #{size}" id="#{id}" ctype="#{type}" name="eq[f_#{id}]"><div class="counter-container" data-event="#{dataEvent}" style="white-space: nowrap">#{i} <span class="counter-elem counter-number" data-counter-number="0">0</span></div></div>'},function(g,d,j){function c(m){var k=m.id,q=m.type,a=m.src,p=(m.css,m.padding),l='<button style="display: block;width: 100%;height: 100%; padding: '+p+';" data-event="11201"\n                        id="'+k+'" ctype="'+q+'" class="element comp_button editable-text" >\n                    <img style="width: 100%; height: 100%;" src="'+a+'" />\n                </button>';return $(l)}function h(m){var k=m.id,q=m.type,a=m.title,p=(m.css,a.replace(/ /g,"&nbsp;")),l='<button style="display: block;width: 100%;height: 100%;" \n                        id="'+k+'" ctype="'+q+'" data-event="11201"\n                        class="element comp_button editable-text" >'+p+"</button>";return $(l)}function f(u){var m=u.layout,w=u.hasLink,l=u.src,v=u.text,q=u.link,k=$('<div class="feedback-content"><span>'+v+"</span></div>"),p=$('<div class="feedback-btn"></div>');return l&&("rating-m"===m?k.prepend('<img class="up" src="'+l+'"/>'):"rating-s"===m?k.append('<img class="down" src="'+l+'"/>'):"rating-l"===m&&k.prepend('<img class="up ico" src="'+l+'"/>')),w?p.append('<a class="feedback-close left">关闭</a><a class="right" href="'+q+'">查看详情</a>').addClass("line"):p.append('<a class="feedback-close">关闭</a>'),$('<div class="feedback-box">').append($('<div class="feedback-form">').append(k,p))}function b(w,B,q,v,m,z,C){var y=f({layout:B,hasLink:q,src:v,text:m,link:z}).insertBefore($(w).parent().parent()),A=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=y.find(".feedback-box").prevObject,k=y.find(".feedback-form"),x=y.find(".feedback-close");k.css({marginTop:-Number.parseInt(k.height())/2+"px",top:A/2-r.offset().top+"px"}),x.on("click",function(){y.animate({opacity:0},{duration:300,complete:function(a){return y.remove()}})})}j(231);j(25).mobilecheck;g.exports={$img:c,$btn:h,modal:b}},function(b,a){},function(m,y,h){function k(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function g(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var w=function(){function a(l,d){for(var o=0;o<d.length;o++){var c=d[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),z=function q(l,c,s){null===l&&(l=Function.prototype);var a=Object.getOwnPropertyDescriptor(l,c);if(void 0===a){var p=Object.getPrototypeOf(l);return null===p?void 0:q(p,c,s)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(s)}},v=h(233),x=h(234).formatTime,j=h(235).getServiceTime,f=function(c){function a(d,i){return k(this,a),g(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,i))}return b(a,c),w(a,[{key:"getFtValue",value:function(d){var i=this.FtEditableProps;return d===i.time.time?this.getProp("endTime"):z(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtValue",this).call(this,d)}},{key:"renderTime",value:function(C,A,B,u){var l=this,F=(new Date).getTime(),G=this.compJson.properties,E=G.endTime,t=G.arriveTips,D=G.arriveTipsContent;j().then(function(d){return F=d.obj},function(){return F=(new Date).getTime()}).then(function(d){var e=setInterval(function(){d+=1000,l.$li||clearInterval(e),d>=E?(t?C.html(D||a.defaultArriveTipsContent):C.html(x(d,d,A,B,u)),clearInterval(e)):C.html(x(E,d,A,B,u))},1000)})}}]),a}(v);f.defaultArriveTipsContent="开始啦!",m.exports=f},function(j,q,f){function h(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function d(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var m=function(){function a(o,l){for(var r=0;r<l.length;r++){var c=l[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),v=function g(s,c,w){null===s&&(s=Function.prototype);var a=Object.getOwnPropertyDescriptor(s,c);if(void 0===a){var u=Object.getPrototypeOf(s);return null===u?void 0:g(u,c,w)}if("value" in a){return a.value}var l=a.get;if(void 0!==l){return l.call(w)}},k=f(127),p=function(c){function a(l,o){h(this,a);var i=d(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,l,o));return $.extend(!0,i.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{fontFamily:!1,fontSize:!0,fontColor:!0,bgColor:!0}},trigger:{self:!1},sound:!1,link:!1}),i}return b(a,c),m(a,[{key:"getFtEditableProps",value:function(){var i=v(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtEditableProps",this).call(this),l=this.FtEditableProps;return i.concat([l.time.time])}},{key:"create$context",value:function(){var l=document.createElement("div");l.id=this.compJson.id,l.setAttribute("ctype",this.compJson.type),l.setAttribute("class","element comp_paragraph editable-text");var i=this.compJson.css.fontSize,o=this.compJson.css.fontFamily;return i&&(l.style.fontSize=i),o&&(l.style.fontFamily=o),this.renderTime($(l),this.compJson.properties.order,this.compJson.properties.split,this.compJson.properties.mode),$(l)}},{key:"renderTime",value:function(l,i){return null}}]),a}(k);j.exports=p},function(c,b){function f(F,o){var z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"cn",J=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1,1,1],q=F-o,H=Math.floor(q/86400000),k=q%86400000,B=Math.floor(k/3600000),x=k%3600000,G=Math.floor(x/60000),C=x%60000,E=Math.round(C/1000),D=d(J,4),A=D[0],j=D[1],i=D[2],I=D[3];switch(A||j||i||I||(A=1,j=1,i=1,I=1),!A||j||i||I?A||!j||i||I?A&&!j&&i&&!I&&(G=G||1):B=B||1:H=H||1,B=A?B:B+24*H,G=j?G:G+60*B,E=i?E:E+60*G,w){case"cn":return z?(A?a(H)+"天":"")+(j?a(B)+"小时":"")+(i?a(G)+"分钟":"")+(I?a(E)+"秒":""):(I?a(E)+"秒":"")+(i?a(G)+"分钟":"")+(j?a(B)+"小时":"")+(A?a(H)+"天":"");case"en":return z?(A?a(H)+" days, ":"")+(j?a(B)+" hours, ":"")+(i?a(G)+" minutes, ":"")+(I?a(E)+" seconds":""):(I?a(E)+" seconds, ":"")+(i?a(G)+" minutes, ":"")+(j?a(B)+" hours, ":"")+(A?a(H)+" days":"");case"char":return z?(A?a(H)+"天 ":"")+(j?a(B):"")+(j&&i?":":"")+(i?a(G):"")+((j||i)&&I?":":"")+(I?a(E):""):(I?a(E):"")+(I&&i?":":"")+(i?a(G):"")+((I||i)&&j?":":"")+(j?a(B):"")+(A?" "+a(H)+"天":"")}}function a(g){return g=g.toString(),g.length<2?"0"+g:g}var d=function(){function g(m,u){var k=[],l=!0,j=!1,h=void 0;try{for(var q,v=m[Symbol.iterator]();!(l=(q=v.next()).done)&&(k.push(q.value),!u||k.length!==u);l=!0){}}catch(p){j=!0,h=p}finally{try{!l&&v["return"]&&v["return"]()}finally{if(j){throw h}}}return k}return function(e,h){if(Array.isArray(e)){return e}if(Symbol.iterator in Object(e)){return g(e,h)}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();c.exports={formatTime:f}},function(d,b,g){function a(){var i=new Date,h="eqs/serviceTime/get?time"+i.getTime();return f({type:"GET",url:c.SERVER_1+h})}var f=g(21).ajax,c=g(22);d.exports={getServiceTime:a}},function(m,y,h){function k(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function g(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var w=function(){function a(l,d){for(var o=0;o<d.length;o++){var c=d[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),z=function q(l,c,s){null===l&&(l=Function.prototype);var a=Object.getOwnPropertyDescriptor(l,c);if(void 0===a){var p=Object.getPrototypeOf(l);return null===p?void 0:q(p,c,s)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(s)}},v=h(233),x=h(234).formatTime,j=h(235).getServiceTime,f=function(c){function a(d,i){return k(this,a),g(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,i))}return b(a,c),w(a,[{key:"getFtValue",value:function(d){var i=this.FtEditableProps;return d===i.time.time?this.getProp("startTime"):z(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtValue",this).call(this,d)}},{key:"renderTime",value:function(C,A,B,u){var l=this,F=(new Date).getTime(),G=this.compJson.properties,E=G.startTime,t=G.arriveTips,D=G.arriveTipsContent;j().then(function(d){return F=d.obj},function(){return F=(new Date).getTime()}).then(function(d){var e=setInterval(function(){d+=1000,l.$li||clearInterval(e),d<=E?t?C.html(D||a.defaultArriveTipsContent):C.html(x(d,d,A,B,u)):C.html(x(d,E,A,B,u))},1000)})}}]),a}(v);f.defaultArriveTipsContent="还没开始!",m.exports=f},function(z,E,m){function v(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function k(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var C=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),F=function x(f,c,h){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var g=Object.getPrototypeOf(f);return null===g?void 0:x(g,c,h)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(h)}},B=m(127),D=m(238),q=m(22),j=m(24).url2https,A=j(q.YQC),w=m(66).$getYqcAd,y=function(c){function a(f,g){v(this,a);var d=k(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return d.iframePromise=null,d.iframe=null,d.isExpose=!0,$.extend(!0,d.$ability,{style:{compStyle:{self:!0},advanceStyle:{border:!1,shadow:!1,paddingTop:!1,borderWidth:!1,borderRadius:!1,borderStyle:!1,borderColor:!1,boxShadowSize:!1,boxShadowBlur:!1,boxShadowColor:!1,boxShadowDirection:!1}},anim:!1,trigger:{self:!1},sound:!1,link:!1}),d}return b(a,c),C(a,[{key:"getFtEditableProps",value:function(){var d=F(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtEditableProps",this).call(this),f=this.FtEditableProps;return d.concat([f.code.code])}},{key:"getFtValue",value:function(d){var f=this.FtEditableProps;return d===f.code.code?this.compJson.content:F(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtValue",this).call(this,d)}},{key:"eleShow",value:function(){var h=this;F(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleShow",this).call(this);var s=this.eqxPage,f=this.eqxPage.eqxScene,l=f.meta.id,g=s.pageJson.num,d=this.compJson.properties.renderType;if("iframe"===d){this.iframePromise.then(function(){h.iframe&&h.iframe.contentWindow.postMessage({sceneId:l,pageNum:g,eventType:"pageShow"},A)})}else{if(this.isExpose){var p=window.GDTNativeRender;p&&(p.render.expose(),this.isExpose=!1)}}}},{key:"create$context",value:function(){var M=this,R=this.compJson,G=R.id,J=R.type,u=R.content,d=R.css,P=d.width,S=d.height,N=this.eqxPage,I=this.eqxPage.eqxScene,h=I.meta.id,L=N.pageJson.num,K=$(D.compDiv({id:G,type:J})),H=R.properties.renderType;if(H&&"div"===H){"tpl"===u?w(h).then(function(e){u=e.list[0].adCode,K=M.gdtNativeAd(u,K),K.append(u)}):(K=this.gdtNativeAd(u,K),K.append(u))}else{var Q=$(D.iframeDiv({sceneId:h,pageNum:L,content:u,width:P,height:S})),O=this.iframe=Q.get(0);this.iframePromise=new Promise(function(f){O.onload=function(){u&&O.contentWindow.postMessage({sceneId:h,pageNum:L,eventType:"adCode",content:u},A),f()}}),K.append(Q)}return this.$li.css("zIndex",999),K}},{key:"gdtNativeAd",value:function(f,d){return f.indexOf("gdt-native-template")>-1&&(d=d.append('<div id="gdt-native-template"></div>')),d}}]),a}(B);z.exports=y},function(g,d,j){function c(i){var a=i.id,k=i.type;return'<div style="width: 100%; height: 100%" class="element" id="'+a+'" ctype="'+k+'"></div>'}function h(m){var k=m.sceneId,r=m.pageNum,a=m.content,p=m.width,l=m.height,q="";return q="tpl"===a?"tpl":"true",'<iframe width="100%" height="100%" scrolling="no" frameborder="0" src="'+b(f.YQC)+"yqc/gg/gg.html?sceneId="+k+"&pageNum="+r+"&content="+q+"&width="+p+"&height="+l+'"></iframe>'}var f=j(22),b=j(24).url2https;g.exports={compDiv:c,iframeDiv:h}},function(x,C,k){function q(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var j=function(){function a(f,d){for(var h=0;h<d.length;h++){var c=d[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),b=k(74).BG_CROP_TYPE,A=k(25).mobilecheck,D=k(240),z=k(241),B=k(242),m=k(44).parse,g=k(96).qiniuZoom,y=k(96).loadImg,v=k(75).ANIMATION_TYPE;k(146);var w=function(){function a(c,d){q(this,a),this.compJson=c,this.eqxPage=d,this.eqxScene=d.eqxScene}return j(a,[{key:"updateBgHeight",value:function(c){this.$bgEle.css({height:c})}},{key:"updateBgOpacity",value:function(c){this.$bgEle&&this.$bgEle.css({opacity:c})}},{key:"updateBgFilter",value:function(c){this.$bgEle&&this.$bgEle.css({filter:c})}},{key:"create$bg",value:function(P,F,H){var L=this;this.$container=P;var G=this.compJson,M=G.id,O=G.css,N=O.opacity,J=O.filter,s=G.properties,d=s.bgColor,Q=s.croptype,p=s.imgSrc,r=s.pageLength,K="100%";if(d||p||(d="rgba(0,0,0,0)"),d){r&&(K=(r<10?486*r:r)-486+(A()?$(document).height():486)+"px"),this.eqxPage.pageJson&&this.eqxPage.pageJson.properties.longPage&&(K=this.eqxPage.pageJson.properties.longPage+486+"px");var u=$(m(z,{id:M,bgColor:d,height:K}));this.$bgEle=u,this.$context=u.find(".eqx-bg-img"),this.animate(),this.updateBgOpacity(N),this.$container.prepend(u)}if(p){var l=p;if(Q===b["全屏背景模式"]?(K=(r<10?486*r:r)-486+(A()?$(document).height():486)+"px",l=g(l,320,K)):(K=A()?"100%":"486px",l=g(l,320,486)),/\.gif/.test(p)){var c=y(l).then(function(h){var i,f={};if(F=A()?document.documentElement.clientWidth||document.body.clientWidth:F||L.eqxPage.getPageWidth(),H=A()?document.documentElement.clientHeight||document.body.clientHeight:H||L.eqxPage.getPageHeight(),Q===b["全屏背景模式"]){var n=parseInt(K);h.width/h.height>=F/n?(f.width=h.width*(n/h.height),f.height=n,f.marginLeft=-(f.width-F)/2):(f.width=F,f.height=h.height*(F/h.width),f.marginTop=-(f.height-n)/2)}else{h.width/h.height>=F/H?(f.width=h.width*(H/h.height),f.height=H,f.marginLeft=-(f.width-F)/2):(f.width=F,f.height=h.height*(F/h.width),f.marginTop=-(f.height-H)/2)}return i=$(m(B,{id:M,src:l,height:K})),i.css(f),i})}else{c=Promise.resolve($(m(D,{id:M,src:l,height:K})))}c.then(function(f){L.$bgEle&&L.$bgEle.remove(),L.$bgEle=f,L.animate(),L.updateBgOpacity(N),J&&L.updateBgFilter(J),L.$container.prepend(L.$bgEle),!/\.gif/.test(p)&&!A()&&L.updateBgHeight(L.eqxPage.getPageHeight())})}}},{key:"eleShow",value:function(){var d=this.compJson.properties.imgSrc;if(d&&/.gif/.test(d)&&this.$bgEle){var c=this.$bgEle.find("img")[0];if(c){var f=c.src;setTimeout(function(){c.src=f},200)}}}},{key:"animate",value:function(){var d=this.compJson.effect;d=void 0===d?{}:d;var c=d.type;if(this.$bgEle&&(c||0==c)&&c!=-1){var f=this.$bgEle.find(".eqx-bg");f.css({animation:"none"}),setTimeout(function(){if("scaleUp"===c){f.css({animation:"scaleUp 7s ease 1s","animation-fill-mode":"both"})}else{if("scaleDown"===c){f.css({animation:"scaleDown 7s ease 1s","animation-fill-mode":"both"})}else{var h=v[c];f.css({"animation-name":"","animation-duration":"","animation-timing-function":"","animation-delay":"","animation-iteration-count":""}),f.css({"animation-name":h[0],"animation-duration":"1s","animation-timing-function":"liner","animation-delay":"1s","animation-iteration-count":1,"animation-direction":"both","animation-fill-mode":"both","animation-play-state":"initial"})}}},0)}}},{key:"delete$bg",value:function(){this.$bgEle&&this.$bgEle.remove()}},{key:"update$bg",value:function(){}}]),a}();x.exports=w},function(b,a){b.exports='<div style="width: 100%; height: #{height}; overflow: hidden; position: absolute;z-index: -1"><div id="wrapper-background#{id}" class="eqx-bg eqx-bg-img" style="width: 100%; height: #{height};\n         background-image: url(\'#{src}\');\n         background-size: cover; background-position: 50% 50%;\n         background-origin: content-box"></div></div>'},function(b,a){b.exports='<div style="width: 100%; height: #{height}; overflow: hidden;position: absolute;z-index: -1"><div id="wrapper-background#{id}" class="eqx-bg" style="width: 100%; height: #{height}; background-color: #{bgColor}"></div></div>'},function(b,a){b.exports='<div style="width: 100%; height: #{height}; overflow: hidden; position: absolute;z-index: -1"><img id="wrapper-background#{id}" src="#{src}" style="z-index: -1; width: 100%; position: absolute"></div>'},function(z,E,m){function v(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function k(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var C=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),F=m(127),B=m(244),D=m(44).parse,q=m(245),j=m(25).isWeixin,A=(m(81).$getUserWxInfo,m(82).hrefToWxAuth,m(82).setWeChatUser,m(246).$unifiedOrder),w=m(20).wxPay,y=m(82).getWeChatUser,x=function(c){function a(f,g){v(this,a);var d=k(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return $.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),d}return b(a,c),C(a,[{key:"create$context",value:function(){var p=this.compJson,g=p.id,G=p.type,f=p.properties,u=f.title,l=void 0===u?"打赏":u,d=f.amount,h=void 0===d?"2":d;return $(D(B,{id:g,type:G,title:l,amount:h}))}},{key:"updateCompTitle",value:function(){var d=this.compJson.properties;this.$context.html(d.title+d.amount+"元")}},{key:"bindAfterRenderEvent",value:function(){var d=this;this.$li.click(function(){var e=Math.round(100*parseFloat(d.compJson.properties.amount));if(!j()){return void q.modal("该组件仅能在微信中使用。",d.$li)}var f=y();return A(e,f.openid,d.compJson.sceneId).then(function(g){return g.obj&&w(g.obj)})["catch"](function(g){g.msg&&q.modal(g.msg,d.$li)})})}}]),a}(F);z.exports=x},function(b,a){b.exports='<a id="#{id}" ctype="#{type}" class="element comp-reward" style="cursor: pointer;width: 100%;height: 100%;display: block">#{title}#{amount}元</a>'},function(b,a){function c(g,f){var h=$('<div class="feedback-box">\n                      <div class="feedback-form">\n                        <div class="feedback-content">'+g+'</div>\n                        <div class="feedback-btn">\n                          <a class="feedback-close">关闭</a>\n                        </div>\n                      </div>\n                    </div>'),d=h.find(".feedback-form");d.css("margin-top",-Number.parseInt(d.height()+80)/2),h.insertBefore(f.parent().parent()),h.find(".feedback-close").on("click",function(){h.animate({opacity:0},{duration:300,complete:function(i){return h.remove()}})})}b.exports={modal:c}},function(g,d,j){function c(i,a,k){return b({type:"POST",url:f.SERVER_1+"eqs/wx/unifiedorder",data:{money:i,openid:a,sceneId:k}})}function h(a){return b({type:"POST",url:f.SERVER_1+"eqs/wx/get-jsapiconfig",data:{prepayId:a}})}var f=j(22),b=j(21).ajax;g.exports={$unifiedOrder:c,$getJsApiConfig:h}},function(x,C,k){function q(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function j(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var A=function(){function a(f,d){for(var h=0;h<d.length;h++){var c=d[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),D=k(127),z=k(248),B=k(44).parse,m=k(25).isWeixin,g=k(249),y=k(250).$robRedPacket,v=(k(81).$getUserWxInfo,k(82).hrefToWxAuth,k(82).getWeChatUser),w=function(c){function a(f,h){q(this,a);var d=j(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,h));return $.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),d}return b(a,c),A(a,[{key:"create$context",value:function(){var h=this.compJson,f=h.id,l=h.type,d=h.properties.title;return this.$context=$(B(z,{id:f,type:l,title:d})),this.$context}},{key:"bindAfterRenderEvent",value:function(){var d=this;this.$li.click(function(){if(!m()){return void g.modal("该组件仅能在微信中使用。",d.$li)}var e=v();y(d.eqxScene.meta.id,d.compJson.id,e.openid).then(function(f){200===f.code&&g.modal("恭喜您成功抢到一个红包，请去服务通知下领取红包！",d.$li)})["catch"](function(f){f.msg&&g.modal(f.msg,d.$li)})})}}]),a}(D);x.exports=w},function(b,a){b.exports='<a id="#{id}" ctype="#{type}" class="element eqx-red-packet" style="cursor: default;width: 100%;height: 100%">#{title}</a>'},function(b,a){function c(g,f){var h=$('<div class="feedback-box">\n                      <div class="feedback-form">\n                        <div class="feedback-content">'+g+'</div>\n                        <div class="feedback-btn">\n                          <a class="feedback-close">关闭</a>\n                        </div>\n                      </div>\n                    </div>'),d=h.find(".feedback-form");d.css("margin-top",-Number.parseInt(d.height()+80)/2),h.insertBefore(f.parent().parent()),h.find(".feedback-close").on("click",function(){h.animate({opacity:0},{duration:300,complete:function(i){return h.remove()}})})}b.exports={modal:c}},function(d,b,g){function a(i,h,j){return c({type:"GET",url:f.SERVER_1+"eqs/wx/robRedPacket",data:{sceneId:i,componentId:h,openid:j}})}var f=g(22),c=g(21).ajax;d.exports={$robRedPacket:a}},function(x,C,k){function q(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function j(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}function A(d,c){var h="",a=y.getWeChatUser();if(a.headimgurl){f=g(c,8*d,a.headimgurl).then(function(i){return i.list.forEach(function(n,l){l<24&&(v[l]=n)}),v})}else{var f=Promise.resolve(v)}return f.then(function(){for(var l=0;l<8*d;l++){var e='<img src="'+v[l]+'">',n='<img src="'+v[l]+'" style="margin-right:0;">';h+=(l+1)%8==0?n:e}return h})}var D=function(){function a(f,d){for(var h=0;h<d.length;h++){var c=d[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}();k(252);var z=k(127),B=k(253),m=k(44).parse,g=k(254).$getPhotoWallPhotos,y=k(82),v=[k(255),k(256),k(257),k(258),k(259),k(260),k(261),k(262),k(263),k(264),k(265),k(266),k(267),k(268),k(269),k(270),k(271),k(272),k(273),k(274),k(275),k(276),k(277),k(278)],w=function(c){function a(f,h){q(this,a);var d=j(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,h));return $.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!1,baseStyle:!1,lineHeight:!1,letterSpacing:!1}},trigger:{self:!0},sound:!1,link:!1}),d}return b(a,c),D(a,[{key:"create$context",value:function(){var h=this,f=this.compJson,l=f.id,d=f.type;return this.$context=$(m(B,{id:l,type:d})),A(parseInt(f.properties.line),f.sceneId).then(function(o){var e=$(o);h.$context.append(e),h.$context.find("img").css({borderWidth:f.properties.ownerCss.borderWidth,borderStyle:f.properties.ownerCss.borderStyle,borderColor:f.properties.ownerCss.borderColor,boxShadow:f.properties.ownerCss.boxShadow,boxShadowDirection:f.properties.ownerCss.boxShadowDirection,boxShadowSize:f.properties.ownerCss.boxShadowSize})}),this.$context}},{key:"changePhotoWallLine",value:function(){this.$context.remove(),this.$context=this.create$context(),this.$contentsDiv.append(this.$context)}},{key:"changeBorderStyle",value:function(d){this.$context.find("img").css({borderStyle:d})}},{key:"changeBorderColor",value:function(d){this.$context.find("img").css({borderColor:d})}},{key:"changeBorderWidth",value:function(d){this.$context.find("img").css({borderWidth:d})}},{key:"changeBoxshadowColor",value:function(d){this.$context.find("img").css({boxShadow:d})}}]),a}(z);x.exports=w},function(b,a){},function(b,a){b.exports='<div class="photowall" id="#{id}" ctype="#{type}"></div>'},function(d,b,g){function a(i,h,j){return f({type:"GET",url:c.SERVER_1+"eqs/s/wx/photo/list",data:$.param({sceneId:i,photoNum:h,photoPath:j})})}var f=g(21).ajax,c=g(22);d.exports={$getPhotoWallPhotos:a}},function(b,a,c){b.exports=c.p+"images/photoWall-1-2cbac2.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-2-746422.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-3-3d665c.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-4-3c7ce3.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-5-26a180.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-6-91bb95.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-7-98a3a6.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-8-a97166.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-9-0b3d68.png"},function(b,a,c){b.exports=c.p+"images/photoWall-10-68faf7.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-11-487873.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-12-382a38.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-13-3bc7ad.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-14-686474.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-15-38d83b.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-16-27e1e0.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-17-7762e5.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-18-a06b05.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-19-016ef7.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-20-bc9344.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-21-d6c339.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-22-b04a01.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-23-e7744a.jpg"},function(b,a,c){b.exports=c.p+"images/photoWall-24-7cd4a4.jpg"},function(k,w,g){function j(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function f(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var q=function(){function a(o,l){for(var p=0;p<l.length;p++){var c=l[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}();g(280);var x=g(281),m=g(127),v=g(282),h=g(22),d=function(c){function a(l,o){j(this,a);var i=f(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,l,o));return $.extend(!0,i.$ability,{style:{},link:!1}),i}return b(a,c),q(a,[{key:"create$context",value:function(){var z=this,C="0",u=z.compJson,y=u.id,p=u.type,l=u.properties,B=u.css,D=""+h.FILE+l.styleImgSrc,A=l.styleImgSrc?v.$img({id:y,type:p,src:D,css:{width:B.width,height:B.height},padding:C}):v.$btn({id:y,type:p,properties:l,css:{width:B.width,height:B.height,lineHeight:B.lineHeight}});return A}},{key:"bindAfterRenderEvent",value:function(l,i){var o=this;l.click(function(){new Promise(function(C,H){var A=$(o.eqxPage.section),y=o.eqxLayer.$layer,n=o.eqxPage.pageJson.properties.longPage,F=Math.abs(o.eqxPage.touchPos),E=o.eqxLayer.eqxItems;E.forEach(function(r){var p=r.compJson.properties.anim.map(function(t){return t.type}),u=p.filter(function(t){if([10,17,19,11,14,18,15,25,16,28,32].indexOf(t)>0){return t}});u.length>0&&r.$li.hide(),n&&(r.triggerHide||1!=r.compJson.properties.initType||r.eleShow()),r.compJson.properties.anim.filter(function(t){return 1==t.animClassify}).length>0&&r.stopAnimation()});var G=A.height(),z=n?n:G,s=A.find(".u-arrow-bottom").hide(),D=y.clone().css({position:"absolute",top:"0px",left:"0px",opacity:"0",width:y.width(),"z-index":"-100"});D.find('li[ctype = "24"]').hide();var B=y.siblings();$.each(B,function(r,p){D.append($(p).clone())}),0==B.length&&D.append('<div style="width:100%;height:100%;position:absolute;z-index:-2;background-color:#fff"></div>'),$("body").append(D),x(D,{useCORS:!0,height:z,isLongTouchTrig:!0,onrendered:function(p){D.remove(),s.show(),y.css({transform:"scale(1)"});var u=p.toDataURL("image"),e=$(new Image);e.attr("src",u);var r=void 0;n&&(r=G/n,e.css({transform:"scale("+0.8*r+")"})),C({$img:e,scrol:r,touchPos:F,initPageHeight:G})}})}).then(function(p){var y=p.$img,e=p.scrol,u=p.touchPos,s=p.initPageHeight;v.modal(y,l,e,u,s)})})}},{key:"adjustHeight",value:function(){this.$li.css({height:""}),this.$context.css({height:""});var i=this.$boxDiv.height();this.update$li({height:i}),this.$context.css({height:i})}},{key:"oneTouchHandler",value:function(){var p=this,o=$li.find(".touchImg"),r=void 0,l=void 0;o.on("mousedown touchstart",function(y){y.stopPropagation(),$li.hide();var s=p.eqxPage.getCurrentLayer().$layer,u=s.width(),t=s.height(),e=$(p.eqxPage.section);x(e,{useCORS:!0,onrendered:function(i){var z=i.toDataURL("image");o.attr("src",z),o.css({width:u,height:t}),$li.show()}})}).on("mouseup touchend",function(){o.width("100%"),o.height("100%"),l&&l.remove(),clearTimeout(r),r=null})}},{key:"updateBtnTitle",value:function(i){this.compJson.properties.styleImgSrc||(this.$context[0].innerText=i)}},{key:"deleteImage",value:function(){this.compJson.properties.styleImgSrc||(this.$context[0].innerText="")}}]),a}(m);k.exports=d},function(b,a){},function(g,d,j){var c,h,f,b,b;(function(e){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};!function(i){if("object"==a(d)&&"undefined"!=typeof g){g.exports=i()}else{h=[],c=i,f="function"==typeof c?c.apply(d,h):c,!(void 0!==f&&(g.exports=f))}}(function(){var k;return function i(q,u,l){function t(r,w){if(!u[r]){if(!q[r]){var o="function"==typeof b&&b;if(!w&&o){return b(r,!0)}if(p){return p(r,!0)}var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var v=u[r]={exports:{}};q[r][0].call(v.exports,function(s){var x=q[r][1][s];return t(x||s)},v,v.exports,i,q,u,l)}return u[r].exports}for(var p="function"==typeof b&&b,m=0;m<l.length;m++){t(l[m])}return t}({1:[function(m,l,n){(function(o){
/*! http://mths.be/punycode v1.2.4 by @mathias */
!function(ae){function aa(p){throw RangeError(ac[p])}function ap(q,p){for(var r=q.length;r--;){q[r]=p(q[r])}return q}function an(q,p){return ap(q.split(J),p).join(".")}function W(v){for(var q,x,p=[],w=0,u=v.length;w<u;){q=v.charCodeAt(w++),q>=55296&&q<=56319&&w<u?(x=v.charCodeAt(w++),56320==(64512&x)?p.push(((1023&q)<<10)+(1023&x)+65536):(p.push(q),w--)):p.push(q)}return p}function ag(p){return ap(p,function(r){var q="";return r>65535&&(r-=65536,q+=Y(r>>>10&1023|55296),r=56320|1023&r),q+=Y(r)}).join("")}function ad(p){return p-48<10?p-22:p-65<26?p-65:p-97<26?p-97:N}function am(q,p){return q+22+75*(q<26)-((0!=p)<<5)}function aj(r,q,u){var p=0;for(r=u?H(r/s):r>>1,r+=H(r/q);r>B*F>>1;p+=N){r=H(r/B)}return H(p+(B+1)*r/(r+aq))}function al(C){var R,q,w,p,M,S,E,P,D,A,x=[],r=C.length,O=0,L=G,I=t;for(q=C.lastIndexOf(Z),q<0&&(q=0),w=0;w<q;++w){C.charCodeAt(w)>=128&&aa("not-basic"),x.push(C.charCodeAt(w))}for(p=q>0?q+1:0;p<r;){for(M=O,S=1,E=N;p>=r&&aa("invalid-input"),P=ad(C.charCodeAt(p++)),(P>=N||P>H((X-O)/S))&&aa("overflow"),O+=P*S,D=E<=I?z:E>=I+F?F:E-I,!(P<D);E+=N){A=N-D,S>H(X/A)&&aa("overflow"),S*=A}R=x.length+1,I=aj(O-M,R,0==M),H(O/R)>X-L&&aa("overflow"),L+=H(O/R),O%=R,x.splice(O++,0,L)}return ag(x)}function ak(I){var T,u,C,r,R,ar,L,A,q,E,D,w,S,O,M,P=[];for(I=W(I),w=I.length,T=G,u=0,R=t,ar=0;ar<w;++ar){D=I[ar],D<128&&P.push(Y(D))}for(C=r=P.length,r&&P.push(Z);C<w;){for(L=X,ar=0;ar<w;++ar){D=I[ar],D>=T&&D<L&&(L=D)}for(S=C+1,L-T>H((X-u)/S)&&aa("overflow"),u+=(L-T)*S,T=L,ar=0;ar<w;++ar){if(D=I[ar],D<T&&++u>X&&aa("overflow"),D==T){for(A=u,q=N;E=q<=R?z:q>=R+F?F:q-R,!(A<E);q+=N){M=A-E,O=N-E,P.push(Y(am(E+M%O,0))),A=H(M/O)}P.push(Y(am(A,0))),R=aj(u,S,C==r),u=0,++C}}++u,++T}return P.join("")}function af(p){return an(p,function(q){return ab.test(q)?al(q.slice(4).toLowerCase()):q})}function V(p){return an(p,function(q){return ai.test(q)?"xn--"+ak(q):q})}var K="object"==("undefined"==typeof n?"undefined":a(n))&&n,ao="object"==("undefined"==typeof l?"undefined":a(l))&&l&&l.exports==K&&l,Q="object"==("undefined"==typeof o?"undefined":a(o))&&o;Q.global!==Q&&Q.window!==Q||(ae=Q);var U,ah,X=2147483647,N=36,z=1,F=26,aq=38,s=700,t=72,G=128,Z="-",ab=/^xn--/,ai=/[^ -~]/,J=/\x2E|\u3002|\uFF0E|\uFF61/g,ac={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=N-z,H=Math.floor,Y=String.fromCharCode;if(U={version:"1.2.4",ucs2:{decode:W,encode:ag},decode:al,encode:ak,toASCII:V,toUnicode:af},"function"==typeof k&&"object"==a(k.amd)&&k.amd){k("punycode",function(){return U})}else{if(K&&!K.nodeType){if(ao){ao.exports=U}else{for(ah in U){U.hasOwnProperty(ah)&&(K[ah]=U[ah])}}}else{ae.punycode=U}}}(this)}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(v,p,x){function m(r,o,s){!r.defaultView||o===r.defaultView.pageXOffset&&s===r.defaultView.pageYOffset||r.defaultView.scrollTo(o,s)}function w(r,o){try{o&&(o.width=r.width,o.height=r.height,o.getContext("2d").putImageData(r.getContext("2d").getImageData(0,0,r.width,r.height),0,0))}catch(s){q("Unable to copy canvas content from",r,s)}}function u(s,r){for(var y=3===s.nodeType?document.createTextNode(s.nodeValue):s.cloneNode(!1),o=s.firstChild;o;){r!==!0&&1===o.nodeType&&"SCRIPT"===o.nodeName||y.appendChild(u(o,r)),o=o.nextSibling}return 1===s.nodeType&&(y._scrollTop=s.scrollTop,y._scrollLeft=s.scrollLeft,"CANVAS"===s.nodeName?w(s,y):"TEXTAREA"!==s.nodeName&&"SELECT"!==s.nodeName||(y.value=s.value)),y}function l(o){if(1===o.nodeType){o.scrollTop=o._scrollTop,o.scrollLeft=o._scrollLeft;for(var n=o.firstChild;n;){l(n),n=n.nextSibling}}}var q=v("./log");p.exports=function(B,E,z,y,F,C,D){var A=u(B.documentElement,F.javascriptEnabled),r=E.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=z,r.height=y,r.scrolling="no",E.body.appendChild(r),new Promise(function(o){var s=r.contentWindow.document;r.contentWindow.onload=r.onload=function(){var n=setInterval(function(){s.body.childNodes.length>0&&(l(s.documentElement),clearInterval(n),"view"===F.type&&(r.contentWindow.scrollTo(C,D),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||r.contentWindow.scrollY===D&&r.contentWindow.scrollX===C||(s.documentElement.style.top=-D+"px",s.documentElement.style.left=-C+"px",s.documentElement.style.position="absolute")),o(r))},50)},s.open(),s.write("<!DOCTYPE html><html></html>"),m(B,C,D),s.replaceChild(s.adoptNode(A),s.documentElement),s.close()})}},{"./log":13}],3:[function(u,x,p){function q(n){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(n)||this.namedColor(n)||this.rgb(n)||this.rgba(n)||this.hex6(n)||this.hex3(n)}q.prototype.darken=function(o){var n=1-o;return new q([Math.round(this.r*n),Math.round(this.g*n),Math.round(this.b*n),this.a])},q.prototype.isTransparent=function(){return 0===this.a},q.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},q.prototype.fromArray=function(n){return Array.isArray(n)&&(this.r=Math.min(n[0],255),this.g=Math.min(n[1],255),this.b=Math.min(n[2],255),n.length>3&&(this.a=n[3])),Array.isArray(n)};var m=/^#([a-f0-9]{3})$/i;q.prototype.hex3=function(o){var n=null;return null!==(n=o.match(m))&&(this.r=parseInt(n[1][0]+n[1][0],16),this.g=parseInt(n[1][1]+n[1][1],16),this.b=parseInt(n[1][2]+n[1][2],16)),null!==n};var l=/^#([a-f0-9]{6})$/i;q.prototype.hex6=function(o){var n=null;return null!==(n=o.match(l))&&(this.r=parseInt(n[1].substring(0,2),16),this.g=parseInt(n[1].substring(2,4),16),this.b=parseInt(n[1].substring(4,6),16)),null!==n};var w=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;q.prototype.rgb=function(o){var n=null;return null!==(n=o.match(w))&&(this.r=Number(n[1]),this.g=Number(n[2]),this.b=Number(n[3])),null!==n};var y=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;q.prototype.rgba=function(o){var n=null;return null!==(n=o.match(y))&&(this.r=Number(n[1]),this.g=Number(n[2]),this.b=Number(n[3]),this.a=Number(n[4])),null!==n},q.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},q.prototype.namedColor=function(o){o=o.toLowerCase();var n=v[o];if(n){this.r=n[0],this.g=n[1],this.b=n[2]}else{if("transparent"===o){return this.r=this.g=this.b=this.a=0,!0}}return !!n},q.prototype.isColor=!0;var v={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};x.exports=q},{}],4:[function(G,M,Q){function L(r,m){var v=F++;if(m=m||{},m.logging&&(C.options.logging=!0,C.options.start=Date.now()),m.async="undefined"==typeof m.async||m.async,m.allowTaint="undefined"!=typeof m.allowTaint&&m.allowTaint,m.removeContainer="undefined"==typeof m.removeContainer||m.removeContainer,m.javascriptEnabled="undefined"!=typeof m.javascriptEnabled&&m.javascriptEnabled,m.imageTimeout="undefined"==typeof m.imageTimeout?10000:m.imageTimeout,m.renderer="function"==typeof m.renderer?m.renderer:R,m.strict=!!m.strict,"string"==typeof r){if("string"!=typeof m.proxy){return Promise.reject("Proxy must be used when rendering url")}var l=null!=m.width?m.width:window.innerWidth,u=null!=m.height?m.height:window.innerHeight;return A(K(r),m.proxy,document,l,u,m).then(function(n){return X(n.contentWindow.document.documentElement,n,m,l,u)})}var p=(void 0===r?[document.documentElement]:r.length?r:[r])[0];return p.setAttribute(P+v,v),l=null!=m.width?m.width:p.ownerDocument.defaultView.innerWidth,u=null!=m.height?m.height:p.ownerDocument.defaultView.innerHeight,J(p.ownerDocument,m,l,u,v).then(function(n){return"function"==typeof m.onrendered&&(C("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),m.onrendered(n)),n})}function J(p,m,s,l,r){return W(p,p,s,l,m,p.defaultView.pageXOffset,p.defaultView.pageYOffset).then(function(v){C("Document cloned");var t=P+r,x="["+t+"='"+r+"']";p.querySelector(x).removeAttribute(t);var o=v.contentWindow,n=o.document.querySelector(x),w="function"==typeof m.onclone?Promise.resolve(m.onclone(o.document)):Promise.resolve(!0);return w.then(function(){return X(n,v,m,s,l)})})}function X(Y,ad,v,E,u){var l=ad.contentWindow,ac=new U(l.document),s=new T(v,ac),I=B(Y),w="view"===v.type?E:D(l.document),aa="view"===v.type?u:O(l.document),Z=new v.renderer(w,aa,s,v,document),ab=new S(Y,Z,ac,s,v);return ab.ready.then(function(){C("Finished rendering");var m;if("view"===v.type){m=V(Z.canvas,{width:Z.canvas.width,height:Z.canvas.height,top:0,left:0,x:0,y:0})}else{if(Y===l.document.body||Y===l.document.documentElement){m=Z.canvas}else{if(v.scale&&null!=v.canvas){C("�Ŵ�canvas",v.canvas);var n=v.scale||1;m=V(Z.canvas,{width:I.width*n,height:I.height*n,top:I.top*n,left:I.left*n,x:0,y:0})}else{m=V(Z.canvas,{width:null!=v.width?v.width:I.width,height:null!=v.height?v.height:I.height,top:I.top,left:I.left,x:0,y:0})}}}return H(ad,v),m})}function H(m,l){l.removeContainer&&(m.parentNode.removeChild(m),C("Cleaned up container"))}function V(v,y){var p=document.createElement("canvas"),u=Math.min(v.width-1,Math.max(0,y.left)),m=Math.min(v.width,Math.max(1,y.left+y.width)),l=Math.min(v.height-1,Math.max(0,y.top)),x=Math.min(v.height,Math.max(1,y.top+y.height));p.width=y.width,p.height=y.height;var E=m-u,w=x-l;return C("Cropping canvas at:","left:",y.left,"top:",y.top,"width:",E,"height:",w),C("Resulting crop with width",y.width,"and height",y.height,"with x",u,"and y",l),p.getContext("2d").drawImage(v,u,l,E,w,y.x,y.y,E,w),p}function D(l){return Math.max(Math.max(l.body.scrollWidth,l.documentElement.scrollWidth),Math.max(l.body.offsetWidth,l.documentElement.offsetWidth),Math.max(l.body.clientWidth,l.documentElement.clientWidth))}function O(l){return Math.max(Math.max(l.body.scrollHeight,l.documentElement.scrollHeight),Math.max(l.body.offsetHeight,l.documentElement.offsetHeight),Math.max(l.body.clientHeight,l.documentElement.clientHeight))}function K(m){var l=document.createElement("a");return l.href=m,l.href=l.href,l}var U=G("./support"),R=G("./renderers/canvas"),T=G("./imageloader"),S=G("./nodeparser"),N=G("./nodecontainer"),C=G("./log"),q=G("./utils"),W=G("./clone"),A=G("./proxy").loadUrlDocument,B=q.getBounds,P="data-html2canvas-node",F=0;L.CanvasRenderer=R,L.NodeContainer=N,L.log=C,L.utils=q;var z="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:L;M.exports=z,"function"==typeof k&&k.amd&&k("html2canvas",[],function(){return z})},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(q,m,u){function l(o){if(this.src=o,s("DummyImageContainer for",o),!this.promise||!this.image){s("Initiating DummyImageContainer"),l.prototype.image=new Image;var n=this.image;l.prototype.promise=new Promise(function(r,t){n.onload=r,n.onerror=t,n.src=p(),n.complete===!0&&r(n)})}}var s=q("./log"),p=q("./utils").smallImage;m.exports=l},{"./log":13,"./utils":26}],6:[function(p,m,r){function l(y,v){var A,u,x=document.createElement("div"),o=document.createElement("img"),w=document.createElement("span"),z="Hidden Text";x.style.visibility="hidden",x.style.fontFamily=y,x.style.fontSize=v,x.style.margin=0,x.style.padding=0,document.body.appendChild(x),o.src=q(),o.width=1,o.height=1,o.style.margin=0,o.style.padding=0,o.style.verticalAlign="baseline",w.style.fontFamily=y,w.style.fontSize=v,w.style.margin=0,w.style.padding=0,w.appendChild(document.createTextNode(z)),x.appendChild(w),x.appendChild(o),A=o.offsetTop-w.offsetTop+1,x.removeChild(w),x.appendChild(document.createTextNode(z)),x.style.lineHeight="normal",o.style.verticalAlign="super",u=o.offsetTop-x.offsetTop+1,document.body.removeChild(x),this.baseline=A,this.lineWidth=1,this.middle=u}var q=p("./utils").smallImage;m.exports=l},{"./utils":26}],7:[function(p,m,r){function l(){this.data={}}var q=p("./font");l.prototype.getMetrics=function(o,n){return void 0===this.data[o+"-"+n]&&(this.data[o+"-"+n]=new q(o,n)),this.data[o+"-"+n]},m.exports=l},{"./font":6}],8:[function(s,p,v){function m(x,z,w){this.image=null,this.src=x;var y=this,r=q(x);this.promise=(z?new Promise(function(n){"about:blank"===x.contentWindow.document.URL||null==x.contentWindow.document.documentElement?x.contentWindow.onload=x.onload=function(){n(x)}:n(x)}):this.proxyLoad(w.proxy,r,w)).then(function(o){var A=s("./core");return A(o.contentWindow.document.documentElement,{type:"view",width:o.width,height:o.height,proxy:w.proxy,javascriptEnabled:w.javascriptEnabled,removeContainer:w.removeContainer,allowTaint:w.allowTaint,imageTimeout:w.imageTimeout/2})}).then(function(n){return y.image=n})}var u=s("./utils"),q=u.getBounds,l=s("./proxy").loadUrlDocument;m.prototype.proxyLoad=function(w,r,x){var o=this.src;return l(o.src,w,o.ownerDocument,r.width,r.height,x)},p.exports=m},{"./core":4,"./proxy":16,"./utils":26}],9:[function(o,m,p){function l(n){this.src=n.value,this.colorStops=[],this.type=null,this.x0=0.5,this.y0=0.5,this.x1=0.5,this.y1=0.5,this.promise=Promise.resolve(!0)}l.TYPES={LINEAR:1,RADIAL:2},l.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,m.exports=l},{}],10:[function(o,m,p){function l(r,q){this.src=r,this.image=new Image;var s=this;this.tainted=null,this.promise=new Promise(function(n,t){s.image.onload=n,s.image.onerror=t,q&&(s.image.crossOrigin="anonymous"),s.image.src=r,s.image.complete===!0&&n(s.image)})}m.exports=l},{}],11:[function(A,F,w){function y(n,l){this.link=null,this.options=n,this.support=l,this.origin=this.getOrigin(window.location.href)}var v=A("./log"),m=A("./imagecontainer"),D=A("./dummyimagecontainer"),G=A("./proxyimagecontainer"),C=A("./framecontainer"),E=A("./svgcontainer"),x=A("./svgnodecontainer"),q=A("./lineargradientcontainer"),B=A("./webkitgradientcontainer"),z=A("./utils").bind;y.prototype.findImages=function(n){var l=[];return n.reduce(function(p,o){switch(o.node.nodeName){case"IMG":return p.concat([{args:[o.node.src],method:"url"}]);case"svg":case"IFRAME":return p.concat([{args:[o.node],method:o.node.nodeName}])}return p},[]).forEach(this.addImage(l,this.loadImage),this),l},y.prototype.findBackgroundImage=function(n,l){return l.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(n,this.loadImage),this),n},y.prototype.addImage=function(n,l){return function(o){o.args.forEach(function(p){this.imageExists(n,p)||(n.splice(0,0,l.call(this,o)),v("Added image #"+n.length,"string"==typeof p?p.substring(0,100):p))},this)}},y.prototype.hasImageBackground=function(l){return"none"!==l.method},y.prototype.loadImage=function(n){if("url"===n.method){var l=n.args[0];return !this.isSVG(l)||this.support.svg||this.options.allowTaint?l.match(/data:image\/.*;base64,/i)?new m(l.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),(!1)):this.isSameOrigin(l)||this.options.allowTaint===!0||this.isSVG(l)?new m(l,(!1)):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new m(l,(!0)):this.options.proxy?new G(l,this.options.proxy):new D(l):new E(l)}return"linear-gradient"===n.method?new q(n):"gradient"===n.method?new B(n):"svg"===n.method?new x(n.args[0],this.support.svg):"IFRAME"===n.method?new C(n.args[0],this.isSameOrigin(n.args[0].src),this.options):new D(n)},y.prototype.isSVG=function(l){return"svg"===l.substring(l.length-3).toLowerCase()||E.prototype.isInline(l)},y.prototype.imageExists=function(n,l){return n.some(function(o){return o.src===l})},y.prototype.isSameOrigin=function(l){return this.getOrigin(l)===this.origin},y.prototype.getOrigin=function(n){var l=this.link||(this.link=document.createElement("a"));return l.href=n,l.href=l.href,l.protocol+l.hostname+l.port},y.prototype.getPromise=function(l){return this.timeout(l,this.options.imageTimeout)["catch"](function(){var n=new D(l.src);return n.promise.then(function(o){l.image=o})})},y.prototype.get=function(n){var l=null;return this.images.some(function(o){return(l=o).src===n})?l:null},y.prototype.fetch=function(l){return this.images=l.reduce(z(this.findBackgroundImage,this),this.findImages(l)),this.images.forEach(function(o,n){o.promise.then(function(){v("Succesfully loaded image #"+(n+1),o)},function(p){v("Failed loading image #"+(n+1),o,p)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),v("Finished searching images"),this},y.prototype.timeout=function(p,o){var r,l=Promise.race([p.promise,new Promise(function(n,s){r=setTimeout(function(){v("Timed out loading image",p),s(p)},o)})]).then(function(n){return clearTimeout(r),n});return l["catch"](function(){clearTimeout(r)}),l},F.exports=y},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(q,m,u){function l(o){s.apply(this,arguments),this.type=s.TYPES.LINEAR;var n=l.REGEXP_DIRECTION.test(o.args[0])||!s.REGEXP_COLORSTOP.test(o.args[0]);n?o.args[0].split(/\s+/).reverse().forEach(function(w,v){switch(w){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var y=this.y0,r=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=r,this.y1=y;break;case"center":break;default:var x=0.01*parseFloat(w,10);if(isNaN(x)){break}0===v?(this.y0=x,this.y1=1-this.y0):(this.x0=x,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=o.args.slice(n?1:0).map(function(w){var v=w.match(s.REGEXP_COLORSTOP),x=+v[2],r=0===x?"%":v[3];return{color:new p(v[1]),stop:"%"===r?x/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(v,r){null===v.stop&&this.colorStops.slice(r).some(function(w,t){return null!==w.stop&&(v.stop=(w.stop-this.colorStops[r-1].stop)/(t+1)+this.colorStops[r-1].stop,!0)},this)},this)}var s=q("./gradientcontainer"),p=q("./color");l.prototype=Object.create(s.prototype),l.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,m.exports=l},{"./color":3,"./gradientcontainer":9}],13:[function(p,m,r){var l=function q(){q.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-q.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};l.options={logging:!1},m.exports=l},{}],14:[function(A,F,w){function y(n,l){this.node=n,this.parent=l,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function v(n){var l=n.options[n.selectedIndex||0];return l?l.text||"":""}function m(n){if(n&&"matrix"===n[1]){return n[2].split(",").map(function(o){return parseFloat(o.trim())})}if(n&&"matrix3d"===n[1]){var l=n[2].split(",").map(function(o){return parseFloat(o.trim())});return[l[0],l[1],l[4],l[5],l[12],l[13]]}}function D(l){return l.toString().indexOf("%")!==-1}function G(l){return l.replace("px","")}function C(l){return parseFloat(l)}var E=A("./color"),x=A("./utils"),q=x.getBounds,B=x.parseBackgrounds,z=x.offsetBounds;y.prototype.cloneTo=function(l){l.visible=this.visible,l.borders=this.borders,l.bounds=this.bounds,l.clip=this.clip,l.backgroundClip=this.backgroundClip,l.computedStyles=this.computedStyles,l.styles=this.styles,l.backgroundImages=this.backgroundImages,l.opacity=this.opacity},y.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},y.prototype.assignStack=function(l){this.stack=l,l.children.push(this)},y.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},y.prototype.css=function(l){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[l]||(this.styles[l]=this.computedStyles[l])},y.prototype.prefixedCss=function(o){var l=["webkit","moz","ms","o"],p=this.css(o);return void 0===p&&l.some(function(n){return p=this.css(n+o.substr(0,1).toUpperCase()+o.substr(1)),void 0!==p},this),void 0===p?null:p},y.prototype.computedStyle=function(l){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,l)},y.prototype.cssInt=function(n){var l=parseInt(this.css(n),10);return isNaN(l)?0:l},y.prototype.color=function(l){return this.colors[l]||(this.colors[l]=new E(this.css(l)))},y.prototype.cssFloat=function(n){var l=parseFloat(this.css(n));return isNaN(l)?0:l},y.prototype.fontWeight=function(){var l=this.css("fontWeight");switch(parseInt(l,10)){case 401:l="bold";break;case 400:l="normal"}return l},y.prototype.parseClip=function(){var l=this.css("clip").match(this.CLIP);return l?{top:parseInt(l[1],10),right:parseInt(l[2],10),bottom:parseInt(l[3],10),left:parseInt(l[4],10)}:null},y.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=B(this.css("backgroundImage")))},y.prototype.cssList=function(o,l){var p=(this.css(o)||"").split(",");return p=p[l||0]||p[0]||"auto",p=p.trim().split(" "),1===p.length&&(p=[p[0],D(p[0])?"auto":p[0]]),p},y.prototype.parseBackgroundSize=function(I,p,L){var l,J,H=this.cssList("backgroundSize",L);if(D(H[0])){l=I.width*parseFloat(H[0])/100}else{if(/contain|cover/.test(H[0])){var u=I.width/I.height,K=p.width/p.height;return u<K^"contain"===H[0]?{width:I.height*K,height:I.height}:{width:I.width,height:I.width/K}}l=parseInt(H[0],10)}return J="auto"===H[0]&&"auto"===H[1]?p.height:"auto"===H[1]?l/p.width*p.height:D(H[1])?I.height*parseFloat(H[1])/100:parseInt(H[1],10),"auto"===H[0]&&(l=J/p.height*p.width),{width:l,height:J}},y.prototype.parseBackgroundPosition=function(I,p,K,l){var J,H,u=this.cssList("backgroundPosition",K);return J=D(u[0])?(I.width-(l||p).width)*(parseFloat(u[0])/100):parseInt(u[0],10),H="auto"===u[1]?J/p.width*p.height:D(u[1])?(I.height-(l||p).height)*parseFloat(u[1])/100:parseInt(u[1],10),"auto"===u[0]&&(J=H/p.height*p.width),{left:J,top:H}},y.prototype.parseBackgroundRepeat=function(l){return this.cssList("backgroundRepeat",l)[0]},y.prototype.parseTextShadows=function(){var r=this.css("textShadow"),p=[];if(r&&"none"!==r){for(var u=r.match(this.TEXT_SHADOW_PROPERTY),l=0;u&&l<u.length;l++){var s=u[l].match(this.TEXT_SHADOW_VALUES);p.push({color:new E(s[0]),offsetX:s[1]?parseFloat(s[1].replace("px","")):0,offsetY:s[2]?parseFloat(s[2].replace("px","")):0,blur:s[3]?s[3].replace("px",""):0})}}return p},y.prototype.parseTransform=function(){if(!this.transformData){if(this.hasTransform()){var n=this.parseBounds(),l=this.prefixedCss("transformOrigin").split(" ").map(G).map(C);l[0]+=n.left,l[1]+=n.top,this.transformData={origin:l,matrix:this.parseTransformMatrix()}}else{this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]}}}return this.transformData},y.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var n=this.prefixedCss("transform"),l=n?m(n.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=l||[1,0,0,1,0,0]}return this.transformMatrix},y.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?z(this.node):q(this.node))},y.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},y.prototype.getValue=function(){var l=this.node.value||"";return"SELECT"===this.node.tagName?l=v(this.node):"password"===this.node.type&&(l=Array(l.length+1).join("•")),0===l.length?this.node.placeholder||"":l},y.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,y.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,y.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,y.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,F.exports=y},{"./color":3,"./utils":26}],15:[function(aX,aI,aO){function aT(s,p,v,m,u){az("Starting NodeParser"),this.renderer=p,this.options=u,this.range=null,this.support=v,this.renderQueue=[],this.stack=new ae((!0),1,s.ownerDocument,null);var q=new am(s,null);if(u.background&&p.rectangle(0,0,p.width,p.height,new at(u.background)),s===s.ownerDocument.documentElement){var l=new am(q.color("backgroundColor").isTransparent()?s.ownerDocument.body:s.ownerDocument.documentElement,null);p.rectangle(0,0,p.width,p.height,l.color("backgroundColor"))}q.visibile=q.isElementVisible(),this.createPseudoHideStyles(s.ownerDocument),this.disableAnimations(s.ownerDocument),this.nodes=aA([q].concat(this.getChildren(q)).filter(function(n){return n.visible=n.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new af,az("Fetched nodes, total:",this.nodes.length),az("Calculate overflow clips"),this.calculateOverflowClips(),az("Start fetching images"),this.images=m.fetch(this.nodes.filter(a2)),this.ready=this.images.ready.then(ab(function(){return az("Images loaded, starting parsing"),az("Creating stacking contexts"),this.createStackingContexts(),az("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),az("Render queue created with "+this.renderQueue.length+" items"),new Promise(ab(function(n){u.async?"function"==typeof u.async?u.async.call(this,this.renderQueue,n):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,n)):n():(this.renderQueue.forEach(this.paint,this),n())},this))},this))}function aN(l){return l.parent&&l.parent.clip.length}function aK(l){return l.replace(/(\-[a-z])/g,function(m){return m.toUpperCase().replace("-","")})}function a1(){}function aJ(o,m,p,l){return o.map(function(w,v){if(w.width>0){var n=m.left,t=m.top,x=m.width,q=m.height-o[2].width;switch(v){case 0:q=o[0].width,w.args=aM({c1:[n,t],c2:[n+x,t],c3:[n+x-o[1].width,t+q],c4:[n+o[3].width,t+q]},l[0],l[1],p.topLeftOuter,p.topLeftInner,p.topRightOuter,p.topRightInner);break;case 1:n=m.left+m.width-o[1].width,x=o[1].width,w.args=aM({c1:[n+x,t],c2:[n+x,t+q+o[2].width],c3:[n,t+q],c4:[n,t+o[0].width]},l[1],l[2],p.topRightOuter,p.topRightInner,p.bottomRightOuter,p.bottomRightInner);break;case 2:t=t+m.height-o[2].width,q=o[2].width,w.args=aM({c1:[n+x,t+q],c2:[n,t+q],c3:[n+o[3].width,t],c4:[n+x-o[3].width,t]},l[2],l[3],p.bottomRightOuter,p.bottomRightInner,p.bottomLeftOuter,p.bottomLeftInner);break;case 3:x=o[3].width,w.args=aM({c1:[n,t+q+o[2].width],c2:[n,t],c3:[n+x,t+o[0].width],c4:[n+x,t+q]},l[3],l[0],p.bottomLeftOuter,p.bottomLeftInner,p.topLeftOuter,p.topLeftInner)}}return w})}function aZ(u,x,p,q){var m=4*((Math.sqrt(2)-1)/3),l=p*m,w=q*m,y=u+p,v=x+q;return{topLeft:aQ({x:u,y:v},{x:u,y:v-w},{x:y-l,y:x},{x:y,y:x}),topRight:aQ({x:u,y:x},{x:u+l,y:x},{x:y,y:v-w},{x:y,y:v}),bottomRight:aQ({x:y,y:x},{x:y,y:x+w},{x:u+l,y:v},{x:u,y:v}),bottomLeft:aQ({x:y,y:v},{x:y-l,y:v},{x:u,y:x+w},{x:u,y:x})}}function aH(L,z,E){var H=L.left,D=L.top,B=L.width,O=L.height,A=z[0][0]<B/2?z[0][0]:B/2,x=z[0][1]<O/2?z[0][1]:O/2,G=z[1][0]<B/2?z[1][0]:B/2,C=z[1][1]<O/2?z[1][1]:O/2,M=z[2][0]<B/2?z[2][0]:B/2,I=z[2][1]<O/2?z[2][1]:O/2,K=z[3][0]<B/2?z[3][0]:B/2,J=z[3][1]<O/2?z[3][1]:O/2,F=B-G,w=O-I,q=B-M,N=O-J;return{topLeftOuter:aZ(H,D,A,x).topLeft.subdivide(0.5),topLeftInner:aZ(H+E[3].width,D+E[0].width,Math.max(0,A-E[3].width),Math.max(0,x-E[0].width)).topLeft.subdivide(0.5),topRightOuter:aZ(H+F,D,G,C).topRight.subdivide(0.5),topRightInner:aZ(H+Math.min(F,B+E[3].width),D+E[0].width,F>B+E[3].width?0:G-E[3].width,C-E[0].width).topRight.subdivide(0.5),bottomRightOuter:aZ(H+q,D+w,M,I).bottomRight.subdivide(0.5),bottomRightInner:aZ(H+Math.min(q,B-E[3].width),D+Math.min(w,O+E[0].width),Math.max(0,M-E[1].width),I-E[2].width).bottomRight.subdivide(0.5),bottomLeftOuter:aZ(H,D+N,K,J).bottomLeft.subdivide(0.5),bottomLeftInner:aZ(H+E[3].width,D+N,Math.max(0,K-E[3].width),J-E[2].width).bottomLeft.subdivide(0.5)}}function aQ(p,m,r,l){var q=function(s,o,u){return{x:s.x+(o.x-s.x)*u,y:s.y+(o.y-s.y)*u}};return{start:p,startControl:m,endControl:r,end:l,subdivide:function(v){var n=q(p,m,v),t=q(m,r,v),y=q(r,l,v),o=q(n,t,v),w=q(t,y,v),x=q(o,w,v);return[aQ(p,n,o,x),aQ(x,w,y,l)]},curveTo:function(n){n.push(["bezierCurve",m.x,m.y,r.x,r.y,l.x,l.y])},curveToReversed:function(n){n.push(["bezierCurve",r.x,r.y,m.x,m.y,p.x,p.y])}}}function aM(v,p,x,m,w,u,l){var q=[];return p[0]>0||p[1]>0?(q.push(["line",m[1].start.x,m[1].start.y]),m[1].curveTo(q)):q.push(["line",v.c1[0],v.c1[1]]),x[0]>0||x[1]>0?(q.push(["line",u[0].start.x,u[0].start.y]),u[0].curveTo(q),q.push(["line",l[0].end.x,l[0].end.y]),l[0].curveToReversed(q)):(q.push(["line",v.c2[0],v.c2[1]]),q.push(["line",v.c3[0],v.c3[1]])),p[0]>0||p[1]>0?(q.push(["line",w[1].end.x,w[1].end.y]),w[1].curveToReversed(q)):q.push(["line",v.c4[0],v.c4[1]]),q}function aY(s,p,v,m,u,q,l){p[0]>0||p[1]>0?(s.push(["line",m[0].start.x,m[0].start.y]),m[0].curveTo(s),m[1].curveTo(s)):s.push(["line",q,l]),(v[0]>0||v[1]>0)&&s.push(["line",u[0].start.x,u[0].start.y])}function aU(l){return l.cssInt("zIndex")<0}function aW(l){return l.cssInt("zIndex")>0}function aV(l){return 0===l.cssInt("zIndex")}function aP(l){return["inline","inline-block","inline-table"].indexOf(l.css("display"))!==-1}function aG(l){return l instanceof ae}function aD(l){return l.node.data.trim().length>0}function a0(l){return/^(normal|none|0px)$/.test(l.parent.css("letterSpacing"))}function aE(l){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(o){var p=l.css("border"+o+"Radius"),m=p.split(" ");return m.length<=1&&(m[1]=m[0]),m.map(aL)})}function aF(l){return l.nodeType===Node.TEXT_NODE||l.nodeType===Node.ELEMENT_NODE}function aR(m){var l=m.css("position"),o=["absolute","relative","fixed"].indexOf(l)!==-1?m.css("zIndex"):"auto";return"auto"!==o}function aw(l){return"static"!==l.css("position")}function ar(l){return"none"!==l.css("float")}function ah(l){return["inline-block","inline-table"].indexOf(l.css("display"))!==-1}function ak(m){var l=this;return function(){return !m.apply(l,arguments)}}function a2(l){return l.node.nodeType===Node.ELEMENT_NODE}function ag(l){return l.isPseudoElement===!0}function aB(l){return l.node.nodeType===Node.TEXT_NODE}function al(l){return function(m,o){return m.cssInt("zIndex")+l.indexOf(m)/l.length-(o.cssInt("zIndex")+l.indexOf(o)/l.length)}}function ay(l){return l.getOpacity()<1}function aL(l){return parseInt(l,10)}function aS(l){return l.width}function ao(l){return l.node.nodeType!==Node.ELEMENT_NODE||["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(l.node.nodeName)===-1}function aA(l){return[].concat.apply([],l)}function ai(m){var l=m.substr(0,1);return l===m.substr(m.length-1)&&l.match(/'|"/)?m.substr(1,m.length-2):m}function an(p){for(var m,r=[],l=0,q=!1;p.length;){ax(p[l])===q?(m=p.splice(0,l),m.length&&r.push(aC.ucs2.encode(m)),q=!q,l=0):l++,l>=p.length&&(m=p.splice(0,l),m.length&&r.push(aC.ucs2.encode(m)))}return r}function ax(l){return[32,13,10,9,45].indexOf(l)!==-1}function av(l){return/[^\u0000-\u00ff]/.test(l)}var az=aX("./log"),aC=aX("punycode"),am=aX("./nodecontainer"),aq=aX("./textcontainer"),ad=aX("./pseudoelementcontainer"),af=aX("./fontmetrics"),at=aX("./color"),ae=aX("./stackingcontext"),au=aX("./utils"),ab=au.bind,ac=au.getBounds,aj=au.parseBackgrounds,aa=au.offsetBounds;aT.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(m){if(a2(m)){ag(m)&&m.appendToDOM(),m.borders=this.parseBorders(m);var l="hidden"===m.css("overflow")?[m.borders.clip]:[],o=m.parseClip();o&&["absolute","fixed"].indexOf(m.css("position"))!==-1&&l.push([["rect",m.bounds.left+o.left,m.bounds.top+o.top,o.right-o.left,o.bottom-o.top]]),m.clip=aN(m)?m.parent.clip.concat(l):l,m.backgroundClip="hidden"!==m.css("overflow")?m.clip.concat([m.borders.clip]):m.clip,ag(m)&&m.cleanDOM()}else{aB(m)&&(m.clip=aN(m)?m.parent.clip:[])}ag(m)||(m.bounds=null)},this)},aT.prototype.asyncRenderer=function(m,l,o){o=o||Date.now(),this.paint(m[this.renderIndex++]),m.length===this.renderIndex?l():o+20>Date.now()?this.asyncRenderer(m,l,o):setTimeout(ab(function(){this.asyncRenderer(m,l)},this),0)},aT.prototype.createPseudoHideStyles=function(l){this.createStyles(l,"."+ad.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+ad.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},aT.prototype.disableAnimations=function(l){this.createStyles(l,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},aT.prototype.createStyles=function(m,l){var o=m.createElement("style");o.innerHTML=l,m.body.appendChild(o)},aT.prototype.getPseudoElements=function(o){var m=[[o]];if(o.node.nodeType===Node.ELEMENT_NODE){var p=this.getPseudoElement(o,":before"),l=this.getPseudoElement(o,":after");p&&m.push(p),l&&m.push(l)}return aA(m)},aT.prototype.getPseudoElement=function(v,z){var p=v.computedStyle(z);if(!p||!p.content||"none"===p.content||"-moz-alt-content"===p.content||"none"===p.display){return null}for(var r=ai(p.content),m="url"===r.substr(0,3),x=document.createElement(m?"img":"html2canvaspseudoelement"),A=new ad(x,v,z),w=p.length-1;w>=0;w--){var y=aK(p.item(w));x.style[y]=p[y]}if(x.className=ad.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+ad.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,m){return x.src=aj(r)[0].args[0],[A]}var q=document.createTextNode(r);return x.appendChild(q),[A,new aq(q,A)]},aT.prototype.getChildren=function(l){return aA([].filter.call(l.node.childNodes,aF).map(function(m){var o=[m.nodeType===Node.TEXT_NODE?new aq(m,l):new am(m,l)].filter(ao);return m.nodeType===Node.ELEMENT_NODE&&o.length&&"TEXTAREA"!==m.tagName?o[0].isElementVisible()?o.concat(this.getChildren(o[0])):[]:o},this))},aT.prototype.newStackingContext=function(o,m){var p=new ae(m,o.getOpacity(),o.node,o.parent);o.cloneTo(p);var l=m?p.getParentStack(this):p.parent.stack;l.contexts.push(p),o.stack=p},aT.prototype.createStackingContexts=function(){this.nodes.forEach(function(l){a2(l)&&(this.isRootElement(l)||ay(l)||aR(l)||this.isBodyWithTransparentRoot(l)||l.hasTransform())?this.newStackingContext(l,!0):a2(l)&&(aw(l)&&aV(l)||ah(l)||ar(l))?this.newStackingContext(l,!1):l.assignStack(l.parent.stack)},this)},aT.prototype.isBodyWithTransparentRoot=function(l){return"BODY"===l.node.nodeName&&l.parent.color("backgroundColor").isTransparent()},aT.prototype.isRootElement=function(l){return null===l.parent},aT.prototype.sortStackingContexts=function(l){l.contexts.sort(al(l.contexts.slice(0))),l.contexts.forEach(this.sortStackingContexts,this)},aT.prototype.parseTextBounds=function(l){return function(q,v,p){if("none"!==l.parent.css("textDecoration").substr(0,4)||0!==q.trim().length){if(this.support.rangeBounds&&!l.parent.hasTransform()){var u=p.slice(0,v).join("").length;return this.getRangeBounds(l.node,u,q.length)}if(l.node&&"string"==typeof l.node.data){var s=l.node.splitText(q.length),m=this.getWrapperBounds(l.node,l.parent.hasTransform());return l.node=s,m}}else{this.support.rangeBounds&&!l.parent.hasTransform()||(l.node=l.node.splitText(q.length))}return{}}},aT.prototype.getWrapperBounds=function(q,m){var u=q.ownerDocument.createElement("html2canvaswrapper"),l=q.parentNode,s=q.cloneNode(!0);u.appendChild(q.cloneNode(!0)),l.replaceChild(u,q);var p=m?aa(u):ac(u);return l.replaceChild(s,u),p},aT.prototype.getRangeBounds=function(o,m,p){var l=this.range||(this.range=o.ownerDocument.createRange());return l.setStart(o,m),l.setEnd(o,m+p),l.getBoundingClientRect()},aT.prototype.parse=function(x){var A=x.contexts.filter(aU),q=x.children.filter(a2),w=q.filter(ak(ar)),p=w.filter(ak(aw)).filter(ak(aP)),m=q.filter(ak(aw)).filter(ar),B=w.filter(ak(aw)).filter(aP),y=x.contexts.concat(w.filter(aw)).filter(aV),z=x.children.filter(aB).filter(aD),v=x.contexts.filter(aW);A.concat(p).concat(m).concat(B).concat(y).concat(z).concat(v).forEach(function(l){this.renderQueue.push(l),aG(l)&&(this.parse(l),this.renderQueue.push(new a1))},this)},aT.prototype.paint=function(m){try{m instanceof a1?this.renderer.ctx.restore():aB(m)?(ag(m.parent)&&m.parent.appendToDOM(),this.paintText(m),ag(m.parent)&&m.parent.cleanDOM()):this.paintNode(m)}catch(l){if(az(l),this.options.strict){throw l}}},aT.prototype.paintNode=function(l){aG(l)&&(this.renderer.setOpacity(l.opacity),this.renderer.ctx.save(),l.hasTransform()&&this.renderer.setTransform(l.parseTransform())),"INPUT"===l.node.nodeName&&"checkbox"===l.node.type?this.paintCheckbox(l):"INPUT"===l.node.nodeName&&"radio"===l.node.type?this.paintRadio(l):this.paintElement(l)},aT.prototype.paintElement=function(m){var l=m.parseBounds();this.renderer.clip(m.backgroundClip,function(){this.renderer.renderBackground(m,l,m.borders.borders.map(aS))},this),this.renderer.clip(m.clip,function(){this.renderer.renderBorders(m.borders.borders)},this),this.renderer.clip(m.backgroundClip,function(){switch(m.node.nodeName){case"svg":case"IFRAME":var p=this.images.get(m.node);p?this.renderer.renderImage(m,l,m.borders,p):az("Error loading <"+m.node.nodeName+">",m.node);break;case"IMG":var o=this.images.get(m.node.src);o?this.renderer.renderImage(m,l,m.borders,o):az("Error loading <img>",m.node.src);break;case"CANVAS":this.renderer.renderImage(m,l,m.borders,{image:m.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(m)}},this)},aT.prototype.paintCheckbox=function(s){var p=s.parseBounds(),w=Math.min(p.width,p.height),m={width:w-1,height:w-1,top:p.top,left:p.left},u=[3,3],q=[u,u,u,u],l=[1,1,1,1].map(function(n){return{color:new at("#A5A5A5"),width:n}}),v=aH(m,q,l);this.renderer.clip(s.backgroundClip,function(){this.renderer.rectangle(m.left+1,m.top+1,m.width-2,m.height-2,new at("#DEDEDE")),this.renderer.renderBorders(aJ(l,m,v,q)),s.node.checked&&(this.renderer.font(new at("#424242"),"normal","normal","bold",w-3+"px","arial"),this.renderer.text("✔",m.left+w/6,m.top+w-1))},this)},aT.prototype.paintRadio=function(m){var l=m.parseBounds(),o=Math.min(l.width,l.height)-2;this.renderer.clip(m.backgroundClip,function(){this.renderer.circleStroke(l.left+1,l.top+1,o,new at("#DEDEDE"),1,new at("#A5A5A5")),m.node.checked&&this.renderer.circle(Math.ceil(l.left+o/4)+1,Math.ceil(l.top+o/4)+1,Math.floor(o/2),new at("#424242"))},this)},aT.prototype.paintFormValue=function(q){var m=q.getValue();if(m.length>0){var u=q.node.ownerDocument,l=u.createElement("html2canvaswrapper"),s=["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"];s.forEach(function(o){try{l.style[o]=q.css(o)}catch(r){az("html2canvas: Parse: Exception caught in renderFormValue: "+r.message)}});var p=q.parseBounds();l.style.position="fixed",l.style.left=p.left+"px",l.style.top=p.top+"px",l.textContent=m,u.body.appendChild(l),this.paintText(new aq(l.firstChild,q)),u.body.removeChild(l)}},aT.prototype.paintText=function(s){s.applyTextTransform();var p=aC.ucs2.decode(s.node.data),v=this.options.letterRendering&&!a0(s)||av(s.node.data)?p.map(function(n){return aC.ucs2.encode([n])}):an(p),m=s.parent.fontWeight(),u=s.parent.css("fontSize"),q=s.parent.css("fontFamily"),l=s.parent.parseTextShadows();this.renderer.font(s.parent.color("color"),s.parent.css("fontStyle"),s.parent.css("fontVariant"),m,u,q),l.length?this.renderer.fontShadow(l[0].color,l[0].offsetX,l[0].offsetY,l[0].blur):this.renderer.clearShadow(),this.renderer.clip(s.parent.clip,function(){v.map(this.parseTextBounds(s),this).forEach(function(o,n){o&&(this.renderer.text(v[n],o.left,o.bottom),this.renderTextDecoration(s.parent,o,this.fontMetrics.getMetrics(q,u)))},this)},this)},aT.prototype.renderTextDecoration=function(m,l,o){switch(m.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(l.left,Math.round(l.top+o.baseline+o.lineWidth),l.width,1,m.color("color"));break;case"overline":this.renderer.rectangle(l.left,Math.round(l.top),l.width,1,m.color("color"));break;case"line-through":this.renderer.rectangle(l.left,Math.ceil(l.top+o.middle+o.lineWidth),l.width,1,m.color("color"))}};var ap={inset:[["darken",0.6],["darken",0.1],["darken",0.1],["darken",0.6]]};aT.prototype.parseBorders=function(p){var m=p.parseBounds(),r=aE(p),l=["Top","Right","Bottom","Left"].map(function(u,x){var s=p.css("border"+u+"Style"),w=p.color("border"+u+"Color");"inset"===s&&w.isBlack()&&(w=new at([255,255,255,w.a]));var v=ap[s]?ap[s][x]:null;return{width:p.cssInt("border"+u+"Width"),color:v?w[v[0]](v[1]):w,args:null}}),q=aH(m,r,l);return{clip:this.parseBackgroundClip(p,q,l,r,m),borders:aJ(l,m,q,r)}},aT.prototype.parseBackgroundClip=function(s,p,v,m,u){var q=s.css("backgroundClip"),l=[];switch(q){case"content-box":case"padding-box":aY(l,m[0],m[1],p.topLeftInner,p.topRightInner,u.left+v[3].width,u.top+v[0].width),aY(l,m[1],m[2],p.topRightInner,p.bottomRightInner,u.left+u.width-v[1].width,u.top+v[0].width),aY(l,m[2],m[3],p.bottomRightInner,p.bottomLeftInner,u.left+u.width-v[1].width,u.top+u.height-v[2].width),aY(l,m[3],m[0],p.bottomLeftInner,p.topLeftInner,u.left+v[3].width,u.top+u.height-v[2].width);break;default:aY(l,m[0],m[1],p.topLeftOuter,p.topRightOuter,u.left,u.top),aY(l,m[1],m[2],p.topRightOuter,p.bottomRightOuter,u.left+u.width,u.top),aY(l,m[2],m[3],p.bottomRightOuter,p.bottomLeftOuter,u.left+u.width,u.top+u.height),aY(l,m[3],m[0],p.bottomLeftOuter,p.topLeftOuter,u.left,u.top+u.height)}return l},aI.exports=aT},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(C,H,w){function y(r,p,J){var l="withCredentials" in new XMLHttpRequest;if(!p){return Promise.reject("No proxy configured")}var s=F(l),u=I(p,r,s);return l?x(u):m(J,u,s).then(function(n){return B(n.content)})}function v(r,p,J){var l="crossOrigin" in new Image,s=F(l),u=I(p,r,s);return l?Promise.resolve(u):m(J,u,s).then(function(n){return"data:"+n.type+";base64,"+n.content})}function m(o,l,p){return new Promise(function(s,u){var t=o.createElement("script"),n=function(){delete window.html2canvas.proxy[p],o.body.removeChild(t)};window.html2canvas.proxy[p]=function(r){n(),s(r)},t.src=l,t.onerror=function(r){n(),u(r)},o.body.appendChild(t)})}function F(l){return l?"":"html2canvas_"+Date.now()+"_"+ ++A+"_"+Math.round(100000*Math.random())}function I(o,l,p){return o+"?url="+encodeURIComponent(l)+(p.length?"&callback=html2canvas.proxy."+p:"")}function E(l){return function(J){var N,u=new DOMParser;try{N=u.parseFromString(J,"text/html")}catch(M){D("DOMParser not supported, falling back to createHTMLDocument"),N=document.implementation.createHTMLDocument("");try{N.open(),N.write(J),N.close()}catch(L){D("createHTMLDocument write not supported, falling back to document.body.innerHTML"),N.body.innerHTML=J}}var p=N.querySelector("base");if(!p||!p.href.host){var K=N.createElement("base");K.href=l,N.head.insertBefore(K,N.head.firstChild)}return N}}function G(u,p,K,J,s,l){return new y(u,p,window.document).then(E(u)).then(function(n){return z(n,K,J,s,l,0,0)})}var x=C("./xhr"),q=C("./utils"),D=C("./log"),z=C("./clone"),B=q.decode64,A=0;w.Proxy=y,w.ProxyURL=v,w.loadUrlDocument=G},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(p,m,r){function l(u,s){var v=document.createElement("a");v.href=u,u=v.href,this.src=u,this.image=new Image;var o=this;this.promise=new Promise(function(w,t){o.image.crossOrigin="Anonymous",o.image.onload=w,o.image.onerror=t,new q(u,s,document).then(function(n){o.image.src=n})["catch"](t)})}var q=p("./proxy").ProxyURL;m.exports=l},{"./proxy":16}],18:[function(p,m,r){function l(s,o,u){q.call(this,s,o),this.isPseudoElement=!0,this.before=":before"===u}var q=p("./nodecontainer");l.prototype.cloneTo=function(n){l.prototype.cloneTo.call(this,n),n.isPseudoElement=!0,n.before=this.before},l.prototype=Object.create(q.prototype),l.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},l.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},l.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},l.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",l.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",m.exports=l},{"./nodecontainer":14}],19:[function(p,m,r){function l(v,u,x,s,w){this.width=v,this.height=u,this.images=x,this.options=s,this.document=w}var q=p("./log");l.prototype.renderImage=function(A,E,x,z){var w=A.cssInt("paddingLeft"),v=A.cssInt("paddingTop"),C=A.cssInt("paddingRight"),F=A.cssInt("paddingBottom"),B=x.borders,D=E.width-(B[1].width+B[3].width+w+C),y=E.height-(B[0].width+B[2].width+v+F);this.drawImage(z,0,0,z.image.width||D,z.image.height||y,E.left+w+B[3].width,E.top+v+B[0].width,D,y)},l.prototype.renderBackground=function(s,o,u){o.height>0&&o.width>0&&(this.renderBackgroundColor(s,o),this.renderBackgroundImage(s,o,u))},l.prototype.renderBackgroundColor=function(s,o){var u=s.color("backgroundColor");u.isTransparent()||this.rectangle(o.left,o.top,o.width,o.height,u)},l.prototype.renderBorders=function(n){n.forEach(this.renderBorder,this)},l.prototype.renderBorder=function(n){n.color.isTransparent()||null===n.args||this.drawShape(n.args,n.color)},l.prototype.renderBackgroundImage=function(u,s,v){var o=u.parseBackgroundImages();o.reverse().forEach(function(t,x,n){switch(t.method){case"url":var w=this.images.get(t.args[0]);w?this.renderBackgroundRepeating(u,s,w,n.length-(x+1),v):q("Error loading background-image",t.args[0]);break;case"linear-gradient":case"gradient":var y=this.images.get(t.value);y?this.renderBackgroundGradient(y,s,v):q("Error loading background-image",t.args[0]);break;case"none":break;default:q("Unknown background-image type",t.args[0])}},this)},l.prototype.renderBackgroundRepeating=function(z,w,B,v,A){var y=z.parseBackgroundSize(w,B.image,v),u=z.parseBackgroundPosition(w,B.image,v,y),x=z.parseBackgroundRepeat(v);switch(x){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(B,u,y,w,w.left+A[3],w.top+u.top+A[0],99999,y.height,A);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(B,u,y,w,w.left+u.left+A[3],w.top+A[0],y.width,99999,A);break;case"no-repeat":this.backgroundRepeatShape(B,u,y,w,w.left+u.left+A[3],w.top+u.top+A[0],y.width,y.height,A);break;default:this.renderBackgroundRepeat(B,u,y,{top:w.top,left:w.left},A[3],A[0])}},m.exports=l},{"./log":13}],20:[function(s,p,w){function m(o,n){q.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=o,this.canvas.height=n),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},v("Initialized CanvasRenderer with size",o,"x",n)}function u(n){return n.length>0}var q=s("../renderer"),l=s("../lineargradientcontainer"),v=s("../log");m.prototype=Object.create(q.prototype),m.prototype.setFillStyle=function(n){return this.ctx.fillStyle="object"===("undefined"==typeof n?"undefined":a(n))&&n.isColor?n.toString():n,this.ctx},m.prototype.rectangle=function(y,x,A,r,z){this.setFillStyle(z).fillRect(y,x,A,r)},m.prototype.circle=function(x,r,y,o){this.setFillStyle(o),this.ctx.beginPath(),this.ctx.arc(x+y/2,r+y/2,y/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},m.prototype.circleStroke=function(A,y,C,x,B,z){this.circle(A,y,C,x),this.ctx.strokeStyle=z.toString(),this.ctx.stroke()},m.prototype.drawShape=function(o,n){this.shape(o),this.setFillStyle(n).fill()},m.prototype.taints=function(o){if(null===o.tainted){this.taintCtx.drawImage(o.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),o.tainted=!1}catch(n){this.taintCtx=document.createElement("canvas").getContext("2d"),o.tainted=!0}}return o.tainted},m.prototype.drawImage=function(B,E,z,A,y,x,D,F,C){this.taints(B)&&!this.options.allowTaint||this.ctx.drawImage(B.image,E,z,A,y,x,D,F,C)},m.prototype.clip=function(r,o,x){this.ctx.save(),r.filter(u).forEach(function(n){this.shape(n).clip()},this),o.call(x),this.ctx.restore()},m.prototype.shape=function(n){return this.ctx.beginPath(),n.forEach(function(r,o){"rect"===r[0]?this.ctx.rect.apply(this.ctx,r.slice(1)):this.ctx[0===o?"moveTo":r[0]+"To"].apply(this.ctx,r.slice(1))},this),this.ctx.closePath(),this.ctx},m.prototype.font=function(A,y,C,x,B,z){this.setFillStyle(A).font=[y,C,x,B,z].join(" ").split(",")[0]},m.prototype.fontShadow=function(x,r,y,o){this.setVariable("shadowColor",x.toString()).setVariable("shadowOffsetY",r).setVariable("shadowOffsetX",y).setVariable("shadowBlur",o)},m.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},m.prototype.setOpacity=function(n){this.ctx.globalAlpha=n},m.prototype.setTransform=function(n){this.ctx.translate(n.origin[0],n.origin[1]),this.ctx.transform.apply(this.ctx,n.matrix),this.ctx.translate(-n.origin[0],-n.origin[1])},m.prototype.setVariable=function(o,n){return this.variables[o]!==n&&(this.variables[o]=this.ctx[o]=n),this},m.prototype.text=function(r,o,x){this.ctx.fillText(r,o,x)},m.prototype.backgroundRepeatShape=function(B,F,z,A,y,x,D,G,C){var E=[["line",Math.round(y),Math.round(x)],["line",Math.round(y+D),Math.round(x)],["line",Math.round(y+D),Math.round(G+x)],["line",Math.round(y),Math.round(G+x)]];this.clip([E],function(){this.renderBackgroundRepeat(B,F,z,A,C[3],C[0])},this)},m.prototype.renderBackgroundRepeat=function(C,z,E,y,D,B){var x=Math.round(y.left+z.left+D),A=Math.round(y.top+z.top+B);this.setFillStyle(this.ctx.createPattern(this.resizeImage(C,E),"repeat")),this.ctx.translate(x,A),this.ctx.fill(),this.ctx.translate(-x,-A)},m.prototype.renderBackgroundGradient=function(r,o){if(r instanceof l){var x=this.ctx.createLinearGradient(o.left+o.width*r.x0,o.top+o.height*r.y0,o.left+o.width*r.x1,o.top+o.height*r.y1);r.colorStops.forEach(function(n){x.addColorStop(n.stop,n.color.toString())}),this.rectangle(o.left,o.top,o.width,o.height,x)}},m.prototype.resizeImage=function(y,x){var A=y.image;if(A.width===x.width&&A.height===x.height){return A}var r,z=document.createElement("canvas");return z.width=x.width,z.height=x.height,r=z.getContext("2d"),r.drawImage(A,0,0,A.width,A.height,0,0,x.width,x.height),z},p.exports=m},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(p,m,r){function l(u,s,v,o){q.call(this,v,o),this.ownStacking=u,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*s}var q=p("./nodecontainer");l.prototype=Object.create(q.prototype),l.prototype.getParentStack=function(o){var n=this.parent?this.parent.stack:null;return n?n.ownStacking?n:n.getParentStack(o):o.stack},m.exports=l},{"./nodecontainer":14}],22:[function(o,m,p){function l(n){this.rangeBounds=this.testRangeBounds(n),this.cors=this.testCORS(),this.svg=this.testSVG()}l.prototype.testRangeBounds=function(v){var s,x,q,w,u=!1;return v.createRange&&(s=v.createRange(),s.getBoundingClientRect&&(x=v.createElement("boundtest"),x.style.height="123px",x.style.display="block",v.body.appendChild(x),s.selectNode(x),q=s.getBoundingClientRect(),w=q.height,123===w&&(u=!0),v.body.removeChild(x))),u},l.prototype.testCORS=function(){return"undefined"!=typeof(new Image).crossOrigin},l.prototype.testSVG=function(){var s=new Image,r=document.createElement("canvas"),u=r.getContext("2d");s.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{u.drawImage(s,0,0),r.toDataURL()}catch(q){return !1}return !0},m.exports=l},{}],23:[function(q,m,u){function l(o){this.src=o,this.image=null;var n=this;this.promise=this.hasFabric().then(function(){return n.isInline(o)?Promise.resolve(n.inlineFormatting(o)):s(o)}).then(function(r){return new Promise(function(t){window.html2canvas.svg.fabric.loadSVGFromString(r,n.createCanvas.call(n,t))})})}var s=q("./xhr"),p=q("./utils").decode64;l.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},l.prototype.inlineFormatting=function(n){return/^data:image\/svg\+xml;base64,/.test(n)?this.decode64(this.removeContentType(n)):this.removeContentType(n)},l.prototype.removeContentType=function(n){return n.replace(/^data:image\/svg\+xml(;base64)?,/,"")},l.prototype.isInline=function(n){return/^data:image\/svg\+xml/i.test(n)},l.prototype.createCanvas=function(o){var n=this;return function(v,r){var t=new window.html2canvas.svg.fabric.StaticCanvas("c");n.image=t.lowerCanvasEl,t.setWidth(r.width).setHeight(r.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(v,r)).renderAll(),o(t.lowerCanvasEl)}},l.prototype.decode64=function(n){return"function"==typeof window.atob?window.atob(n):p(n)},m.exports=l},{"./utils":26,"./xhr":28}],24:[function(p,m,r){function l(s,o){this.src=s,this.image=null;var u=this;this.promise=o?new Promise(function(v,n){u.image=new Image,u.image.onload=v,u.image.onerror=n,u.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(s),u.image.complete===!0&&v(u.image)}):this.hasFabric().then(function(){return new Promise(function(n){window.html2canvas.svg.fabric.parseSVGDocument(s,u.createCanvas.call(u,n))})})}var q=p("./svgcontainer");l.prototype=Object.create(q.prototype),m.exports=l},{"./svgcontainer":23}],25:[function(q,m,u){function l(o,n){p.call(this,o,n)}function s(r,o,v){if(r.length>0){return o+v.toUpperCase()}}var p=q("./nodecontainer");l.prototype=Object.create(p.prototype),l.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},l.prototype.transform=function(o){var n=this.node.data;switch(o){case"lowercase":return n.toLowerCase();case"capitalize":return n.replace(/(^|\s|:|-|\(|\))([a-z])/g,s);case"uppercase":return n.toUpperCase();default:return n}},m.exports=l},{"./nodecontainer":14}],26:[function(m,l,o){o.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},o.bind=function(p,n){return function(){return p.apply(n,arguments)}},o.decode64=function(A){var E,x,z,w,q,C,F,B,D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=A.length,v="";for(E=0;E<y;E+=4){x=D.indexOf(A[E]),z=D.indexOf(A[E+1]),w=D.indexOf(A[E+2]),q=D.indexOf(A[E+3]),C=x<<2|z>>4,F=(15&z)<<4|w>>2,B=(3&w)<<6|q,v+=64===w?String.fromCharCode(C):64===q||q===-1?String.fromCharCode(C,F):String.fromCharCode(C,F,B)}return v},o.getBounds=function(q){if(q.getBoundingClientRect){var p=q.getBoundingClientRect(),r=null==q.offsetWidth?p.width:q.offsetWidth;return{top:p.top,bottom:p.bottom||p.top+p.height,right:p.left+r,left:p.left,width:r,height:null==q.offsetHeight?p.height:q.offsetHeight}}return{}},o.offsetBounds=function(p){var n=p.offsetParent?o.offsetBounds(p.offsetParent):{top:0,left:0};return{top:p.offsetTop+n.top,bottom:p.offsetTop+p.offsetHeight+n.top,right:p.offsetLeft+n.left+p.offsetWidth,left:p.offsetLeft+n.left,width:p.offsetWidth,height:p.offsetHeight}},o.parseBackgrounds=function(A){var F,x,z,w,q,D,G,C=" \r\n\t",E=[],y=0,v=0,B=function(){F&&('"'===x.substr(0,1)&&(x=x.substr(1,x.length-2)),x&&G.push(x),"-"===F.substr(0,1)&&(w=F.indexOf("-",1)+1)>0&&(z=F.substr(0,w),F=F.substr(w)),E.push({prefix:z,method:F.toLowerCase(),value:q,args:G,image:null})),G=[],F=z=x=q=""};return G=[],F=z=x=q="",A.split("").forEach(function(n){if(!(0===y&&C.indexOf(n)>-1)){switch(n){case'"':D?D===n&&(D=null):D=n;break;case"(":if(D){break}if(0===y){return y=1,void (q+=n)}v++;break;case")":if(D){break}if(1===y){if(0===v){return y=0,q+=n,void B()}v--}break;case",":if(D){break}if(0===y){return void B()}if(1===y&&0===v&&!F.match(/^url$/i)){return G.push(x),x="",void (q+=n)}}q+=n,0===y?F+=n:x+=n}}),B(),E}},{}],27:[function(p,m,r){function l(n){q.apply(this,arguments),this.type="linear"===n.args[0]?q.TYPES.LINEAR:q.TYPES.RADIAL}var q=p("./gradientcontainer");l.prototype=Object.create(q.prototype),m.exports=l},{"./gradientcontainer":9}],28:[function(o,m,p){function l(n){return new Promise(function(r,s){var q=new XMLHttpRequest;q.open("GET",n),q.onload=function(){200===q.status?r(q.responseText):s(new Error(q.statusText))},q.onerror=function(){s(new Error("Network Error"))},q.send()})}m.exports=l},{}]},{},[4])(4)})}).call(d,function(){return this}())},function(d,b){function g(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=i.properties.title;return $('<div id="#'+i.id+'" \n                ctype="#'+i.type+'" \n                style="line-height: '+i.css.lineHeight+';"\n                class="elementSave eqf-presslong"\n               >\n                    '+h+"\n                </div>")}function a(l){var j=l.id,p=l.type,h=l.src,m=(l.css,l.padding),k='<button style="display: block;width: 100%;height: 100%; padding: '+m+';" data-event="11201"\n                        id="'+j+'" ctype="'+p+'" class="element comp_button editable-text" >\n                    <img style="width: 100%; height: 100%;" src="'+h+'" />\n                </button>';return $(k)}function f(k){var j=$('<div class="feedback-content"></div>'),l=$('<div class="feedback-btn eqf-no-l"></div>'),h=$('<div class="box"></div>');return h.append(k),h.append(l),j.append(h),$('<div class="feedback-box">').append(j)}function c(o,k,p,j,m){var h=f(o).insertBefore($(k).parent().parent());p&&p<1&&j>0&&h.find(".box").css({height:m,top:j+"px"});var l=h.find(".feedback-btn");h.css({top:"0px"}),h.click(function(i){"IMG"!==i.target.tagName&&h.animate({opacity:0},{duration:300,complete:function(n){return h.remove()}})}),l.on("click",function(){h.animate({opacity:0},{duration:300,complete:function(i){return h.remove()}})})}d.exports={$img:a,$btn:g,modal:c}},function(N,B,G){function J(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function F(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?b:a}function D(b,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}function R(c,b,f,a,d){return"url('"+E.FONT+"fonts/"+c+"_"+b+"/"+f+"."+a+"') format('"+d+"')"}function C(d){var b=d.fontFamily,g=d.sceneId,a=d.publishTime;if(b&&!Q[b]){var f=[R(g,a,b,"woff","woff"),R(g,a,b,"ttf","truetype")].join(", "),c="@font-face{font-family: '"+b+"'; src: "+f+";}";K(c),Q[b]=!0}}function P(d){var b=d.id,g=d.type,a=d.css,f=d.content,c=void 0===f?"":f;return a.cursor="default",a.fontSize&&(a.fontSize=M(a.fontSize)),a.minHeight="inherit",$(z(L,{id:b,type:g,content:c})).css(a)}var A=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),I=function q(d,b,g){null===d&&(d=Function.prototype);var a=Object.getOwnPropertyDescriptor(d,b);if(void 0===a){var f=Object.getPrototypeOf(d);return null===f?void 0:q(f,b,g)}if("value" in a){return a.value}var c=a.get;if(void 0!==c){return c.call(g)}};G(284);var E=G(22),O=G(170),K=O.addGlobalStyle,M=O.addSuffixPx,L=G(285),H=G(127),z=G(44).parse,j=G(24).openUrl,Q={defaultFont:!0,moren:!0,"null":!0,undefined:!0},k=function(b){function a(d,f){J(this,a);var c=F(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,f));return $.extend(!0,c.$ability,{style:{compStyle:{backgroundColor:!0,color:!0}},link:!1}),c}return D(a,b),A(a,[{key:"getFtEditableProps",value:function(){return[]}},{key:"getFtValue",value:function(c){var d=this.FtEditableProps;return c===d.content.content?this.compJson.content:I(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtValue",this).call(this,c)}},{key:"updateContent",value:function(d){this.compJson.content=d;var c=this.create$context();this.$context.replaceWith(c),this.$context=c}},{key:"update$ContentCss",value:function(c){this.$context.css(c)}},{key:"create$context",value:function(){var S=this.compJson,W=S.id,s=S.type,w=S.content,m=S.sceneId,c=S.publishTime,U=S.css,V=U.fontSize,v=U.writingMode,g=S.properties.anim,T=void 0===g?[]:g,x={fontSize:V};this.$boxDiv.css("minHeight",""),this.$boxDiv.css("minWidth",""),v&&(x["-webkit-writing-mode"]=v,x.writingMode=v,"vertical-rl"===v&&(x.textRendering="optimizeLegibility"));var y=P({id:W,type:s,content:w,css:x});return"view"==this.eqxScene.config.mode&&y.find("*").toArray().map(function(d){return $(d).css("font-family")}).forEach(function(d){return C({fontFamily:d,sceneId:m,publishTime:c})}),T[0]&&"typer"===T[0].type&&y.css({opacity:0}),y}},{key:"bindAfterRenderEvent",value:function(f,d){var g=this,c=d.pageId;return"x"===d.type&&d.properties.url?$(f).click(function(){var h=d.properties.url;Number.isInteger(+h)?g.eqxScene.pageScroll.goToPageById(h):j(h,c)}):$(f).find("a[href]").toArray().forEach(function(i){var h=$(i).attr("href");$(i).removeAttr("href").css("cursor","pointer").click(function(){Number.isInteger(+h)?g.eqxScene.pageScroll.goToPageById(+h):j(h,c)})}),!0}},{key:"addClassToLi",value:function(c){c.addClass("wsite-text")}},{key:"clearRichText",value:function(){this.compJson.content=this.$context.text(),this.compJson.css.writingMode="horizontal-tb",this.$context.html(this.compJson.content),this.$context.css("writingMode","horizontal-tb")}},{key:"settingGroupStyle",value:function(c){Object.assign(this.compJson.css,c),this.update$boxDiv(c)}},{key:"adjustHeight",value:function(){this.$li.css({height:"",width:""}),this.$context.css({height:"",width:""});var d=this.$boxDiv.height(),c=this.$boxDiv.width();this.update$li({height:d,width:c}),this.$context.css({height:d,width:c})}}]),a}(H);N.exports=k},function(b,a){},function(b,a){b.exports='<div id="#{id}" ctype="#{type}" class="element comp_paragraph editable-text" style="cursor: default">#{content}</div>'},function(k,w,g){function j(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function f(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var q=function(){function a(o,l){for(var p=0;p<l.length;p++){var c=l[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),x=function d(p,c,u){null===p&&(p=Function.prototype);var a=Object.getOwnPropertyDescriptor(p,c);if(void 0===a){var s=Object.getPrototypeOf(p);return null===s?void 0:d(s,c,u)}if("value" in a){return a.value}var l=a.get;if(void 0!==l){return l.call(u)}},m=g(23).$loadMLink,v=g(283),h=function(c){function a(i,l){return j(this,a),f(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,i,l))}return b(a,c),q(a,[{key:"create$context",value:function(){var t=x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"create$context",this).call(this),y=window.scene,p=y.isTemplate,u=y.sourceId,s=y.id,l={sceneId:s};return p&&(l.isTemplate=p),u&&(l.sourceId=u),m().then(function(){var e={mlink:"https://ax8bgc.mlinks.cc/AK00",button:t.find("a.deepShareHref")[0],autoLaunchApp:!1,autoRedirectToDownloadUrl:!0,downloadWhenUniversalLinkFailed:!1,inapp:!1,params:l};console.log("mlink",e),new Mlink(e)}),t}}]),a}(v);k.exports=h},function(I,q,B){function E(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function A(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function x(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}function L(d){var c=d.imgSrc,f=d.reasonList,a=f.map(function(l,h){var p=l.id,g=l.name,m=(l.value,0==h?'class="active"':"");return'<li value="'+p+'" '+m+"><span>"+g+"</span></li>"}).join("");return $(F(z,{imgSrc:c,reasons:a}))}var w=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),K=function b(f,c,h){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var g=Object.getPrototypeOf(f);return null===g?void 0:b(g,c,h)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(h)}};B(288);var k=B(289).$getReportOptions,D=B(289).$postReport,z=B(290),J=B(283),F=B(44).parse,H=B(84).popUpModal,G=[],C=[{id:14258,name:"内容涉及违规",value:1},{id:14259,name:"诱导浏览者分享",value:2},{id:14260,name:"场景内容侵权",value:3},{id:14302,name:"内容夸大宣传",value:4},{id:14303,name:"违背易企秀用户协议",value:5},{id:14304,name:"其它原因",value:6}],j=function(c){function a(f,g){E(this,a);var d=A(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return d.show=!d.eqxPage.eqxScene.config.disableReport,d.$report=null,d}return x(a,c),w(a,[{key:"eleHide",value:function(){K(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleHide",this).call(this),this.hide()}},{key:"eleShow",value:function(){return this.show?K(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleShow",this).call(this):this}},{key:"hide",value:function(){this.$report&&this.$report.hide()}},{key:"addClassToLi",value:function(d){this.show||this.$li.css("display","none")}},{key:"bindAfterRenderEvent",value:function(f,d){var g=this;$(f).on("click",function(h){h.stopPropagation(),g.openReportModal()})}},{key:"openReportModal",value:function(){var f=this;if(this.$report){return this.$report.show()}var d=this.compJson.sceneId;this.getSelectOption().then(function(e){var h=L({imgSrc:B(291),reasonList:e});f.$report=h;var g=f.$li.parent();h.appendTo(g),h.find("li").click(function(i){i.stopPropagation(),$(this).siblings().removeClass("active"),$(this).addClass("active")}),$("#reportSubmit").click(function(m){m.stopPropagation();var l=h.find("li.active").val();D({sceneId:d,type:l}).then(function(){return H("举报成功！")})["finally"](function(){return f.hide()})}),g.on("click",function(i){var l=h.find(i.target).length>0;l||f.hide()})})}},{key:"getSelectOption",value:function(){return new Promise(function(f,d){return G.length?f(G):k().then(function(e){G=e.list,G.length?f(G):d()})["catch"](function(){return G=C,f(G)})})}}]),a}(J);I.exports=j},function(b,a){},function(g,d,j){function c(){var a=b.SERVER_1+"eqs/class/expose_types";return f({type:"GET",url:a})}function h(i){var a=i.sceneId,k=i.type;return f({type:"POST",url:b.SERVER_1+"eqs/s/expose",data:{sceneId:a,type:k}})}var f=j(21).ajax,b=j(22);g.exports={$getReportOptions:c,$postReport:h}},function(b,a,c){b.exports='<div id="report0"><div id="report1"><div id="report2"><p><img src="'+c(291)+'" width="50px;"></p><h1>请选择举报原因</h1></div><div id="report3"><ul id="reportList">#{reasons}</ul></div><div id="report4"><a id="reportSubmit" data-event="11203">提交举报</a></div></div></div>'},function(b,a,c){b.exports=c.p+"images/jubao_03-db9a15.png"},function(J,w,C){function F(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function B(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?b:a}function z(b,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}function N(h){var d=h.id,m=h.type,c=h.marginTop,l=h.marginBottom,g=h.css,b=h.content,f=void 0===b?"":b;return g.cursor="default",g.minHeight="inherit",g.fontSize&&(g.fontSize=G(g.fontSize)),$(H(I,{id:d,type:m,content:f,marginTop:c,marginBottom:l})).css(g)}function x(c){var b=c.fontFamily,f=c.sceneId,a=c.mode;if("view"===a&&window.scene&&b&&!k[b]){var d="@font-face{font-family:'"+b+"';src: url('"+D.FONT+"fonts/"+f+"_"+window.scene.publishTime+"/"+b+".woff') format('woff'),url('"+D.FONT+"fonts/"+f+"_"+window.scene.publishTime+"/"+b+".ttf') format('truetype');}";K(d),k[b]=!0}}var L=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),q=function M(d,b,g){null===d&&(d=Function.prototype);var a=Object.getOwnPropertyDescriptor(d,b);if(void 0===a){var f=Object.getPrototypeOf(d);return null===f?void 0:M(f,b,g)}if("value" in a){return a.value}var c=a.get;if(void 0!==c){return c.call(g)}},E=C(127),A=C(170),K=A.addGlobalStyle,G=A.addSuffixPx,I=C(293),H=C(44).parse,D=C(22),k={},j=function(b){function a(d,f){F(this,a);var c=B(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,f));return $.extend(!0,c.$ability,{style:{compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0},compStyle:{backgroundColor:!0},commonStyle:{tip:!0},advanceStyle:{variable:!0,variableText:!0,adjustMode:!0,replace:!0}},link:!0,flexLine:"n,s,w,e,r"}),c}return z(a,b),L(a,[{key:"getFtEditableProps",value:function(){var c=q(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtEditableProps",this).call(this),d=this.FtEditableProps;return[d.content.content,d.color.color].concat(c,[d.link.url,d.internalLink.internalLink,d.telephone.number])}},{key:"create$context",value:function(){var ab=this.compJson,Q=ab.id,U=ab.type,X=ab.content,T=ab.sceneId,R=ab.css,ad=R.letterSpacing,P=void 0===ad?0:ad,W=R.fontFamily,S=R.fontSize,ac=R.writingMode,Y=R.marginTop,aa=void 0===Y?"0px":Y,Z=R.marginBottom,V=void 0===Z?"0px":Z,O=ab.properties.anim,s=void 0===O?[]:O;ab.properties.isReplace=ab.properties.isReplace||!1,X=X.replace(/\s/g,function(){var c=0;return function(d){return c+=1,c%2?"&nbsp;":d}}()),X=X||"请输入文本";var ae=N({id:Q,type:U,content:X,marginTop:aa,marginBottom:V,css:{fontFamily:W,fontSize:S,writingMode:ac}});return x({mode:this.eqxScene.config.mode,fontFamily:W,sceneId:T}),11===(ab.id+"").length&&this.$li.attr("_tracker_data_",JSON.stringify({id:ab.id})),s[0]&&"typer"===s[0].type&&ae.css({opacity:0}),ae.css({letterSpacing:parseFloat(P||0)+"em"}),ae}},{key:"create$liBack",value:function(){return this.$liBack=this.$li.clone().css("opacity",0),this.$li.parent().append(this.$liBack),this.$liBack}},{key:"getNewHeightWidth",value:function(l,u){var g=JSON.parse(JSON.stringify(this.compJson.css));Object.assign(g,u,{opacity:0,zIndex:-1}),this.$liBack.css(g);var h=u.width,f=u.height,d=this.$liBack.find("#"+this.compJson.id),p=this.$liBack.find("span"),v=parseInt(d.css("padding")),m=p.height()+2*v;return l.width===u.width&&l.height===u.height?f=this.$li.height():l.width!==u.width?(f=this.$li.height(),m>=f&&(f=m)):l.height!==u.height&&f<m&&(f=m),{height:f,width:h}}},{key:"remove$liBack",value:function(){this.$liBack&&this.$liBack.remove()}},{key:"updateContent",value:function(d){var c=this.$context.children();d=d.replace(/\s/g,function(){var f=0;return function(e){return f+=1,f%2?"&nbsp;":e}}()),c.text(d||this.compJson.content||"请输入文本"),this.compJson.content=d,c.html(c.text())}},{key:"autoAdjustSize",value:function(){function S(h){var d=h.$context,p=h.$context.children(),c=parseInt(d.css("padding")),l=p.height(),f={height:l+2*c};return h.update$li(f),{height:parseInt(h.$li.css("height")),width:parseInt(h.$li.css("width"))}}function X(ac,h){if(void 0!==h&&null!==h){var e=320,aa=ac.$context,ad=ac.$context.children(),Z=v(ad);if(Z<aa.width()){var ab={width:Z+2*parseInt(aa.css("padding"))};ac.update$li(ab),ac.update$boxDiv(ab),aa.css(ab)}else{if(Z>=aa.width()){for(var i=ad.height(),f=aa.height(),o=aa.width();i>f&&o<e;){P(ac),i=ad.height(),f=aa.height(),o=aa.width()}}}return S(ac)}}function y(d,f){if(void 0!==f&&null!==f){var c=d.$context,e=d.$context.children();if(1===f){for(;g(c,e,f)&&V(c)>W;){Y(d)}if(g(c,e,f)&&V(c)<=W){return S(d)}}else{if(0!==f){return S(d)}for(;g(c,e,f)&&V(c)<O;){U(d)}g(c,e,f)||Y(d)}return{height:parseInt(d.$li.css("height")),width:parseInt(d.$li.css("width"))}}}function P(f){var d=f.$context,h=parseFloat(d.css("width"))+1,c={width:h+"px"};f.update$li(c),f.update$boxDiv(c),d.css(c)}function v(d){var c=d.css("display","inline").width();return d.css("display","block"),c}function g(d,c,f){return f?c.height()>d.height():c.height()<d.height()}function V(c){return parseInt(c.css("font-size"))}function Y(f){var d=f.$context,h=V(d);if(h>W){var c={fontSize:h-1+"px"};f.update$li(c),f.update$boxDiv(c),d.css(c)}}function U(f){var d=f.$context,h=V(d);if(h<O){var c={fontSize:h+1+"px"};f.update$li(c),f.update$boxDiv(c),d.css(c)}}var W=12,O=96,m=this.compJson.properties,T=m.adjustWHMode,Q=m.adjustFSMode,R=arguments.length?arguments[0]:null;return T?y(this,R):Q?X(this,R):S(this)}}]),a}(E);J.exports=j},function(b,a){b.exports='<div id="#{id}" ctype="#{type}" class="element" style="padding: 5px;width: 100%;height: 100%"><span style="display: block;margin-top: #{marginTop};margin-bottom: #{marginBottom};color: inherit;word-break: break-all">#{content}</span></div>'},function(h,d,k){function c(i,a){if(!(i instanceof a)){throw new TypeError("Cannot call a class as a function")}}function j(i,a){if(!i){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?i:a}function g(i,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(i,a):i.__proto__=a)}var b=k(292),f=function(i){function a(m,o){c(this,a);var l=j(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,m,o));return $.extend(!0,l.$ability,{style:{base:{self:!1},border:{self:!1},boxShadow:{self:!1},compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0},compStyle:{backgroundColor:!0},commonStyle:{tip:!0},advanceStyle:{variable:!0}},link:!0,flexLine:"w,e,r"}),l}return g(a,i),a}(b);h.exports=f},function(L,z,E){function H(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function D(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?b:a}function B(b,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}function P(h){var d=h.id,m=h.type,c=h.marginTop,l=h.marginBottom,g=h.css,b=h.content,f=void 0===b?"":b;return g.cursor="default",g.minHeight="inherit",g.fontSize&&(g.fontSize=K(g.fontSize)),$(F(J,{id:d,type:m,content:f,marginTop:c,marginBottom:l})).css(g)}function A(c){var b=c.fontFamily,d=c.sceneId,a=c.mode;"view"===a&&window.scene&&b&&!j[b]&&(I("@font-face{\n                font-family:'"+b+"';\n                src: url('"+q.FONT+"fonts/"+d+"_"+window.scene.publishTime+"/"+b+".woff') format('woff'),\n                url('"+q.FONT+"fonts/"+d+"_"+window.scene.publishTime+"/"+b+".ttf') format('truetype');"),j[b]=!0)}function N(a){return Math.floor(Math.random()*a)}var w=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),G=function k(d,b,g){null===d&&(d=Function.prototype);var a=Object.getOwnPropertyDescriptor(d,b);if(void 0===a){var f=Object.getPrototypeOf(d);return null===f?void 0:k(f,b,g)}if("value" in a){return a.value}var c=a.get;if(void 0!==c){return c.call(g)}},C=E(127),M=E(170),I=M.addGlobalStyle,K=M.addSuffixPx,J=E(296),F=E(44).parse,q=E(22),j={},O=function(b){function a(f,g){H(this,a);var d=D(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g)),c=f.properties.contentType;return"t"===c?$.extend(!0,d.$ability,{style:{compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0},compStyle:{backgroundColor:!0}},link:!0,flexLine:"w,e,r"}):"i"===c&&$.extend(!0,d.$ability,{style:{base:{lineHeight:!1,color:!1,paddingTop:!1},compStyle:{backgroundColor:!1},imageStyle:!0}}),d}return B(a,b),w(a,[{key:"getFtEditableProps",value:function(){var d=G(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtEditableProps",this).call(this),f=this.FtEditableProps,c=this.compJson.properties.contentType;return"t"===c?d.concat([f.tRandom.tRandom]):"i"===c?d.concat([f.iRandom.iRandom]):d}},{key:"getFtValue",value:function(c){var d=this.FtEditableProps;return c===d.tRandom.tRandom?this.getProp("texts"):c===d.iRandom.iRandom?this.getProp("imgs"):G(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtValue",this).call(this,c)}},{key:"create$context",value:function(){var aw=this.compJson,af=aw.properties.contentType;if("t"===af){var am=aw.id,ar=aw.type,al=aw.sceneId,ah=aw.css,ad=ah.fontFamily,ao=ah.fontSize,ak=ah.writingMode,ax=ah.marginTop,at=void 0===ax?"0px":ax,av=ah.marginBottom,au=void 0===av?"0px":av,an=aw.properties,ac=an.anim,Y=void 0===ac?[]:ac,ay=an.texts,aa=void 0===ay?[]:ay,ab="view"===this.eqxScene.config.mode?N(aa.length):0,ap=aa[ab]||"请输入文本",ae=P({id:am,type:ar,content:ap,marginTop:at,marginBottom:au,css:{fontFamily:ad,fontSize:ao,writingMode:ak}});return A({mode:this.eqxScene.config.mode,fontFamily:ad,sceneId:al}),Y[0]&&"typer"===Y[0].type&&ae.css({opacity:0}),ae}if("i"===af){var Z=aw.id,s=aw.type,U=aw.properties;U=void 0===U?{}:U;var az=U.imgs,c=void 0===az?[]:az,V=U.bgColor,ag=aw.css,ai=ag.width,aq=ag.height,X="view"===this.eqxScene.config.mode?N(c.length):0,aj=this.getImgSrc(c[X].src,{width:ai,height:aq}),Q=$('<div id="'+Z+'" \n                                   class="random-content element" \n                                   ctype="'+s+'"\n                                   style="width: 100%;height: 100%;"></div>').css("background-color",V),W=this.$img=$('<div class="random-content-image"\n                                           style="width: 100%;height: 100%;">').css({backgroundImage:"url('"+aj+"')",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center"});return Q.append(W),Q}}},{key:"updateContent",value:function(c){this.$context.children().html(c)}},{key:"updateImg",value:function(f){var d=this.compJson.css,h=d.width,c=d.height,g=this.getImgSrc(f,{width:h,height:c});this.$img.css("background-image","url('"+g+"')")}},{key:"updateSize",value:function(d,c){}},{key:"updateTurnOver",value:function(c){this.$boxContentDiv.css("transform",c)}},{key:"autoAdjustSize",value:function(){var f=this.$context,d=this.$context.children(),h=parseInt(f.css("padding")),c=d.height(),g={height:c+2*h};return this.update$li(g),{height:parseInt(this.$li.css("height")),width:parseInt(this.$li.css("width"))}}}]),a}(C);L.exports=O},function(b,a){b.exports='<div id="#{id}" ctype="#{type}" class="element" style="padding: 5px;width: 100%;height: 100%"><span style="display: block;\n                 margin-top: #{marginTop};\n                 margin-bottom: #{marginBottom};\n                 color: inherit;\n                 word-break: break-all">#{content}</span></div>'},function(h,m,f){function g(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function d(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var k=function(){function a(q,o){for(var r=0;r<o.length;r++){var c=o[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(q,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}(),p=f(298),j=f(127),l=function(c){function a(o,q){g(this,a);var i=d(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,o,q));return $.extend(!0,i.$ability,{style:{compStyle:{self:!0,backgroundColor:!0},commonStyle:{self:!0},advanceStyle:{self:!0,required:!0},compFont:{fontColor:!0}},trigger:{self:!1},sound:!1,link:!1}),i.eqxScene.formManager.add(i),i}return b(a,c),k(a,[{key:"check",value:function(){var r=this.$select.find("option:selected").text(),q=this.compJson.properties.required,s=Number(this.$select.val()),o={success:!0,pageId:this.pageId,key:this.name,value:r};return q&&!s&&(o.success=!1,o.message="下拉框 '"+r+"' 为必选项"),o}},{key:"create$context",value:function(){var A=this.compJson,F=A.id,w=A.pageId,y=A.type,v=A.required,q=A.css,D=q.borderWidth,C=q.backgroundColor;D||(A.css.borderWidth=0,A.css.borderColor="rgba(8, 161, 239, 1)",this.$boxDiv.css("borderWidth","0"),this.$boxDiv.css("borderColor","rgba(8, 161, 239, 1)")),C||(A.css.backgroundColor="#ffffff",this.$boxDiv.css("backgroundColor","#ffffff"));var E=A.choices||{},x=E.options||[];this.name="eq[f_"+F+"]",this.required=v,this.pageId=w;var s=p.$compDiv({id:F,type:y,required:v}),B=this.$select=s.find("select"),z=x.map(function(i){return p.$option({selected:i.selected,value:i.value,label:i.label})});return B.append(z),s}},{key:"changeOption",value:function(){var n=this.compJson.choices.options||[],i=n.map(function(o){return p.$option({selected:o.selected,value:o.value,label:o.label})});this.$select.empty(),this.$select.append(i)}},{key:"bindAfterRenderEvent",value:function(){return this.$li.bind("touchstart mousedown",function(i){i.stopPropagation()}),!0}}]),a}(j);h.exports=l},function(g,d,j){function c(m){var k=m.id,q=m.type,a=m.required,p=void 0===a?null:a,l=$(b(f,{id:k,type:q}));return l.find("#"+k).attr("required",p),l}function h(m){var k=m.selected,q=void 0===k?null:k,a=m.value,p=m.label,l=$('<option  class="comp_select_option" value="'+a+'">'+p+"</option>").attr("selected",q);return l}var f=j(299);j(300);var b=j(44).parse;g.exports={$compDiv:c,$option:h}},function(b,a){b.exports='<div class="comp_drop_down" style="width:100%;height:100%" id="#{id}" ctype="#{type}"><select style="width:100%;height:100%" name="eq[f_#{id}]" class="comp_drop_down_select" ctype="#{type}"></select></div>'},function(b,a){},function(x,C,k){function q(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function j(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var A=function(){function a(f,d){for(var h=0;h<d.length;h++){var c=d[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),D=function w(f,c,l){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var h=Object.getPrototypeOf(f);return null===h?void 0:w(h,c,l)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(l)}},z=k(25).mobilecheck,B=k(25).isAndroidPhone,m=k(127),g=k(302),y=k(44).parse;k(303);var v=function(c){function a(f,h){q(this,a);var d=j(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,h));return $.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{fontColor:!0},advanceStyle:{required:!0}},trigger:{self:!1},link:!1}),d.eqxScene.formManager.add(d),d.variablesValue="",d}return b(a,c),A(a,[{key:"getFtEditableProps",value:function(){var d=D(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtEditableProps",this).call(this),f=this.FtEditableProps;return d.concat([f.input.input])}},{key:"getFtValue",value:function(d){var f=this.FtEditableProps;return d===f.input.input?this.compJson.type:D(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtValue",this).call(this,d)}},{key:"check",value:function(){var f=this.$li.find("#"+this.id).val(),d={success:!0,pageId:this.pageId,key:this.name,value:f};return this.required&&!f&&(d.success=!1,d.message=this.placeholder+" 为必填项"),d}},{key:"create$context",value:function(){var p=this.compJson,F=p.id,h=p.pageId,l=p.type,f=p.properties,d=f.required,E=void 0===d?null:d,G=f.placeholder,u=void 0===G?null:G;return this.required=E,this.name="eq[f_"+F+"]",this.pageId=h,this.placeholder=u,this.id=F,$(y(g,{id:F,type:l})).attr({required:E,placeholder:u})}},{key:"setInputTitle",value:function(d){this.$context.attr("placeholder",d)}},{key:"bindAfterRenderEvent",value:function(f,h){var d=z();return a.touchStartMouseDownStopPropagation($(f).find("textarea")),this.onFocusBlurWhenFlip($(f).find("textarea")),this.onChangeTriggerVar($(f).find("textarea")),d&&parseFloat(h.css.top)>=200&&B()&&$(f).find("textarea").focus(function(i){setTimeout(function(){i.target.scrollIntoViewIfNeeded()},500)}).blur(function(){var i=$(this).parents(".m-img");i.css("position","fixed"),setTimeout(function(){i.css("position","")},100)}),!0}},{key:"onFocusBlurWhenFlip",value:function(f){var d=this;f.focus(function(){d.eqxScene.pageScroll.pauseAutoFlip()}).blur(function(){d.eqxScene.pageScroll.canAutoFlip&&d.eqxScene.pageScroll.startAutoFlip()})}},{key:"onChangeTriggerVar",value:function(f){var d=this;f.on("change input",function(){var h=f.val();d.variablesValue=h;var e=d.variables;e&&e.length&&e.forEach(function(i){"7"===i.type.toString()&&i.updateContent(h)})})}},{key:"addClassToLi",value:function(d){d.addClass("wsite-input")}}],[{key:"touchStartMouseDownStopPropagation",value:function(d){$(d).bind("touchstart mousedown",function(f){f.stopPropagation()})}}]),a}(m);x.exports=v},function(b,a){b.exports='<textarea id="#{id}" ctype="#{type}" class="element comp_input editable-text" maxlength="300" name="eq[f_#{id}]" style="width: 100%;height:100%;box-sizing:border-box;-webkit-overflow-scrolling:touch;user-select: none">\n</textarea>'},function(b,a){},function(k,w,g){function j(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function f(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var q=function(){function a(o,l){for(var p=0;p<l.length;p++){var c=l[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),x=function d(p,c,u){null===p&&(p=Function.prototype);var a=Object.getOwnPropertyDescriptor(p,c);if(void 0===a){var s=Object.getPrototypeOf(p);return null===s?void 0:d(s,c,u)}if("value" in a){return a.value}var l=a.get;if(void 0!==l){return l.call(u)}},m=g(301),v=g(196).isEmail,h=function(c){function a(i,l){return j(this,a),f(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,i,l))}return b(a,c),q(a,[{key:"check",value:function(){var i=x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"check",this).call(this);return i.success?(i.value&&!v(i.value)&&(i.success=!1,i.message=this.placeholder+" 格式不对"),i):i}}]),a}(m);k.exports=h},function(k,w,g){function j(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function f(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var q=function(){function a(o,l){for(var p=0;p<l.length;p++){var c=l[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),x=function d(p,c,u){null===p&&(p=Function.prototype);var a=Object.getOwnPropertyDescriptor(p,c);if(void 0===a){var s=Object.getPrototypeOf(p);return null===s?void 0:d(s,c,u)}if("value" in a){return a.value}var l=a.get;if(void 0!==l){return l.call(u)}},m=g(301),v=g(196).isPhoneNumber,h=function(c){function a(i,l){return j(this,a),f(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,i,l))}return b(a,c),q(a,[{key:"check",value:function(){var i=x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"check",this).call(this);return i.success?(i.value&&!v(i.value)&&(i.success=!1,i.message=this.placeholder+" 格式不对"),i):i}}]),a}(m);k.exports=h},function(h,m,f){function g(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function d(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var k=function(){function a(q,o){for(var r=0;r<o.length;r++){var c=o[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(q,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}(),p=f(307),j=f(127),l=function(c){function a(o,q){g(this,a);var i=d(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,o,q));return $.extend(!0,i.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1},advanceStyle:{required:!0}},trigger:{self:!1},sound:!1,link:!1}),i.eqxScene.formManager.add(i),i}return b(a,c),k(a,[{key:"check",value:function(){var n=this.$score.val(),i={success:!0,pageId:this.pageId,key:this.name,value:n};return this.required&&!n&&(i.success=!1,i.message="评分项: "+this.title+" 为必填项"),i}},{key:"create$context",value:function(){var z=this.compJson,E=z.id,w=z.pageId,y=z.type,v=z.title,q=z.properties,C=q.required,B=q.icon,D=q.size,x=q.color,s=p.$compDiv({id:E,type:y,required:C,title:v});this.required=C,this.title=v,this.name="eq[f_"+E+"]",this.pageId=w;var A=[1,2,3,4,5].map(function(){return p.icon({icon:B,size:D})});return s.find(".rating-icons").append(A).css({color:x}),this.$score=s.find('input[type="hidden"]'),this.$titleDiv=s.find(".rating-title"),s}},{key:"update$iconColor",value:function(i){this.$context.find(".rating-icons").css({color:i})}},{key:"update$titleDiv",value:function(i){this.$titleDiv.text(i)}},{key:"updateAttrRequire",value:function(i){this.$context.attr("required",i)}},{key:"update$icon",value:function(n,i){this.$context.find("i").removeClass().addClass(n+" "+i)}},{key:"bindAfterRenderEvent",value:function(y,v){function A(i){z.each(function(e,o){$(o).removeClass(w+"-f").addClass(w+"-l"),e<=i&&$(o).removeClass(w+"-l").addClass(w+"-f")})}var u=$(y),z=u.find("i"),x=u.find("input"),q=v.properties.icon.split("-"),w=q[0]+"-"+q[1];return z.each(function(n,i){$(i).attr("data-event","11211"),$(i).bind("click",function(){A(n),x.val(n+1)}).bind("mouseenter",function(){return A(n)})}),u.find(".rating-icons").bind("mouseleave",function(){return A(~~x.val()-1)}).bind("touchstart mousedown",function(i){i.stopPropagation()}),!0}}]),a}(j);h.exports=l},function(g,d,j){function c(m){var k=m.id,q=m.type,a=m.title,p=m.required,l=void 0===p?null:p;return $(b(f,{id:k,type:q,title:a})).attr("required",l)}function h(i){var a=i.icon,k=i.size;return'<i class="'+k+" "+a+'"></i>'}j(308);var f=j(309),b=j(44).parse;g.exports={$compDiv:c,icon:h}},function(b,a){},function(b,a){b.exports='<div class="element comp_rating editable-text" style="width: 100%;height:100%" id="#{id}" ctype="#{type}" title="#{title}" name="eq[f_#{id}]"><div class="rating-title">#{title}</div><div class="rating-icons"></div><input type="hidden" name="eq[f_#{id}]" value=""></div>'},function(j,q,f){function h(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function d(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var m=function(){function a(o,l){for(var r=0;r<l.length;r++){var c=l[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),v=function g(s,c,w){null===s&&(s=Function.prototype);var a=Object.getOwnPropertyDescriptor(s,c);if(void 0===a){var u=Object.getPrototypeOf(s);return null===u?void 0:g(u,c,w)}if("value" in a){return a.value}var l=a.get;if(void 0!==l){return l.call(w)}},k=f(311),p=function(c){function a(i,l){return h(this,a),d(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,i,l))}return b(a,c),m(a,[{key:"$compDiv",value:function(i){return i.title+="(可多选)",v(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"$compDiv",this).call(this,i)}},{key:"$option",value:function(i){return i.inputType="checkbox",v(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"$option",this).call(this,i)}},{key:"updateTitle",value:function(){var i=this.compJson.title+"(可多选)";return v(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateTitle",this).call(this,i)}}]),a}(k);j.exports=p},function(k,w,g){function j(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function f(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var q=function(){function a(o,l){for(var p=0;p<l.length;p++){var c=l[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}();g(312);var x=g(127),m=g(313),v=g(314),h=g(44).parse,d=function(c){function a(l,o){j(this,a);var i=f(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,l,o));return $.extend(!0,i.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!1,fontFamily:!1},advanceStyle:{required:!0}},trigger:{self:!1},sound:!1,link:!1}),i.eqxScene.formManager.add(i),i}return b(a,c),q(a,[{key:"check",value:function(){var l=this.$options.find("input.option[name]").toArray().filter(function(n){return n.checked}).map(function(n){return $(n).val()}).filter(function(n){return !!n}).join(","),i={success:!0,pageId:this.pageId,key:this.name,value:l};return this.required&&!l&&(i.success=!1,i.message=this.title+" 为必填项"),i}},{key:"$compDiv",value:function(A){var u=A.id,C=A.required,p=void 0===C?null:C,B=A.title,z=void 0===B?"标题":B,l=A.type,y=A.css;return $(h(v,{id:u,title:z,type:l,css:y})).attr({required:p})}},{key:"$option",value:function(A){var u=A.compId,C=A.index,p=A.optionId,B=A.optionLabel,z=A.inputType,l=void 0===z?"radio":z,y=""+u+C;return $(h(m,{id:y,inputType:l,compId:u,optionId:p,optionLabel:B}))}},{key:"create$context",value:function(){var E=this.compJson,I=E.id,B=E.pageId,D=E.type,A=E.properties,y=A.required,G=A.titleStyle,J=void 0===G?{}:G,F=E.title,H=E.css.height;this.title=F,this.pageId=B,this.name="eq[f_"+I+"]",this.required=y;var C=this.$compDiv({id:I,required:y,title:F,type:D,css:{height:H,width:"100%"}});C.find(".radio-title").css(J);var z=this.$options=C.find(".options");return z.html(this.create$options()),C}},{key:"create$options",value:function(){var r=this,p=this.compJson,u=p.id,l=(p.properties.optionStyle,p.choices);"string"==typeof l&&(l=JSON.parse(l));var s=$("<div>");l.options.length-1;return l.options.forEach(function(n,e){var o=r.$option({compId:u,index:e,optionId:n.id,optionLabel:n.label});s.append(o)}),s.html()}},{key:"bindAfterRenderEvent",value:function(){return this.$li.find("label").bind("touchstart mousedown",function(i){i.stopPropagation()}),!0}},{key:"updateTitle",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.compJson.title;this.$li.find(".radio-title").text(i)}},{key:"updateOptions",value:function(){var i=this.create$options();this.$options.html(i),this.$li.css({height:""}),this.update$li({height:this.$li.height()})}},{key:"updateOptionsLabel",value:function(){var i=this.$li.find(".option-label").find("span");this.compJson.choices.options.forEach(function(e,l){$(i[l]).text(e.label)})}},{key:"updateOptionsType",value:function(){var l="c"===this.compJson.type,i=l?"checkbox":"radio";this.$li.find("input").attr("type",i),l?this.updateTitle(this.compJson.title+"(可多选)"):this.updateTitle()}},{key:"updateHeadBgcolor",value:function(i){this.$li.find(".radio-title").css("backgroundColor",i)}},{key:"updateHeadFontColor",value:function(i){this.$li.find(".radio-title").css("color",i)}}]),a}(x);k.exports=d},function(b,a){},function(b,a){b.exports='<div class="option-group"><label class="option-label" for="#{id}" data-event="11208"><input class="option" id="#{id}" type="#{inputType}" name="eq[f_#{compId}]" value="#{optionId}"> <span>#{optionLabel}</span></label></div>'},function(b,a){b.exports='<div class="element comp_radio editable-text" id="#{id}" ctype="#{type}" title="#{title}" name="eq[f_#{id}]" style="width: 100%;height: 100%"><div class="radio-title">#{title}</div><div class="options"></div></div>'},function(z,E,m){function v(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function k(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var C=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),F=m(316).$postForm,B=m(22),D=m(230),q=m(127),j=m(25).isWeixin,A=m(96).qiniuZoom,w=m(317),y=m(84).popUpModal,x=function(c){function a(f,g){v(this,a);var d=k(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return $.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!0,fontFamily:!1,fontColor:!0}},trigger:{self:!1},sound:!1,link:!1}),d}return b(a,c),C(a,[{key:"create$context",value:function(){var K=this.compJson,N=K.id,G=K.pageId,I=K.type,u=K.properties,f=u.title,M=u.styleImgSrc,O=K.css,H=O.width,g=O.height,L=""+B.FILE+M,J="0";return this.pageId=G,this.$context=M?D.$img({id:N,type:I,src:L,css:{width:H,height:g},padding:J}):D.$btn({id:N,type:I,title:f,css:{width:H,height:g}}),this.$context}},{key:"addClassToLi",value:function(d){d.addClass("wsite-input")}},{key:"bindAfterRenderEvent",value:function(g,f){var l=this,d=!0,h=this;$(g).click(function(){var e=l.eqxScene.formManager,K=e.check(),u=f.sceneId,n=f.id,t=f.pageId,i=f.properties,N=i.layout,H=void 0===N?"rating-l":N,G=i.imgSrc,J=i.text,M=i.link,o=i.checkedLink,O=i.clickFarmer,L=i.endTime,p=new Promise(function(){});if(e.submited){p=Promise.reject({code:120505})}else{if(L&&L<Date.now()){p=Promise.reject({code:120602})}else{if(O&&!j()){p=Promise.reject({code:120504})}else{if(K.success){d&&(l.eqxScene.config.disableSubmit?p=Promise.resolve():(L&&(K.form.endTime=L),p=F(K.form,u,t,n)),d=!1)}else{if(K.pageId&&l.pageId!=K.pageId){var s=confirm(K.message+" 是否前往修改？");s&&l.eqxScene.pageScroll.goToPageById(K.pageId)}else{p=Promise.reject({msg:K.message})}}}}}p.then(function(){e.submited=!0,d=!0;var P=!!o,S=G?A(G,240):w;J=J?J.trim():"谢谢您的参与！";var I=h.eqxPage,Q=I.$editDiv.css("transform")||"",R=Q.match(/matrix.*, (.*)\)/),r=R?R[1]:0;D.modal(g,H,P,S,J,M,r)})["catch"](function(r){d=!0,y(120505===r.code||120603===r.code?"请不要重复提交！":120504===r.code?"请到微信中打开使用！":120602===r.code||120604===r.code?"当前表单已截止提交！":r.msg?r.msg:"file:"===window.location.protocol?"请发布后再提交！":"表单提交失败！")})})}},{key:"updateBtnTitle",value:function(d){this.compJson.properties.styleImgSrc||(this.$context[0].innerText=d)}},{key:"deleteImage",value:function(){this.compJson.properties.styleImgSrc||(this.$context[0].innerText="")}}]),a}(q);z.exports=x},function(h,d,k){function c(p,l,u,a){var q=window.scene||{},m=q.code,s=b.SERVER_1+"eqs/r/"+l+"/"+u+"/"+a;return m&&(s=s+"?code="+m),f({type:"POST",url:s,data:p})}function j(i,a,l){return f({type:"POST",url:b.SERVER_1+"eqs/promotion/order/data/r/"+i+"/"+l,data:a})}function g(i,a){return f({type:"GET",url:b.SERVER_1+"eqs/s/valid/send-validcode",data:{phone:i,userId:a}})}var b=k(22),f=k(21).ajax;h.exports={$postForm:c,$submitXiuForm:j,$getSmsCode:g}},function(b,a,c){b.exports=c.p+"images/ok-941be2.svg"},function(x,C,k){function q(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function j(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var A=function(){function a(f,d){for(var h=0;h<d.length;h++){var c=d[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),D=function w(f,c,l){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var h=Object.getPrototypeOf(f);return null===h?void 0:w(h,c,l)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(l)}},z=k(127),B=k(319),m=k(320),g=k(41),y=k(22),v=function(c){function a(f,h){q(this,a);var d=j(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,h));return $.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),d.eqxScene.formManager.add(d),d}return b(a,c),A(a,[{key:"create$context",value:function(){var l=this.compJson,f=l.id,s=l.pageId,d=l.type,p=l.properties.title,h=this.eqxScene.config.mode;return this.pageId=s,this.uploadImage={},this.name="eq[f_"+f+"]",this.$context=B.$compDiv(f,d,p,h),this.$button=this.$context.find("button"),this.$context}},{key:"eleShow",value:function(){var d=this;D(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleShow",this).call(this);var f=this.eqxScene.config.mode;"view"!==f||this.uploader||this.initQiniuUpload({uploadButton:this.$button.attr("id"),beforeUpload:function(h,l){var e=l.size/1024/1024;e>10?(m.modal("图片大小不得超过10M，请重新上传",d.$li),h.stop()):d.updateTitle("上传中...")},finishUpload:function(h,l,e){d.updateTitle(l.name),d.uploadImage.file=l,d.uploadImage.info=e=JSON.parse(e),d.variablesValues={key:e.key,w:e.w,h:e.h},(d.variables||[]).forEach(function(i){"4"===i.compJson.type.toString()&&i.updateImageSrc(e.key,e.w,e.h)})},Error:function(){d.updateTitle("上传失败！")}})}},{key:"initQiniuUpload",value:function(f){var d=this;g.$initQiniuUpload(f).then(function(h){d.uploader=h})}},{key:"check",value:function(){var f=this.uploadImage.info&&y.FILE+this.uploadImage.info.key,d={success:!0,pageId:this.pageId,key:this.name,value:f};return this.required&&!f&&(d.success=!1,d.message="上传图片: "+this.title+" 为必填项"),d}},{key:"updateTitle",value:function(d){this.$context.find("button").text(d)}}]),a}(z);x.exports=v},function(b,a){function c(h,f,k,d){var j=$('<div id="'+h+'"\n                             ctype="'+f+'"\n                             class="element"\n                             style="width: 100%;height: 100%;position: relative">\n                        </div>'),g=$('<button id="#{id}-upload-image"\n                             style="display: block;\n                                    width: 100%;\n                                    height: 100%;\n                                    border: none;\n                                    padding: 0 8px;\n                                    background-color: transparent;\n                                    text-align: left;\n                                    overflow: hidden;\n                                    white-space: nowrap;\n                                    text-overflow: ellipsis;\n                                    font-size: 16px;\n                                    pointer-events: none;">\n                         '+k+"\n                     </button>");return"view"===d&&g.attr("id",h+"-upload-image"),j.append(g)}b.exports={$compDiv:c}},function(b,a){function c(g,f){var h=$('<div class="feedback-box">\n                      <div class="feedback-form">\n                        <div class="feedback-content">'+g+'</div>\n                        <div class="feedback-btn">\n                          <a class="feedback-close">关闭</a>\n                        </div>\n                      </div>\n                    </div>'),d=h.find(".feedback-form");d.css("margin-top",-Number.parseInt(d.height()+80)/2),h.insertBefore(f.parent().parent()),h.find(".feedback-close").on("click",function(){h.animate({opacity:0},{duration:300,complete:function(i){return h.remove()}})})}b.exports={modal:c}},function(v,A,j){function m(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function g(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var y=function(){function a(h,d){for(var l=0;l<d.length;l++){var c=d[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),B=j(127),x=j(322),z=j(44).parse,k=j(196).isPhoneNumber,f=j(84).popUpModal,w=j(316).$getSmsCode;j(323);var q=function(c){function a(h,i){m(this,a);var d=g(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,h,i));return $.extend(!0,d.$ability,{style:{base:{color:!1,lineHeight:!1,paddingTop:!1},compStyle:{backgroundColor:!1},compFont:{self:!0,fontColor:!0},advanceStyle:{required:!0}},trigger:!1,sound:!1,link:!1}),d.eqxScene.formManager.add(d),d}return b(a,c),y(a,[{key:"check",value:function(){var h=this.$context.find(".telephone").val(),d=this.$context.find(".smsInput").val(),i={success:!0,pageId:this.pageId,key:this.name,type:this.type,value:{phoneValue:h,smsValue:d}};return this.required&&(h?d||(i.success=!1,i.message="请输入验证码"):(i.success=!1,i.message="请输入手机号")),i}},{key:"create$context",value:function(){var I=this.compJson,L=I.id,E=I.pageId,G=I.type,D=I.title,u=I.properties,K=u.required,M=u.ownerCss,F=M.borderWidth,C=M.borderColor,J=M.borderStyle,H=$(z(x,{id:L,type:G,title:D}));return this.$context=H,this.$context.find(".telephone").css({borderWidth:F,borderColor:C,borderStyle:J}),this.$context.find(".smsInput").css({borderWidth:F,borderColor:C,borderStyle:J}),this.required=K,this.title=D,this.type=G,this.name="eq[f_"+L+"]",this.pageId=E,H}},{key:"updateInputBorderColor",value:function(d){this.$context.find(".telephone").css({borderColor:d}),this.$context.find(".smsInput").css({borderColor:d})}},{key:"bindAfterRenderEvent",value:function(){var h=this,d=!0;return this.$context.find(".smsButton").bind("touchstart mousedown",function(l){if(d){var e=h.$context.find(".telephone").val();e?e&&!k(e)?f("电话格式不对"):(d=!1,w(e,h.eqxScene.meta.userId||h.eqxScene.meta.createUser).then(function(){var p=180,o=setInterval(function(){h.$context.find(".smsButton").val("重新发送"+p+"秒"),0==p&&(d=!0,h.$context.find(".smsButton").val("获取验证码"),clearInterval(o)),p-=1},1000)})["catch"](function(i){f(!i.code||150005!=i.code&&150001!=i.code?"发送失败，请重新发送":i.msg),d=!0})):f("请输入手机号")}}),!0}}]),a}(B);v.exports=q},function(b,a){b.exports='<div class="element editable-text comp_sms" style="width: 100%;height: 100%" id="#{id}" ctype="#{type}" title="#{title}" name="eq[f_#{id}]"><input class="telephone" type="tel" placeholder="请输入手机号"/><div style="width: 100%;height: 12%"></div><input class="smsInput" type="number" placeholder="验证码"/> <input class="smsButton" type="button" value="获取验证码"/></div>'},function(b,a){},function(G,k,z){function C(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function y(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function w(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var J=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),q=function b(f,c,h){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var g=Object.getPrototypeOf(f);return null===g?void 0:b(g,c,h)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(h)}},I=z(25).isWeixin,j=z(127),B=z(325),x=z(326),H=z(44).parse,D=z(327),F=z(82).getWxJSSDK,E=z(84).popUpModal,A=function(c){function a(f,g){C(this,a);var d=y(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return $.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0}},sound:!1,link:!1}),"view"===d.eqxPage.eqxScene.config.mode&&(d.wxJssdk=F()),d.soundKey=f.id.toString().substring(3),B[d.soundKey]=B[d.soundKey]||{},B[d.soundKey].wxpId=f.id,d}return w(a,c),J(a,[{key:"create$context",value:function(){var l=this.compJson,g=l.id,p=l.type,f=l.css,m=f.width,h=f.height,d=f.lineHeight;return $(H(x,{id:g,type:p})).css({width:m,height:h,lineHeight:d,display:"inline-block"})}},{key:"bindAfterRenderEvent",value:function(f){var d=this;return $(f).on("mousedown touchstart",function(g){window.event.stopPropagation(),g.preventDefault(),I()?d.soundPlay():(E("请在微信中按住我"),d.playDefaultSound())}),!0}},{key:"updateSize",value:function(d,f){this.$context.css({width:f.width,height:f.height,lineHeight:f.height+"px"}),this.compJson.css.lineHeight=f.height+"px",q(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateSize",this).call(this,d,f)}},{key:"soundPlay",value:function(){var f=this,d=this;if(B[this.soundKey].soundId){var g=B[this.soundKey].soundId;this.eqxScene.soundManager.onPlay({type:4}),this.wxJssdk.then(function(){wx.playVoice({localId:g})})}else{this.compJson.serverId?this.wxJssdk.then(function(){wx.downloadVoice({serverId:f.compJson.serverId,success:function(h){var e=h.localId;f.eqxScene.soundManager.onPlay({type:4}),wx.playVoice({localId:e}),B[d.soundKey].soundId=e},error:function(){f.playDefaultSound()}})}):this.playDefaultSound()}this.wxJssdk.then(function(){wx.onVoicePlayEnd({success:function(){f.eqxScene.soundManager.onEnd({type:4})}})})}},{key:"playDefaultSound",value:function(){var d=this;this.defaultSound||(this.defaultSound=document.createElement("audio"),this.defaultSound.src=z(327)),this.defaultSound.paused?(this.eqxScene.soundManager.onPlay({type:4}),this.defaultSound.play(),$(this.defaultSound).bind("ended",function(){d.eqxScene.soundManager.onEnd({type:4})})):(this.eqxScene.soundManager.onEnd({type:4}),this.defaultSound.pause())}}],[{key:"getDefaultSound",value:function(){return D}}]),a}(j);G.exports=A},function(b,a){b.exports={}},function(b,a){b.exports='<a id="#{id}" class="element comp_wechat_play" ctype="#{type}"><span style="font-size:16px" class="eqf-volume-high"></span></a>'},function(b,a,c){b.exports=c.p+"images/wexin_sound-d41d8c.mp3"},function(B,G,q){function x(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function k(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var E=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),H=function v(f,c,h){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var g=Object.getPrototypeOf(f);return null===g?void 0:v(g,c,h)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(h)}};q(329);var D=q(25).isWeixin,F=q(82).saveWxCompData,w=q(82).generateUserKey,j=q(127),C=q(325),y=q(82).getWxJSSDK,A=q(84).popUpModal,z=function(c){function a(f,g){x(this,a);var d=k(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return"view"===d.eqxPage.eqxScene.config.mode&&(d.wxJssdk=y()),d.soundKey=f.id.toString().substring(3),C[d.soundKey]=C[d.soundKey]||{},C[d.soundKey].wxrId=f.id,$.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0}},sound:!1,link:!1}),d}return b(a,c),E(a,[{key:"create$context",value:function(){var f=this.compJson,d=document.createElement("a");return d.innerHTML=f.properties.title,d.id=f.id,d.setAttribute("class","element comp_wechat_hear"),d.setAttribute("ctype",f.type),d.setAttribute("data-event","1120612"),$(d).css({width:f.css.width,height:f.css.height,display:"inline-block"}),$(d)}},{key:"bindAfterRenderEvent",value:function(f){var d=this,g=void 0;return D()?$(f).on("touchstart",function(h){window.event.stopPropagation(),h.preventDefault(),g=setTimeout(function(){d.soundRecord()},100)}).on("touchend",function(){clearTimeout(g),g=null,d.soundStopRecord()}):$(f).on("mousedown",function(h){A("请在微信中按住我！")}),!0}},{key:"updateSize",value:function(d,f){this.$context.css({width:f.width,height:f.height,lineHeight:f.height+"px"}),this.compJson.css.lineHeight=f.height+"px",H(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateSize",this).call(this,d,f)}},{key:"soundRecord",value:function(){var d=this;this._recordAllowed=!0,this.wxJssdk.then(function(){d.eqxScene.soundManager.stopAll(),wx.startRecord({success:function(){d._recordAllowed?(d.second=0,d.openPlayState()):(wx.stopRecord(),d._recordAllowed=!1)}}),d.$context.addClass("recording").text("松开 结束")})}},{key:"openPlayState",value:function(){var f=this,d="<div class='voice-panel'><span class='icon eqf-volume-high'></span><div class='voice-tip'>松开手指 停止录音</div></div>";this.voicePanel=$(d).prependTo(this.$li.parent()),this.calculateTime=setInterval(function(){f.second++,f.second>=50&&$(f.voicePanel).text(60-f.second),60===f.second&&f.soundStopRecord()},1000)}},{key:"soundStopRecord",value:function(){var d=this;this._recordAllowed&&(this._recordAllowed=!1,clearInterval(this.calculateTime),this.calculateTime=null,this.$context.removeClass("recording").text("按住 说话"),this.eqxScene.soundManager.restoreAll(),$(this.voicePanel).remove(),wx.stopRecord({success:function(e){d.second=0,d.wechatUploadVoice(e.localId)}}))}},{key:"wechatUploadVoice",value:function(f){var d=this;C[this.soundKey].soundId=f,wx.uploadVoice({localId:f,isShowProgressTips:1,success:function(g){var h=g.serverId;w(),F(C[d.soundKey].wxpId,h)}})}}]),a}(j);B.exports=z},function(b,a){},function(h,l,f){function g(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function d(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var k=function(){function a(p,o){for(var q=0;q<o.length;q++){var c=o[q];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(p,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}(),m=f(283),j=function(c){function a(o,p){g(this,a);var i=d(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,o,p));return $.extend(!0,i.$ability,{style:{self:!0,compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0}},trigger:{self:!1},sound:!1,link:!1}),i}return b(a,c),k(a,[{key:"updateContent",value:function(i){this.compJson.content=i,this.$context.text(i)}}]),a}(m);h.exports=j},function(h,m,f){function g(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function d(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var k=function(){function a(q,o){for(var r=0;r<o.length;r++){var c=o[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(q,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}(),p=f(152),j=f(332),l=function(c){function a(o,q){g(this,a);var i=d(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,o,q));return $.extend(!0,i.$ability,{style:{self:!0},trigger:{self:!1}}),i}return b(a,c),k(a,null,[{key:"getDefaultImg",value:function(){return j}}]),a}(p);h.exports=l},function(b,a,c){b.exports=c.p+"images/wx_default-454286.png"},function(L,z,E){function H(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function D(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?b:a}function B(b,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}function P(a){q.push(a),j||A()}function A(){if(j=!0,q.length>0){var a=q.shift();a().then(function(){A()})}else{j=!1}}var N=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),w=function k(d,b,g){null===d&&(d=Function.prototype);var a=Object.getOwnPropertyDescriptor(d,b);if(void 0===a){var f=Object.getPrototypeOf(d);return null===f?void 0:k(f,b,g)}if("value" in a){return a.value}var c=a.get;if(void 0!==c){return c.call(g)}},G=E(25).isWeixin,C=E(152),M=E(82).saveWxCompData,I=E(82).generateUserKey,K=E(334),J=E(82).getWxJSSDK,F=E(84).popUpModal,q=[],j=!1,O=function(b){function a(d,f){H(this,a);var c=D(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,f));return $.extend(!0,c.$ability,{style:{self:!0},link:!1,sound:!1,trigger:{self:!1}}),"view"===c.eqxPage.eqxScene.config.mode&&(c.wxJssdk=J()),c}return B(a,b),N(a,[{key:"create$context",value:function(){var d=w(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"create$context",this).call(this),f=this.compJson.serverId,c=this;return d[0].setAttribute("data-event","1120611"),f&&G()&&(d.css("display","none"),P(function(){return new Promise(function(g){c.wxJssdk.then(function(){wx.downloadImage({serverId:f,success:function(e){c.responsiveImage(e.localId),g()}})})})})),d}},{key:"bindAfterRenderEvent",value:function(d,c){var f=this;return G()?$(d).click(function(){f.uploadImage()}):$(d).click(function(){F("请在微信中点击我")}),!0}},{key:"uploadImage",value:function(){var c=this;this.wxJssdk.then(function(){wx.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(d){var e=d.localIds;setTimeout(function(){wx.uploadImage({localId:e.toString(),isShowProgressTips:1,success:function(g){c.responsiveImage(e.toString());var f=g.serverId;I(),M(c.compJson.id,f)}})},100)}})})}},{key:"responsiveImage",value:function(d){var c=this;window.__wxjs_is_wkwebview?this.wxJssdk.then(function(){console.log("responsiveImage getLocalImgData start",d),wx.getLocalImgData({localId:d,fail:function(f){console.error("responsiveImage getLocalImgData Error",f)},success:function(f){console.log("responsiveImage getLocalImgData");var g=f.localData;c._responsiveImage(g)}})}):this._responsiveImage(d)}},{key:"_responsiveImage",value:function(d){var c=new Image;c.src=d;var f=this;c.onload=function(){var g,l,h=window.parseInt(f.compJson.css.width,10),e=window.parseInt(f.compJson.css.height,10);c.width/c.height>=h/e?(g=h,l=c.height*(h/c.width)):(l=e,g=c.width*(e/c.height)),f.$context.css({display:"block",width:g+"px",height:l+"px","margin-top":(window.parseInt(f.$li.height(),10)-l)/2+"px","margin-left":(window.parseInt(f.$li.width(),10)-g)/2+"px"}).attr("src",d)}}}],[{key:"getDefaultImg",value:function(){return K}}]),a}(C);L.exports=O},function(b,a,c){b.exports=c.p+"images/wechat_image-f8aa1a.png"},function(B,G,q){function x(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function k(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var E=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),H=function v(f,c,h){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var g=Object.getPrototypeOf(f);return null===g?void 0:v(g,c,h)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(h)}};q(336);var D=q(25).isWeixin,F=q(127),w=q(337).textVoteTpl,j=q(338).alertTpl,C=q(340).$isVoted,y=q(340).$postVote,A=q(55).randomId,z=function(c){function a(f,g){x(this,a);var d=k(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return $.extend(!0,d.$ability,{style:{compStyle:{self:!0},commonStyle:{size:!1},advanceStyle:{}},trigger:{self:!1},sound:!1,link:!1,flexLine:"e,w,r"}),d.ids=[],d}return b(a,c),E(a,[{key:"getMinWidth",value:function(){return 300}},{key:"updateSize",value:function(f,h){var d=this.getMinWidth();h.width&&h.width<f.width&&(!h.left||h.left===f.left)&&h.width<d&&this.$li.css({width:d}),h.left&&h.left>f.left&&h.width&&h.width<d&&this.$li.css({left:f.left,width:d});var g=this.$context.height();g!=h.height&&this.$li.height(g),H(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateSize",this).call(this,f,h)}},{key:"update$li",value:function(f){var g=this.compJson.css,d=this.getMinWidth();f.width&&f.width<g.width&&(!f.left||f.left===g.left)&&f.width<d&&(f.width=d),f.left&&f.left>g.left&&f.width&&f.width<d&&(delete f.left,delete f.width),f.height&&(f.height=this.$context.height()),H(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"update$li",this).call(this,f)}},{key:"create$context",value:function(){var M=this.compJson,R=M.id,p=M.type,I=M.properties,m=I.title,l=void 0===m?"请投票":m,P=I.selectType,S=I.buttonColor,O=void 0===S?"#08A1EF":S,Q=I.children,N=void 0===Q?[]:Q;P="single"==P?"单选":"多选";var J=w({id:R,type:p}),L=$(J);if(this.$title=$('<div class="vote-view-title">'+l+"（"+P+"）</div>"),L.append(this.$title),N.length){this.$options=$('<ul class="vote-view-options"></ul>'),this.childrenOption=N.map(function(f){var d=f.id,g=f.label;return $('<li class="vote-view-option" id="'+d+'"><span><em class="eqf-yes" style="display: none"></em></span><div class="vote-view-text">'+g+"</div></li>")}),this.$submit=$('<div class="vote-view-button">投票</div>'),this.$options.append(this.childrenOption),L.append(this.$options),L.append(this.$submit);var K=j();this.$tpl=$(K).appendTo(L),this.updateButtonColor(O)}return L}},{key:"updateButtonColor",value:function(d){this.$submit.css({backgroundColor:d})}},{key:"updateTitle",value:function(f,d){d="single"==d?"单选":"多选",this.$title.text(f+"（"+d+"）")}},{key:"updateOptions",value:function(d){this.$options.find("#"+d.id+" .vote-view-text").text(d.label)}},{key:"deleteOption",value:function(d){this.compJson.properties.children.splice(d,1),this.childrenOption.splice(d,1)[0].remove(),this.$li.css({height:""}),this.update$li({height:this.$li.height()})}},{key:"addOption",value:function(f){var d={id:A(),label:"选项"+(this.compJson.properties.children.length+1)};this.compJson.properties.children.splice(f+1,0,d);var g=$('<li class="vote-view-option" id="'+d.id+'"><span><em class="eqf-yes" style="display: none"></em></span><div class="vote-view-text">'+d.label+"</div></li>");this.childrenOption.splice(f+1,0,g),$(this.$options.children()[f]).after(g),this.$li.css({height:""}),this.update$li({height:this.$li.height()})}},{key:"bindAfterRenderEvent",value:function(f,d){var g=this;D()?this.isVoted().then(function(){g.$options.children().on("click",function(l){var h=$(l.currentTarget).find(".eqf-yes");h.is(":hidden")?"single"==d.properties.selectType&&1==g.ids.length?(g.$options.find(".eqf-yes").hide(),g.ids[0]=l.currentTarget.id,h.show()):"multi"==d.properties.selectType&&g.ids.length==d.properties.selectCount?g.alertTpl("最多选择"+d.properties.selectCount+"项"):(h.show(),g.ids.push(l.currentTarget.id)):(h.hide(),g.ids.splice(g.ids.indexOf(l.currentTarget.id),1))}),g.$submit.on("click",function(){var l=d.sceneId,h=d.pageId;g.ids.length?y(l,d.id,{pageId:h,data:JSON.stringify(g.ids)}).then(function(i){i.success&&g.alertTpl("投票成功，谢谢参与！").then(function(){g.showVoted(i.map),g.$submit.off(),g.$options.children().off()})}):g.alertTpl("请至少选择一项")})}):this.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("请在微信中投票")}},{key:"alertTpl",value:function(f){var d=this;return new Promise(function(g,e){d.$tpl.find("span").text(f),d.$tpl.css({opacity:1,zIndex:2}),window.setTimeout(function(){d.$tpl.css({opacity:0,zIndex:-2}),g()},2000)})}},{key:"showVoted",value:function(g){var f=this;this.$options.find(".eqf-yes").hide();var h=[],d=0;this.compJson.properties.children.forEach(function(i){var e=i.id;h.push({id:e,count:g[e]||0}),d+=g[e]||0,g[e]&&f.ids.push(e)}),h.forEach(function(i){$('<em style="float:right">'+i.count+"  ("+(i.count/d*100).toFixed(2)+" % 100)</em>").prependTo(f.$options.find("#"+i.id))}),this.$li.height(""),this.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("你已投票")}},{key:"isVoted",value:function(){var d=this;return new Promise(function(g,p){var f=d.compJson.properties.endTime;if(f&&new Date(f)<Date.now()){d.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("投票已过期"),p()}else{if(D()){var m=d.compJson,l=m.sceneId,e=m.pageId,h=m.id;C(h,{sceneId:l,pageId:e}).then(function(n){n.obj?(d.showVoted(n.map),p()):g()})}else{p()}}})}}]),a}(F);B.exports=z},function(b,a){},function(b,a){function c(f){var d=f.id,g=f.type;f.title,f.selectType;return'<div  id="'+d+'" ctype="'+g+'" class="vote-view">\n    </div>'}b.exports={textVoteTpl:c}},function(c,b,d){function a(){return'<div class="vote-alert">\n              <span></span>\n            </div>'}d(339),c.exports={alertTpl:a}},function(b,a){},function(g,d,j){function c(i,a){return b({type:"POST",url:f.SERVER_1+"eqs/vote/verify/"+i,data:a})}function h(i,a,k){return b({type:"POST",url:f.SERVER_1+"eqs/vote/"+i+"/"+a,data:k})}var f=j(22),b=j(21).ajax;g.exports={$isVoted:c,$postVote:h}},function(G,k,z){function C(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function y(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function w(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var J=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),q=function b(f,c,h){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var g=Object.getPrototypeOf(f);return null===g?void 0:b(g,c,h)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(h)}};z(342);var I=z(22),j=z(23).$loadSliders,B=z(127),x=z(25).isWeixin,H=z(338).alertTpl,D=z(340).$isVoted,F=z(340).$postVote,E=z(343),A=function(c){function a(f,g){C(this,a);var d=y(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return d.intervalObj={},d.descIds=[],$.extend(!0,d.$ability,{style:{compStyle:{self:!0},commonStyle:{size:!1}},trigger:{self:!1},sound:!1,link:!1,flexLine:"r"}),d}return w(a,c),J(a,[{key:"updateSize",value:function(d,f){this.$slider.width(f.width),this.plugin.update(),q(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateSize",this).call(this,d,f)}},{key:"create$context",value:function(){var V=this;this.descArr=[],this.imgArr=[],this.loadPlugin=Promise.resolve();var O=this.compJson,S=O.id,N=O.type,L=O.css,X=L.width,K=(L.height,O.properties);K=void 0===K?{}:K;var Q=K.title,M=void 0===Q?"请投票":Q,T=K.selectType,U=K.buttonColor,P=void 0===U?"#08A1EF":U,t=K.children,d=void 0===t?[]:t,W=K.bgColor;T="single"==T?"单选":"多选";var g=$('<div id="'+S+'" ctype="'+N+'" class="vote-img"></div>').css({"background-color":W,height:442});if(q(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateSize",this).call(this,{height:""},{height:442}),d.length){d.forEach(function(f){var m=f.src,e=f.desc,l=f.id,h=m?""+(I.FILE+m):E;V.imgArr.push($('<div style="background-image:url('+h+'); width: 100%; height: 100%; background-size: contain; background-repeat: no-repeat; background-position: 50%"></div>')),V.descArr.push($('<li id="'+l+'">'+e+"</li>"))}),this.$title=$('<div class="vote-img-prev-title"><h1>'+M+'</h1><span class="vote-img-sing-double">('+T+")</span></div>"),g.append(this.$title),this.$slider=$('<div class="slides" style="width: '+X+'px;"></div>');var s=$('<ul class="vote-img-desc"></ul>');s.append(this.descArr),this.$slider.append(this.imgArr),this.loadPlugin=this.initSlider(s),g.append(this.$slider),this.$submit=$('<a class="btn-main">提交</a>'),g.append(this.$submit);var R=H();this.$tpl=$(R).appendTo(g),this.updateButtonColor(P)}return this.$context=g,g}},{key:"updateButtonColor",value:function(d){this.$submit.css({backgroundColor:d})}},{key:"updateOptions",value:function(f,d){this.plugin["goto"](d+1),this.descArr[d].text(f.desc),this.imgArr[d].css({backgroundImage:"url("+I.FILE+f.src+")"})}},{key:"updateTitle",value:function(f,d){d="single"==d?"单选":"多选",this.$title.find("h1").text(f),this.$title.find(".vote-img-sing-double").text("("+d+")")}},{key:"initSlider",value:function(f){var d=this;return this.$em=$('<span class="eqf-yes-l"></span>'),j().then(function(){return d.$slider.slidesjs({width:300,height:329,navigation:{active:!1},callback:{loaded:function(){f.children().css({display:"none"}),d.descArr[0].css({display:"inline-block"}),d.$slider.append(f),d.$slider.find(".slidesjs-container").append(d.$em)},complete:function(g){f.children().css({display:"none"}),d.descArr[g-1].css({display:"inline-block"});var e=d.descArr[g-1].attr("id");d.descIds.indexOf(e)==-1?d.$em.removeClass("active"):d.$em.addClass("active")}}}),d.plugin=d.$slider.data("plugin_slidesjs"),d.plugin})}},{key:"bindAfterRenderEvent",value:function(f,d){var g=this;return x()?this.loadPlugin.then(function(){return g.isVoted()}).then(function(){g.$em.on("click",function(l){l.preventDefault(),l.stopPropagation();var h=g.descArr[g.plugin.data.current].attr("id");g.descIds.indexOf(h)==-1?"single"==d.properties.selectType&&1==g.descIds.length?(g.descIds[0]=h,g.$em.addClass("active")):"multi"==d.properties.selectType&&g.descIds.length==d.properties.selectCount?g.alertTpl("最多选择"+d.properties.selectCount+"项"):(g.descIds.push(h),g.$em.addClass("active")):(g.descIds.splice(g.descIds.indexOf(h),1),g.$em.removeClass("active"))}),g.$submit.on("click",function(l){l.preventDefault(),l.stopPropagation();var h=d.sceneId,m=d.pageId;g.descIds.length?F(h,d.id,{pageId:m,data:JSON.stringify(g.descIds)}).then(function(i){i.success&&g.alertTpl("投票成功，谢谢参与！").then(function(){g.showVoted(i.map),g.$em.off(),g.$submit.off()})}):g.alertTpl("请至少选择一项")})}):this.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("请在微信中投票"),!1}},{key:"showVoted",value:function(h){var f=this;this.descIds=[],this.$em.remove(),this.plugin.stop(),this.$slider.remove();var m={},d=[],l=0;this.compJson.properties.children.forEach(function(n){var e=n.id,i=n.desc;m[e]=i,d.push({id:e,count:h[e]||0}),l+=h[e]||0,h[e]&&f.descIds.push(e)});var g=$('<ul class="vote-img-ul"></ul>');d.forEach(function(i){g.append($("<li id = '"+i.id+'\' class="vote-img-li"><em style="float: right">'+i.count+" ("+(i.count/l*100).toFixed(2)+" %)</em> "+m[i.id]+"</li>"))}),g.insertBefore(this.$submit),this.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("你已投票")}},{key:"alertTpl",value:function(f){var d=this;return new Promise(function(g,e){d.$tpl.find("span").text(f),d.$tpl.css({opacity:1,zIndex:1001}),window.setTimeout(function(){d.$tpl.css({opacity:0,zIndex:-2}),g()},2000)})}},{key:"isVoted",value:function(){var d=this;return new Promise(function(g,m){if(d.compJson.properties.endTime&&new Date(d.compJson.properties.endTime)<new Date&&(d.$submit.css({backgroundColor:"#f0f3f4",color:"#a3afb7"}).text("投票已过期"),m()),x()){var f=d.compJson,l=f.sceneId,h=f.pageId,e=f.id;D(e,{sceneId:l,pageId:h}).then(function(n){n.obj?(d.showVoted(n.map),m()):g()})}else{m()}})}},{key:"startPlay",value:function(){var d=this;this.playInterval=setInterval(function(){d.plugin&&d.plugin.next()},5000)}},{key:"stopPlay",value:function(){this.playInterval&&(clearInterval(this.playInterval),this.playInterval=null)}},{key:"eleHide",value:function(){q(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleHide",this).call(this),this.stopPlay()}},{key:"eleShow",value:function(){q(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleShow",this).call(this),this.startPlay()}}]),a}(B);G.exports=A},function(b,a){},function(b,a,c){b.exports=c.p+"images/defaultImg-f9d1d1.svg"},function(P,C,H){function L(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function G(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?b:a}function E(b,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}var T=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),D=function K(d,b,g){null===d&&(d=Function.prototype);var a=Object.getOwnPropertyDescriptor(d,b);if(void 0===a){var f=Object.getPrototypeOf(d);return null===f?void 0:K(f,b,g)}if("value" in a){return a.value}var c=a.get;if(void 0!==c){return c.call(g)}};H(345);var R=H(127),B=H(41),J=H(24).addUrlParam,F=H(25).isWeixin,Q=H(25).isPc,M=H(82).getWxJSSDK,O=H(72).COMP_KEY,N=H(82).addCompKey,I="ontouchstart" in window,A=I?"touchstart":"mousedown",j=I?"touchmove":"mousemove",S=I?"touchend":"mouseup",q={},z=function(b){function a(d,f){L(this,a);var c=G(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,f));return c.wxJssdk=M(),$.extend(!0,c.$ability,{style:{compFont:{self:!1}},trigger:{self:!1},sound:!1,link:!1}),c}return E(a,b),T(a,[{key:"updateSize",value:function(d,f){this.setCanvasSize(f.width,f.height);var c=this.compJson.properties.imgSrc;c&&(this.clearCanvas(),this.drawingImage(c)),D(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateSize",this).call(this,d,f)}},{key:"create$context",value:function(){var k=$('<div style="position: relative; height: 100%;overflow: hidden;"></div>');this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d");var p=this.compJson,g=p.css,h=g.width,f=g.height,d=p.properties,m=d.imgSrc,u=d.boardColor,l=d.qiniuSrc;return this.setCanvasSize(h,f),this.setCanvasBgColor(u),m&&this.drawingImage(m),l&&(q[this.compJson.id]=l),this.$alert=$('<div class="board-bg" style="display: none"><span class="board-alert">正在保存...</span></div>'),this.$penBtn=$('<span class="board-pen eqf-brush"></span>'),this.$closeBtn=$('<span class="board-close eqf-delete-f" style="display: none"></span>'),k.append(this.$alert),k.append(this.$penBtn),k.append(this.$closeBtn),this.$cancelBtn=$('<a class="board-btn board-reset" style="display: none">取消</a>'),this.$endBtn=$('<a class="board-btn board-end" style="display: none">完成</a>'),k.append(this.$cancelBtn),k.append(this.$endBtn),k.append(this.canvas),k}},{key:"setCanvasSize",value:function(d,c){this.canvas.width=d,this.canvas.height=c}},{key:"setCanvasBgColor",value:function(c){this.canvas.style.backgroundColor=c}},{key:"drawingImage",value:function(k,f){var m=this.compJson.css,d=m.width,l=m.height,h="";h="base64"==f?k:this.getImgSrc(k,{width:d,height:l});var c=new Image;c.setAttribute("crossOrigin","anonymouse");var g=this;c.onload=function(){var p=0,i=0,s=d,o=l;this.width/d>this.height/l?(s=this.width/(this.height/l),p=(d-s)/2):(o=this.height/(this.width/d),i=(l-o)/2),g.ctx.drawImage(c,p,i,s,o)},c.src=h}},{key:"clearCanvas",value:function(){var d=this.compJson.css,c=d.width,f=d.height;this.ctx.clearRect(0,0,c,f)}},{key:"bindAfterRenderEvent",value:function(h,f){var l=this,d=!1,k=!1,g=0,c=0;return this.$penBtn.on("click",function(){return !d&&(l.clearCanvas(),d=!0,l.$cancelBtn.css({display:"inline-block"}),l.$endBtn.css({display:"inline-block"}),l.$closeBtn.css({display:"inline-block"}),!I&&l.canvas.classList.add("boarding"),void 0)}),this.$cancelBtn.on("click",function(){l.clearCanvas(),d=!1,l.$cancelBtn.hide(),l.$endBtn.hide(),l.$closeBtn.hide(),!I&&l.canvas.classList.remove("boarding"),l.compJson.properties.imgSrc&&l.drawingImage(l.compJson.properties.imgSrc)}),this.$closeBtn.on("click",function(){l.clearCanvas()}),this.$endBtn.on("click",function(){d=!1,l.$cancelBtn.hide(),l.$endBtn.hide(),l.$closeBtn.hide(),!I&&l.canvas.classList.remove("boarding"),"view"==l.eqxScene.config.mode&&window==window.top&&l.saveImage()}),this.canvas.addEventListener(A,function(m){if(!d){return !1}m.preventDefault(),m.stopPropagation(),k=!0;var i=l.canvas.getBoundingClientRect();m=I?m.targetTouches[0]:m,g=I?m.pageX-i.left:m.offsetX,c=I?m.pageY-i.top:m.offsetY+20}),this.canvas.addEventListener(j,function(n){if(!d||!k){return !1}var m=l.canvas.getBoundingClientRect();n=I?n.targetTouches[0]:n;var o=I?n.pageX-m.left:n.offsetX,i=I?n.pageY-m.top:n.offsetY+20;l.ctx.beginPath(),l.ctx.moveTo(g,c),l.ctx.lineTo(o,i),l.ctx.strokeStyle=f.properties.penColor,l.ctx.lineWidth=f.properties.penSize,l.ctx.lineCap="round",l.ctx.stroke(),g=o,c=i}),this.canvas.addEventListener(S,function(i){k=!1}),this.canvas.addEventListener("mouseleave",function(i){k=!1}),!0}},{key:"saveImage",value:function(){var c=this;this.$alert.show(),B.$getUploadToken("image").then(function(d){var e=c.canvas.toDataURL("image/png");return B.$uploadBase64(d.map.token,e.substring(22))}).then(function(d){return q[c.compJson.id]=d.key,B.$saveCompInfoByCompKey(O,q)}).then(function(){var d=J("compKey",O,window.location.href);if(F()?c.wxJssdk.then(function(){N(d,O)}):window.history.replaceState({title:$("title").html(),url:d},$("title").html(),d),Q()&&window.top===window){var e=$("#codeImg");e.length&&(e.empty(),e.qrcode({render:"canvas",size:200,text:d}))}c.$alert.hide()})}}]),a}(R);P.exports=z},function(b,a){},function(G,k,z){function C(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function y(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function w(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var J=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),q=z(127),I=z(347),j=z(348),B=z(44).parse,x=z(82).getWeChatUser,H=z(349).$getCardJsApiConfig,D=z(349).$getCardSign,F=z(28),E=F.wxNonceStr,A=F.wxTimestamp,b=function(c){function a(f,g){C(this,a);var d=y(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return $.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),d}return w(a,c),J(a,[{key:"create$context",value:function(){var u=this.compJson,L=u.id,l=u.type,m=u.css,h=m.width,f=m.height,K=u.properties,M=K.title,g=K.styleImgSrc;if(g){g=this.getImgSrc(g,{width:h,height:f});var v="0";this.$context=$(B(j,{id:L,type:l,title:M,styleImgSrc:g,padding:v}))}else{this.$context=$(B(I,{id:L,type:l,title:M}))}return this.$context}},{key:"updateCompTitle",value:function(){var d=this.compJson.properties;this.$context.html(""+d.title)}},{key:"deleteImage",value:function(){this.compJson.properties.imgSrc||(this.$context[0].innerText="")}},{key:"bindAfterRenderEvent",value:function(){var f=this,d=this.compJson.properties.cardId;this.$li.click(function(){var g=x(),e=f.eqxScene.meta.userId;H(e).then(function(l){var h=l.obj;return D(E,A,d,h,g.openid)}).then(function(l){var h={openid:g.openid,api_ticket:l.obj.apiTicket,timestamp:l.obj.timestamp,nonce_str:l.obj.nonce_str,signature:l.obj.signature};wx.addCard({cardList:[{cardId:d,cardExt:JSON.stringify(h)}],success:function(i){alert("卡券添加成功")},cancel:function(i){alert("卡券添加失败")},fail:function(i){alert("卡券添加失败")}})})})}}]),a}(q);G.exports=b},function(b,a){b.exports='<a id="#{id}" ctype="#{type}" class="element comp-reward" style="cursor: pointer;width: 100%;height: 100%;display: table"><span style="display: table-cell;vertical-align: middle">#{title}</span></a>'},function(b,a){b.exports='<a id="#{id}" ctype="#{type}" class="element eqx-tel editable-text" style="cursor: default; width: 100%;height: 100%;padding: #{padding}"><img style="width: 100%; height: 100%" src="#{styleImgSrc}"></a>'},function(g,d,j){function c(a){return b({type:"GET",url:f.SERVER_1+"eqs/wx/getcouponticket?userId="+a})}function h(l,k,p,a,m){return b({type:"POST",url:f.SERVER_1+"eqs/s/wx/sign",data:{openid:m,nonce_str:l,timestamp:k,cardId:p,apiTicket:a}})}var f=j(22),b=j(21).ajax;g.exports={$getCardJsApiConfig:c,$getCardSign:h}},function(I,q,B){function E(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function A(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function x(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}function L(l){var f=l.id,p=l.type,d=l.marginTop,m=l.marginBottom,h=l.css,c=l.content,g=void 0===c?"":c;return h.cursor="default",h.minHeight="inherit",h.fontSize&&(h.fontSize=J(h.fontSize)),$(H(F,{id:f,type:p,content:g,marginTop:d,marginBottom:m})).css(h)}function w(d){var c=d.fontFamily,g=d.sceneId,a=d.mode;if("view"===a&&window.scene&&c&&!C[c]){var f="@font-face{font-family:'"+c+"';src: url('"+G.FONT+"fonts/"+g+"_"+window.scene.publishTime+"/"+c+".woff') format('woff'),url('"+G.FONT+"fonts/"+g+"_"+window.scene.publishTime+"/"+c+".ttf') format('truetype');}";z(f),C[c]=!0}}var K=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),k=B(127),D=B(170),z=D.addGlobalStyle,J=D.addSuffixPx,F=B(351),H=B(44).parse,G=B(22),C={},j=B(352).parse,b=function(c){function a(f,g){E(this,a);var d=A(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return $.extend(!0,d.$ability,{style:{base:{self:!1},border:{self:!1},boxShadow:{self:!1},compFont:{self:!0,fontFamily:!0,fontSize:!0,fontColor:!0,bgColor:!0,baseStyle:!0,lineHeight:!0,letterSpacing:!0},compStyle:{backgroundColor:!0},commonStyle:{tip:!0},advanceStyle:{variable:!0}},link:!0}),d}return x(a,c),K(a,[{key:"create$context",value:function(){var Y=this.compJson,N=Y.id,R=Y.type,U=Y.content,Q=Y.sceneId,O=Y.css,aa=O.fontFamily,M=O.fontSize,T=O.writingMode,P=O.marginTop,Z=void 0===P?"0px":P,V=O.marginBottom,X=void 0===V?"0px":V,W=Y.properties.anim,S=void 0===W?[]:W;U=U||"+yyyy";var s=new Date,ab=j(s,U),v=L({id:N,type:R,content:ab,marginTop:Z,marginBottom:X,css:{fontFamily:aa,fontSize:M,writingMode:T}});return w({mode:this.eqxScene.config.mode,fontFamily:aa,sceneId:Q}),S[0]&&"typer"===S[0].type&&v.css({opacity:0}),v}},{key:"updateContent",value:function(f){f=f||this.compJson.content||"+yyyy";var d=new Date,g=j(d,f);this.$context.children().html(g)}},{key:"autoAdjustSize",value:function(){function Q(l){var f=l.$context,s=l.$context.children(),d=parseInt(f.css("padding")),p=s.height(),h={height:p+2*d};return l.update$li(h),{height:parseInt(l.$li.css("height")),width:parseInt(l.$li.css("width"))}}function V(aa,h){if(void 0!==h&&null!==h){var e=320,Y=aa.$context,ab=aa.$context.children(),X=v(ab);if(X<Y.width()){var Z={width:X+2*parseInt(Y.css("padding"))};aa.update$li(Z),aa.update$boxDiv(Z),Y.css(Z)}else{if(X>=Y.width()){for(var i=ab.height(),f=Y.height(),o=Y.width();i>f&&o<e;){N(aa),i=ab.height(),f=Y.height(),o=Y.width()}}}return Q(aa)}}function y(e,h){if(void 0!==h&&null!==h){var d=e.$context,f=e.$context.children();if(1===h){for(;g(d,f,h)&&T(d)>U;){W(e)}if(g(d,f,h)&&T(d)<=U){return Q(e)}}else{if(0!==h){return Q(e)}for(;g(d,f,h)&&T(d)<M;){S(e)}g(d,f,h)||W(e)}return{height:parseInt(e.$li.css("height")),width:parseInt(e.$li.css("width"))}}}function N(h){var f=h.$context,l=parseFloat(f.css("width"))+1,d={width:l+"px"};h.update$li(d),h.update$boxDiv(d),f.css(d)}function v(f){var d=f.css("display","inline").width();return f.css("display","block"),d}function g(f,d,h){return h?d.height()>f.height():d.height()<f.height()}function T(d){return parseInt(d.css("font-size"))}function W(h){var f=h.$context,l=T(f);if(l>U){var d={fontSize:l-1+"px"};h.update$li(d),h.update$boxDiv(d),f.css(d)}}function S(h){var f=h.$context,l=T(f);if(l<M){var d={fontSize:l+1+"px"};h.update$li(d),h.update$boxDiv(d),f.css(d)}}var U=12,M=96,m=this.compJson.properties,R=m.adjustWHMode,O=m.adjustFSMode,P=arguments.length?arguments[0]:null;return R?y(this,P):O?V(this,P):Q(this)}}]),a}(k);I.exports=b},function(b,a){b.exports='<div id="#{id}" ctype="#{type}" class="element" style="padding: 5px;width: 100%;height: 100%"><span style="display: block;margin-top: #{marginTop};margin-bottom: #{marginBottom};color: inherit;word-break: break-all">#{content}</span></div>'},function(I,q){function B(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function E(c,a){a.map=8191&c,a.day=c>>13&31,a.month=c>>18&1,a.leapMonth=c>>20&15,a.hasLeapMonth=!!(c&1<<19)}function A(c){var a=c.year-1890+26;return c.gYear=a%10,c.zYear=a%12,c.animal=c.zYear,c}function x(v){var P=v._date.getFullYear(),i=v._date.getMonth(),g=v._date.getDate(),N=F.map,Q=P-F.YEAR_MIN,M={};v.year=P,E(N[Q],M),(i<M.month||i===M.month&&g<M.day)&&(Q-=1,v.year=P-1,E(N[Q],M));for(var O=new Date(v.year,M.month,M.day),m=(v._date.getTime()-O.getTime())/86400000>>0,h=0,y=0,o=0;o<14;){if(y=M.map&1<<o?30:29,h+=y,m<h){v.day=y-(h-m)+1;break}o+=1}return v.leap=!1,M.hasLeapMonth&&(o===M.leapMonth+1&&(v.leap=!0),o>M.leapMonth&&(o-=1)),v.month=o,A(v),v}function L(a){return{year:a.getFullYear(),month:a.getMonth(),mDay:a.getDate(),wDay:a.getDay()}}function w(d,c,f){if(d+="",c-=d.length,c<=0){return d}if(f||0===f||(f=" "),f+=""," "===f&&c<10){return b[c]+d}for(var a="";;){if(1&c&&(a+=f),c>>=1,!c){break}f+=f}return a+d}function K(c,a){return c=""+c,c.substr(c.length-a)}function k(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zyyy zy cy yyyy yy MMMM Mmmm mmmm MMM Mmm mmm mm m DDDD dddd DDD ddd dd d ",f=L(d),a=j(d).toJSON({chinese:!0});return c.replace("+zyyy",G[f.year]).replace("+zy",G[K(f.year,2)]).replace("+yyyy",f.year).replace("+yy",K(f.year,2)).replace("+MMMM",H.mmmm[f.month].toUpperCase()).replace("+Mmmm",H.mmmm[f.month]).replace("+mmmm",H.mmmm[f.month].toLowerCase()).replace("+MMM",H.mmm[f.month].toUpperCase()).replace("+Mmm",H.mmm[f.month]).replace("+mmm",H.mmm[f.month].toLowerCase()).replace("+mm",w(f.month+1,2,"0")).replace("+zm",G[f.month+1]).replace("+m",f.month+1).replace("+DDDD",H.dddd[f.wDay].toUpperCase()).replace("+dddd",H.dddd[f.wDay]).replace("+Dddd",H.dddd[f.wDay].charAt(0).toUpperCase()+H.dddd[f.wDay].substr(1)).replace("+ddd",H.dddd[f.wDay].substr(0,3)).replace("+Ddd",H.dddd[f.wDay].charAt(0).toUpperCase()+H.dddd[f.wDay].substr(1,2)).replace("+DDD",H.dddd[f.wDay].substr(0,3).toUpperCase()).replace("+zddd",H.zddd[f.wDay]).replace("+dd",w(f.mDay,2,"0")).replace("+zd",G[f.mDay]).replace("+d",f.mDay).replace("+cy",a.year).replace("+cm",a.month).replace("+cd",a.day)}function D(){return{parse:k}}var z=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),J=[1750378,339370,6020516,405156,314698,4934293,371351,279894,2804405,346837,8115922,419666,331429,4961866,394827,297627,3880278,370026,281433,1759058,345938,6019877,412453,313931,4936875,377517,288107,1764201,355753,7093650,429714,331045,4954701,395862,303798,3872181,370388,282281,1769106,347794,6016294,402731,313943,4936374,379738,296660,2821833,354121,7075475,420499,329003,5991003,387757,304490,3881813,371620,281417,1759891,346773,7058733,402742,314029,4945322,378290,290213,2825546,363850,8120981,412311,329046,5999285,387797,304850,3878565,372389,280138,2796695,338587,7066970,402794,314217,4945746,387922,289573,3864139,354891,8123563,410285,320877,5999465,396713,306578,3882277,372005,10246733,428630,336566,6006197,403157,315049,4947602,388754,298278,2812502,346711,8123606,418650,321237,4953801,395081,304787,3872043,361771,272987,1758554,337258,7060309,412580,322377,4938387,379541,288045,3861165,346805,9172394,419282,331173,6004042,396618,306325,3880238,361814,273077,1758642,345810,6008485,403237,312907,4934807,371883,288090,2812630,355177,11269970,420690,330533,6003275,387659,296107,4916571,361901,273258,1760082,347538,7068965,404773,313941,4936877,378038,279989,2813354,356041,8142482,421522,331046,5999190,387671,296150,3868373,362325,280393,2797203,337555,7058731,402731,305755,4937050,378218,289637,3864394,355146,8125077,420501,320813,5991085,387765,304554,3869605,363941,281930,2808981,339094,7059790,402774,314037,4937138,378578,290469,3870282,345675,8113303,410795,320859,5991126,387946,304978,3880741,363301,273035,1750171,337067],F={YEAR_MIN:1890,YEAR_MAX:2100,map:J,monthNames:["正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","冬月","腊月"],dayNames:["","初一","初二","初三","初四","初五","初六","初七","初八","初九","初十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十","廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"],heavenlyStems:["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],earthlyBranches:["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],animals:["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],solarPeriods:["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],solarPeriodsMap:[0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758]},H={zddd:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],ddd:["sun","mon","tue","wed","thu","fri","sat"],Ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],DDD:["SUN","MON","TUE","WED","THU","FRI","SAT"],Dddd:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dddd:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],DDDD:["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],mmm:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],mmmm:["January","February","March","April","May","June","July","August","September","October","November","December"]},G={1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九",10:"十",11:"十一",12:"十二",13:"十三",14:"十四",15:"十五",16:"十六",17:"十七",18:"十八",19:"十九",20:"二十",21:"二十一",22:"二十二",23:"二十三",24:"二十四",25:"二十五",26:"二十六",27:"二十七",28:"二十八",29:"二十九",30:"三十",31:"三十一",2015:"二零一五",2016:"二零一六",2017:"二零一七",2018:"二零一八",2019:"二零一九",2020:"贰零贰零"},C=function(){function a(c){return B(this,a),c?(c instanceof Date&&(this._date=c,x(this)),this):this}return z(a,[{key:"convert",value:function(){return x(this)}},{key:"toDate",value:function(){return this._date}},{key:"isValid",value:function(){return !!this._date}},{key:"format",value:function(c){return this._date?(c=c||"农历gYzY年MD",c.replace("gY",F.heavenlyStems[this.gYear]).replace("zY",F.earthlyBranches[this.zYear]).replace("gM",F.heavenlyStems[this.gMonth]).replace("zM",F.earthlyBranches[this.zMonth]).replace("gD",F.heavenlyStems[this.gDay]).replace("zD",F.earthlyBranches[this.zDay]).replace("M",(this.leap?"闰":"")+F.monthNames[this.month]).replace("D",F.dayNames[this.day])):"Invalid Date"}},{key:"toJSON",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},y=this;if(l.chinese&&(y={year:F.heavenlyStems[this.gYear]+F.earthlyBranches[this.zYear],month:F.monthNames[this.month],day:F.dayNames[this.day],gYear:F.heavenlyStems[this.gYear],zYear:F.earthlyBranches[this.zYear],animal:F.animals[this.animal],leap:this.leap?"闰":""}),"array"===l.type){return[y.year,y.month,y.day,y.leap]}var g=y,h=g.year,f=g.month,d=g.day,p=g.leap,M=g.gYear,m=g.zYear,v=g.animal;return{year:h,month:f,day:d,leap:p,gYear:M,zYear:m,animal:v}}},{key:"toString",value:function(){return this.format()}}]),a}(),j=function(a){if(a){if(!(a instanceof Date)){throw new Error("date parameter must be Date/Array/Object")}}else{a=new Date}return new C(a)},b=[""," ","  ","   ","    ","     ","      ","       ","        ","         "];I.exports=D()},function(k,w,g){function j(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function f(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var q=function(){function a(o,l){for(var p=0;p<l.length;p++){var c=l[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}();g(354);var x=g(127),m=g(355),v=g(44).parse,h=g(22),d=function(c){function a(l,o){j(this,a);var i=f(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,l,o));return $.extend(!0,i.$ability,{style:{},link:!1}),i}return b(a,c),q(a,[{key:"create$context",value:function(){var A=this,u=A.compJson,C=u.id,p=u.type,B=u.properties,z=B.forward,l=B.back,y=$(v(m,{id:C,type:p,forward:A.amendImageSrc(z),back:A.amendImageSrc(l)}));return this.$forward=y.find(".forward"),this.$back=y.find(".back"),y}},{key:"updateButtonImage",value:function(l){var i=this.$context.find("."+l),o=this.compJson.properties;i.css("backgroundImage","url("+this.amendImageSrc(o[l])+")")}},{key:"amendImageSrc",value:function(i){return/(localhost)|(\w+.com)|(\w+.cn)|(\w+.cc)/.test(i)?i:""+(h.FILE+i)}},{key:"showForwardButton",value:function(){this.$forward.show(),this.$back.hide()}},{key:"showBackButton",value:function(){this.$forward.hide(),this.$back.show()}}]),a}(x);k.exports=d},function(b,a){},function(b,a){b.exports='<div id="#{id}" ctype="#{type}" class="element element-pip-button"><div class="forward" style="background-image: url(\'#{forward}\')"></div><div class="back" style="background-image: url(\'#{back}\')"></div></div>'},function(P,C,H){function L(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function G(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?b:a}function E(b,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}function T(h,d){for(var l=$(O),c=[],k=[],g=[],b=0;b<d.length;b++){h++;var f={prizeId:h,prizeName:"谢谢参与",couponCode:"",isLost:!0};c.push(d[b]),c.push(f),k.push(f),g.push("<li>"+d[b].prizeName+": "+d[b].prizeDetail+"</li>")}return S.draw(l.find(".turntable-box"),c),{prizeList:c,partakeItems:k,prizeItemsTpl:g,$turntableTpl:l}}var D=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),R=function K(d,b,g){null===d&&(d=Function.prototype);var a=Object.getOwnPropertyDescriptor(d,b);if(void 0===a){var f=Object.getPrototypeOf(d);return null===f?void 0:K(f,b,g)}if("value" in a){return a.value}var c=a.get;if(void 0!==c){return c.call(g)}};H(357),H(358);var B=H(127),J=H(44).parse,F=H(82).getWeChatUser,Q=H(25).isWeixin,M=H(84).popUpModal,O=H(359),N=H(363),I=H(364),A=H(366),j=H(368),S=H(369),q=H(370),z=function(b){function a(d,f){L(this,a);var c=G(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,f));return $.extend(!0,c.$ability,{style:{commonStyle:{size:!1}},trigger:{self:!1},sound:!1,link:!1,flexLine:""}),c}return E(a,b),D(a,[{key:"create$context",value:function(){var f=this.compJson,d=F(),h=f.id,c=f.type;O=J(O,{id:h,type:c}),this.startTime=q.timeFormat(f.baseInfo.startTime),this.endTime=q.timeFormat(f.baseInfo.endTime);var g=T(f.prizeInfo.seq,f.prizeInfo.options);return this.prizeList=g.prizeList,this.partakeItems=g.partakeItems,this.prizeItemsTpl=g.prizeItemsTpl,this.$turntableTpl=g.$turntableTpl,this.$container=this.$turntableTpl.find(".turntable-container"),this.lotteryBox=this.$turntableTpl.find(".lottery-container"),this.lotteryBox.css("opacity","0"),this.btn=this.$turntableTpl.find(".turntable-btn"),this.$mask=$('<div class="bg-mask"></div>'),q.getBalanceInfo(this.lotteryBox,this.eqxScene.meta.id,f,d),this.$turntableTpl}},{key:"bindAfterRenderEvent",value:function(k,f){var m=this;this.initDom(),this.deg=0;var d=F(),l=this.eqxScene.meta.id,h=this.eqxScene.bgm,c=this.compJson.activityId,g=void 0;this.$btn.on("click",function(i){return i.stopPropagation(),Q()?(m.$btn.addClass("disabled"),m.lotteryItem=null,m.chances=0,m.winJson=null,g=q.getLottery(l,c,d),void g.then(function(p){m.winJson=p.obj;for(var o=m.prizeList,n=0;n<o.length;n++){if(o[n].prizeId===p.obj.id){m.lotteryItem=o[n],m.chances=n;break}}})["catch"](function(o){if(110101===o.code){M("活动还未开始，活动时间为"+m.startTime+"&nbsp;~&nbsp;"+m.endTime)}else{if(110102===o.code){M("活动已经结束啦，下次早点来哦～")}else{if(110112===o.code){M("今日抽奖次数已用完，请明日再来～")}else{var n=Math.random()*m.partakeItems.length>>>0;m.lotteryItem=m.partakeItems[n],m.chances=2*n+1}}}})["finally"](function(){if(g=null,m.lotteryItem){var n=m.prizeList.length;m.deg=m.deg||0,m.deg=m.deg+(360-m.deg%360)+(3600-m.chances*(360/n)),m.$container.css("transform","rotate("+m.deg+"deg)")}else{m.$btn.removeClass("disabled")}})):void M("该组件仅能在微信中使用。")}),this.$container.on("transitionend",function(){m.$btn.removeClass("disabled"),h&&h.hide(),q.getBalanceInfo(m.lotteryBox,l,f,d),m.lotteryItem.isLost?(m.$lostLotteryHtml.append(m.$closeBtn),m.$lostLotteryHtml.show()):(m.$winLotteryHtml.append(m.$closeBtn),q.updateWinLotteryTpl(m.winJson,m.$winLotteryHtml),m.$winLotteryHtml.show(),q.sendRedPackets(m.winJson)["catch"](function(){M("红包发送失败！")}))}),this.silkBag.on("click",function(i){i.stopPropagation(),h&&h.hide(),m.$activityTpl.append(m.$closeBtn),q.getHitList(l,c,d,j,m.$prizeContainer),m.$activityTpl.find(".prize-list").html(m.prizeItemsTpl.join("")),m.$activityTpl.find(".activity-time p").html(m.startTime+" - "+m.endTime),m.editActivityCss("block","none","35px"),m.$activityTpl.show()}),this.$explain.on("click",function(i){i.stopPropagation(),m.editActivityCss("block","none","35px")}),this.$myPrize.on("click",function(i){i.stopPropagation(),m.editActivityCss("none","block","160px")}),this.$closeBtn.on("click",function(i){i.stopPropagation(),m.$mask.find(".mask-container").hide(),h&&h.show()}),this.$againBtn.on("click",function(){m.$closeBtn.trigger("click")}),this.$activityTpl.on("click",function(){m.$closeBtn.trigger("click")}),this.$winLotteryHtml.on("click",function(){m.$closeBtn.trigger("click")}),this.$lostLotteryHtml.on("click",function(){m.$closeBtn.trigger("click")}),this.$prizeContainer.on("touchstart touchmove touchend mousedown mouseup mousemove",function(i){i.stopPropagation()})}},{key:"eleShow",value:function(){R(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleShow",this).call(this),this.$mask.show(),this.$mask.parent().length||this.$mask.insertBefore(this.$li.parent().parent()),q.showMaskPanel(this.$mask,this.eqxPage)}},{key:"eleHide",value:function(){R(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleHide",this).call(this),this.$mask.hide()}},{key:"initDom",value:function(){this.$btn=this.$li.find(".turntable-btn"),this.$container=this.$li.find(".turntable-container"),this.silkBag=this.$li.find("#silkBag"),this.$closeBtn=$('<div class="mask-close"></div>'),this.$activityTpl=$(N),this.$lostLotteryHtml=$(A),this.$winLotteryHtml=$(I),this.$explain=this.$activityTpl.find(".explain"),this.$myPrize=this.$activityTpl.find(".my-prize"),this.$mask.append(this.$lostLotteryHtml),this.$mask.append(this.$winLotteryHtml),this.$mask.append(this.$activityTpl),this.$mask.find(".mask-container").hide(),this.$prizeContainer=this.$activityTpl.find(".prize-container"),this.$explainContainer=this.$activityTpl.find(".explain-container"),this.$againBtn=this.$mask.find(".mask-btn")}},{key:"editActivityCss",value:function(d,c,f){this.$explainContainer.css("display",d),this.$prizeContainer.css("display",c),this.$activityTpl.find(".arrow").css("left",f)}}]),a}(B);P.exports={EqxTurntable:z,drawCanvas:T}},function(b,a){},function(b,a){},function(b,a,c){b.exports='<div class="game-turntable-box" id="#{id}" ctype="#{type}"><div id="silkBag" class="silk-bag"><img src="'+c(360)+'" alt="活动锦囊"></div><div class="turntable-box"><img src="'+c(361)+'" alt=""><div class="turntable-container"><canvas class="turntable-canvas" width="230" height="230"></canvas></div><a class="turntable-btn" href="javascript:;"><img src="'+c(362)+'" alt=""></a></div><div class="lottery-container"><p class="spend-item">今日已抽<span>0</span>次</p><p class="surplus-item">您今日还可抽<span>10</span>次</p></div></div>'},function(b,a,c){b.exports=c.p+"images/silkBag-883835.png"},function(b,a,c){b.exports=c.p+"images/bg-turntable-70266f.gif"},function(b,a,c){b.exports=c.p+"images/pointer-btn-dcf05c.gif"},function(b,a){b.exports='<div class="mask-container activity-container"><ul class="header"><li class="explain"><a href="javascript:;">活动说明</a></li><li class="my-prize"><a href="javascript:;">我的奖品</a></li><div class="arrow"></div></ul><div class="activity-lottery"><div class="explain-container"><div class="activity-info"><div class="title">活动奖品</div><ul class="prize-list"></ul></div><div class="activity-time"><div class="title">活动时间</div><p></p></div></div><div class="prize-container"></div></div></div>'},function(b,a,c){b.exports='<div class="mask-container win-container"><div class="win-lottery"><p>恭喜你获得了</p><img src="'+c(365)+'" alt="奖品"><p class="level">一等奖</p><p class="detail">小米4K高清电视</p><button class="btn mask-btn">再来一次</button></div></div>'},function(b,a,c){b.exports=c.p+"images/gift-2371b1.png"},function(b,a,c){b.exports='<div class="mask-container lost-container"><div class="lost-lottery"><img src="'+c(367)+'" alt="未中奖"><p class="detail">奖品飘走了......</p><button class="btn mask-btn">再来一次</button></div></div>'},function(b,a,c){b.exports=c.p+"images/lost-a2aa4c.png"},function(b,a){b.exports='<div class="prize-info"><div class="isEmptyAward ellipsis"><span class="awardStyle">#{name}</span> <span class="awardName">：#{detail}</span></div><div class="code-period"><span class="awardTypeName">中奖时间：</span> <span class="awardBgTime">#{hitTime}</span></div><div class="code-period"><span class="awardTypeName">#{typeName}：</span> <span class="awardBgTime">#{couponCode}</span></div><div class="ticket-img"></div></div>'},function(b,a){function c(m,x){var h=x.length;if(h>>>0!==0){for(var k=180/h+90,g=document.createElement("ul"),d=1/h,v=[],y=m.find(".turntable-canvas")[0],q=m.find(".turntable-container")[0],w=h>5?"12px":"14px",j=y.getContext("2d"),f=0;f<h;f++){j.save(),j.beginPath(),j.translate(115,115),j.moveTo(0,0),j.rotate((360/h*f-k)*Math.PI/180),j.arc(0,0,115,0,2*Math.PI/h,!1),f%2==0?j.fillStyle="#ffb820":j.fillStyle="#ffcb3f",j.fill(),j.lineWidth=0.5,j.strokeStyle="#e4370e",j.stroke(),j.restore(),v.push('<li class="turntable-item"> <span style="transform: rotate('+f*d+"turn);font-size:"+w+'"><em class="prize-len-'+h+'">'+x[f].prizeName+"</em></span> </li>"),f+1===h&&(g.className="turntable-list",$(q).append(g),g.innerHTML=v.join(""))}return m}}b.exports={draw:c}},function(I,q,B){function E(a){return a=a.replace(/\-/g,"/"),j(new Date(a),"yyyy年MM月dd日 hh:mm")}function A(c,a,d){return J(c,a,d.openid,d.nickname,d.headimgurl,d.sex,d.province)}function x(l,u,g,h){var f=void 0,d=l.find(".spend-item"),p=l.find(".surplus-item"),v=0,m=g.lotteryInfo.lotteryDayLimit;f=z(u,g.activityId,h.openid),f.then(function(c){var a=c.map;v=a.used,m=a.balance})["finally"](function(){f=null,d.find("span").html(v),p.find("span").html(m),l.css("opacity","1")})}function L(f,c,h,a,g){var d=void 0;g.empty(),d=F(f,c,h.openid),d.then(function(o){var l=o.list;if(!l||0==l.length){return void g.html("暂无记录")}for(var p=0;p<l.length;p++){var m={name:l[p].prizeName,detail:l[p].detail,hitTime:l[p].hitTime};l[p].prizeType==b?(m.typeName="红包金额",m.couponCode=l[p].couponCode/100+"元"):(m.typeName="兑奖码",m.couponCode=l[p].couponCode);var i=G(a,m);g.append(i)}})["catch"](function(){g.html("暂无记录")})}function w(a){return a&&a.prizeType==b?H(a.redPacketsId):Promise.resolve()}function K(f,c){f.show();var h=c.$editDiv.css("transform")||"",a=h.match(/matrix.*, (.*)\)/),g=a?a[1]:0,d=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;f.find(".mask-container").css({top:Math.abs(g)+"px",height:(C()?d:486)+"px"})}function k(c){for(var a=[],d=0;d<c.length;d++){a.push("<li>"+c[d].prizeName+"："+c[d].prizeDetail+"</li>")}return a}function D(c,a){c.prizeType==b?a.find(".level").html("￥"+c.couponCode/100+" 元"):a.find(".level").html(c.prizeName),a.find(".detail").html(c.detail)}var z=B(371).$getLotteryBalance,J=B(371).$getLottery,F=B(371).$getHitList,H=B(371).$sendRedPackets,G=B(44).parse,C=B(25).mobilecheck,j=B(43).dateFormat,b="red_packets";I.exports={timeFormat:E,getLottery:A,getBalanceInfo:x,getHitList:L,sendRedPackets:w,showMaskPanel:K,getPrizeList:k,updateWinLotteryTpl:D}},function(h,l,f){function g(c,a,i){return m({type:"GET",url:j.SERVER_1+"vip/lottery/balance",data:{sceneId:c,lotteryId:a,wxOpenId:i}})}function d(u,q,w,p,v,s,c){return m({type:"GET",async:!1,url:j.SERVER_1+"vip/lottery/draw",data:{sceneId:u,lotteryId:q,wxOpenId:w,wxNickName:p,wxHeadImage:v,wxSex:s,wxProvince:c}})}function b(c,a,i){return m({type:"GET",url:j.SERVER_1+"vip/lottery/hit",data:{sceneId:c,lotteryId:a,wxOpenId:i}})}function k(a){return m({type:"GET",url:j.SERVER_1+"vip/lottery/send",data:{redPacketsId:a}})}var m=f(21).ajax,j=f(22);h.exports={$getLotteryBalance:g,$getLottery:d,$getHitList:b,$sendRedPackets:k}},function(R,D,J){function N(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function I(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?b:a}function G(b,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}function V(){return $(P)}var F=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),T=function C(d,b,g){null===d&&(d=Function.prototype);var a=Object.getOwnPropertyDescriptor(d,b);if(void 0===a){var f=Object.getPrototypeOf(d);return null===f?void 0:C(f,b,g)}if("value" in a){return a.value}var c=a.get;if(void 0!==c){return c.call(g)}};J(373),J(358);var B=J(127),L=J(44).parse,H=J(82).getWeChatUser,S=J(25).isWeixin,O=J(84).popUpModal,Q=J(370),P=J(374),K=J(376),A=J(377),j=J(363),U=J(364),q=J(366),z=J(368),M=function(b){function a(d,f){N(this,a);var c=I(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,f));return $.extend(!0,c.$ability,{style:{commonStyle:{size:!1}},trigger:{self:!1},sound:!1,link:!1,flexLine:""}),c}return G(a,b),F(a,[{key:"create$context",value:function(){var f=this.compJson,d=H(),c=f.id,g=f.type;return P=L(P,{id:c,type:g}),this.startTime=Q.timeFormat(f.baseInfo.startTime),this.endTime=Q.timeFormat(f.baseInfo.endTime),this.$gameHtml=$(P),this.$egg=this.$gameHtml.find(".egg"),this.prizeList=f.prizeInfo.options,this.$mask=$('<div class="bg-mask"></div>'),this.lotteryBox=this.$gameHtml.find(".lottery-container"),this.lotteryBox.css("opacity","0"),Q.getBalanceInfo(this.lotteryBox,this.eqxScene.meta.id,f,d),this.prizeItemsTpl=Q.getPrizeList(this.prizeList),this.audio=document.createElement("audio"),this.audio.src=J(378),this.$gameHtml.append(this.audio),this.$gameHtml}},{key:"bindAfterRenderEvent",value:function(k,p){var g=this;this.initDom();var h=H(),f=this.eqxScene.meta.id,d=this.eqxScene.bgm,m=this.compJson.activityId,u=null,l=void 0;this.$egg.on("click",function(c){return c.stopPropagation(),S()?(g.winJson=null,u&&clearTimeout(u),void (u=setTimeout(function(){g.lotteryItem=null,l=Q.getLottery(f,m,h),l.then(function(n){g.winJson=n.obj;var e=g.eggClick(c);g.$winLotteryHtml.append(g.$closeBtn),Q.updateWinLotteryTpl(g.winJson,g.$winLotteryHtml),g.smashProcess(e,g.$winLotteryHtml)})["catch"](function(e){g.lostLottery(e.code,c)})["finally"](function(){Q.getBalanceInfo(g.lotteryBox,f,p,h)})},300))):void O("该组件仅能在微信中使用。")}).on("dbclick",function(c){c.stopPropagation(),u&&clearTimeout(u)}),this.silkBag.on("click",function(c){c.stopPropagation(),d&&d.hide(),g.$activityTpl.append(g.$closeBtn),Q.getHitList(f,m,h,z,g.$prizeContainer),g.$activityTpl.find(".prize-list").html(g.prizeItemsTpl.join("")),g.$activityTpl.find(".activity-time p").html(g.startTime+" - "+g.endTime),g.editActivityCss("block","none","35px"),g.$activityTpl.show()}),this.$explain.on("click",function(c){c.stopPropagation(),g.editActivityCss("block","none","35px")}),this.$myPrize.on("click",function(c){c.stopPropagation(),g.editActivityCss("none","block","160px")}),this.$closeBtn.on("click",function(c){c.stopPropagation(),g.$li.find(".land-box").removeClass("pause"),g.$egg.removeClass("pause"),g.$li.find(".egg").html("").prop("style",""),g.$mask.find(".mask-container").hide(),d&&d.show()}),this.$againBtn.on("click",function(){g.$closeBtn.trigger("click")}),this.$activityTpl.on("click",function(){g.$closeBtn.trigger("click")}),this.$winLotteryHtml.on("click",function(){g.$closeBtn.trigger("click")}),this.$lostLotteryHtml.on("click",function(){g.$closeBtn.trigger("click")}),this.$prizeContainer.on("touchstart touchmove touchend mousedown mouseup mousemove",function(c){c.stopPropagation()})}},{key:"eleShow",value:function(){T(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleShow",this).call(this),this.$mask.show(),this.$mask.parent().length||this.$mask.insertBefore(this.$li.parent().parent()),Q.showMaskPanel(this.$mask,this.eqxPage)}},{key:"eleHide",value:function(){T(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleHide",this).call(this),this.$mask.hide()}},{key:"initDom",value:function(){this.silkBag=this.$li.find("#silkBag"),this.$closeBtn=$('<div class="mask-close"></div>'),this.$activityTpl=$(j),this.$winLotteryHtml=$(U),this.$lostLotteryHtml=$(q),this.$mask.append(this.$lostLotteryHtml),this.$mask.append(this.$winLotteryHtml),this.$mask.append(this.$activityTpl),this.$mask.find(".mask-container").hide(),this.$explain=this.$activityTpl.find(".explain"),this.$myPrize=this.$activityTpl.find(".my-prize"),this.$againBtn=this.$lostLotteryHtml.find(".mask-btn"),this.$prizeContainer=this.$activityTpl.find(".prize-container"),this.$explainContainer=this.$activityTpl.find(".explain-container")}},{key:"editActivityCss",value:function(d,c,f){this.$explainContainer.css("display",d),this.$prizeContainer.css("display",c),this.$activityTpl.find(".arrow").css("left",f)}},{key:"noAnimation",value:function(m){var x=window.getComputedStyle(m[0]).transform,g=window.getComputedStyle(this.$egg[0]),k=window.getComputedStyle(this.$egg[1]),f=window.getComputedStyle(this.$egg[2]),d=g.transform,v=k.transform,y=f.transform,p=g.zIndex,w=k.zIndex,h=f.zIndex;m.addClass("pause").css("transform",x),this.$egg.eq(0).addClass("pause").css("transform",d).css("z-index",p),this.$egg.eq(1).addClass("pause").css("transform",v).css("z-index",w),this.$egg.eq(2).addClass("pause").css("transform",y).css("z-index",h)}},{key:"eggClick",value:function(d){var c=$(d.target);$(".egg").off("click",this.eggClick),this.noAnimation(c.parents(".land-box"));var f=$('<img src="'+A+'" class="hammer"><img src="'+K+'" class="egg-smash">');return c.html(f),c}},{key:"lostLottery",value:function(d,c){if(110101===d){O("活动还未开始，活动时间为"+this.startTime+"&nbsp;~&nbsp;"+this.endTime)}else{if(110102===d){O("活动已经结束啦，下次早点来哦～")}else{if(110112===d){O("今日抽奖次数已用完，请明日再来～")}else{this.$lostLotteryHtml.append(this.$closeBtn);var f=this.eggClick(c);this.smashProcess(f,this.$lostLotteryHtml)}}}}},{key:"smashProcess",value:function(f,d){var g=this,c=this.eqxScene.bgm;this.audio.play(),setTimeout(function(){f.css("background","none").find(".egg-smash").show(),setTimeout(function(){Q.sendRedPackets(g.winJson)["catch"](function(){O("红包发送失败！")}),c&&c.hide(),d.show()},500)},1000)}}]),a}(B);R.exports={EqxSmashEgg:M,initEgg:V}},function(b,a){},function(b,a,c){b.exports='<div class="game-box" id="#{id}" ctype="#{type}"><div id="silkBag" class="silk-bag"><img src="'+c(360)+'" alt="活动锦囊"></div><div class="stage"><img class="tray" src="'+c(375)+'" style="display: block"><div class="land-box"><div class="egg"></div><div class="egg"></div><div class="egg"></div></div></div><div class="lottery-container"><p class="spend-item">今日已砸<span>0</span>次</p><p class="surplus-item">您今日还可砸<span>10</span>次</p></div></div>'},function(b,a,c){b.exports=c.p+"images/stage-bf68e9.png"},function(b,a,c){b.exports=c.p+"images/egg-break-ccb058.png"},function(b,a,c){b.exports=c.p+"images/hammer-28a857.png"},function(b,a,c){b.exports=c.p+"images/smashEgg-81a39c.mp3"},function(P,C,H){function L(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function G(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?b:a}function E(b,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}function T(){return $(N)}var D=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),R=function K(d,b,g){null===d&&(d=Function.prototype);var a=Object.getOwnPropertyDescriptor(d,b);if(void 0===a){var f=Object.getPrototypeOf(d);return null===f?void 0:K(f,b,g)}if("value" in a){return a.value}var c=a.get;if(void 0!==c){return c.call(g)}};H(380);var B=H(127),J=H(44).parse,F=H(82).getWeChatUser,Q=H(25).isWeixin,M=H(84).popUpModal,O=H(370),N=H(381),I=H(368),A=H(363),j=H(364),S=H(366),q=H(383),z=function(b){function a(d,f){L(this,a);var c=G(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,f));return $.extend(!0,c.$ability,{style:{commonStyle:{size:!1}},trigger:{self:!1},sound:!1,link:!1,flexLine:""}),c}return E(a,b),D(a,[{key:"create$context",value:function(){var f=this.compJson,d=F(),g=f.id,c=f.type;return N=J(N,{id:g,type:c}),this.startTime=O.timeFormat(f.baseInfo.startTime),this.endTime=O.timeFormat(f.baseInfo.endTime),this.$gameHtml=$(N),this.$drawArea=this.$gameHtml.find("#drawArea"),this.$canvas=this.$gameHtml.find("#cardCanvas"),this.$awardResult=this.$gameHtml.find("#awardResult"),this.prizeList=f.prizeInfo.options,this.$mask=$('<div class="bg-mask"></div>'),this.lotteryBox=this.$gameHtml.find(".lottery-container"),this.lotteryBox.css("opacity","0"),this.prizeItemsTpl=O.getPrizeList(this.prizeList),O.getBalanceInfo(this.lotteryBox,this.eqxScene.meta.id,f,d),this.$gameHtml}},{key:"bindAfterRenderEvent",value:function(h,f){var l=this;this.initDom();var d=F(),k=this.eqxScene.bgm,g=this.eqxScene.meta.id,c=this.compJson.activityId;this.isDrawed=!1,this.thisTimeHasEnd=!0,this.startStatus=!1,this.isWinner=!1,this.initDraw(),this.$drawArea.on("touchstart",function(i){l.toucheStart(i.originalEvent)}).on("touchmove",function(i){l.touchMove(i.originalEvent)}).on("touchend",function(i){l.isDrawed&&l.thisTimeHasEnd&&l.touchEnd(i.originalEvent)}),this.$drawArea.on("mousedown",function(i){l.toucheStart(i.originalEvent)}).on("mousemove",function(i){l.touchMove(i.originalEvent)}).on("mouseup",function(i){l.isDrawed&&l.thisTimeHasEnd&&l.touchEnd(i.originalEvent)}),this.silkBag.on("click",function(i){i.stopPropagation(),k&&k.hide(),l.$activityTpl.append(l.$closeBtn),O.getHitList(g,c,d,I,l.$prizeContainer),l.$activityTpl.find(".prize-list").html(l.prizeItemsTpl.join("")),l.$activityTpl.find(".activity-time p").html(l.startTime+" - "+l.endTime),l.editActivityCss("block","none","35px"),l.$activityTpl.show()}),this.$explain.on("click",function(i){i.stopPropagation(),l.editActivityCss("block","none","35px")}),this.$myPrize.on("click",function(i){i.stopPropagation(),l.editActivityCss("none","block","160px")}),this.$closeBtn.on("click",function(i){i.stopPropagation(),l.$mask.find(".mask-container").hide(),l.$awardResult.find(".win-award").hide(),l.$awardResult.find(".lost-award").hide(),l.ctx.globalCompositeOperation="source-over",l.initDraw(),k&&k.show()}),this.$againBtn.on("click",function(i){i.stopPropagation(),l.$closeBtn.trigger("click")}),this.$activityTpl.on("click",function(i){i.stopPropagation(),l.$closeBtn.trigger("click")}),this.$winLotteryHtml.on("click",function(i){i.stopPropagation(),l.$closeBtn.trigger("click")}),this.$lostLotteryHtml.on("click",function(i){i.stopPropagation(),l.$closeBtn.trigger("click")}),this.$prizeContainer.on("touchstart touchmove touchend mousedown mouseup mousemove",function(i){i.stopPropagation()})}},{key:"eleShow",value:function(){R(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleShow",this).call(this),this.$mask.show(),this.$mask.parent().length||this.$mask.insertBefore(this.$li.parent().parent()),O.showMaskPanel(this.$mask,this.eqxPage)}},{key:"eleHide",value:function(){R(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleHide",this).call(this),this.$mask.hide()}},{key:"initDom",value:function(){this.silkBag=this.$li.find("#silkBag"),this.$closeBtn=$('<div class="mask-close"></div>'),this.$activityTpl=$(A),this.$winLotteryHtml=$(j),this.$lostLotteryHtml=$(S),this.$mask.append(this.$lostLotteryHtml),this.$mask.append(this.$winLotteryHtml),this.$mask.append(this.$activityTpl),this.$mask.find(".mask-container").hide(),this.$explain=this.$activityTpl.find(".explain"),this.$myPrize=this.$activityTpl.find(".my-prize"),this.$againBtn=this.$lostLotteryHtml.find(".mask-btn"),this.$prizeContainer=this.$activityTpl.find(".prize-container"),this.$explainContainer=this.$activityTpl.find(".explain-container")}},{key:"editActivityCss",value:function(d,c,f){this.$explainContainer.css("display",d),this.$prizeContainer.css("display",c),this.$activityTpl.find(".arrow").css("left",f)}},{key:"lostLottery",value:function(d,c){110101===c?M("活动还未开始，活动时间为"+this.startTime+"&nbsp;~&nbsp;"+this.endTime):110102===c?M("活动已经结束啦，下次早点来哦～"):110112===c?M("今日抽奖次数已用完，请明日再来～"):(this.$awardResult.find(".lost-award").show().siblings().hide(),this.$lostLotteryHtml.append(this.$closeBtn),this.doToucheStart(d))}},{key:"winLottery",value:function(c){this.$awardResult.find(".win-award p").html(c.prizeName),this.$awardResult.find(".win-award").show().siblings().hide(),this.$winLotteryHtml.append(this.$closeBtn),O.updateWinLotteryTpl(c,this.$winLotteryHtml)}},{key:"getRoute",value:function(f){var d=f.touches?f.touches[0]:f,g=d.pageX-this.$canvas.offset().left,c=d.pageY-this.$canvas.offset().top;return{x:g,y:c}}},{key:"doToucheStart",value:function(f){this.startStatus=!0,this.thisTimeHasEnd=!1;var d=this.getRoute(f),g=d.x,c=d.y;this.drawCircle(g,c),this.lastX=g,this.lastY=c}},{key:"toucheStart",value:function(g){var d=this;if(g.preventDefault(),g.stopPropagation(),!Q()){return void M("该组件仅能在微信中使用。")}if(this.thisTimeHasEnd){var k=F(),c=this.eqxScene.meta.id,h=this.compJson.activityId,f=O.getLottery(c,h,k);this.winJson=null,f.then(function(e){d.isWinner=!0,d.winJson=e.obj,d.winLottery(d.winJson),d.doToucheStart(g)})["catch"](function(e){d.isWinner=!1,d.lostLottery(g,e.code)})["finally"](function(){O.getBalanceInfo(d.lotteryBox,c,d.compJson,k)})}else{this.doToucheStart(g)}}},{key:"touchMove",value:function(h){var f=this;if(h.preventDefault(),h.stopPropagation(),this.startStatus){for(var l=this.getRoute(h),d=l.x,k=l.y,g=this.circleRadius(d,k,this.lastX,this.lastY);g>this.step;){this.lastX+=(d-this.lastX)/g*this.step,this.lastY+=(k-this.lastY)/g*this.step,this.drawCircle(this.lastX,this.lastY),g=this.circleRadius(d,k,this.lastX,this.lastY)}if(this.drawCircle(d,k),this.lastX=d,this.lastY=k,this.percent()>this.per){this.clear(),this.startStatus=!1,this.$canvas.hide(),this.thisTimeHasEnd=!0;var c=this.isWinner?this.$winLotteryHtml:this.$lostLotteryHtml;setTimeout(function(){var i=f.eqxScene.bgm;i&&i.hide(),f.$canvas.show(),c.show(),f.isWinner&&O.sendRedPackets(f.winJson)["catch"](function(){M("红包发送失败！")})},500)}}}},{key:"touchEnd",value:function(c){this.startStatus=!1,c.preventDefault(),c.stopPropagation()}},{key:"initDraw",value:function(){this.$canvas.show();var d=this.$canvas.attr("width"),c=10*d/320;this.isDrawed?this.drawGGL():(this.initCanvas(c),this.isDrawed=!0)}},{key:"initCanvas",value:function(c){this.r=c||12,this.per=60,this.step=this.r/8,this.ca=this.$canvas[0],this.ctx=this.ca.getContext("2d"),this.w=this.$canvas.attr("width"),this.h=this.$canvas.attr("height"),this.pixels=this.w*this.h,this.img=q,this.lastX=0,this.lastY=0,this.create()}},{key:"create",value:function(){var g=this;this.clear();var d=this.ctx,k=this.w,c=this.h,h=new Image;h.crossOrigin="anonymous",h.src=this.img,this.img=h;var f=this.ca;h.onload=function(){d.drawImage(h,(f.width-k)/2,(f.height-c)/2,k,c)},this.drawGGL=function(){g.ctx.drawImage(g.img,(g.ca.width-g.w)/2,(g.ca.height-g.h)/2,g.w,g.h)},this.$drawArea.css({"background-image":"url()"}),this.ca.addEventListener("touchstart",$.proxy(function(e){!g.thisTimeHasEnd&&g.toucheStart(e)},this),!1),this.ca.addEventListener("touchmove",$.proxy(function(e){!g.thisTimeHasEnd&&g.touchMove(e)},this),!1),this.ca.addEventListener("touchend",$.proxy(function(e){!g.thisTimeHasEnd&&g.touchEnd(e)},this),!1),this.ca.addEventListener("mousedown",$.proxy(function(e){!g.thisTimeHasEnd&&g.toucheStart(e)},this),!1),this.ca.addEventListener("mousemove",$.proxy(function(e){!g.thisTimeHasEnd&&g.touchMove(e)},this),!1),this.ca.addEventListener("mouseup",$.proxy(function(e){!g.thisTimeHasEnd&&g.touchEnd(e)},this),!1)}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.w,this.h)}},{key:"drawCircle",value:function(d,c){this.ctx.globalCompositeOperation="destination-out",this.ctx.beginPath(),this.ctx.arc(d,c,this.r,0,2*Math.PI),this.ctx.fillStyle="#000",this.ctx.fill()}},{key:"percent",value:function(){for(var f=0,d=this.ctx.getImageData(0,0,this.w,this.h),g=0,c=d.data.length;g<c;g+=4){0===d.data[g]&&0===d.data[g+1]&&0===d.data[g+2]&&0===d.data[g+3]&&f++}return f/this.pixels*100}},{key:"circleRadius",value:function(f,d,g,c){return Math.sqrt((f-g)*(f-g)+(d-c)*(d-c))}}]),a}(B);P.exports={EqxScratchcard:z,initScratchcard:T}},function(b,a){},function(b,a,c){b.exports='<div class="game-scratch-box" id="#{id}" ctype="#{type}"><div class="main-box"><div id="silkBag" class="silk-bag"><img src="'+c(360)+'" alt="活动锦囊"></div><div class="title-box title-down"><img src="'+c(382)+'" alt="一刮千金"></div><div id="drawAreaBox" class="draw-area-box"><div class="draw-area-bg"></div><div id="drawArea" class="draw-area"><div id="awardResult" class="award-result"><div class="award win-award"><p>1等奖</p></div><div class="award lost-award"></div></div><canvas id="cardCanvas" class="card-canvas" width="260" height="112"></canvas></div></div><div class="lottery-container"><p class="spend-item">今日已刮<span>0</span>次</p><p class="surplus-item">您今日还可刮<span>10</span>次</p></div></div></div>'},function(b,a,c){b.exports=c.p+"images/title-ca88d3.png"},function(b,a,c){b.exports=c.p+"images/scratch-a66dec.jpg"},function(J,w,C){function F(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function B(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?b:a}function z(b,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}var N=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),x=function M(d,b,g){null===d&&(d=Function.prototype);var a=Object.getOwnPropertyDescriptor(d,b);if(void 0===a){var f=Object.getPrototypeOf(d);return null===f?void 0:M(f,b,g)}if("value" in a){return a.value}var c=a.get;if(void 0!==c){return c.call(g)}},L=C(127),q=C(44).parse,E=C(25).isWeixin,A=C(82).getWeChatUser,K=C(84).popUpModal,G=C(371).$sendRedPackets,I=C(370),H=C(385),D=C(364),k=C(366),j=function(b){function a(d,f){F(this,a);var c=B(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,f));return $.extend(!0,c.$ability,{style:{compStyle:{backgroundColor:!1},compFont:{self:!1,fontFamily:!1}},trigger:{self:!1},sound:!1,link:!1}),c}return z(a,b),N(a,[{key:"create$context",value:function(){var f=this.compJson,d=f.id,g=f.type,c=f.properties.title;return this.$context=$(q(H,{id:d,type:g,title:c})),this.$mask=$('<div class="bg-mask"></div>'),this.$context}},{key:"bindAfterRenderEvent",value:function(){var f=this;this.initDom();var d=A();this.bgm=this.eqxScene.bgm;var h=this.eqxScene.meta.id,c=this.compJson.prizeInfo,g=c.activityId;this.startTime=I.timeFormat(c.startTime),this.endTime=I.timeFormat(c.endTime),this.$li.click(function(){if(!E()){return void K("该组件仅能在微信中使用。")}var e=I.getLottery(h,g,d);e.then(function(i){f.winLottery(i.obj.couponCode),G(i.obj.redPacketsId)["catch"](function(){K("红包发送失败！")})})["catch"](function(i){f.lostLottery(i.code)})}),this.$closeBtn.on("click",function(e){e.stopPropagation(),f.$mask.find(".mask-container").hide(),f.bgm&&f.bgm.show()}),this.$againBtn.on("click",function(e){e.stopPropagation(),f.$closeBtn.trigger("click")}),this.$winLotteryHtml.on("click",function(e){e.stopPropagation(),f.$closeBtn.trigger("click")}),this.$lostLotteryHtml.on("click",function(e){e.stopPropagation(),f.$closeBtn.trigger("click")})}},{key:"eleShow",value:function(){x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleShow",this).call(this),this.$mask.show(),this.$mask.parent().length||this.$mask.insertBefore(this.$li.parent().parent()),I.showMaskPanel(this.$mask,this.eqxPage)}},{key:"eleHide",value:function(){x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleHide",this).call(this),this.$mask.hide()}},{key:"initDom",value:function(){this.$closeBtn=$('<div class="mask-close"></div>'),this.$winLotteryHtml=$(D),this.$lostLotteryHtml=$(k),this.$mask.append(this.$lostLotteryHtml),this.$mask.append(this.$winLotteryHtml),this.$mask.find(".mask-container").hide(),this.$againBtn=this.$mask.find(".mask-btn")}},{key:"winLottery",value:function(c){this.$winLotteryHtml.append(this.$closeBtn),this.$winLotteryHtml.find(".level").html("￥"+c/100+"元"),this.$winLotteryHtml.find(".detail").html("微信现金红包"),this.bgm&&this.bgm.hide(),this.$winLotteryHtml.show()}},{key:"lostLottery",value:function(c){110101===c?K("活动还未开始，活动时间为"+this.startTime+"&nbsp;~&nbsp;"+this.endTime):110102===c?K("活动已经结束啦，下次早点来哦～"):110112===c?K("今日抽奖次数已用完，请明日再来～"):(this.$lostLotteryHtml.append(this.$closeBtn),this.bgm&&this.bgm.hide(),this.$lostLotteryHtml.show())}}]),a}(L);J.exports=j},function(b,a,c){b.exports='<div id="#{id}" ctype="#{type}" class="element comp-redPackets" style="cursor: default;width: 100%;height: 100%"><img src="'+c(386)+'" alt="红包" style="width: 100%; height: 100%"></div>'},function(b,a,c){b.exports=c.p+"images/redPackets-88e891.svg"},function(ab,K,R){function X(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}function Q(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?b:a}function M(b,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}function af(b,a){var c=void 0;switch(b){case 0:c=W;break;case 1:c=J;break;case 2:c=C;break;case 3:c=q;break;case 4:c=z;break;case 5:c=ag}return'<img class="prize-icon" src="'+c+'" alt="">\n            <p class="prize-text">'+a+'</p>\n            <div class="prize-mask"></div>'}function L(b){var a=$(G);return b.forEach(function(c){c.prizeIndexArr.forEach(function(d){a.find(".prize-"+d).html(af(c.rank,c.prizeName))})}),a}function ad(a){return a?1===a.length?L([{prizeIndexArr:[0,2,4,6],prizeName:"谢谢参与",rank:0},{prizeIndexArr:[1,3,5,7],prizeName:a[0].prizeName,rank:1}]):2===a.length?L([{prizeIndexArr:[0,2,4,6],prizeName:"谢谢参与",rank:0},{prizeIndexArr:[1],prizeName:a[0].prizeName,rank:1},{prizeIndexArr:[3,5,7],prizeName:a[1].prizeName,rank:2}]):3===a.length?L([{prizeIndexArr:[0,2,4,6],prizeName:"谢谢参与",rank:0},{prizeIndexArr:[1],prizeName:a[0].prizeName,rank:1},{prizeIndexArr:[7],prizeName:a[1].prizeName,rank:2},{prizeIndexArr:[3,5],prizeName:a[2].prizeName,rank:3}]):4===a.length?L([{prizeIndexArr:[0,2,4,6],prizeName:"谢谢参与",rank:0},{prizeIndexArr:[1],prizeName:a[0].prizeName,rank:1},{prizeIndexArr:[7],prizeName:a[1].prizeName,rank:2},{prizeIndexArr:[3],prizeName:a[2].prizeName,rank:3},{prizeIndexArr:[5],prizeName:a[3].prizeName,rank:4}]):5===a.length?L([{prizeIndexArr:[0,4],prizeName:"谢谢参与",rank:0},{prizeIndexArr:[1],prizeName:a[0].prizeName,rank:1},{prizeIndexArr:[7],prizeName:a[1].prizeName,rank:2},{prizeIndexArr:[3],prizeName:a[2].prizeName,rank:3},{prizeIndexArr:[5],prizeName:a[3].prizeName,rank:4},{prizeIndexArr:[2,6],prizeName:a[4].prizeName,rank:5}]):void 0:$(G)}var H=function(){function a(d,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1,b.configurable=!0,"value" in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(c,d,b){return d&&a(c.prototype,d),b&&a(c,b),c}}(),V=function A(d,b,g){null===d&&(d=Function.prototype);var a=Object.getOwnPropertyDescriptor(d,b);if(void 0===a){var f=Object.getPrototypeOf(d);return null===f?void 0:A(f,b,g)}if("value" in a){return a.value}var c=a.get;if(void 0!==c){return c.call(g)}};R(388);var N=R(127),ac=R(44).parse,Y=R(82).getWeChatUser,aa=R(25).isWeixin,Z=R(84).popUpModal,U=R(370),G=R(389),B=R(368),ae=R(363),D=R(364),F=R(366),W=R(391),J=R(392),C=R(393),q=R(395),z=R(396),ag=R(397),j=function(b){function a(d,f){X(this,a);var c=Q(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d,f));return $.extend(!0,c.$ability,{style:{commonStyle:{size:!1}},trigger:{self:!1},sound:!1,link:!1,flexLine:""}),c}return M(a,b),H(a,[{key:"create$context",value:function(){var f=this.compJson,d=Y(),g=f.id,c=f.type;return G=ac(G,{id:g,type:c}),this.startTime=U.timeFormat(f.baseInfo.startTime),this.endTime=U.timeFormat(f.baseInfo.endTime),this.prizeList=f.prizeInfo.options,this.$gameHtml=ad(this.prizeList),this.$mask=$('<div class="bg-mask"></div>'),this.lotteryBox=this.$gameHtml.find(".lottery-container"),this.lotteryBox.css("opacity","0"),this.prizeItemsTpl=U.getPrizeList(this.prizeList),U.getBalanceInfo(this.lotteryBox,this.eqxScene.meta.id,f,d),this.$gameHtml}},{key:"bindAfterRenderEvent",value:function(h,f){var l=this;this.initDom(),this.initLottery(),this.lottery.init("lottery");var d=Y(),k=this.eqxScene.bgm,g=this.eqxScene.meta.id,c=this.compJson.activityId;this.$startBtn.on("click",function(i){return i.stopPropagation(),aa()?void (l.click||l.startRoll(g,c,d)):void Z("该组件仅能在微信中使用。")}),this.silkBag.on("click",function(i){i.stopPropagation(),k&&k.hide(),l.$activityTpl.append(l.$closeBtn),U.getHitList(g,c,d,B,l.$prizeContainer),l.$activityTpl.find(".prize-list").html(l.prizeItemsTpl.join("")),l.$activityTpl.find(".activity-time p").html(l.startTime+" - "+l.endTime),l.editActivityCss("block","none","35px"),l.$activityTpl.show()}),this.$explain.on("click",function(i){i.stopPropagation(),l.editActivityCss("block","none","35px")}),this.$myPrize.on("click",function(i){i.stopPropagation(),l.editActivityCss("none","block","160px")}),this.$closeBtn.on("click",function(i){i.stopPropagation(),l.$mask.find(".mask-container").hide(),k&&k.show()}),this.$againBtn.on("click",function(i){i.stopPropagation(),l.$closeBtn.trigger("click")}),this.$activityTpl.on("click",function(i){i.stopPropagation(),l.$closeBtn.trigger("click")}),this.$winLotteryHtml.on("click",function(i){i.stopPropagation(),l.$closeBtn.trigger("click")}),this.$lostLotteryHtml.on("click",function(i){i.stopPropagation(),l.$closeBtn.trigger("click")}),this.$prizeContainer.on("touchstart touchmove touchend mousedown mouseup mousemove",function(i){i.stopPropagation()})}},{key:"eleShow",value:function(){V(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleShow",this).call(this),this.$mask.show(),this.$mask.parent().length||this.$mask.insertBefore(this.$li.parent().parent()),U.showMaskPanel(this.$mask,this.eqxPage)}},{key:"eleHide",value:function(){V(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"eleHide",this).call(this),this.$mask.hide()}},{key:"initDom",value:function(){this.silkBag=this.$li.find("#silkBag"),this.$closeBtn=$('<div class="mask-close"></div>'),this.$activityTpl=$(ae),this.$winLotteryHtml=$(D),this.$lostLotteryHtml=$(F),this.$mask.append(this.$lostLotteryHtml),this.$mask.append(this.$winLotteryHtml),this.$mask.append(this.$activityTpl),this.$mask.find(".mask-container").hide(),this.$explain=this.$activityTpl.find(".explain"),this.$myPrize=this.$activityTpl.find(".my-prize"),this.$againBtn=this.$lostLotteryHtml.find(".mask-btn"),this.$prizeContainer=this.$activityTpl.find(".prize-container"),this.$explainContainer=this.$activityTpl.find(".explain-container"),this.$startBtn=this.$gameHtml.find("#start")}},{key:"editActivityCss",value:function(d,c,f){this.$explainContainer.css("display",d),this.$prizeContainer.css("display",c),this.$activityTpl.find(".arrow").css("left",f)}},{key:"initLottery",value:function(){var c=this;this.click=!1,this.prizeData={prizeId:1,prizeName:"",prizeDetail:""},this.lottery={index:-1,count:8,timer:0,speed:100,times:0,cycle:50,prize:0,init:function(d){this.$lottery=c.$gameHtml.find("#"+d),this.count=this.$lottery.find(".prize").length,this.$lottery.find(".prize-"+this.index).addClass("on")},roll:function(){var f=this.$lottery,d=this.index;f.find(".prize-"+d).removeClass("on"),d+=1,d>this.count-1&&(d=0),f.find(".prize-"+d).addClass("on"),this.index=d}}}},{key:"getRandom",value:function(d,c){return Math.floor(d+Math.random()*(c-d+1))}},{key:"getPrizeNum",value:function(g){var d=[0,1,2,7,3,6,5,4],k=this.$gameHtml.find(".prize"),c=k.map(function(l,i){return $(i).find(".prize-text").text()}),h=[];c.each(function(e,i){i===g&&h.push(e)});var f=this.getRandom(0,h.length-1);return d[h[f]]}},{key:"startRoll",value:function(f,d,h){var c=this;this.winJson=null;var g=void 0;g=U.getLottery(f,d,h),g.then(function(k){var i=k.obj;c.winJson=k.obj,c.lottery.prize=c.getPrizeNum(i.prizeName),c.prizeData={prizeId:i.id,prizeName:i.prizeName,prizeDetail:i.detail},c.roll(),c.click=!0})["catch"](function(i){110101===i.code?Z("活动还未开始，活动时间为"+c.startTime+"&nbsp;~&nbsp;"+c.endTime):110102===i.code?Z("活动已经结束啦，下次早点来哦～"):110112===i.code?Z("今日抽奖次数已用完，请明日再来～"):(c.lottery.prize=c.getPrizeNum("谢谢参与"),c.prizeData={prizeId:"",prizeName:"谢谢参与",prizeDetail:"谢谢参与"},c.roll(),c.click=!0)})["finally"](function(){U.getBalanceInfo(c.lotteryBox,f,c.compJson,h)})}},{key:"roll",value:function(){var c=this;this.lottery.times+=1,this.lottery.roll(),this.lottery.times>this.lottery.cycle+10&&this.lottery.prize==this.lottery.index?("谢谢参与"==this.prizeData.prizeName?setTimeout(function(){c.lostLottery()},500):setTimeout(function(){c.winLottery()},500),clearTimeout(this.lottery.timer),this.lottery.speed=100,this.lottery.times=0,this.click=!1):(this.lottery.times<this.lottery.cycle?this.lottery.speed-=10:this.lottery.times>this.lottery.cycle+10&&(0==this.lottery.prize&&7==this.lottery.index||this.lottery.prize==this.lottery.index+1)?this.lottery.speed+=110:this.lottery.speed+=20,this.lottery.speed<40&&(this.lottery.speed=40),this.lottery.timer=setTimeout(this.roll.bind(this),this.lottery.speed))}},{key:"lostLottery",value:function(){this.$lostLotteryHtml.show().css({zIndex:"100"})}},{key:"winLottery",value:function(){this.$winLotteryHtml.show().css({zIndex:"100"}),U.updateWinLotteryTpl(this.winJson,this.$winLotteryHtml),U.sendRedPackets(this.winJson)["catch"](function(){Z("红包发送失败！")})}}]),a}(N);ab.exports={EqxNineSquare:j,initNineSquare:ad}},function(b,a){},function(b,a,c){b.exports='<div class="nine-square-box" id="#{id}" ctype="#{type}"><div class="main-box" id="lottery"><div id="silkBag" class="silk-bag"><img src="'+c(360)+'" alt="活动锦囊"></div><div class="lottery-box"><img class="lottery-bg" src="'+c(390)+'" alt=""><div class="nine-square"><div class="prize prize-0"><img class="prize-icon" src="'+c(391)+'" alt=""><p class="prize-text">谢谢参与</p><div class="prize-mask"></div></div><div class="prize prize-1"><img class="prize-icon" src="'+c(392)+'" alt=""><p class="prize-text">一等奖</p><div class="prize-mask"></div></div><div class="prize prize-2"><img class="prize-icon" src="'+c(391)+'" alt=""><p class="prize-text">谢谢参与</p><div class="prize-mask"></div></div><div class="prize prize-7"><img class="prize-icon" src="'+c(393)+'" alt=""><p class="prize-text">二等奖</p><div class="prize-mask"></div></div><div class="start-button"><a href="javascript:;" id="start"><img src="'+c(394)+'" alt=""></a></div><div class="prize prize-3"><img class="prize-icon" src="'+c(395)+'" alt=""><p class="prize-text">三等奖</p><div class="prize-mask"></div></div><div class="prize prize-6"><img class="prize-icon" src="'+c(391)+'" alt=""><p class="prize-text">谢谢参与</p><div class="prize-mask"></div></div><div class="prize prize-5"><img class="prize-icon" src="'+c(395)+'" alt=""><p class="prize-text">三等奖</p><div class="prize-mask"></div></div><div class="prize prize-4"><img class="prize-icon" src="'+c(391)+'" alt=""><p class="prize-text">谢谢参与</p><div class="prize-mask"></div></div></div></div><div class="lottery-container"><p class="spend-item">今日已抽奖<span>0</span>次</p><p class="surplus-item">您今日还可抽奖<span>10</span>次</p></div></div></div>'},function(b,a,c){b.exports=c.p+"images/lotteryBg-f60ba7.gif"},function(b,a,c){b.exports=c.p+"images/prize0-057c5b.png"},function(b,a,c){b.exports=c.p+"images/prize1-c1faf6.png"},function(b,a,c){b.exports=c.p+"images/prize2-cf91bd.png"},function(b,a,c){b.exports=c.p+"images/startButton-277df3.png"},function(b,a,c){b.exports=c.p+"images/prize3-28b9aa.png"},function(b,a,c){b.exports=c.p+"images/prize4-5db028.png"},function(b,a,c){b.exports=c.p+"images/prize5-17fc23.png"},function(x,C,k){function q(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function j(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var A=function(){function a(f,d){for(var h=0;h<d.length;h++){var c=d[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),D=function w(f,c,l){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var h=Object.getPrototypeOf(f);return null===h?void 0:w(h,c,l)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(l)}};k(399);var z=k(127),B=k(400),m=k(44).parse,g=k(23).$loadQRCode,y=k(22),v=function(c){function a(f,h){q(this,a);var d=j(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,h));return $.extend(!0,d.$ability,{style:{compStyle:{backgroundColor:!0},compFont:{self:!0,fontFamily:!1,fontColor:!0},advanceStyle:{paddingTop:!1,borderRadius:!1}},trigger:{click:!1},flexLine:"ne,se,sw,nw,r"}),d}return b(a,c),A(a,[{key:"create$context",value:function(){var G=this.compJson,J=G.id,u=G.type,E=G.properties,l=E.address,d=E.logoImg,I=E.img,K=G.css,H=K.width,f=K.height;if(this.$context=$(m(B,{id:J,type:u,content:""})),I&&I.trim()){var F=this.getImgSrc(I,{width:H,height:f});this.generateQrcodeImg(this.$context,F)}else{l||(this.compJson.properties.address=l=y.VIEW_HOST+"s/"+this.eqxScene.meta.code),this.generateQrcodeAddress(this.$context,l,d,H)}return this.$context}},{key:"updateSize",value:function(f,h){var d=this;D(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateSize",this).call(this,f,h),clearTimeout(this._updateTimeOut),this._updateTimeOut=setTimeout(function(){d.updateQrcodeAddress()},300)}},{key:"generateQrcodeAddress",value:function(h,f,p,d){var l=this;g().then(function(){var n={render:"image",ecLevel:"H",size:d,text:f};if(l.compJson.properties.showLogoImg&&p){var e=y.FILE+p,i=new Image;i.setAttribute("crossOrigin","anonymous"),i.onload=function(){var L=i.height,E=i.width;if(L!==E){var G=document.createElement("canvas"),s=G.height=G.width=100,J=void 0,I=void 0,K=void 0,F=void 0;L>E?(K=s,F=Math.abs(E/L*s),I=0,J=Math.abs((s-F)/2)):(F=s,K=Math.abs(L/E*s),J=0,I=Math.abs((s-K)/2));var r=G.getContext("2d");r.drawImage(i,J,I,F,K);var H=new Image;H.src=G.toDataURL(),H.onload=function(){Object.assign(n,{mode:4,mSize:0.25,image:H}),h.qrcode(n),H.onload=null}}else{Object.assign(n,{mode:4,mSize:0.25,image:i}),h.qrcode(n)}i.onload=null},i.src=e}else{h.qrcode(n)}})}},{key:"generateQrcodeImg",value:function(f,d){var h="<img src="+d+">";f.append(h)}},{key:"updateQrcodeAddress",value:function(){this.$context.empty(),this.compJson.properties.img="";var h=this.compJson,f=h.properties,p=f.address,d=f.logoImg,l=h.css.width;this.generateQrcodeAddress(this.$context,p,d,l)}},{key:"updateQrcodeImg",value:function(f){var d=this.$context;d.empty(),this.generateQrcodeImg(d,f)}}]),a}(z);x.exports=v},function(b,a){},function(b,a){b.exports='<span id="#{id}" ctype="#{type}" class="element eqx-qrcode">#{content}</span>'},function(h,l,f){function g(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function a(p,o){for(var q=0;q<o.length;q++){var c=o[q];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(p,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}();f(402),f(403);var b=f(404),k=f(405),m=f(57).isRightArrow,j=function(){function a(c){g(this,a),this.$arrow=this.create$arrow(c)}return d(a,[{key:"create$arrow",value:function(c){return m(c)?$(k):$(b)}},{key:"updatePageMode",value:function(i){var c=this.create$arrow(i);this.$arrow&&(this.$arrow.replaceWith(c),this.$arrow=c,this.css&&this.updateCss(this.css))}},{key:"updateCss",value:function(c){this.css=c,this.$arrow.css(c)}},{key:"remove",value:function(){this.$arrow.remove()}}]),a}();h.exports=j},function(b,a){},function(b,a){},function(b,a){b.exports='<section class="u-arrow-bottom"><div class="pre-wrap-bottom"><div class="pre-box1"><div class="pre1"></div></div><div class="pre-box2"><div class="pre2"></div></div></div></section>'},function(b,a){b.exports='<section class="u-arrow-right"><div class="pre-wrap-right"><div class="pre-box3"><div class="pre3"></div></div><div class="pre-box4"><div class="pre4"></div></div></div></section>'},function(h,d,k){function c(i,a){if(!(i instanceof a)){throw new TypeError("Cannot call a class as a function")}}var j=function(){function a(o,m){for(var p=0;p<m.length;p++){var l=m[p];l.enumerable=l.enumerable||!1,l.configurable=!0,"value" in l&&(l.writable=!0),Object.defineProperty(o,l.key,l)}}return function(l,m,e){return m&&a(l.prototype,m),e&&a(l,e),l}}(),g=k(72).COMP_TYPE,b=k(72).FORM_COMPS,f=function(){function a(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];c(this,a),this.compJsonList=i,this.compNumMap={},Object.keys(g).forEach(function(l){e.compNumMap[l]=0})}return j(a,[{key:"iterate",value:function(){var i=this;this.compJsonList.forEach(function(e){i.compNumMap[e.type]+=1})}},{key:"getCountIds",value:function(){return this.countIdArr.join(",")}},{key:"hasComp",value:function(i){return !!this.compNumMap[i]}},{key:"hasRedPacketComp",value:function(){return this.hasComp(9)}},{key:"hasMapComp",value:function(){return this.hasComp("m")}},{key:"hasChartComp",value:function(){return this.hasComp("t")}},{key:"hasCommentComp",value:function(){return this.hasComp("b")}},{key:"hasSubmitButtonComp",value:function(){return this.hasComp(6)||this.hasComp(601)}},{key:"hasFormComp",value:function(){var l=this,i=0;return b.forEach(function(e){i+=l.compNumMap[e]}),!!i}}]),a}();h.exports=f},function(x,C,k){function q(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var j=function(){function a(f,d){for(var h=0;h<d.length;h++){var c=d[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),b=k(22),A=k(24).resolveUrl,D=k(408),z=k(44).parse,B=k(96),m=k(25),g=k(409),y=k(410),v={none:0,Gravity:1,Parallax:2},w=function(){function a(c,e){q(this,a),this.compJson=c,this.eqxScene=e.eqxScene;var d=this.eqxScene.config;d.EqxGravity.disableGravityMotion?this.gravityMode=v.none:m.mobilecheck()?this.gravityMode=v.Gravity:this.gravityMode=v.Parallax,this.gravityPromise=null,this.gravity=null}return j(a,[{key:"updateBgHeight",value:function(c){this.$gravity.css({height:c})}},{key:"updateCss",value:function(c){this.$gravity.css(c)}},{key:"create$gravity",value:function(){var E=this,K=this.compJson,d=K.id,r=K.properties.imgSrc,c=K.css,p=c.top,u=c.left,s=c.width,h=c.height,J=this.eqxScene,G=J.width,F=J.height;if(r){var H=A(b.FILE,r),I=$(z(D,{id:d,src:H}));this.$gravity=I,this.gravityPromise=B.loadImg(H).then(function(){switch(I.find("img").css({transform:"translate3d("+u+"px,"+p+"px,0)",width:s,height:h}),E.gravityMode){case v.Gravity:E.gravity=new y(d,$(I.find("img")),p,u,G,F),E.gravity.init();break;case v.Parallax:g(I,{innerW:s,innerH:h,outerW:G,outerH:F})}})}return this.$gravity}},{key:"delete$gravity",value:function(){var c=this;this.gravityMode===v.Gravity&&this.gravityPromise&&this.gravityPromise.then(function(){c.gravity.destroy()}),this.$gravity&&this.$gravity.remove()}},{key:"update$gravity",value:function(){this.delete$gravity(),this.create$gravity()}}]),a}();x.exports=w},function(b,a){b.exports='<div id="wrapper-gravity#{id}" class="eqx-bg-img" style="position: absolute;z-index: 0;width: 100%;height:100%"><div class="layer" data-depth="0.5"><img src="#{src}" alt="" style="position:absolute"/></div></div>'},function(c,b,f){function a(h,g){d.$loadParallax().then(function(){var k=g.innerW,p=g.innerH,j=g.outerW,e=g.outerH,t=g.scalarX,w=void 0===t?100:t,q=g.scalarY,v=void 0===q?100:q;console.log("重力感应 Parallax Starts!",g);var m={calibrateX:!0,calibrateY:!0,invertX:!0,invertY:!0,limitX:parseInt(k)-parseInt(j),limitY:parseInt(p)-parseInt(e),scalarX:w,scalarY:v,frictionX:1,frictionY:1,originX:0.5,originY:0.5};new Parallax(h[0],m)})}var d=f(23);c.exports=a},function(c,b){function f(h,g){if(!(h instanceof g)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function g(k,j){for(var l=0;l<j.length;l++){var h=j[l];h.enumerable=h.enumerable||!1,h.configurable=!0,"value" in h&&(h.writable=!0),Object.defineProperty(k,h.key,h)}}return function(h,j,e){return j&&g(h.prototype,j),e&&g(h,e),h}}(),d=function(){function g(j,h,m,l,e,k){f(this,g),this.id=j,this.bgHeight=0,this.bgWidth=0,this.offsetLeft=l,this.offsetTop=m,this.screenHeight=k,this.screenWidth=e,this.isFirst=!0,this.firstGamma=0,this.firstBeta=0,this.lastGama=0,this.lastBeta=0,this.targetLeft=0,this.targetTop=0,this.bg=h}return a(g,[{key:"init",value:function(){var h=this;h.targetLeft=h.nowLeft=h.offsetLeft,h.targetTop=h.nowTop=h.offsetTop,h.bindEvent(),h.requestAnimationFrame=h.requestAnimationFrame.bind(this),h.raf=requestAnimationFrame(h.requestAnimationFrame)}},{key:"bindEvent",value:function(){var h=this;$(window).on("deviceorientation."+h.id,function(e){var i=e.originalEvent;i.g=i.gamma,i.b=i.beta,h.isFirst&&(h.bgHeight=h.bg.height(),h.bgWidth=h.bg.width(),h.nowGama=h.lastGama=h.firstGamma=i.g,h.nowBeta=h.lastBeta=h.firstBeta=i.b,h.isFirst=!1),(Math.abs(i.g-h.lastGama)>3||Math.abs(i.b-h.lastBeta)>3)&&(h.targetLeft=Math.round(h.offsetLeft+(h.firstGamma-i.g)*h.bgWidth/180),h.targetTop=Math.round(h.offsetTop+(i.b-h.firstBeta)*h.bgHeight/180),h.nowBeta=h.lastBeta=i.b,h.nowGama=h.lastGama=i.g,h.targetLeft>=0?h.targetLeft=0:h.targetLeft<h.screenWidth-h.bgWidth&&(h.targetLeft=h.screenWidth-h.bgWidth),h.targetTop>=0?h.targetTop=0:h.targetTop<h.screenHeight-h.bgHeight&&(h.targetTop=h.screenHeight-h.bgHeight))})}},{key:"requestAnimationFrame",value:function(i){function h(){return i.apply(this,arguments)}return h.toString=function(){return i.toString()},h}(function(){var i=0,h=0,j=this;j.isFirst||(i=0.1*(j.targetLeft-j.nowLeft),h=0.1*(j.targetTop-j.nowTop),j.nowLeft+=+i.toFixed(5),j.nowTop+=+h.toFixed(5),j.bg.css({transform:"translate3d("+j.nowLeft+"px,"+j.nowTop+"px,0)","-ms-transform":"translate3d("+j.nowLeft+"px,"+j.nowTop+"px,0)","-webkit-transform":"translate3d("+j.nowLeft+"px,"+j.nowTop+"px,0)"})),j.raf=requestAnimationFrame(j.requestAnimationFrame)})},{key:"destroy",value:function(){window.cancelAnimationFrame(this.raf),$(window).off("deviceorientation."+this.id)}}]),g}();c.exports=d},function(b,a){var c=[{name:"红包",types:["9"]},{name:"新文本",types:["7"]},{name:"爆款文本",types:["1"]},{name:"文本",types:["2","x","298","299"]},{name:"微信昵称",types:["201"]},{name:"背景",types:["3"]},{name:"图片",types:["4"]},{name:"微信头像",types:["401"]},{name:"微信照片",types:["403"]},{name:"输入框",types:["5","501","502","503","504"]},{name:"提交按钮",types:["6","601"]},{name:"电话",types:["8"]},{name:"评分",types:["a"]},{name:"留言板",types:["b"]},{name:"复选框",types:["c"]},{name:"统计",types:["d"]},{name:"广告",types:["g"]},{name:"形状",types:["h"]},{name:"计数器",types:["i"]},{name:"链接",types:["l"]},{name:"地图",types:["m"]},{name:"随机图片",types:["n"]},{name:"图集",types:["p"]},{name:"单选框",types:["r"]},{name:"音效",types:["s"]},{name:"图表",types:["t"]},{name:"视频",types:["v"]},{name:"互动视频",types:["o"]},{name:"微信声音",types:["w01","w02"]},{name:"下拉列表",types:["z"]},{name:"计时",types:["e","f"]},{name:"投票",types:["j","k"]},{name:"重力感应",types:["q"]},{name:"画板",types:["u"]},{name:"打赏",types:["11"]},{name:"随机事件",types:["10"]},{name:"上传图片",types:["upload"]},{name:"日期",types:["14"]},{name:"验证码",types:["12"]},{name:"照片墙",types:["13"]},{name:"长按按钮",types:["16"]},{name:"微信卡券",types:["17"]},{name:"幸运转盘抽奖",types:["18"]},{name:"砸金蛋",types:["19"]},{name:"一刮千金",types:["20"]},{name:"微信红包",types:["21"]},{name:"幸运九宫格",types:["22"]},{name:"二维码",types:["23"]},{name:"点击截图",types:["24"]}];b.exports=c},function(j,q,f){function h(c){if(Array.isArray(c)){for(var a=0,i=Array(c.length);a<c.length;a++){i[a]=c[a]}return i}return Array.from(c)}function d(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var b=function(){function a(o,l){for(var r=0;r<l.length;r++){var c=l[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),m=f(413),v=f(415),k=f(55).randomId,p=f(136),g=function(){function a(c){d(this,a),this.page=c}return b(a,[{key:"insertItem2Group",value:function(i,c){i.group=c,c.eqxItems.push(i),i.$item&&c.$ul.append(i.$item)}},{key:"changeEqxItemVerticalPosition",value:function(z){function D(c){return Math.min.apply(Math,h(c.map(function(l){return l.getAbsolutePos().top})))}function x(r,l){for(var u=0;u<r.length;u++){var c=r[u].getAbsolutePos(),s=c.top;r[u].updateTop(l+u-s)}}var w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(z){var B=z.group;if(B){var E=this.reLayout(B),A=E.findIndex(function(c){return c===z});if(A<0||0===w){return null}if(w<0){for(var C=A;C>0&&w<0;C--,w++){E[C]=[E[C-1],E[C-1]=E[C]][0]}}else{if(w>0){for(var y=A;y<E.length-1&&w>0;y++,w--){E[y]=[E[y+1],E[y+1]=E[y]][0]}}}x(E,D(E)),this.reLayout(E,i)}}}},{key:"reLayout",value:function(){function r(i){return i.sort(function(z,x){var B=z.getAbsolutePos(),w=B.top,A=x.getAbsolutePos(),y=A.top;return w-y}),i}function l(z){for(var w=1;w<z.length;w++){var C=z[w],A=z[w-1],y=C.getAbsolutePos().top,i=A.getAbsolutePos().top,x=A.getAbsolutePos().height,B=i+x+c;z[w].updateTop(B-y)}return z}var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.layer,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(Array.isArray(u)){var s=u.slice()}else{if(u instanceof m){s=r(u.eqxItems.slice())}else{if(!(u instanceof v)){return[]}s=r(u.getDirectItems().slice())}}return l(s)}},{key:"extractComps",value:function(i){var c=[];return i.forEach(function(l){l.isGroupItem()?c.push.apply(c,h(l.getAllSubEqxComps())):c.push(l)}),c}},{key:"copyItems",value:function(u,l,x,c){var w=this,s=[];return u.sort(function(n,i){return n.zIndex-i.zIndex}).forEach(function(i){i.isGroupItem()?s.push(w._copyGroupItem(i,l,x,c)):s.push(w._copyCompItem(i,l,x,c))}),s}},{key:"_copyGroupItem",value:function(y,u,A,l){var z=this,x=[];y.eqxItems.slice().sort(function(n,i){return n.zIndex-i.zIndex}).forEach(function(i){x.push(i.isGroupItem()?z._copyGroupItem(i,0,A,l):z._copyCompItem(i,0,A,l))});var c=this.combineItems(x.map(function(i){return i.id})),w=y.group;return c&&u&&w&&(c.group=w,this.insertItem2Group(c,w),w.autoSize()),c.sourceEqxItem=y,c}},{key:"_copyCompItem",value:function(z,D,x,y){var w=this,l=JSON.parse(JSON.stringify(z.compJson));1===x?(l.css.left+=10,l.css.top+=10):2===x&&(l.css.top+=10),y=y.filter(function(c){return"e"===c.sourceType&&c.sourceId===l.id}).map(function(c){return delete c.$$hashKey,JSON.parse(JSON.stringify(c))}),delete l.id,delete l.css.zIndex;var B=this.page.addCompJson(l),E=B?this.page.initEqxCompByJson(B):null,A=B.properties;if(!E){return null}if(this.page.renderEqxComp(E),y.length&&y.forEach(function(i){i.sourceId===i.targetId&&(i.targetId=B.id),i.sourceId=B.id;var c=w.page.pageJson.properties,o=c.triggerGroup.findIndex(function(e){return i.targetId===e.targetId&&i.sourceId===e.sourceId&&i.eventType===e.eventType&&i.targetState===e.targetState});o===-1&&c.triggerGroup.push(i)}),1===A.initType?E.startAnimation({maxCount:1,reset:!0}):E.eleHide(),E&&D&&z.group){var C=z.group;E.group=C,this.insertItem2Group(E,C),C.autoSize()}return E.sourceEqxItem=z,E}},{key:"breakUpGroupItem",value:function(x){var l,A=this.layer,y=A.eqxItems.find(function(c){return c.isGroupItem()&&c.id===x}),w=y.group;if(this._includeFunTemplates([y])){return[]}if(!y){return[]}var i=y.eqxItems.slice(),u=p.parseTransform(y.getTransform()).rotate;w&&(l=w.eqxItems).push.apply(l,h(i)),(w||A).$ul.append(i.map(function(D){var C=D.getAbsolutePos(),G=C.left,B=C.top;if(w){var E=w.getAbsolutePos(),s=E.left,F=E.top;G-=s,B-=F}if(D.$item.css({left:G,top:B}),u){var r=p.parseTransform(D.getTransform()).rotate;D.$item.css({transform:"rotateZ("+r+"deg)"})}return D.$item})),y.$group.remove(),y.$group=null,y.$groupBox=null,y.$ul=null,i.forEach(function(c){c.group=w||null,c.parent=w||A});var z=A.eqxItems.findIndex(function(c){return c===y});return z>-1&&A.eqxItems.splice(z,1),w&&(z=w.eqxItems.findIndex(function(c){return c===y}),z>-1&&w.eqxItems.splice(z,1)),i}},{key:"combineItems",value:function(A){function D(l){var c=l.filter(function(n){return n.isGroupItem()||"16"!==n.type});l.length=0,l.push.apply(l,h(c))}var y=this,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=this.page,E=this.layer,B=A.map(function(c){return i.getEqxItem(c)});if(this._includeFunTemplates(B)){return null}if(D(B),this.isExistNested(B)){return null}var C=this._findCommonAncestor(B);if(this._limitNestDepth(C,B,x),this._updateIndexCrossLayer(B),!B||!B.length){return null}B.forEach(function(l){if(l.group){var c=l.group.eqxItems.findIndex(function(e){return e===l});c>-1&&l.group.eqxItems.splice(c,1),l.group!==C&&y._clearEmptyGroup(l.group)}l.eqxLayer!==E&&y._changeItemCrossLayer(l)});var z=-1;C!==E&&C.isGroupItem()&&(z=E.eqxItems.findIndex(function(c){return c===C})),A=B.map(function(c){return c.id});var w=new m({id:this._generateGroupId(),compIds:A},E);return E.initEqxItem(w,z).renderEqxItem(w),w.eqxItems.forEach(function(F){var s=F.getAbsolutePos(),H=s.left,l=s.top,G=w.getAbsolutePos(),u=G.left,c=G.top;H-=u,l-=c,F.$item.css({left:H,top:l})}),C!==E&&C.isGroupItem()&&(this.insertItem2Group(w,C),w.group=C,w.parent=C),this.updateCompsIndex(),w.autoSize(),w}},{key:"_includeFunTemplates",value:function(c){return c.some(function(i){return i.isFunTemplate()})}},{key:"_limitNestDepth",value:function(y,C,w){function s(l,c){var o=A(l);return o>=c?(i(l),x.breakUpGroupItem(l.id)):(l.eqxItems.slice().forEach(function(n){n.isGroupItem()&&s(n,o+1)}),[l])}function i(l){for(var c=l.hasGroupItem();c;){x.breakUpGroupItem(c.id),c=l.hasGroupItem()}}function A(l){if(l){if(l instanceof v){return 0}for(var c=1;l.group;){c++,l=l.group}return c}return -1}var z=[],B=A(y),x=this;return B===-1||B>=w?void (C.length=0):(B<w&&C.forEach(function(c){c.isGroupItem()?z.push.apply(z,h(s(c,w-B))):z.push(c)}),C.length=0,void C.push.apply(C,z))}},{key:"removeEmptyGroups",value:function(){function o(){return r.page.getEqxItems().filter(function(i){return i.isGroupItem()}).find(function(i){return !i.eqxItems.length})}for(var l=[],r=this,c=o();c;){l.push(c),r._clearEmptyGroup(c),c=o()}return l}},{key:"isExistNested",value:function(i){for(var c=0;c<i.length;c++){for(var l=i[c];l.group;){if(i.indexOf(l.group)!==-1){return l}l=l.group}}return !1}},{key:"traceTopItemsContain",value:function(o){for(var l=[],r=0;r<o.length;r++){for(var c=o[r];c.group;){c=c.group}l.indexOf(c)===-1&&l.push(c)}return l}},{key:"filterNestedItems",value:function(u){for(var l=[],x=0;x<u.length;x++){for(var c=u[x],w=c,s=!1;c.group;){if(u.indexOf(c.group)!==-1){s=!0;break}c=c.group}s||l.push(w)}return l}},{key:"_updateIndexCrossLayer",value:function(o){var l=this;if(this._isCrossLayer(o)){var r=[],c=[];o.forEach(function(i){i.eqxLayer!==l.layer?c.push(i):r.push(i)}),r.sort(function(n,i){return n.zIndex-i.zIndex}),c.push.apply(c,r),c.forEach(function(n,i){return n.zIndex=i+1})}}},{key:"_changeItemCrossLayer",value:function(i){var c=this;i.isGroupItem()&&i.eqxItems.forEach(function(n){c._changeItemCrossLayer(n)});var l=i.eqxLayer.eqxItems.findIndex(function(e){return e===i});l>-1&&i.eqxLayer.eqxItems.splice(l,1),i.eqxLayer=c.layer,i.eqxLayer.eqxItems.push(i)}},{key:"updateCompsIndex",value:function(){function i(e){var o=[];return e.forEach(function(n){return n.isGroupItem()?o.push.apply(o,h(i(n.eqxItems))):o.push(n)}),o}var c=this.layer.getLayerTreeStructure(),l=i(c);this.layer.updateCompsIndex(l)}},{key:"_clearEmptyGroup",value:function(i){if(i&&i.isGroupItem()&&!i.eqxItems.length){var c=i.group;i.eqxLayer.removeEqxItem(i),this._clearEmptyGroup(c)}}},{key:"_findCommonAncestor",value:function(i){if(1===i.length&&!i[0].isGroupItem()){return i[0].group||this.layer}if(this._isCrossLayer(i)){return this.layer}for(var c=i[0],l=1;l<i.length;l++){c=this._find2CommonAncestor(c,i[l])}return c}},{key:"_isCrossLayer",value:function(i){for(var c=0;c<i.length;c++){if(i[c].eqxLayer!==this.layer){return !0}}return !1}},{key:"_find2CommonAncestor",value:function(u,l){if(u===this.layer||l===this.layer){return this.layer}var x=this._computeLinkLength(u),c=this._computeLinkLength(l),w=Math.abs(x-c);if(x<c){var s=[l,u];u=s[0],l=s[1]}for(;w--;){u=u.group}for(;u&&l;){if(u===l){return u}u=u.group,l=l.group}return this.layer}},{key:"_computeLinkLength",value:function(i){for(var c=0;i;){c++,i=i.group}return c}},{key:"_generateGroupId",value:function(){return"group:"+k()}},{key:"layer",get:function(){return this.page.getCurrentLayer()}}]),a}();j.exports=g},function(z,E,m){function v(c){if(Array.isArray(c)){for(var a=0,d=Array(c.length);a<c.length;a++){d[a]=c[a]}return d}return Array.from(c)}function k(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function b(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function C(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var F=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),B=function x(f,c,h){null===f&&(f=Function.prototype);var a=Object.getOwnPropertyDescriptor(f,c);if(void 0===a){var g=Object.getPrototypeOf(f);return null===g?void 0:x(g,c,h)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(h)}},D=m(135),q=m(138),j=m(139),A=m(136),w=m(414),y=function(c){function a(f,g){k(this,a);var d=b(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return d.eqxLayer=g,d.eqxPage=d.eqxLayer.eqxPage,d.eqxScene=d.eqxPage.eqxScene,d.id=f.id,d.itemIds=f.compIds||[],d.css=f.css||{},d.eqxItems=[],d.$group=null,d.displayed="1",d.locked=!1,d.tag=!1,d.visited=!1,d.json=f,d.$ability={flexLine:"n,ne,e,se,s,sw,w,nw,r"},d}return C(a,c),F(a,[{key:"isFunTemplate",value:function(){if(1===this.json.type){return !0}}},{key:"destroy",value:function(){B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this),this.eqxLayer=null,this.eqxPage=null,this.eqxScene=null,this.$group&&(this.$group.remove(),this.$group=null,this.$groupBox=null,this.$ul=null)}},{key:"removeEqxItem",value:function(f){var d=this.eqxItems.findIndex(function(e){return e===f});d>-1&&this.eqxItems.splice(d,1),f.destroy()}},{key:"isPropCanEdit",value:function(f){var d=this.FtEditableProps;return[d.addGroup.addGroup,d.deleteGroup.deleteGroup,d.moveGroup.moveGroup].includes(f)}},{key:"getFtValue",value:function(){return 10}},{key:"updateTop",value:function(d){this.getAllSubEqxComps().forEach(function(e){e.updateCss({top:e.css.top+d})}),this.autoSize()}},{key:"getFtEditableProps",value:function(){var d=this.FtEditableProps;return B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getFtEditableProps",this).call(this).concat([d.addGroup.addGroup,d.deleteGroup.deleteGroup,d.moveGroup.moveGroup])}},{key:"hasGroupItem",value:function(){for(var d=0;d<this.eqxItems.length;d++){if(this.eqxItems[d].isGroupItem()){return this.eqxItems[d]}}return null}},{key:"getAllSubEqxComps",value:function(){for(var f=[],d=0;d<this.eqxItems.length;d++){var g=this.eqxItems[d];g.isGroupItem()?f.push.apply(f,v(g.getAllSubEqxComps())):f.push(g)}return f}},{key:"getAllSubEqxItems",value:function(){function f(e,g){g=g||[],e.eqxItems.forEach(function(h){h.isGroupItem()?(g.push(h),f(h,g)):g.push(h)})}var d=[];return f(this,d),d}},{key:"hasSubItemsLocked",value:function(){for(var f=this.getAllSubEqxItems(),d=0;d<f.length;d++){if(f[d].isEditLocked){return !0}}return !1}},{key:"_initGroupIndex",value:function(){return Math.max.apply(Math,v(this.eqxItems.map(function(d){return d.zIndex})))}},{key:"canMove",value:function(){return !this.isEditLocked&&!this.hasSubItemsLocked()}},{key:"onMoveBefore",value:function(){B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"onMoveBefore",this).call(this),this.eqxItems.forEach(function(d){return d.onMoveBefore()})}},{key:"onMoveEnd",value:function(){B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"onMoveEnd",this).call(this),this.eqxItems.forEach(function(d){return d.onMoveEnd()})}},{key:"instantMove",value:function(f,d){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.canMove()&&(this.getAllSubEqxComps().forEach(function(e){e.instantMove(f,d,!1)}),this.autoSize())}},{key:"getTransform",value:function(){return this.css.transform||"rotateZ(0)"}},{key:"onResizeStart",value:function(){return this.eqxItems.forEach(function(d){return d.onResizeStart()}),B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"onResizeStart",this).call(this)}},{key:"onResize",value:function(L,S,G,I,l,d,P,T,M){function R(aj,aa,ae,ah,ad,ac,am,ab,ak,Y){for(var ai=0;ai<aj.length;ai++){var af=aj[ai];if(!af.isEditLocked){var X=af.oldAbsolutePosition,p=X.left,al=X.top,V=X.width,W=X.height,ag=X.transform,Z=A.parseTransform(ag).rotate,U=new q(p,al,V,W),f=h(U,Y),g=J(aa,ae,ah,f,ad,(Z-Y+360)%360,ac,am,ab,ak),an=K(g,Y);af.updateSize({},{top:an.top,left:an.left,width:an.width,height:an.height})}}return aj}function h(g,f){if(!f){return g}var i=g.rotate(f).p1.transform2RotateCoord(f);return new q(i,g.width,g.height)}function K(V,Z){if(!Z){return V}V instanceof q||(V=new q(V));var p=V.p1.transform2RotateCoord(-Z),U=V.p2.transform2RotateCoord(-Z),g=new q(p,U,Z).rotate(-Z),f=g.p1,X=f.x,aa=f.y,W=g.width,Y=g.height;return{width:W,height:Y,left:X,top:aa}}function J(az,aj,ap,av,ao,al,aD,ak,aB,ai){if(al){return Q(az,av,al,ao)}var ar=0,an=0,aA=0,aw=0,ay=av.p1.x,ax=av.p1.y,aq=av.width,af=av.height,aC=aq,ag=af;if("nw"===ao){var ah=aD.distance2Point(av.p2),at=ak.distance2Point(av.p1);ar=-ah*aj/(ah+aC+at),an=-aC*aj/(ah+aC+at);var ab=aB.distance2Point(av.p2),aa=ai.distance2Point(av.p1);return aA=-ab*ap/(ab+ag+aa),aw=-ag*ap/(ab+ag+aa),{left:ay-ar-an,width:aq+an,top:ax-aA-aw,height:af+aw}}if("ne"===ao){var V=aD.distance2Point(av.p1),X=ak.distance2Point(av.p2);ar=V*aj/(V+aC+X),an=aC*aj/(V+aC+X);var aE=aB.distance2Point(av.p2),U=ai.distance2Point(av.p1);return aA=-aE*ap/(aE+ag+U),aw=-ag*ap/(aE+ag+U),{left:ay+ar,width:aq+an,top:ax-aA-aw,height:af+aw}}if("se"===ao){var ae=aD.distance2Point(av.p1),Y=ak.distance2Point(av.p2);ar=ae*aj/(ae+aC+Y),an=aC*aj/(ae+aC+Y);var ac=aB.distance2Point(av.p1),am=ai.distance2Point(av.p2);return aA=ac*ap/(ac+ag+am),aw=ag*ap/(ac+ag+am),{left:ay+ar,width:aq+an,top:ax+aA,height:af+aw}}if("sw"===ao){var au=aD.distance2Point(av.p2),Z=ak.distance2Point(av.p1);ar=-au*aj/(au+aC+Z),an=-aC*aj/(au+aC+Z);var ad=aB.distance2Point(av.p1),W=ai.distance2Point(av.p2);return aA=ad*ap/(ad+ag+W),aw=ag*ap/(ad+ag+W),{left:ay-ar-an,width:aq+an,top:ax+aA,height:af+aw}}}function H(p,g){var s=[p.nw,p.ne,p.se,p.sw],f=Number.MAX_SAFE_INTEGER,r=0;return s.forEach(function(o,t){var i=o.distance2Point(g);f>i&&(f=i,r=t)}),r}function Q(aV,aJ,aP,aS){var aO=["nw","ne","se","sw"],aL=O.oldAbsolutePosition,aZ=aL.left,aK=aL.top,aW=aL.width,aI=aL.height,aN=aL.transform,aU=A.parseTransform(aN).rotate,aT=new q(aZ,aK,aW,aI).rotate(aU),aH=new q(aT.p1.transform2RotateCoord(aU),aW,aI),aX=q.getBoundingRect(aH,aP),aF=new q(aX.p1.transform2RotateCoord(aP),aX.width,aX.height),aG=new q(aJ.rotate(aP).p1.transform2RotateCoord(aP),aJ.width,aJ.height),aQ=H(aF,aT[aS].transform2RotateCoord(aU+aP)),ay=aO[aQ],au=aF[ay],aj=aO[(aQ+2)%4],am=aF[aj],a0=aV.weight(aU+aP),ai=a0.x,aD=a0.y;if("nw"===ay){var an=new w(am,aF[aO[(aQ+1)%4]]),aA=new w(au,aF[aO[(aQ+3)%4]]),aM=new w(am,aF[aO[(aQ+3)%4]]),aR=new w(au,aF[aO[(aQ+1)%4]])}else{"ne"===ay?(an=new w(am,aF[aO[(aQ+3)%4]]),aA=new w(au,aF[aO[(aQ+1)%4]]),aM=new w(am,aF[aO[(aQ+1)%4]]),aR=new w(au,aF[aO[(aQ+3)%4]])):"se"===ay?(an=new w(am,aF[aO[(aQ+1)%4]]),aA=new w(au,aF[aO[(aQ+3)%4]]),aM=new w(am,aF[aO[(aQ+3)%4]]),aR=new w(au,aF[aO[(aQ+1)%4]])):"sw"===ay&&(an=new w(am,aF[aO[(aQ+3)%4]]),aA=new w(au,aF[aO[(aQ+1)%4]]),aM=new w(am,aF[aO[(aQ+1)%4]]),aR=new w(au,aF[aO[(aQ+3)%4]]))}var aq=0,aC=0,ak=0,ap=0,az=null,ax=aG.width,aB=aG.height;if("nw"===ay){var aE=an.distance2Point(aG.p2),ao=aA.distance2Point(aG.p1);aq=-aE*ai/(aE+ax+ao),aC=-ax*ai/(aE+ax+ao);var at=aM.distance2Point(aG.p2),af=aR.distance2Point(aG.p1);ak=-at*aD/(at+aB+af),ap=-aB*aD/(at+aB+af),az={left:aG.p1.x-aq-aC,width:aG.width+aC,top:aG.p1.y-ak-ap,height:aG.height+ap}}else{if("ne"===ay){var ah=an.distance2Point(aG.p1),av=aA.distance2Point(aG.p2);aq=ah*ai/(ah+ax+av),aC=ax*ai/(ah+ax+av);var ag=aM.distance2Point(aG.p2),aw=aR.distance2Point(aG.p1);ak=-ag*aD/(ag+aB+aw),ap=-aB*aD/(ag+aB+aw),az={left:aG.p1.x+aq,width:aG.width+aC,top:aG.p1.y-ak-ap,height:aG.height+ap}}else{if("se"===ay){var ac=an.distance2Point(aG.p1),ad=aA.distance2Point(aG.p2);aq=ac*ai/(ac+ax+ad),aC=ax*ai/(ac+ax+ad);var al=aM.distance2Point(aG.p1),ab=aR.distance2Point(aG.p2);ak=al*aD/(al+aB+ab),ap=aB*aD/(al+aB+ab),az={left:aG.p1.x+aq,width:aG.width+aC,top:aG.p1.y+ak,height:aG.height+ap}}else{if("sw"===ay){var ar=an.distance2Point(aG.p2),aY=aA.distance2Point(aG.p1);aq=-ar*ai/(ar+ax+aY),aC=-ax*ai/(ar+ax+aY);var ae=aM.distance2Point(aG.p1),aa=aR.distance2Point(aG.p2);ak=ae*aD/(ae+aB+aa),ap=aB*aD/(ae+aB+aa),az={left:aG.p1.x-aq-aC,width:aG.width+aC,top:aG.p1.y+ak,height:aG.height+ap}}}}}return new q(new q(az).rotate(-aP).p1.transform2RotateCoord(-aP),az.width,az.height)}var O=this,N=O.getAllSubEqxComps();R(N,L,S,G,I,l,d,P,T,M),O.autoSize()}},{key:"onResizeEnd",value:function(){this.eqxItems.forEach(function(d){return d.onResizeEnd()}),B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"onResizeEnd",this).call(this)}},{key:"onRotateStart",value:function(){return this.eqxItems.forEach(function(d){return d.onRotateStart()}),B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"onRotateStart",this).call(this)}},{key:"onRotateEnd",value:function(){this.eqxItems.forEach(function(d){return d.onRotateEnd()}),B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"onRotateEnd",this).call(this)}},{key:"onRotate",value:function(M){function G(g,f){g.eqxItems.forEach(function(h){h.isGroupItem()&&(f.push(h),G(h,f))})}function I(g,f){g.eqxItems.forEach(function(h){h.isGroupItem()?I(h,f):f.push(h)})}function t(g,f){var h=A.parseTransform(g.oldTransform).rotate;g.updateCss({transform:"rotateZ("+(h+f)+"deg)"})}function d(ab,af,V){if(!ab.isEditLocked){var X=A.parseTransform(ab.oldTransform).rotate,U=A.parseTransform(ab.getTransform()).rotate,S=ab.getAbsolutePos(),ad=S.width,ag=S.height,ac=S.top,ae=S.left,T=new q(ae,ac,ad,ag),Y=T.center(),aa=Y.pointRotate2Point(V,X+af-U),Z=aa.x-Y.x,W=aa.y-Y.y;T.move(Z,W),ab.updateCss({top:T.p1.y,left:T.p1.x,transform:"rotateZ("+(X+af)+"deg)"})}}var O=[],R=[],Q=this.getAbsolutePos(),l=Q.width,J=Q.height,L=Q.top,K=Q.left,H=new q(K,L,l,J),P=H.center(),N=A.parseTransform(this.oldTransform).rotate;I(this,O),G(this,R),O.forEach(function(e){return d(e,(M-N+360)%360,P)}),R.forEach(function(e){return t(e,(M-N+360)%360)}),B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"onRotate",this).call(this,"rotateZ("+(M+360)%360+"deg)",{type:"rotate",source:this})}},{key:"updateTransform",value:function(d){this.css.transform=d,this.$item.css({transform:d})}},{key:"updateCss",value:function(f){var d=this;Object.keys(f).forEach(function(e){d.css[e]=f[e]})}},{key:"updateLeftTop",value:function(f,d){this.eqxItems.forEach(function(e){e.updateLeftTop(f,d)})}},{key:"isGroupItem",value:function(){return !0}},{key:"getName",value:function(){return this.name||"组合"}},{key:"toJson",value:function(){var f=this.css.transform,d={id:this.id,name:this.name,compIds:this.eqxItems.map(function(g){return g.id})};return f&&(d.css={transform:f}),this.isFunTemplate()&&(d.type=1),d}},{key:"autoSizeTopDown",value:function(d){this._updateSize(),d&&"rotate"===d.type&&d.source===this&&!this.hasSubItemsLocked()||this.eqxItems.forEach(function(e){return e.autoSizeTopDown(d)}),this.fire("autoSizeTopDown.after")}},{key:"getAbsolutePos",value:function(){function f(M,S){var G=[];M.eqxItems.forEach(function(aa){var ae=aa.getAbsolutePos(),W=ae.top,V=ae.left,n=ae.width,ac=ae.height,af=ae.transform,ab=A.parseTransform(af).rotate,ad=new q(V,W,n,ac).rotate(ab),U=ad.nw,X=ad.ne,Z=ad.sw,Y=ad.se;G.push.apply(G,[U,X,Z,Y])});for(var I=G[0].transform2RotateCoord(S),p=I,l=I,P=I,T=I,N=1;N<G.length;N++){I=G[N].transform2RotateCoord(S),I.x<T.x&&(T=I),I.x>l.x&&(l=I),I.y<p.y&&(p=I),I.y>P.y&&(P=I)}var R=Number.MIN_SAFE_INTEGER,J=Number.MAX_SAFE_INTEGER,L=Number.MIN_SAFE_INTEGER,K=Number.MAX_SAFE_INTEGER;[p,l,P,T].forEach(function(g){g.x>R&&(R=g.x),g.x<J&&(J=g.x),g.y>L&&(L=g.y),g.y<K&&(K=g.y)});var H=new j(J,K).transform2RotateCoord(-S),Q=new j(R,L).transform2RotateCoord(-S),O=new q(H,Q,S).rotate(-S);return{top:O.p1.y,left:O.p1.x,width:O.width,height:O.height,transform:M.getTransform()}}if(!this.eqxItems.length){return{top:0,left:0,width:0,height:0,transform:""}}var d=A.parseTransform(this.getTransform()).rotate;return f(this,d)}},{key:"render",value:function(){return this.rendered?this.$group:(this.$group=$('<li class="item item-group" id="'+this.id+'">\n                <div class="group-box">\n                    <ul class="group-items"></ul>\n                </div>\n            </li>'),this._updateSize().autoZIndex().$group.attr("eqx-id",this.id),this.$groupBox=this.$group.find(".group-box"),this.$ul=this.$groupBox.find("ul"),this.$ul.append(this.eqxItems.map(function(d){return d.render()})),this.rendered=!0,this.$group)}},{key:"getZIndex",value:function(){for(var f=-1,d=0;d<this.eqxItems.length;d++){var g=this.eqxItems[d];f=Math.max(g.getZIndex(),f)}return f}},{key:"autoZIndex",value:function(){return this.eqxItems.forEach(function(d){return d.autoZIndex()}),this.$item&&this.$item.css({zIndex:this.getZIndex()}),this}},{key:"addEqxItems",value:function(){for(var g=this,f=arguments.length,h=Array(f),d=0;d<f;d++){h[d]=arguments[d]}h.forEach(function(e){g.addEqxItem(e)})}},{key:"addEqxItem",value:function(d){d&&!this.eqxItems.includes(d)&&(this.eqxItems.push(d),d.group=this,d.parent=this)}},{key:"isEditLocked",get:function(){return this.eqxItems.every(function(d){return d.isEditLocked})},set:function(d){this.eqxItems.forEach(function(f){f.isGroupItem()||(f.isEditLocked=!1)})}},{key:"$item",get:function(){return this.$group}},{key:"zIndex",get:function(){return this.css.zIndex||this._initGroupIndex()},set:function(d){this.css.zIndex=d}},{key:"name",get:function(){return this.json.name},set:function(d){this.json.name=d}}]),a}(D);z.exports=y},function(c,b,f){function a(){switch(arguments.length){case 2:this.p1=arguments[0],this.p2=arguments[1],this.A=this.p1.y-this.p2.y,this.B=this.p2.x-this.p1.x,this.C=this.p1.x*this.p2.y-this.p2.x*this.p1.y;break;case 3:this.A=arguments[0],this.B=arguments[1],this.C=arguments[2];break;default:throw new Error("Invalid arguments for Line")}}var d=f(139);a.prototype.toString=function(){},a.prototype.distanceTo=function(g){if(g instanceof d){return this.distance2Point(g)}if(g instanceof a){return this.distance2Line(g)}throw new Error("Unknown geo type")},a.prototype.whichSide=function(g){return this.A*g.x+this.B*g.y+this.C},a.prototype.distance2Point=function(g){return Math.abs(this.A*g.x+this.B*g.y+this.C)/Math.sqrt(this.A*this.A+this.B*this.B)},a.prototype.distance2Line=function(g){return Math.abs(this.C-g.C)/Math.sqrt(this.A*this.A+this.B*this.B)},a.prototype.slope=function(){return -(this.A/this.B)},a.getIncludedAngle=function(j,h){var l=j.slope(),g=h.slope(),k=Math.abs((g-l)/(1+l*g));return 180*Math.atan(k)/Math.PI},window.Line=a,c.exports=a},function(x,C,k){function q(c){if(Array.isArray(c)){for(var a=0,d=Array(c.length);a<c.length;a++){d[a]=c[a]}return d}return Array.from(c)}function j(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var b=function(){function a(f,d){for(var h=0;h<d.length;h++){var c=d[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),A=k(413),D=k(127),z=k(124),B=k(72).COMP_TYPE,m=console.log.bind(console,"[EqxLayer]"),g=k(25).isPc,y=k(23).$loadParallax,v=k(96).qiniuZoom,w=(k(75).ANIMATION_TYPE,function(){function a(c,d){j(this,a),this.eqxPage=d,this.eqxItems=[],this.$layer=null,this.$layerBox=null,this.layerBg=null,this.$ul=null,this.lock=!1,this.allowOperate=!0,this.json=c,this.name=c.name,this.items=c.items,this.id=c.id,this._lastHash=c.hash}return b(a,[{key:"getEqxComps",value:function(){return this.eqxItems.filter(function(c){return !c.isGroupItem()})}},{key:"removeEqxItem",value:function(d){d.group&&d.group.removeEqxItem(d);var c=this.eqxItems.findIndex(function(e){return e===d});c>-1&&this.eqxItems.splice(c,1),d.destroy()}},{key:"setAllowOperate",value:function(c){return this.allowOperate=c,this.allowOperate}},{key:"_getCompsAndGroups",value:function(){for(var f=[],d=[],h=0;h<this.items.length;h++){var c=this.items[h];/group/.test(c.id)?d.push(c):f.push(c)}return{comps:f,groups:d}}},{key:"_initEqxGroup",value:function(c){return new A(c,this)}},{key:"_initEqxComp",value:function(d){var c=z[d.type],f=this.eqxPage.id||"";return c&&c.prototype instanceof D?new c(d,this):void console.error("In Valid Type: "+d.type+" @Page"+f,d)}},{key:"_getLayerTranslate3dz",value:function(){for(var h=this.id,d=this.eqxPage,p=d.pageJson.properties.oneShot.distance,c=void 0===p?320:p,l=void 0,f=0;f<d.eqxLayerList.length;f++){if(d.eqxLayerList[f].id===h){l=f*c;break}}return l}},{key:"init",value:function(){return this}},{key:"initEqxItems",value:function(f,c){var i=this;if(!f){var h=this._getCompsAndGroups();f=h.comps,c=h.groups}var d=[];return f.map(function(l){return l.name=i.eqxPage.getCompName(l),l}).filter(function(n){var l=n.type;return"EqxBackground"!==B[l]&&"EqxGravity"!==B[l]}).sort(function(p,o){var r=p.css.zIndex,l=o.css.zIndex;return r-l}).map(function(n,l){return n.num=l+1,n.css.zIndex=l+1,n}).forEach(function(n){var l=i._initEqxComp(n);l&&i.eqxItems.push(l),d.push(l)}),d.push.apply(d,q(c.map(function(n){var l=i._initEqxGroup(n);return i.eqxItems.push(l),l.itemIds.forEach(function(o){return l.addEqxItem(i.getEqxItem(o))}),l}))),d}},{key:"initEqxItem",value:function(d){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,f=this;return d.isGroupItem()?(c>-1?f.eqxItems.splice(c,0,d):f.eqxItems.push(d),d.addEqxItems.apply(d,q(d.itemIds.map(function(h){return f.getEqxItem(h)})))):c>-1?f.eqxItems.splice(c,0,d):f.eqxItems.push(d),this}},{key:"renderEqxItems",value:function(){for(var f=[],d=this.eqxItems.length,h=d-1;h>=0;h--){var c=this.eqxItems[h];c.rendered||f.push(c.render())}return this.$ul.append(f),this}},{key:"renderEqxItem",value:function(d,c){c&&d.rendered&&(d.rendered=!1,d.destroy());var f=d.group?d.group.$ul:this.$ul;return d.rendered||f.append(d.render()),d.isGroupItem()||"16"!==d.type||(this.hasPipButton=1),this}},{key:"toJson",value:function(){var O=[],T=[],H=this.flash||{},K=H.duration,G=void 0===K?null:K,E=H.durationType,U=void 0===E?0:E,Q=this.json,S=Q.thumbnail,J=Q.area,F=Q.pipButton,P=Q.id,L=Q.displayed,N=Q.screenBg;this.eqxItems.sort(function(d,c){return d.zIndex-c.zIndex});for(var M=0;M<this.eqxItems.length;M++){var I=this.eqxItems[M];I instanceof A?T.push(I.toJson()):O.push(I.toJson())}if(null!==G&&null!==U){var R={duration:G,durationType:U}}return{id:P,area:J,flash:R,elems:O,groups:T,displayed:L,thumbnail:S,pipButton:F,screenBg:N,name:this.name,hash:this._lastHash,compIds:this.eqxItems.map(function(c){return c.id})}}},{key:"updateEqxLayerIndex",value:function(c){this.$layer&&(this.zIndex=c,this.$layer&&this.$layer.css({zIndex:c}))}},{key:"isEqxLayer",value:function(){return !0}},{key:"render",value:function(){var p=this.eqxPage.pageJson,F=void 0===p?{}:p,h=F.properties.oneShot,l=void 0===h?{}:h,f=this.eqxScene.config.mode,d=F.properties.longPage,E=void 0===d?null:d,G=E?E+"px":"100%";if(this.$layer=$('<section class="layer" id="'+this.id+'" style="position: absolute;width: 100%;height: '+G+';">\n                <div class="layer-box">\n                    <ul id="edit_area" class="layer-items edit_area weebly-content-area weebly-area-active"></ul>\n                </div>\n            </section>'),this.$layerBox=this.$layer.find(".layer-box"),this.$ul=this.$layerBox.find("ul"),this.$layer.css({zIndex:this.zIndex}),this.initEqxItems(),this.renderEqxItems(),l.isOpen&&"view"===f){var u="translate3d(0px, 0px, "+(-this._getLayerTranslate3dz()||0)+"px)";this.$layer.css({transform:u})}return g()||(window.top===window?this.setUlTopAndLeft():this.setIframeUlTopAndLeft()),console.log("这里初始化层背景"),this.renderBg(this.addBgJson(this.json.screenBg)),this.display(),this.initElementsParallax(),this.$layer}},{key:"initElementsParallax",value:function(){var d=this,c=this.items,f=c.some(function(o){var l=o.properties||{},p=l.GSensor,h=void 0===p?{}:p;return h.isUsed});f&&y().then(function(){var e=window.Parallax;d.parallax=new e(d.$ul.get(0)),console.log("初始化组件重力感应",d)})}},{key:"display",value:function(){this.displayed?(this.$layer.show(),this.allowOperate=!0):(this.$layer.hide(),this.allowOperate=!1)}},{key:"hide",value:function(){this.$layer&&this.$layer.hide()}},{key:"show",value:function(){this.$layer&&(this.$layer.show(),this.findSpecAnimItem(1))}},{key:"findSpecAnimItem",value:function(){for(var d=arguments.length,c=Array(d),f=0;f<d;f++){c[f]=arguments[f]}this.getEqxComps().forEach(function(p){for(var t=p.compJson.properties.anim,h=void 0===t?[]:t,s=0;s<h.length;s++){var l=h[s];if(c.indexOf(l.animClassify)>-1){p.eleShow();break}}})}},{key:"getEqxItem",value:function(c){return this.eqxItems.find(function(d){return d.id===c})}},{key:"hasGroupsInLayer",value:function(){return this.items.some(function(c){return/group/.test(c.id)})}},{key:"getLayerTreeStructure",value:function(){function d(e){return e.forEach(function(h){return h.isGroupItem()&&d(h.eqxItems)}),e.sort(function(l,r){var h=l.getZIndex(),p=r.getZIndex();return c?h-p:p-h}),e}var c=arguments.length>0&&void 0!==arguments[0]&&arguments[0],f=this.getDirectItems();return d(f)}},{key:"updateItemsIndexBySplit",value:function(i,F){var h=this.getLayerTreeStructure(!0),f=F.length,d=h.indexOf(F[0]),p=h.indexOf(F[f-1]);if(i.startsWith("+")){var G=(/\+(\d+|\+)/.exec(i)||[])[1]||1;G=Math.min(G,h.length-p),h.splice.apply(h,[d+G,0].concat(q(h.splice(d,f))))}else{if(!i.startsWith("-")){throw new TypeError("invalid action: "+i)}var l=(/-(\d+|\+)/.exec(i)||[])[1]||1;l=Math.min(l,d),h.splice.apply(h,[d-l,0].concat(q(h.splice(d,f))))}var E=this._getCompsFromTree(h,!0);this.updateCompsIndex(E,!0)}},{key:"updateItemIndex",value:function(p,H){if(p&&H){var h=H.getZIndex(),l=this.getLayerTreeStructure(!0),f=H.group?H.group.eqxItems:l,d=f.indexOf(H);if("++"===p){f.push(f.splice(d,1)[0])}else{if("--"===p){f.unshift(f.splice(d,1)[0])}else{if(p.startsWith("+")){var F=(/\+(\d+|\+)/.exec(p)||[])[1]||1;F=Math.min(F,f.length-d),f.splice(d+F,0,f.splice(d,1)[0])}else{if(!p.startsWith("-")){throw new TypeError("invalid action: "+p)}var I=(/-(\d+|\+)/.exec(p)||[])[1]||1;I=Math.min(I,d),f.splice(d-I,0,f.splice(d,1)[0])}}}var E=this._getCompsFromTree(f,!0);this.updateCompsIndex(E,!0);var G=H.getZIndex();m("updateItemIndex",h,"-->",p,"-->",G,H)}}},{key:"_getCompsFromTree",value:function(f){function c(o,l){var p=o.getZIndex()-l.getZIndex();return h?p:-p}var i=this,h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=[];return f.forEach(function(l){return l.isGroupItem()?d.push.apply(d,q(i._getCompsFromTree(l.eqxItems).sort(c))):d.push(l)}),d}},{key:"updateCompsIndex",value:function(h){for(var d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],p=h.length,c=p-1;c>=0;c--){var l=h[c],f=d?c+1:p-c;l.updateCss({zIndex:f})}this.autoZIndex()}},{key:"autoZIndex",value:function(){this.getDirectItems().forEach(function(c){return c.autoZIndex()})}},{key:"getDirectItems",value:function(){return this.eqxItems.filter(function(c){return !c.group})}},{key:"deleteEqxItem",value:function(f){var d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=this;f.isGroupItem()&&f.eqxItems.forEach(function(i){return h.deleteEqxItem(i)});var c=h.eqxItems.findIndex(function(e){return e===f});c>-1&&h.eqxItems.splice(c,1),f.group&&(c=f.group.eqxItems.findIndex(function(e){return e===f}),c>-1&&f.group.eqxItems.splice(c,1)),d&&f.destroy()}},{key:"addEqxItems",value:function(d){var c,f=this;(c=f.eqxItems).push.apply(c,q(d)),d.forEach(function(h){h.eqxLayer.deleteEqxItem(h,!1),h.eqxLayer=f,f.$ul.append(h.$item)})}},{key:"destroy",value:function(){this.$layer.remove(),this.$layer=null,this.$layerBox=null,this.$ul=null}},{key:"setUlTopAndLeft",value:function(){if(!this.eqxScene.config.disableSetUlTopAndLeft){var d,c;this.width/this.height>=320/486?d=(this.width/(this.height/486)-320)/2:c=(this.height/(this.width/320)-486)/2,d&&this.$ul.css({marginLeft:d}),c&&this.$ul.css({marginTop:c})}}},{key:"setIframeUlTopAndLeft",value:function(){var d,c=(this.width-320)/2,f=(this.height-486)/2;return d=this.width/this.height<=320/486?"scale("+this.width/320+")":"scale("+this.height/486+")",this.$ul.css({marginTop:f,marginLeft:c,transform:d}),{marginLeft:c,marginTop:f}}},{key:"initEqxBgByJson",value:function(f){if(f){var d=f.properties.bgColor,h=f.properties.imgSrc;if(d&&!h){var c='<div class="layer-bg" style="width: 100%; height: 100%; background-color: '+f.properties.bgColor+';"></div>'}else{c='<div class="layer-bg" style="width: 100%; height: 100%;background-image: url(\''+v(h,320,486)+"');\n                        background-size: cover; background-position: 50% 50%;\n                        background-origin: content-box;\"></div>"}return this.layerBg=$('<div style="width: 100%; height: 100%; overflow: hidden;position: absolute;z-index: -1;opacity: '+f.css.opacity+'">\n                '+c+"\n            </div>"),this.layerBg}}},{key:"renderBg",value:function(d){var c=this.$layer.find(".layer-bg");c?this.$layer.append(d):console.error("background already rendered")}},{key:"addBgJson",value:function(c){return this.deleteBg(),this.json.screenBg=c,this.initEqxBgByJson(c)}},{key:"deleteBg",value:function(){this.layerBg&&this.layerBg.remove()}},{key:"updateBgOpacity",value:function(c){this.layerBg.css({opacity:c})}},{key:"displayed",get:function(){var d=this.json.displayed,c=void 0===d||d;return c},set:function(c){this.json.displayed=c}},{key:"zIndex",get:function(){return this.json.zIndex},set:function(c){this.json.zIndex=c}},{key:"width",get:function(){return this.eqxPage.width}},{key:"height",get:function(){return this.eqxPage.height}},{key:"eqxScene",get:function(){return this.eqxPage.eqxScene}},{key:"translate3dz",get:function(){return this._getLayerTranslate3dz()}},{key:"hasPipButton",get:function(){return this.json.pipButton},set:function(c){this.json.pipButton=c}},{key:"thumbnail",get:function(){return this.json.thumbnail},set:function(c){this.json.thumbnail=c}},{key:"area",get:function(){return this.json.area},set:function(c){this.json.area=c}}]),a}());x.exports=w},function(c,b){function f(h,g){if(!(h instanceof g)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function g(k,j){for(var l=0;l<j.length;l++){var h=j[l];h.enumerable=h.enumerable||!1,h.configurable=!0,"value" in h&&(h.writable=!0),Object.defineProperty(k,h.key,h)}}return function(h,j,e){return j&&g(h.prototype,j),e&&g(h,e),h}}(),d=function(){function g(e){f(this,g),this.page=e}return a(g,[{key:"copyScreen",value:function(p){var k=this.screens[p],u=this.page.addEmptyEqxLayer(p+1),j=this.page.groupManager,q=this.page.pageJson.properties,m=q.triggerGroup,h=k.getDirectItems(),l=j.copyItems(h,0,0,m);u.addEqxItems(l),this.pipLayerHandler()}},{key:"addScreen",value:function(){var i=this.page.addEmptyEqxLayer(),h=this.page.pageJson.properties.pip;h&&h.used||this.page.switchCurrentLayer(i),this.showCurrentScreen(),this.pipLayerHandler()}},{key:"pipLayerHandler",value:function(){var i=this.page.eqxLayerList,h=i.findIndex(function(j){return j.hasPipButton});h!==-1&&(i.push(i.splice(h,1)[0]),i.forEach(function(k,j){return k.updateEqxLayerIndex(j+1)}))}},{key:"deleteScreen",value:function(i){var h=this.screens[i];this.page.deleteEqxLayer(h)}},{key:"showCurrentScreen",value:function(){var h=this;this.screens.forEach(function(e){e===h.currentScreen?(e.$layer&&e.$layer.show(),e.setAllowOperate(!0)):(e.$layer&&e.$layer.hide(),e.setAllowOperate(!1))})}},{key:"switchScreen",value:function(i){var h=this.screens[i];this.page.switchCurrentLayer(h),this.showCurrentScreen(),this.pipLayerHandler()}},{key:"getCompsInScreen",value:function(h){return h?h.eqxItems.slice().filter(function(i){return !i.isGroupItem()}):[]}},{key:"findImageCompInScreen",value:function(i){var h=this.getCompsInScreen(i);return h.find(function(k){var j=k.compJson.properties;return !!j.pip})}},{key:"updateCompsTranslateZ",value:function(k,j,m){if(k&&k.length){var h=m||this.currentScreen,l=this.screens.findIndex(function(i){return i===h});return k.forEach(function(i){var o=i.compJson.properties;o.translate3dZ=l*(j||320)}),k}}},{key:"screens",get:function(){return this.page.eqxLayerList.filter(function(h){return !h.hasPipButton}).sort(function(i,h){return i.zIndex-h.zIndex})}},{key:"currentScreen",get:function(){return this.page.getCurrentLayer()}},{key:"currentScreenIndex",get:function(){var h=this;return this.screens.findIndex(function(e){return e===h.currentScreen})}}]),g}();c.exports=d},function(z,E,m){function v(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var k=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),b=m(77),C=b.RAW_EVENT,F=b.EQX_EVENT,B=m(27).throttle,D="ontouchstart" in window,q=D?"touchstart":"mousedown",j=D?"touchmove":"mousemove",A=D?"touchend":"mouseup",w=D?"touchcancel":"mouseleave",y=m(24).openUrl,x=function(){function a(c,d){v(this,a),d||this.iteratorScene(c)}return k(a,[{key:"iteratorScene",value:function(d){var c=this,f=null;d.pageJson.properties.triggerGroup&&d.pageJson.properties.triggerGroup instanceof Array&&d.pageJson.properties.triggerGroup.forEach(function(e){var g=d;"e"==e.targetType&&(g=d.getEqxCompById(e.targetId)),g&&(e.eventType===C.click?(f=d.getEqxCompById(e.sourceId),f&&f.$li&&f.$li.on("click",function(h){h.preventDefault(),h.stopPropagation(),c.triggerEleByState(g,e,d)})):e.eventType===C.shake?c.addPageTrigger(g,e,d):e.eventType===C.taphold?(f=d.getEqxCompById(e.sourceId),f&&f.$li&&c.addTapholdTrigger(f,g,e,d)):e.eventType===C.slide?(f=d.getEqxCompById(e.sourceId),f&&f.$li&&c.addSlideTrigger(f,g,e,d)):e.eventType===C.mediaEnded?(f=d.getEqxCompById(e.sourceId),f&&f.$context&&("o"===f.compJson.type?f.$context.on("ended",function(){c.triggerEleByState(g,e,d)}):f.soundAgent&&$(f.soundAgent.audio).on("ended",function(){c.triggerEleByState(g,e,d)}))):e.eventType===C.mediaCanplay?(f=d.getEqxCompById(e.sourceId),f&&f.$context&&("o"===f.compJson.type?f.$context.on("canplay",function(){c.triggerEleByState(g,e,d)}):f.soundAgent&&$(f.soundAgent.audio).on("canplay",function(){c.triggerEleByState(g,e,d)}))):e.eventType===C.mediaPlaying?(f=d.getEqxCompById(e.sourceId),f&&f.$context&&("o"===f.compJson.type?f.$context.on("playing",function(){c.triggerEleByState(g,e,d)}):f.soundAgent&&$(f.soundAgent.audio).on("playing",function(){c.triggerEleByState(g,e,d)}))):e.eventType===C.animStart?(f=d.getEqxCompById(e.sourceId),f&&f.$boxDiv&&f.$boxDiv.on("animationstart",function(){c.triggerEleByState(g,e,d)})):e.eventType===C.animEnd?(f=d.getEqxCompById(e.sourceId),f&&f.$boxDiv&&f.$boxDiv.on("animationend",function(){c.triggerEleByState(g,e,d)})):e.eventType===C.animIteration&&(f=d.getEqxCompById(e.sourceId),f&&f.$boxDiv&&f.$boxDiv.on("animationiteration",function(){c.triggerEleByState(g,e,d)})))})}},{key:"addSlideTrigger",value:function(J,L,l,u){function d(g){g.stopPropagation();var f=D?g.originalEvent.targetTouches[0].pageX:g.pageX,e=D?g.originalEvent.targetTouches[0].pageY:g.pageY;p=e-M,H=f-K,(Math.abs(H-I.left)>10||Math.abs(p-I.top)>10)&&B(function(i,h){G.triggerEleByState(i,h,u)},50,100)(L,l),J.$li.css({top:p+"px",left:H+"px"})}function c(){H=I.left,p=I.top,J.$li.css({top:p,left:H}),$(J.$li).off(j,d),$(document).off(A,c)}var K=0,M=0,G=this,I=J.compJson.css,H=I.left,p=I.top;J.$li.on(q,function(f){f.preventDefault(),f.stopPropagation();var g=D?f.originalEvent.targetTouches[0].pageX:f.pageX,e=D?f.originalEvent.targetTouches[0].pageY:f.pageY;K=g-H,M=e-p,$(J.$li).on(j,d),$(document).on(A,c)})}},{key:"addTapholdTrigger",value:function(H,N,l,s){function h(c){c.preventDefault(),c.stopPropagation(),M=D?c.originalEvent.targetTouches[0].pageX:c.pageX,K=D?c.originalEvent.targetTouches[0].pageY:c.pageY,H.$li.bind(A,I).bind(w,I).bind(j,d),G=(new Date).getTime()/1000,L()}function d(f){var c=D?f.originalEvent.targetTouches[0].pageX:f.pageX,g=D?f.originalEvent.targetTouches[0].pageY:f.pageY;(Math.abs(c-M)>10||Math.abs(g-K)>10)&&I()}function L(){var c=(new Date).getTime()/1000,f=c-G;f>=2?(p.triggerEleByState(N,l,s),J=!0):u=setTimeout(L,500)}function I(){if(J){if(l.targetStateReverse){var c=JSON.parse(JSON.stringify(l));switch(c.targetState){case F.show:c.targetState=F.hide,p.triggerEleByState(N,c,s);break;case F.hide:c.targetState=F.show,p.triggerEleByState(N,c,s);break;case F.play:p.triggerEleByState(N,l,s)}}J=!1}clearTimeout(u),H.$li.unbind(A,I).unbind(w,I).unbind(j,d)}var G=0,u=null,p=this,M=0,K=0,J=!1;H.$li.find("img").addClass("taphold_image"),H.$li.on(q,h)}},{key:"addPageTrigger",value:function(n,I,h){if(window.DeviceMotionEvent){this.shakeAudio||(this.shakeAudio=document.createElement("audio"),this.shakeAudio.src=m(418));var f=this,d=4000,G=0,J=0,p=0,H=0,g=100;window.addEventListener("devicemotion",function(t){var r=t.accelerationIncludingGravity,s=r.x,i=r.y,o=r.z,l=(new Date).getTime();if(l-G>g){var c=parseInt(l-G);G=l;var e=Math.abs(s+i+o-J-p-H)/c*10000;e>d&&h.displayed?(g=2000,f.triggerEleByState(n,I,h)):g=100,J=s,p=i,H=o}},!1)}}},{key:"triggerEleByState",value:function(f,d,g){switch(window._tracker_api_&&window._tracker_api_.trigger&&window._tracker_api_.trigger(g.pageJson.id+"_"+d.sourceId,d.eventType),d.targetState){case F.show:setTimeout(function(){f.eleShow(),f.triggerHide=!1},1000*d.delay);break;case F.hide:setTimeout(function(){f.eleHide(),f.triggerHide=!0},1000*d.delay);break;case F.random:f.busy||(f.busy=!0,setTimeout(function(){f.showRandomImg(),f.busy=!1},1000*d.delay));break;case F.play:"o"==f.compJson.type?f.playVideo():f.soundAgent&&(f.soundAgent.audio.paused?f.soundAgent.startPlay():f.soundAgent.stopPlay(),$(f.soundAgent.audio).on("ended",function(){return f.soundAgent.manager.onEnd(f.soundAgent)}));break;case F.link:setTimeout(function(){d.targetContent.startsWith("http://")&&window.location.href.startsWith("https://")&&(d.targetContent=d.targetContent.replace("http://","https://")),y(d.targetContent,g.pageJson.id)},1000*d.delay);break;case F.page:setTimeout(function(){f.eqxScene.pageScroll.goToPageById(+d.targetContent)},1000*d.delay);break;case F.phone:window.location.href="tel:"+d.targetContent;break;case F.position:var c=f.compJson.css.top;-c>0?g.touchPos=0:-c<g.pLen?g.touchPos=g.pLen:g.touchPos=-c,g.doTransform(g.touchPos,100);break;case F.anim:f.eleHide(),f.$li.offset(),f.eleShow();break;default:return !1}}},{key:"compHasTrigger",value:function(d,c){return d.some(function(f){return f.targetId===c&&(f.targetState===F.hide||f.targetState===F.show)})}}]),a}();z.exports=x},function(b,a,c){b.exports=c.p+"images/wxShake-3a1ea8.mp3"},function(x,C,k){function q(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function j(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var A=function(){function a(f,d){for(var h=0;h<d.length;h++){var c=d[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),D=k(132),z=k(24).resolveUrl,B=k(22),m=k(25).isWeixin,g=k(82).getWxJSSDK,y=k(25).mobilecheck,v=k(25).isIOS,w=function(c){function a(h,i){q(this,a);var f=j(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,h,i));f.manager=i;var d=f.master.pageJson.properties.music;return f.soundJson=d,f.type=6,m()&&(f.wxJssdk=g()),f.initAudio(),f.init$audio(),f.register(),f.addListeners(),f}return b(a,c),A(a,[{key:"initAudio",value:function(){this.isSoundValid()&&(this.audio=new window.Audio,this.audio.src=z(B.FILE,this.soundJson.url),this.audio.loop=!0)}},{key:"init$audio",value:function(){this.isSoundValid()&&(this.$audio=$('<div class="bgm-btn"></div>'),this.$audio.appendTo(this.master.eqxScene.$ele))}},{key:"addListeners",value:function(){var d=this;this.$audio&&this.$audio.on(y()?"touchend":"click",function(e){e.stopPropagation(),d.audio.paused?d.start():d.pause()})}},{key:"start",value:function(){var h=this.master;if(h.displayed){var f=function(n,i){4===n.readyState?(n.paused&&n.play(),i()):(n.load(),$(n).one("canplay",function(){n.play(),i()}))};if(this.isSoundValid()){var l=this,d=this.audio;m()?this.wxJssdk.then(function(){wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){f(d,function(){l.startRotate(),l.manager.onPlay(l)})}})}):f(d,function(){l.startRotate(),l.manager.onPlay(l)})}else{this.manager.onPlay(this)}}}},{key:"pause",value:function(){this.audio&&this.audio.pause(),this.stopRotate()}},{key:"hide",value:function(){this.$audio&&this.$audio.hide(),this.pause(),this.audio&&(this.audio.currentTime=0)}},{key:"destroy",value:function(){this.soundJson=null,this.audio=null,this.$audio=null}},{key:"down",value:function(){this.audio&&(this.audio.volume=0.1)}},{key:"restore",value:function(){this.audio&&(this.audio.volume=1)}},{key:"startRotate",value:function(){this.$audio&&(this.$audio.show(),this.$audio.addClass("rotate"))}},{key:"stopRotate",value:function(){this.$audio&&this.$audio.removeClass("rotate")}},{key:"isSoundValid",value:function(){return !(!this.soundJson||!this.soundJson.url)}},{key:"update",value:function(d){switch(d.type){case"pause":this.pause();break;case"hide":this.hide();break;case"down":v()?this.pause():this.down();break;case"restore":v()?this.start():this.restore();break;case"play":this.start()}}}]),a}(D);x.exports=w},function(k,w,g){function j(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function f(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var q=function(){function a(o,l){for(var p=0;p<l.length;p++){var c=l[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),x=g(415),m=g(22),v=g(353),h=g(25).mobilecheck,d=function(c){function a(l,o){j(this,a);var i=f(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,l,o));return i.pixelRatio=1,i}return b(a,c),q(a,[{key:"render",value:function(){var A=this,u=this.eqxPage,C=u.pageJson,p=C.properties.longPage,B=void 0===p?null:p,z=B?B+"px":"100%",l=u.getPageWidth(),y=u.getPageHeight();return this.$layer=$('<section class="layer pip-layer" style="position: absolute;width: 100%;height: '+z+';">\n                <div class="layer-box" style="width: 100%;height: 100%;">\n                    <ul style="position: absolute;width: '+l+"px;height: "+y+'px;"></ul>\n                </div>\n            </section>'),this.$layerBox=this.$layer.find(".layer-box"),this.$ul=this.$layerBox.find("ul"),this.initPipCanvasNode(),this.renderPipButton(),setTimeout(function(){A.adaptive()}),this.$layer}},{key:"adaptive",value:function(){if(h()){var A=this.eqxPage,u=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,C=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,p=A.getPageWidth(),B=A.getPageHeight(),z=(u-p)/2,l=(C-B)/2;if(u/p>C/B){var y=u/p}else{y=C/B}this.$ul.css({left:z,top:l,transform:"scale("+y+")",transformOrigin:"center center 0"})}}},{key:"renderPipButton",value:function(){var r=this.eqxPage,p=r.pageJson.elements,u=void 0===p?[]:p,l=u.find(function(i){return"16"===i.type});if(l){var s=new v(l,this);this.renderEqxItem(s),r.pip.btn=s,r.pip.$btn=s.$li}}},{key:"initPipCanvasNode",value:function(){var H=this,M=H.eqxPage,B=M.pageJson.properties.pip,D=void 0===B?{}:B,A=M.pageJson.extend||{},y=A.screens,K=void 0===y?[]:y,N=M.pip={index:0,radio:1,fps:60,scale:0.985,direction:1,init:!0},J=N.$pip=$('<li style="position: absolute;top: 0;left: 0;"></li>'),L=M.getPageWidth(),C=M.getPageHeight(),z=N.$canvas=$('<canvas style="width: '+L+"px;height: "+C+'px;"></canvas>'),I=K.filter(function(i){return !i.pipButton});2===D.mode&&(N.index=I.length-2,N.radio=H.__radio(I[N.index+1].thumbnail.w,L,I[N.index+1].area.width),N.direction=0),N.context=z[0].getContext("2d");var E=H._getPixelRatio(N.context);H.pixelRatio=E;var G=E*L,F=E*C;z[0].width=G,z[0].height=F,J.append(z),H.$ul.append(J),H._preload(I).then(function(){H._draw(N,D,I,G,F),H._bind$btnEvent(N,D,I,G,F)})["catch"](function(){console.log("画中画图片预加载失败")})}},{key:"__radio",value:function(p,o,r){var l=1;return l=p/o!==2?r/p:r/p*2}},{key:"_draw",value:function(A,E,y,z,p){function l(){A.direction=A.direction?0:1,1===E.mode&&A.direction?A.btn.showForwardButton():1!==E.mode||A.direction?2===E.mode&&A.direction?A.btn.showBackButton():2!==E.mode||A.direction||A.btn.showForwardButton():A.btn.showBackButton()}function C(I,M,u,i,L,N,K,G,o,J,H){D?I.drawImage(M,0,0,u,i,o/(L-K)*(1-H)*z,J/(N-G)*(1-H)*p,z*H,p*H):I.drawImage(M,0,0,u,i,o/(L/2-K)*(1-H)*z,J/(N/2-G)*(1-H)*p,z*H,p*H)}function F(H,K,u,i,J,L,I,G,o){D?H.drawImage(K,I-(J/o-J)*(I/(u-J)),G-(L/o-L)*(G/(i-L)),J/o,L/o,0,0,z,p):H.drawImage(K,2*(I-(J/o-J)*(I/(u/2-J))),2*(G-(L/o-L)*(G/(i/2-L))),2*J/o,2*L/o,0,0,z,p)}var B=this,D=!(y[A.index].thumbnail.w*B.pixelRatio/z==2);if(A.direction&&A.index+1<y.length){if(A.radio<B.__radio(y[A.index+1].thumbnail.w*B.pixelRatio,z,y[A.index+1].area.width*B.pixelRatio)){if(!y[++A.index+1]){return void (E.playback&&(A.index=y.length-2,A.radio=B.__radio(y[A.index+1].thumbnail.w*B.pixelRatio,z,y[A.index+1].area.width*B.pixelRatio),l()))}A.radio=1}}else{if(A.direction||!(A.index>=0)){return}if(A.radio>1){if(!y[--A.index]){return void (E.playback&&(A.index=0,A.radio=1,l()))}A.radio=B.__radio(y[A.index+1].thumbnail.w*B.pixelRatio,z,y[A.index+1].area.width*B.pixelRatio)}}A.current=y[A.index],A.next=y[A.index+1],F(A.context,A.next.image,A.next.thumbnail.w,A.next.thumbnail.h,A.next.area.width,A.next.area.height,A.next.area.left,A.next.area.top,A.radio),C(A.context,A.current.image,A.current.thumbnail.w,A.current.thumbnail.h,A.next.thumbnail.w,A.next.thumbnail.h,A.next.area.width,A.next.area.height,A.next.area.left,A.next.area.top,A.radio)}},{key:"_getPixelRatio",value:function(l){var i=l.backingStorePixelRatio||l.webkitBackingStorePixelRatio||l.mozBackingStorePixelRatio||l.msBackingStorePixelRatio||l.oBackingStorePixelRatio||l.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/i}},{key:"_bind$btnEvent",value:function(u,p,z,l,y){var s=this;u.$btn.on("contextmenu",function(i){i.preventDefault()}).on("touchstart mousedown",function(e){function i(){var o=(new Date).getTime();if(u.index>=0&&u.index+1<z.length){if(o-n<1000/u.fps){return void (u.timer=requestAnimationFrame(i))}n=o}if(u.direction&&u.index+1<z.length){u.radio=u.scale*u.radio}else{if(u.direction||!(u.index>=0)){return}u.radio=u.radio/u.scale}delete u.init,s._draw(u,p,z,l,y),u.timer=requestAnimationFrame(i)}e.preventDefault(),cancelAnimationFrame(u.timer);var n=(new Date).getTime();u.timer=requestAnimationFrame(i)}).on("touchend mouseup",function(e){e.preventDefault(),cancelAnimationFrame(u.timer)})}},{key:"_preload",value:function(l){var i=l.length,o=0;return new Promise(function(n,u){for(var t=0;t<i;t++){var e=l[t],p=e.image=new Image;e.thumbnail?(p.src=m.FILE+e.thumbnail.src,p.onload=function(){++o===i&&n()}):u({})}})}}]),a}(x);k.exports=d},function(h,m,f){function g(c){if(Array.isArray(c)){for(var a=0,i=Array(c.length);a<c.length;a++){i[a]=c[a]}return i}return Array.from(c)}function d(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var b=function(){function a(q,o){for(var r=0;r<o.length;r++){var c=o[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(q,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}(),k=f(119).getEvent,p=f(422).getSize,j=f(25),l=function(){function a(c){d(this,a),this._page=c,this.init()}return b(a,[{key:"open",value:function(){var i=this._page,c=i.pageJson.properties;c.oneShot=c.oneShot||{},c.oneShot.isOpen=!0,c.oneShot.perspective=c.oneShot.perspective||320,this.init()}},{key:"play",value:function(){var u=this,q=u._page,w=q.eqxScene.config.mode;if("view"===w&&u.options&&u.options.isOpen&&u.options.auto){var c=u._oneShotMaxTranslateZ(),v=0;!function s(){return v>c||!q.$editDiv?void u.clearAnimation():(u.animationframe_controll=requestAnimationFrame(s),v+=2,void u._updateOneShot$ul(v))}()}}},{key:"reset",value:function(){this.options&&this.options.isOpen&&(this.position=0,this._updateOneShot$ul(0),this.clearAnimation())}},{key:"clearAnimation",value:function(){this.animationframe_controll&&cancelAnimationFrame(this.animationframe_controll)}},{key:"init",value:function(x){var A=this,s=this._page,w=s.pageJson,q=w.properties.oneShot,c=void 0===q?{}:q;if(c.isOpen){isNaN(parseFloat(x))&&(x=parseFloat(c.perspective));var y=$('<div class="one-shot-container"></div>'),z=$('<div class="one-shot-change-wraper"></div>');this.$container=y,z.css({transformStyle:"preserve-3d",transform:"translateZ(0px)",height:"100%",width:"100%"}),this.options=c;var v=s.$editDiv;y.css({width:"100%",height:"100%",perspective:x+"px",transformOrigin:"50% 50% 0",transformStyle:"preserve-3d"}),this.options.deviceWidth=p().width,this.options.showlimit=j.isAndroidPhone()?50:20,this.options.layerNum=s.eqxLayerList.length,s.$pageDiv.append(v),v.children("section.layer").appendTo(z),y.append(z),y.appendTo(v),this.change_element=z.get(0),this._updateOneShot$ul(0),this._addOneShotEvent(),s.eqxLayerList.forEach(function(n,i){i>0&&n.$layer.hide()}),Promise.resolve().then(function(){var o=A._page.eqxBackground,n=void 0===o?null:o;n&&n.$bgEle&&s.$editDiv.prepend(n.$bgEle)})}}},{key:"_updateOneShot$ul",value:function(i){var c=this.change_element;c&&(this._caculateIsShow(i),requestAnimationFrame(function(){c.style.webkitTransform=c.style.transform=c.style.mozTransform="translateZ("+i+"px)"}))}},{key:"_addOneShotEvent",value:function(){var w=this,q=this._page,y=q.eqxScene.config.mode;if("view"===y&&!this.options.auto){this.position=0;var c=void 0,x=void 0,v=void 0,u=this._oneShotMaxTranslateZ();q.$pageDiv.on("mousedown touchstart",function(n){n.stopPropagation(),c=!0,v=0;var i=k(n);x=i.clientY}),q.$pageDiv.on("mousemove touchmove",function(i){i.stopPropagation(),i.preventDefault();var r=i.originalEvent,e=r.changedTouches||r;if(c&&!(e.length>1)){var o=e[0]?e[0]:e;v=w.position+o.clientY-x,v>0?(x=o.clientY,w.position=0,v=0):2*v<-u&&(x=o.clientY,w.position=-u/2,v=-u/2),w._updateOneShot$ul(2*-v)}}),q.$pageDiv.on("mouseup touchend mouseleave",function(){c&&(c=!1,0!==v&&(w.position=v))})}}},{key:"_oneShotMaxTranslateZ",value:function(){var i=this._page,c=Math.max.apply(Math,g(i.eqxLayerList.map(function(n){return parseFloat(n.translate3dz+1)||0})));return c}},{key:"_caculateIsShow",value:function(v){var s=this._page,x=this.options,q=x.perspective,w=x.distance,u=void 0===w?320:w,c=this;s.eqxLayerList.forEach(function(e,r){var i=c._caculateByDistance(q,u*r,v,c.options.showlimit)?"block":"none";e.$layer.css("display",i)})}},{key:"_caculateByDistance",value:function(v,s,x){var q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;if(x>s+v){return !1}var w=s-x;if(w<v){return !0}var u=v/(w+v),c=this.options.deviceWidth*u;return c>=q}}]),a}();h.exports=l,function(){for(var c=0,a=["webkit","moz"],i=0;i<a.length&&!window.requestAnimationFrame;++i){window.requestAnimationFrame=window[a[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[i]+"CancelAnimationFrame"]||window[a[i]+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(q){var s=(new Date).getTime(),e=Math.max(0,16.7-(s-c)),r=window.setTimeout(function(){q(s+e)},e);return c=s+e,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})}()},function(b,a){function c(){var f=document.documentElement.clientWidth||document.body.clientWidth,d=document.documentElement.clientHeight||document.body.clientHeight;return{width:f,height:d}}b.exports={getSize:c}},function(x,C,k){function q(c){if(Array.isArray(c)){for(var a=0,d=Array(c.length);a<c.length;a++){d[a]=c[a]}return d}return Array.from(c)}function j(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var b=function(){function a(p,F){var h=[],l=!0,f=!1,d=void 0;try{for(var E,G=p[Symbol.iterator]();!(l=(E=G.next()).done)&&(h.push(E.value),!F||h.length!==F);l=!0){}}catch(u){f=!0,d=u}finally{try{!l&&G["return"]&&G["return"]()}finally{if(f){throw d}}}return h}return function(c,d){if(Array.isArray(c)){return c}if(Symbol.iterator in Object(c)){return a(c,d)}throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},D=function(){function a(f,d){for(var h=0;h<d.length;h++){var c=d[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),z=k(424),B=k(425),m=k(140),g=m.FtRuleType,y=k(426),v=y.isPlainObject,w=function(){function a(c){j(this,a),this.eqxPage=c;var d=this.eqxPage.pageJson.properties;this.parse(d.groupSettings)}return D(a,[{key:"flatRules",value:function(c){return a.flatRules(c)}},{key:"validRule",value:function(d){var c=this;return d.comps.forEach(function(h){var l=h.id,f=h.properties;f.forEach(function(G,H){var E="undefined"==typeof G?"undefined":A(G);if("object"===E){var t=c.eqxPage.getEqxItem(l);if(!t){return}for(var I=t.compJson.properties.items,n=-1,i=G.fill.join(","),F=0;F<I.length;F++){if(I[F].elements.join(",")===i){n=F;break}}n>-1?f[H]="fill-"+n:f[H]="xxx"}})}),d}},{key:"validRules",value:function(d){var c=this,f=[];return(d||[]).forEach(function(h){c.validRule(h)&&f.push(h)}),f}},{key:"parse",value:function(f){var d=this,l=this.eqxPage;l.getEqxItems().forEach(function(i){i._ft=null}),f=this.flatRules(f);var c=this.validRules(f).filter(function(p){var o=p.type,n=p.comps.filter(function(E){var t=E.id,F=E.properties,u=l.getEqxItem(t);if(!u){return !1}var s=u.filterEditableProps();return F=F.filter(function(i){var r=o+"."+i;return s.includes(r)}),F.length});return n.length}).map(function(i){return new B(i,d)});this.ftRules=c;var h=this.eqxPage.pageJson.properties;return this.rules=h.groupSettings=this.toJson(),c}},{key:"toJson",value:function(){return this.ftRules.map(function(c){return c.toJson()})}},{key:"getEqxItemRelativeFtRules",value:function(d){if(d.isGroupItem()){var c=d.getAllSubEqxItems(),f=[];return this.ftRules.forEach(function(l){var h=l.getEqxItems().some(function(i){return c.includes(i)});h&&f.push(l)}),f}return this.getEqxItemFtRules(d)}},{key:"getEqxItemFtRules",value:function(d){var c=[];return this.ftRules.forEach(function(e){e.getEqxItems().includes(d)&&c.push(e)}),c}},{key:"filterValidFtRules",value:function(){for(var d=0;d<this.ftRules.length;d++){var c=this.ftRules[d],f=c.filterValidFtTerms();f&&d--}}},{key:"findFtTerm",value:function(l,F){for(var f=F.split("."),h=b(f,2),d=h[0],r=h[1],G=0;G<this.ftRules.length;G++){var p=this.ftRules[G];if(p.type===d){var E=p.ftTerms.find(function(c){return c.canApplyTo(l,r)});if(E){return E}}}}},{key:"addFtRule",value:function(d){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ftRules.length;if(d instanceof z?(d.ftRule.deleteFtTerm(d,!0),d=B.ftTermToFtRule(d,this)):d instanceof B||this.validRule(d)&&(d=new B(d,this)),!this.ftRules.includes(d)){return this.ftRules.splice(c,0,d),d}}},{key:"addFtRules",value:function(d){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ftRules.length?this.ftRules.length-1:0;return v(d[0])&&(d=a.flatRules(d)),d.filter(function(h){var f=e.addFtRule(h,c);if(f){return c++,!0}})}},{key:"convertFtTermToFtRule",value:function(d,c){d.ftRule.deleteFtTerm(d,!0),this.addFtRule(d,c)}},{key:"extractFtTermIntoFtRule",value:function(d,c,f){d&&c&&this.canMerge([d.ftRule,c])&&(d.ftRule.deleteFtTerm(d,!0),c.addFtTerm(d,f||0))}},{key:"splitFtRule",value:function(d){var c=this.ftRules.indexOf(d);if(c>-1&&d.ftTerms.length>1){this.deleteFtRule(d);var f=d.split();return this.addFtRules(f,c)}}},{key:"filterSameTypeFtRules",value:function(d){var c=d.type;return this.ftRules.filter(function(f){return f.type===c})}},{key:"canMerge",value:function(d){if(d.length<2){return !1}for(var c=d[0].type,f=1;f<d.length;f++){if(d[f].type!==c){return !1}}return !0}},{key:"mergeFtRules",value:function(d){var c=this;if(d=d.filter(function(h){return c.ftRules.includes(h)}),this.canMerge(d)){var f=d[0];return f.mergeFtRules(d.slice(1)),f}}},{key:"deleteFtTerm",value:function(d,c){d.ftRule.deleteFtTerm(d,c)}},{key:"deleteFtRule",value:function(d){var c=this.ftRules.indexOf(d);return c>-1&&(this.ftRules.splice(c,1),!0)}},{key:"sortFtRule",value:function(f,d){var h=this.ftRules.length;d<0&&(d=0),d>h-1&&(d=h-1);var c=this.ftRules.indexOf(f);return c!==-1&&(this.ftRules.splice(c,1),this.ftRules.splice(d,0,f),!0)}},{key:"sortFtTerm",value:function(d,c){return d.ftRule.sortFtTerm(d,c)}}],[{key:"flatRules",value:function(d){if(!d||Array.isArray(d)){var c=[];return(d||[]).forEach(function(f){f.type===g.editGroup?c.push.apply(c,q(f.comps)):c.push(f)}),c}}}]),a}();x.exports=w},function(j,q,f){function h(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function a(o,l){for(var r=0;r<l.length;r++){var c=l[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),b=f(140),m=b.getEditPropName,v=b.FtRuleType,k=b.FtEditableProps,p=f(142),g=function(){function a(c,e){h(this,a),this.id=c.id,this.prop=c.prop,this.ftRule=e,this.eqxItem=this.ftRule.ftManager.eqxPage.getEqxItem(this.id),this.name=m(this.getFullPropKey())}return d(a,[{key:"getEqxItemFtValue",value:function(){return this.eqxItem&&this.eqxItem.getFtValue(this.getFullPropKey())}},{key:"getFullPropKey",value:function(){return this.ftRule.type+"."+this.prop}},{key:"isValid",value:function(){return this.eqxItem&&!this.eqxItem.isOrphan()&&this.eqxItem.isPropCanEdit(this.getFullPropKey())}},{key:"apply",value:function(){switch(this.ftRule.type){case v.color:return this._applyColor.apply(this,arguments);case v.image:return this._applyImage.apply(this,arguments);case v.content:return this._applyContent.apply(this,arguments);case v.link:return this._applyLink.apply(this,arguments);case v.internalLink:return this._applyInternalLink.apply(this,arguments);case v.telephone:return this._applyPhone.apply(this,arguments);case v.sound:return this._applySound.apply(this,arguments);case v.time:return this._applyTime.apply(this,arguments);case v.code:return this._applyCode.apply(this,arguments);case v.video:return this._applyVideo.apply(this,arguments);case v.input:return this._applyInput.apply(this,arguments);case v.tRandom:return this._applyTRandom.apply(this,arguments);case v.iRandom:return this._applyIRandom.apply(this,arguments)}}},{key:"_applyIRandom",value:function(i){var c=this.eqxItem;return c.compJson.properties.imgs=i,c.updateImg(i[0].src),c}},{key:"_applyTRandom",value:function(i){var c=this.eqxItem;return c.compJson.properties.texts=i,c.updateContent(i[0]),c}},{key:"_applyInput",value:function(i){var c={501:"姓名",502:"电话",503:"邮箱",504:"文本"},l=this.eqxItem;return l.compJson.properties.placeholder=c[i],l.compJson.title=c[i],l.compJson.type=i,l.setInputTitle(c[i]),l}},{key:"_applyVideo",value:function(i){var c=this.eqxItem,l=c.compJson;return l.src=i,c.updateJson(l),c.eqxPage.renderEqxComp(c,!0),c}},{key:"_applyCode",value:function(i){var c=this.eqxItem,l=c.compJson;return l.content=i,c}},{key:"_applyTime",value:function(i){var c=new Date(i).getTime(),l=this.eqxItem;return"e"===l.type?l.updateProp("endTime",c):l.updateProp("startTime",c),l.updateJson(l.compJson),l.eqxPage.renderEqxComp(l,!0),l}},{key:"_updateTrigger",value:function(r,l,u){var c=this.eqxItem,s=c.triggerManager.findEqxItemTriggerItem(c,r,l);if(!s){throw new Error("no trigger")}return s.targetContent=u,c}},{key:"_applySound",value:function(i){var c=this.eqxItem;return c.compJson.sound={id:i.id,name:i.name,src:i.src},c.updateJson(c.compJson),c.eqxPage.renderEqxComp(c,!0),c}},{key:"_applyPhone",value:function(c){return this._updateTrigger("click","phone",c)}},{key:"_applyInternalLink",value:function(c){return this._updateTrigger("click","page",c)}},{key:"_applyLink",value:function(i){var c=this._updateTrigger("click","link",this.eqxItem.getLinkUrl(i));return c}},{key:"_applyContent",value:function(c){return this.eqxItem.updateContent(c)}},{key:"_applyImage",value:function(i,c){return this.eqxItem.editImage(i,c)}},{key:"_applyColor",value:function(w){var s=k,y=this.eqxItem,l=this.ftRule.type+"."+this.prop;if(0===l.indexOf(s.color.fill)){var x=+l.split("-")[1];return y.updateFillColor(x,w),y}switch(l){case s.color.backgroundColor:y.update$boxDiv({backgroundColor:w});break;case s.color.boxShadowColor:var u=p.parseBoxShadow(y.compJson.css.boxShadow);u.color=w;var c=p.getBoxShadowStr(u);y.update$boxDiv({boxShadow:c});break;case s.color.borderColor:y.update$boxDiv({borderColor:w});break;case s.color.color:y.update$boxDiv({color:w});break;case s.color.counterColor:y.update$iconColor(w)}return y}},{key:"deleteSelf",value:function(c){this.ftRule.deleteFtTerm(this,c)}},{key:"canApplyTo",value:function(i,c){return this.eqxItem===i&&this.prop===c}},{key:"parse",value:function(){}},{key:"toFtRuleJson",value:function(){var c=this.ftRule.toJson();return c.comps=[this.toJson()],c}},{key:"toJson",value:function(){return{id:this.id,properties:[this.prop]}}}]),a}();j.exports=g},function(k,w,g){function j(c){if(Array.isArray(c)){for(var a=0,i=Array(c.length);a<c.length;a++){i[a]=c[a]}return i}return Array.from(c)}function f(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var b=function(){function a(o,l){for(var p=0;p<l.length;p++){var c=l[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),q=g(140),x=q.FtRuleType,m=q.getEditPropName,v=q.FtRuleName,h=g(424),d=function(){function a(c,e){f(this,a),this.ruleJson=c,this.ftManager=e,this.ftTerms=this.parse()}return b(a,[{key:"isGroupRule",value:function(){var c=x;return[c.addGroup,c.moveGroup,c.deleteGroup,c.editGroup].includes(this.type)}},{key:"parse",value:function(){var i=this.ruleJson;this.type=i.type,this.value=i.value;var c=this.parseFtTermsByRuleJson(i);return this.calName(i.name,c),c}},{key:"calName",value:function(u){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ftTerms;if(u){this.name=u}else{var z=p.length;if(0===z){return void (this.name="")}if(1===z){var l=m(this.type+"."+p[0].prop)}else{l=v[this.type]}var y=l.length,s=p.map(function(i){return i.eqxItem.getName()}).join("&"),c=s.length;c>14-y&&(s=s.substr(0,14-l.length)+"..."),this.name=s+"-"+l}}},{key:"toJson",value:function(){var c=this.ftTerms.map(function(i){return i.toJson()});return{name:this.name,type:this.type,value:this.value,comps:c}}},{key:"toEmptyJson",value:function(){return{name:this.name,type:this.type,value:this.value,comps:[]}}},{key:"deleteSelf",value:function(){this.ftManager.deleteFtRule(this)}},{key:"filterValidFtTerms",value:function(){for(var i=0;i<this.ftTerms.length;i++){var c=this.ftTerms[i];if(!c.isValid()){var l=this.deleteFtTerm(c);l&&i--}}if(!this.ftTerms.length){return this.deleteSelf(),!0}}},{key:"apply",value:function(){for(var o=arguments.length,l=Array(o),p=0;p<o;p++){l[p]=arguments[p]}var c=this.ftTerms.map(function(i){return i.apply.apply(i,l)});return this.updateFtValue(),c}},{key:"updateFtValue",value:function(){this.ftTerms[0]?this.value=this.ftTerms[0].getEqxItemFtValue():this.value=0}},{key:"getEqxItems",value:function(){var c=[];return this.ftTerms.forEach(function(e){c.includes(e.eqxItem)||c.push(e.eqxItem)}),c}},{key:"parseFtTermsByRuleJson",value:function(i){var c=this,l=[];return i.comps.forEach(function(n){n.properties.forEach(function(e){l.push(new h({id:n.id,prop:e},c))})}),l}},{key:"split",value:function(){var c=this;return this.ftTerms.map(function(l){var e={type:c.type,value:c.value,comps:[l.toJson()]};return new a(e,c.ftManager)})}},{key:"sortFtTerm",value:function(o,l){var p=this.ftTerms.length;l<0&&(l=0),l>p-1&&(l=p-1);var c=this.ftTerms.indexOf(o);return c!==-1&&(this.ftTerms.splice(c,1),this.ftTerms.splice(l,0,o),!0)}},{key:"mergeFtRule",value:function(i){var c=this;i.ftTerms.forEach(function(l){l.ftRule=c,c.ftTerms.push(l)}),this.ftManager.deleteFtRule(i)}},{key:"mergeFtRules",value:function(i){var c=this;i.forEach(function(l){return c.mergeFtRule(l)})}},{key:"addFtTerm",value:function(u){var i,z=this,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ftTerms.length;if(u instanceof h){u.ftRule=this;var p=[u]}else{var c=u;p=c.properties.map(function(e){return new h({id:u.id,prop:e},z)})}var l=this.ftTerms.length;y<0&&(y=0),y>l-1&&(y=l-1),(i=this.ftTerms).splice.apply(i,[y,0].concat(j(p))),this.calName()}},{key:"deleteFtTerm",value:function(i){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=this.ftTerms.indexOf(i);return l>-1?(this.ftTerms.splice(l,1),c&&!this.ftTerms.length&&this.ftManager.deleteFtRule(this),!0):void this.calName()}}],[{key:"ftTermToFtRule",value:function(e,p){var c=e.ftRule.toEmptyJson(),l=new a(c,p);return l.addFtTerm(e),l}}]),a}();k.exports=d},function(k,w){function g(c){var a=Object.assign({},c);return x(a),a}function j(c,a){return Object.prototype.toString.call(c).toLowerCase()==="[object "+a+"]"}function f(a){return j(a,"object")}function b(a){return j(a,"array")}function q(a){a.forEach(function(c){b(c)?q(c):f(c)&&x(c)})}function x(c){for(var a in c){c.hasOwnProperty(a)&&(a.startsWith("$")?delete c[a]:b(c[a])?q(c[a]):f(c[a])&&x(c[a]))}}function m(c,a){return JSON.stringify(c)===JSON.stringify(a)}function f(a){return null!=a&&"object"===("undefined"==typeof a?"undefined":d(a))&&Array.isArray(a)===!1}function v(a){return f(a)===!0&&"[object Object]"===Object.prototype.toString.call(a)}function h(c){var a,i;return v(c)!==!1&&(a=c.constructor,"function"==typeof a&&(i=a.prototype,v(i)!==!1&&i.hasOwnProperty("isPrototypeOf")!==!1))}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};k.exports={remove$key:g,isSameValue:m,isObject:f,isPlainObject:h}},function(h,l,f){function g(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function a(p,o){for(var q=0;q<o.length;q++){var c=o[q];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(p,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}(),b=f(77),k=b.RAW_EVENT,m=b.EQX_EVENT,j=function(){function a(c){g(this,a),this.page=c}return d(a,[{key:"findEqxItemTriggerItem",value:function(q,p,s){var c=q.eqxPage,r=c.pageJson.properties.triggerGroup;return r.find(function(e){return e.eventType==k[p]&&e.sourceId==q.id&&e.targetState==m[s]})}},{key:"addTriggers",value:function(s){if(Array.isArray(s)&&s.length){for(var p=this.page.pageJson,v=p.properties,c=v.triggerGroup=v.triggerGroup||[],u=function(e){var r=s[e],i=c.findIndex(function(n){return n.eventType===r.eventType&&n.sourceId===r.sourceId&&n.targetId===r.targetId});return i>=0?"continue":void c.push(r)},q=0;q<s;q++){u(q)}}}}]),a}();h.exports=j},function(c,b){function f(h,g){if(!(h instanceof g)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function g(k,j){for(var l=0;l<j.length;l++){var h=j[l];h.enumerable=h.enumerable||!1,h.configurable=!0,"value" in h&&(h.writable=!0),Object.defineProperty(k,h.key,h)}}return function(h,j,e){return j&&g(h.prototype,j),e&&g(h,e),h}}(),d=function(){function g(h,e){f(this,g),this.config=h,this.page=e,this.init()}return a(g,[{key:"init",value:function(){var k=this.config,j=this.page,m=j.eqxScene.config.mode,h=this.page.eqxLayerList;if(this.layers=h,this.count=h.length,this.current=0,"view"===m&&k.used){h[0].show();for(var l=1;l<h.length;l++){h[l].hide()}this.current=1}}},{key:"reset",value:function(){this.layers[0].show();for(var i=this.layers,h=1;h<i.length;h++){i[h].hide()}this.stop(),this.current=1}},{key:"play",value:function(){var i=this.config,h=this.page,j=h.eqxScene.config.mode;"view"===j&&i.used&&this.playEqxLayer()}},{key:"stop",value:function(){this.loopTimer&&clearTimeout(this.loopTimer)}},{key:"playEqxLayer",value:function(){var h=this;return this.stop(),this.current===this.count?void console.log("快闪播放结束"):void (this.loopTimer=setTimeout(function(){if(!(h.current>=h.count)){for(var e=0;e<h.layers.length;e++){h.current===e?h.layers[h.current].show():h.layers[e].hide()}h.current++,h.playEqxLayer()}},this.defaultDuration()))}},{key:"defaultDuration",value:function(){function m(G){for(var L=G.getEqxComps(),z=0,C=0;C<L.length;C++){for(var y=L[C],w=y.compJson.properties.anim,J=void 0===w?[]:w,M=0;M<J.length;M++){var I=J[M],K=I.countNum,B=I.duration,x=I.delay;if(I.count){return 1000*(B+x)}if(1==I.animClassify){var H,D=y.$context.text(),F=I.textInterval,E=/(\b[a-zA-Z]+\b)|[\u4e00-\u9fa5]|[\.\<\>\《\》\。\-\——\_\?\!\？\！\:\：\;\；]/g,A=D.match(E);H=A?K*(B+(A.length-1)*F)+x:K*B+x,z=Math.max(z,H)}else{z=Math.max(z,K*B+x)}}}return 1000*z}if(this.current>=this.count){return 100}var u=this.layers[this.current-1],k=u.json.flash,l=void 0===k?{}:k,j=l.durationType,h=void 0===j?0:j,q=l.duration,v=void 0===q?null:q;if(0===h){var p=m(u);0==p&&(p=2000)}else{1===h&&v>=0&&(p=1000*v)}return p}}]),g}();c.exports=d},function(v,A,j){function m(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function g(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var y=function(){function a(h,d){for(var l=0;l<d.length;l++){var c=d[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),B=function q(h,c,p){null===h&&(h=Function.prototype);var a=Object.getOwnPropertyDescriptor(h,c);if(void 0===a){var l=Object.getPrototypeOf(h);return null===l?void 0:q(l,c,p)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(p)}},x=j(90),z=(j(72).COMP_TYPE,j(74).BG_CROP_TYPE,j(57).isBottomArrow),k=j(57).PAGE_MODE,f=j(401),w=function(c){function a(i,l){m(this,a);var h=g(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,i,l)),d=i.properties.longPage;return h.scrollMode=z(h.pageMode)?"NS":"WE",h.pLen=-(d-486),h}return b(a,c),y(a,[{key:"renderArrow",value:function(){B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"renderArrow",this).call(this),"WE"==this.scrollMode&&(this.bottomArrow=new f(k["上下翻页"]),this.$pageDiv.append(this.bottomArrow.$arrow))}},{key:"addEventListener",value:function(){B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"addEventListener",this).call(this),this.addTouchEvent()}},{key:"active",value:function(){this.resetLongPage();var d=B(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"active",this).call(this);return d}},{key:"resetLongPage",value:function(){this.touchPos=0,this.doTransform(0,0)}},{key:"addTouchEvent",value:function(){function Q(d){S.forEach(function(h){var l=h.compJson.css.top||"";l=parseInt(l.toString().replace("px",""));var e=h.$li.css("display");l>I&&l+d<I&&!h.triggerHide&&1==h.compJson.properties.initType&&("list-item"===e||"none"===e)&&h.eleShow()})}var E=this,J=this;if("edit"!==this.eqxScene.config.mode){var M=this.pLen,I=this.height,G=this.$pageDiv,T=(this.$ul,this.$editDiv),F=this.scrollMode,S=this.eqxCompList,D=this.$transformArea=T;this.touchPos=0;var L,H,R,N,P,O=0,K=0,C=0;G.on("mousedown touchstart",function(l){if(!J.hasCoverEffect){l.stopPropagation(),L=!0,R=0;var h=l.originalEvent,d=h.touches,n=d?h.changedTouches[0]:null;H=n?n.clientY:l.clientY,"WE"==F&&(N=n?n.clientX:l.clientX),K=J.touchPos,O=Date.now()}}),G.on("mousemove touchmove",function(i){var h=E.eqxScene.pageScroll,d=E.pageJson.properties.pageScroll.disableFlip;if(i.stopPropagation(),i.preventDefault(),L){var n=i.originalEvent,e=n.touches,l=e?e[0]:null;if(R=J.touchPos+(l?l.clientY:i.clientY)-H,"WE"===F&&(P=(l?l.clientX:i.clientX)-N,Math.abs(P)>Math.abs(R-J.touchPos)&&!E.forbidHandFlip)){return P>0?h.goToPrePage():h.goToNextPage(),void (L=!1)}if(R>0&&"NS"===F&&!E.forbidHandFlip&&!d){return h.goToPrePage(),L=!1,void (J.touchPos=0)}if(R>M&&R<0){Q(R),J.doTransform(R,0)}else{if(R<M-5&&"NS"===F&&!E.forbidHandFlip&&!d){return h.goToNextPage(),L=!1,void (J.touchPos=M)}}C=Date.now(),C-O>300&&(O=C,K=R)}}),G.on("mouseup touchend mouseleave",function(){if(L){if(L=!1,R>M&&R<0){var i=Date.now(),d=(R-K)/(i-O);Math.abs(d)>5&&(d=d>0?1:-1);var l=Math.abs(d/0.002),h=d*l/2;R+=h,R>0?(console.log(3),l=(R-0)/h*l,R=0):R<M&&(console.log(2),console.log(h),l=(R-M)/h*l,R=M),console.log(1),console.log(l),J.doTransform(R,l),J.touchPos=R,J.bottomArrow&&(J.bottomArrow.remove(),J.bottomArrow=null)}else{R>0?J.touchPos=0:R<=M&&(J.touchPos=M),J.doTransform(J.touchPos,0)}}}),D.on("transitionend",function(d){d.target==D[0]&&Q(J.touchPos)})}}},{key:"dotransformPx",value:function(){var d=this.pLen-this.touchPos;return 0===d||(d>-250&&d<0?this.touchPos=this.touchPos+d:this.touchPos=this.touchPos-250,this.doTransform(this.touchPos,300),!1)}},{key:"doTransform",value:function(C,G){var l=this;if("edit"!==this.eqxScene.config.mode){var p=this.$transformArea,h=p.find(".alock"),d=p.get(0).style.transform?p.get(0).style.transform.replace(/translate3d\(.*?\)/g,""):"none",E="translate3d(0,"+C+"px,0)";if("none"!==d&&(E=d+" "+E),this.transformEle(p,E,G),h.length>0){var H,D,F=Array.prototype.slice.call(h);F.forEach(function(e){H=e.style.transform.replace(/translate3d\(.*?\)/g,""),D="none"===H&&H?"translate3d(0,"+-C+"px,0)":"translate3d(0,"+-C+"px,0) "+H,l.transformEle($(e),D,G)})}}}},{key:"transformEle",value:function(l,h,o){if("edit"!==this.eqxScene.config.mode){if(l.css({transition:"","-webkit-transition":""}),o){var d="transform "+o+"ms ease-out";l.css({transition:d,"-webkit-transition":"-webkit-"+d})}l.css({transform:h,"-webkit-transform":"-webkit-"+h})}}}]),a}(x);v.exports=w},function(k,w,g){function j(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function f(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var q=function(){function a(o,l){for(var p=0;p<l.length;p++){var c=l[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}(),x=function d(p,c,u){null===p&&(p=Function.prototype);var a=Object.getOwnPropertyDescriptor(p,c);if(void 0===a){var s=Object.getPrototypeOf(p);return null===s?void 0:d(s,c,u)}if("value" in a){return a.value}var l=a.get;if(void 0!==l){return l.call(u)}},m=g(90),v=g(49).viewData,h=function(c){function a(i,l){return j(this,a),f(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,i,l))}return b(a,c),q(a,[{key:"show",value:function(){x(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"show",this).call(this);var i=this.pageJson.properties.xb;return i&&v(i.orderId,i.taskId,i.sceneId,0),this}}]),a}(m);k.exports=h},function(d,b,g){function a(i,h){if(!(i instanceof h)){throw new TypeError("Cannot call a class as a function")}}var f=function(){function h(l,k){for(var m=0;m<k.length;m++){var j=k[m];j.enumerable=j.enumerable||!1,j.configurable=!0,"value" in j&&(j.writable=!0),Object.defineProperty(l,j.key,j)}}return function(j,k,e){return k&&h(j.prototype,k),e&&h(j,e),j}}();g(432);var c=function(){function h(i){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a(this,h);var k=this.$progress=$('<div class="eqx-progress-bar"></div>'),j=this.$progressBar=$("<span></span>"),e=this.$slideNumber=$('<em class="page-tip"></em>');k.append([j,e]),this.lastText="",this.update(l,i)}return f(h,[{key:"update",value:function(l,k){var m=l+"/"+k;if(m!==this.lastText){this.lastText=m,this.$slideNumber.text(m);var j=320;this.$progressBar.css("width",j*l/k)}}},{key:"hide",value:function(){this.$progress.hide()}},{key:"show",value:function(){this.$progress.show()}}]),h}();d.exports=c},function(b,a){},function(h,m,f){function g(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function d(){var a=$(window);a.on("scroll.elasticity",function(c){c.preventDefault()}).on("touchmove.elasticity",function(c){c.preventDefault()}),a.delegate("img","mousemove",function(c){c.preventDefault()})}var b=function(){function a(q,o){for(var r=0;r<o.length;r++){var c=o[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(q,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}(),k=f(119).getEvent,p=f(57).PAGE_MODE,j=f(170).preFixCss,l=function(){function a(i){g(this,a),this.eqxScene=i,this.eqxScene.currentPage=this.eqxScene.currentPage||this.eqxScene.eqxPageList[0],this.bindEventListeners(),this.pageFliping=!1;var x=this.eqxScene.meta.property,v=x.forbidHandFlip,u=x.triggerLoop,e=x.autoFlip,q=x.autoFlipTime,w=void 0===q?1:q;this.forbidHandFlip=v,this.triggerLoop=u,this.autoFlip=e,this.autoFlipTime=w,this.pageFlipModule=null,this.autoFlip&&this.startAutoFlip(),this.currentPageAutoFlip()}return b(a,[{key:"currentPageAutoFlip",value:function(){var i=this,c=this.eqxScene.currentPage.pageJson.properties.pageScroll;!this.autoFlip&&c.canAutoFlip&&(this.eqxScene.currentPage.autoFlipTimeOutlId=setTimeout(function(){i.goToNextPage(),clearTimeout(i.eqxScene.currentPage.autoFlipTimeOutlId),delete i.eqxScene.currentPage.autoFlipTimeOutlId},1000*c.autoFlipTime))}},{key:"disablePageFlip",value:function(){return this.disableFlip()||this.forbidHandFlip||this.eqxScene.currentPage.pageJson.properties.pageScroll.disableFlip}},{key:"disableFlip",value:function(){return this.eqxScene.currentPage.hasCoverEffect||this.pageFliping||1==this.eqxScene.eqxPageList.length}},{key:"bindEventListeners",value:function(){var v=this;d();var o=!1,w={moveX:0,moveY:0},c={startX:0,startY:0},u=void 0,q=void 0;this.eqxScene.$ele.on("mousedown touchstart",function(e){if(!o&&!v.disablePageFlip()){o=!0,u=null,e.stopPropagation(),v.initPageFlip(),q=0,w.moveY=0,w.moveX=0;var i=k(e);c.startX=i.clientX,c.startY=i.clientY}}),this.eqxScene.$ele.on("mousemove touchmove",function(e){e.stopPropagation(),e.preventDefault();var i=k(e);if(o&&(w.moveX=i.clientX-c.startX,w.moveY=i.clientY-c.startY,q=v.pageFlipModule.getMoveDistance(w),0!=q)){if(v.pageFliping=!0,Math.abs(q)<=10&&u&&(u.deactive(),u=null),!u){if(u=v.getActivePageByMoveDistance(q),!u){return v.pageFliping=!1,!1}u.active()}v.pageFlipModule.pageMove(v.eqxScene.currentPage,u,w)}}),this.eqxScene.$ele.on("mouseup touchend mouseleave",function(e){o&&0!==q&&u&&(v.pageFliping=!0,v.pageFlipModule.pageEnd(v.eqxScene.currentPage,u,w).then(function(i){return i?v.destroyActivePage(u):v.pageFlipEnd(u),v.startAutoFlip(),!0})),o=!1})}},{key:"initPageFlip",value:function(){var c=this.eqxScene.currentPage.pageJson.properties.pageScroll.pageMode||this.eqxScene.meta.pageMode;this.initFlipFnByMode(c),this.pageFlipModule.pageStart(this.eqxScene.currentPage)}},{key:"pageFlipEnd",value:function(c){this.eqxScene.updateProgressBar(c),c.show(),this.eqxScene.currentPage.destroyed||this.eqxScene.currentPage.deactive().hide(),j(this.eqxScene.currentPage.section,"Transform",""),this.eqxScene.currentPage=c,this.destroyActivePage(c),this.currentPageAutoFlip(),!this.eqxScene.dependenciesRenderObj.allRendered&&this.eqxScene.renderDependenciesPages()}},{key:"destroyActivePage",value:function(c){j(c.section,"Transform",""),c.deactive(),c=null,this.pageFliping=!1}},{key:"getActivePageByMoveDistance",value:function(q){var o=null,r=this.eqxScene.eqxPageList.indexOf(this.eqxScene.currentPage),c=this.eqxScene.eqxPageList.length-1;return q>0?r>0?o=this.eqxScene.eqxPageList[r-1]:this.triggerLoop&&(o=this.eqxScene.eqxPageList[c]):q<0&&(r<c?o=this.eqxScene.eqxPageList[r+1]:this.triggerLoop&&(o=this.eqxScene.eqxPageList[0])),o&&!o.$section&&(console.log("[renderPage] nextPageId",o.pageJson.id),this.eqxScene.setNextRenderPageId(o.pageJson.id),o=null),o}},{key:"initFlipFnByMode",value:function(i){var c="";switch(i){case p["上下翻页"]:c="vertical";break;case p["上下惯性翻页"]:c="vertiaclinertia";break;case p["左右翻页"]:c="horizontal";break;case p["左右惯性翻页"]:c="horizontalinertia";break;case p["左右连续翻页"]:c="horizontalSingle";break;case p["立体翻页"]:c="cube";break;case p["卡片翻页"]:c="card";break;case p["放大翻页"]:c="scale";break;case p["交换翻页"]:c="swap";break;case p["上下连续翻页"]:c="verticalSingle";break;case p["掉落翻页"]:c="fall";break;case p["淡入翻页"]:c="fadeIn";break;case p["翻书翻页"]:c="book";break;case p["上下推出翻页"]:c="verticalPush";break;case p["左右推出翻页"]:c="horizontalPush";break;case p["折叠翻页"]:c="flip";break;default:c="vertical"}this.pageFlipModule=f(434)("./"+c)}},{key:"goToLastPage",value:function(){var c=this.eqxScene.getEqxPageByIndex(this.eqxScene.eqxPageList.length-1);return c?this.goToPageById(c.pageJson.id):Promise.resolve()}},{key:"goToPageByIndex",value:function(i){var c=this.eqxScene.getEqxPageByIndex(i);return c?this.goToPageById(c.pageJson.id):Promise.resolve()}},{key:"goToPageById",value:function(i,c){var o=this;return new Promise(function(q,w){var v=o.eqxScene.getEqxPageById(i);if(v||q(),!o.pageFliping&&v&&v!==o.eqxScene.currentPage&&v.$section){var e=function n(){var s=this,r=arguments[0];r>0?r+=3:r-=3,Math.abs(r)<=20?(this.pageFlipModule.pageMove(this.eqxScene.currentPage,v,{moveX:r,moveY:r}),requestAnimationFrame(n.bind(this,r))):this.pageFlipModule.pageEnd(this.eqxScene.currentPage,v,{moveX:r,moveY:r}).then(function(){s.pageFlipEnd(v),q(v)})};o.pageFliping=!0,o.eqxScene.currentPage.autoFlipTimeOutlId&&(clearTimeout(o.eqxScene.currentPage.autoFlipTimeOutlId),delete o.eqxScene.currentPage.autoFlipTimeOutlId),v.active(),o.initPageFlip();var t=v.pageJson.num,x=o.eqxScene.currentPage.pageJson.num;void 0===c&&(c=t>x),c?e.call(o,-1):e.call(o,1)}else{v.$section||o.eqxScene.setNextRenderPageId(v.pageJson.id),q()}})}},{key:"goToPrePage",value:function(){var c=this.getActivePageByMoveDistance(1);return this.disableFlip()||!c?Promise.resolve():this.goToPageById(c.pageJson.id,!1)}},{key:"goToNextPage",value:function(){this.eqxScene.currentPage.autoFlipTimeOutlId&&(clearTimeout(this.eqxScene.currentPage.autoFlipTimeOutlId),delete this.eqxScene.currentPage.autoFlipTimeOutlId);var i=this.getActivePageByMoveDistance(-1);if(this.disableFlip()||!i){return Promise.resolve()}if(this.eqxScene.currentPage.pageJson.properties.longPage){var c=this.eqxScene.currentPage.dotransformPx();return c?this.goToPageById(i.pageJson.id,!0):Promise.resolve()}return this.goToPageById(i.pageJson.id,!0)}},{key:"startAutoFlip",value:function(){var c=this;this.pauseAutoFlip(),this.autoFlip&&!this.disableFlip()&&(this.autoFlipIntervalId=setInterval(function(){c.triggerLoop||c.eqxScene.eqxPageList.indexOf(c.eqxScene.currentPage)!==c.eqxScene.eqxPageList.length-1?c.goToNextPage():c.pauseAutoFlip()},1000*this.autoFlipTime))}},{key:"pauseAutoFlip",value:function(){this.autoFlipIntervalId&&(clearInterval(this.autoFlipIntervalId),delete this.autoFlipIntervalId)}},{key:"setAutoFlipTime",value:function(c){this.autoFlipTime=c}},{key:"setAutoFlip",value:function(){var c=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.autoFlip=!!c}},{key:"setHandleFlip",value:function(c){this.forbidHandFlip=c}},{key:"setLoop",value:function(c){this.triggerLoop=c,c&&this.autoFlip&&this.startAutoFlip()}},{key:"setScrollMode",value:function(c){this.eqxScene.meta.pageMode=c}}]),a}();h.exports=l},function(d,b,g){function a(h){return g(f(h))}function f(h){return c[h]||function(){throw new Error("Cannot find module '"+h+"'.")}()}var c={"./book":435,"./book.js":435,"./card":436,"./card.js":436,"./cube":437,"./cube.js":437,"./fadeIn":438,"./fadeIn.js":438,"./fall":439,"./fall.js":439,"./flip":440,"./flip.js":440,"./horizontal":441,"./horizontal.js":441,"./horizontalPush":442,"./horizontalPush.js":442,"./horizontalSingle":443,"./horizontalSingle.js":443,"./horizontalinertia":444,"./horizontalinertia.js":444,"./pageFlip":433,"./pageFlip.js":433,"./scale":445,"./scale.js":445,"./swap":446,"./swap.js":446,"./vertiaclinertia":447,"./vertiaclinertia.js":447,"./vertical":448,"./vertical.js":448,"./verticalPush":449,"./verticalPush.js":449,"./verticalSingle":450,"./verticalSingle.js":450};a.keys=function(){return Object.keys(c)},a.resolve=f,d.exports=a,a.id=434},function(m,y,h){function k(a){}function g(c,a,d){0!=d.moveX&&(f&&(f=!1,c.$section.css({width:c.width,height:c.height}),c.$section.parent().append(x),c.$section.parent().append(j),j.append(c.$section)),d.moveX<0&&d.moveY<=0?q.bottomRight(x,j,c,d):d.moveX<0&&d.moveY>0?q.topRight(x,j,c,d):q.leftCenter(x,j,c,d))}function b(c,a,d){return new Promise(function(l,o){function e(i){i.moveX<0&&i.moveY<=0?(i.moveX=i.moveX-n,i.moveY=i.moveY+n<=0?i.moveY+n:i.moveY):i.moveX<0&&i.moveY>0?(i.moveX=i.moveX-n,i.moveY=i.moveY-n>=0?i.moveY-n:i.moveY):i.moveX=i.moveX+n,Math.abs(i.moveX)<2*c.width?(g(c,a,i),requestAnimationFrame(e.bind(this,i))):(j.css({top:0,left:0,transform:""}),x.css({width:0,height:0,top:0,left:0,transform:"",background:"none"}),c.$section.unwrap(),c.$section.removeAttr("style"),x.remove(),f=!0,l(!1))}var n=16;e(d)})}function w(a){return a.moveX}var z=h(170).preFixCss,v=h(170).prefix,x=$('<div style="position: absolute; top:0; left:0;z-index: 1000"></div>'),j=$('<div style="position: absolute; width: 1000px; height: 1000px; top:0; left:0;overflow: hidden;background: #fff; z-index: 100; display: block"></div>'),f=!0,q={caculateCoordinate:function(K,P,D,G){var C=G.width,A=G.height,N=A/C,Q=A/Math.sqrt(C*C+A*A),M=Math.sqrt(1-Q*Q),O=Math.sqrt(C*C+A*A)/2,F=O*N,B=Math.sqrt(F*F+O*O),L=B/N,H=180*Math.atan(N)/Math.PI>0?180*Math.atan(N)/Math.PI:0,J=(D.width-B)*M,I=(D.width-B)*Q*M,E=(D.width-B)*(1-Q*Q);return !(J<1)&&{newTriangleX:B,newTriangleY:L,degree:H,maskTransformY:J,turnPageTransformX:E,turnPageTransformY:I}},bottomRight:function(d,c,p,a){var l=this.caculateCoordinate(d,c,p,{width:-a.moveX,height:-a.moveY});l&&(l.degree>1?d.css({top:p.height,left:p.width,width:l.newTriangleX+"px",height:l.newTriangleY+"px",backgroundColor:"#ff0000",background:"-webkit-linear-gradient("+(180-l.degree)+"deg, #fff 10%, #d1cfc7 40%, #f2eee2 50%, transparent 50%, transparent 100%)",transform:"translate3d(-"+(l.newTriangleX-3)+"px, -"+(l.newTriangleY-3)+"px, 0) rotate3d(0,0,1, "+2*l.degree+"deg) scaleX(-1)"}):d.css({width:(-a.moveX+6)/2+"px",height:p.height+"px",top:0,left:p.width+a.moveX+"px",background:"-webkit-linear-gradient(left, #fff 0% , #d1cfc7 10%, #f2eee2 90%, #fff 100%)",transform:"",border:0}),c[0].style.zIndex=100,c[0].style.top=-(1000-p.height)+"px",z(c[0],"TransformOrigin","0% 100% 0px"),z(c[0],"Transform","rotate3d(0,0,1,-"+(90-l.degree)+"deg) translate3d(0,"+l.maskTransformY+"px,0)"),p.section.style.top=1000-p.height+"px",z(p.section,"TransformOrigin","0% 100% 0px"),z(p.section,"Transform","rotate3d(0,0,1,"+(90-l.degree)+"deg) translate3d("+-l.turnPageTransformX+"px,"+-l.turnPageTransformY+"px, 0)"))},topRight:function(d,c,p,a){var l=this.caculateCoordinate(d,c,p,{width:-a.moveX,height:a.moveY});l&&(l.degree>1?d.css({top:0,left:p.width,width:l.newTriangleX+"px",height:l.newTriangleY+"px",backgroundColor:"#ff0000",background:"-webkit-linear-gradient(-"+(180-l.degree)+"deg, #fff 10%, #d1cfc7 40%, #f2eee2 50%, transparent 50%, transparent 100%)",transform:"translate3d(-"+(l.newTriangleX-3)+"px,0,0)  rotate3d(0,0,1,-"+2*l.degree+"deg) scaleX(-1)"}):d.css({width:(-a.moveX+6)/2+"px",height:p.height+"px",top:0,left:p.width+a.moveX+"px",background:"-webkit-linear-gradient(left, #fff 0% , #d1cfc7 10%, #f2eee2 90%, #fff 100%)",transform:"",border:0}),c[0].style.zIndex=100,c[0].style.top=0,z(c[0],"TransformOrigin","0% 0% 0px"),z(c[0],"Transform","rotate3d(0,0,1,"+(90-l.degree)+"deg) translate3d(0,-"+l.maskTransformY+"px,0)"),p.section.style.top=0,z(p.section,"TransformOrigin","0% 0% 0px"),z(p.section,"Transform","rotate3d(0,0,1,-"+(90-l.degree)+"deg) translate3d("+-l.turnPageTransformX+"px,"+l.turnPageTransformY+"px, 0)"))},rightCenter:function(d,c,l,a){d.css({width:-a.moveX/2+"px",height:l.height+"px",left:l.width+a.moveX+"px",background:v.css+"linear-gradient(left, #fff 0% , #d1cfc7 15%, #f2eee2 85%, #fff 100%)"}),z(c[0],"Transform","translate3d("+a.moveX+"px, 0, 0)"),z(c[0],"TransformOrigin","0% 50% 0px"),z(l.section,"Transform","translate3d("+-a.moveX+"px, 0, 0)"),z(l.section,"TransformOrigin","0% 50% 0px")},leftCenter:function(d,c,l,a){d.css({width:a.moveX/2+"px",height:l.height+"px",top:"0px",transform:"",left:a.moveX+"px",background:v.css+"linear-gradient(left, #fff 0% , #d1cfc7 15%, #f2eee2 85%, #fff 100%)"}),z(c[0],"Transform","translate3d("+a.moveX+"px, 0, 0)"),z(c[0],"TransformOrigin","0% 50% 0px"),z(l.section,"Transform","translate3d("+-a.moveX+"px, 0, 0)"),z(l.section,"TransformOrigin","0% 50% 0px")}};m.exports={pageMove:g,pageEnd:b,pageStart:k,getMoveDistance:w}},function(h,l,f){function g(a){}function d(c,a,i){i.moveY>0?(m(a.section,"TransformOrigin","top"),m(a.section,"Transform","rotate3d(1,0,0,"+(90-i.moveY/a.height*90)+"deg)")):(m(a.section,"TransformOrigin","bottom"),m(a.section,"Transform","rotate3d(1,0,0,"+(-90-i.moveY/c.height*90)+"deg)"))}function b(o,c,p){var a=!0;return new Promise(function(i,n){m(c.section,"Transition",j.css+"transform 0.4s linear"),p.moveY>0&&p.moveY<20?(m(c.section,"Transform","rotate3d(1,0,0,90deg)"),a=!0):p.moveY<0&&p.moveY>-20?(m(c.section,"Transform","rotate3d(1,0,0,-90deg)"),a=!0):(m(c.section,"Transform","rotate3d(1,0,0, 0deg)"),a=!1),$(c.section).one("transitionend webkitTransitionEnd",function(){m(c.section,"Transition",""),m(c.section,"TransformOrigin",""),i(a)})})}function k(a){return a.moveY}var m=f(170).preFixCss,j=f(170).prefix;h.exports={pageMove:d,pageEnd:b,pageStart:g,getMoveDistance:k}},function(h,l,f){function g(a){}function d(c,a,i){i.moveY>0?(m(a.section,"Transform","rotate3d(1,0,0,"+(90-i.moveY/a.height*90)+"deg) translate3d(0px, "+(i.moveY-c.height)/2+"px, "+(c.height-i.moveY)/2+"px)"),m(c.section,"Transform","rotate3d(1,0,0,"+-i.moveY/c.height*90+"deg) translate3d(0px, "+i.moveY/2+"px, "+i.moveY/2+"px)")):(m(a.section,"Transform","rotate3d(1,0,0,"+(-90-i.moveY/c.height*90)+"deg) translate3d(0px, "+(a.height+i.moveY)/2+"px, "+(a.height+i.moveY)/2+"px)"),m(c.section,"Transform","rotate3d(1,0,0,"+-i.moveY/c.height*90+"deg) translate3d(0px, "+i.moveY/2+"px, "+-i.moveY/2+"px)"))}function b(o,c,p){var a=!0;return new Promise(function(i,e){m(o.section,"Transition",j.css+"transform 0.4s linear"),m(c.section,"Transition",j.css+"transform 0.4s linear"),p.moveY>0&&p.moveY<20?(m(c.section,"Transform","rotate3d(1,0,0,0deg) translate3d(0px,-"+o.height+"px,"+o.height+"px)"),m(o.section,"Transform","rotate3d(1,0,0,0deg) translate3d(0px, 0px, 0px)"),a=!0):p.moveY<0&&p.moveY>-20?(m(c.section,"Transform","rotate3d(1,0,0,0deg) translate3d(0px,"+o.height+"px, "+o.height+"px)"),m(o.section,"Transform","rotate3d(1,0,0,0deg) translate3d(0px, 0px, 0px)"),a=!0):(m(c.section,"Transform","rotate3d(1,0,0, 0deg) translate3d(0px,0px,0px)"),p.moveY>0?m(o.section,"Transform","rotate3d(1,0,0,-90deg) translate3d(0px,"+o.height/2+"px, "+o.height/2+"px)"):m(o.section,"Transform","rotate3d(1,0,0,90deg) translate3d(0px,"+-o.height/2+"px, "+o.height/2+"px)"),a=!1),$(c.section).one("transitionend webkitTransitionEnd",function(){m(o.section,"Transition",""),m(c.section,"Transition",""),i(a)})})}function k(a){return a.moveY}var m=f(170).preFixCss,j=f(170).prefix;h.exports={pageMove:d,pageEnd:b,pageStart:g,getMoveDistance:k}},function(d,b){function g(h){}function a(i,h,j){j.moveY>0?h.section.style.opacity=(j.moveY/i.height).toFixed(2):h.section.style.opacity=(-j.moveY/i.height).toFixed(2)}function f(k,j,l){var h=!0;return new Promise(function(m,i){function e(){var o=arguments[0];o>20?o+=60:o-=60,o>=20&&o<=j.height||o<20&&o>=0?(j.section.style.opacity=(o/k.height).toFixed(2),requestAnimationFrame(e.bind(this,o))):(j.section.style.opacity="",m(h))}h=Math.abs(l.moveY)>0&&Math.abs(l.moveY)<20,e(Math.abs(l.moveY))})}function c(h){return h.moveY}d.exports={pageMove:a,pageEnd:f,pageStart:g,getMoveDistance:c}},function(h,l,f){function g(a){}function d(c,a,i){a.section.style.zIndex=0,m(c.section,"TransformOrigin","0% 0% 0px"),i.moveY>0?(m(c.section,"Transform","rotate("+i.moveY/c.height*90+"deg)"),c.section.style.opacity=((c.height-i.moveY)/c.height).toFixed(1)):(m(c.section,"Transform","rotate("+-i.moveY/c.height*90+"deg)"),c.section.style.opacity=((c.height+i.moveY)/c.height).toFixed(1))}function b(o,c,p){var a=!0;return new Promise(function(i,e){m(o.section,"Transition",j.css+"transform 0.4s linear"),p.moveY>0&&p.moveY<20?(m(o.section,"Transform","rotate(0deg)"),a=!0):p.moveY<0&&p.moveY>-20?(m(o.section,"Transform","rotate(0deg)"),a=!0):(m(o.section,"Transform","translate3d(0,"+o.height+"px,0) rotate("+Math.abs(p.moveY)/o.height*90+"deg)"),o.section.style.opacity=0.5,a=!1),$(o.section).one("transitionend webkitTransitionEnd",function(){m(o.section,"Transition",""),c.section.style.zIndex="",o.section.style.opacity="",i(a)})})}function k(a){return a.moveY}var m=f(170).preFixCss,j=f(170).prefix;h.exports={pageMove:d,pageEnd:b,pageStart:g,getMoveDistance:k}},function(h,l,f){function g(a){}function d(c,a,i){m(a.section,"TransformOrigin","center"),m(c.section,"TransformOrigin","center"),m(a.section,"Transform","rotate3d(1,0,0,90deg)"),m(c.section,"Transform","rotate3d(1,0,0,"+i.moveY/c.height*90+"deg)")}function b(o,c,p){var a=!0;return new Promise(function(i,e){m(c.section,"Transition",j.css+"transform 0.4s linear"),m(o.section,"Transition",j.css+"transform 0.4s linear"),Math.abs(p.moveY)>0&&Math.abs(p.moveY)<20?(m(o.section,"Transform","rotate3d(1,0,0,0deg)"),m(c.section,"Transform","rotate3d(1,0,0,0deg)"),a=!0):(p.moveY>0?m(o.section,"Transform","rotate3d(1,0,0, 90deg)"):m(o.section,"Transform","rotate3d(1,0,0, -90deg)"),$(o.section).one("transitionend webkitTransitionEnd",function(){m(c.section,"Transform","rotate3d(1,0,0, 0deg)")}),a=!1),$(c.section).one("transitionend webkitTransitionEnd",function(){m(c.section,"Transition",""),m(c.section,"TransformOrigin",""),m(c.section,"Transform",""),m(o.section,"Transition",""),m(o.section,"TransformOrigin",""),m(o.section,"Transform",""),i(a)})})}function k(a){return a.moveY}var m=f(170).preFixCss,j=f(170).prefix;h.exports={pageMove:d,pageEnd:b,pageStart:g,getMoveDistance:k}},function(h,l,f){function g(a){}function d(c,a,i){i.moveX>0?m(a.section,"Transform","translateX(-"+(c.width-i.moveX)+"px)"):m(a.section,"Transform","translateX("+(c.width+i.moveX)+"px)")}function b(o,c,p){var a=!0;return new Promise(function(i,e){m(c.section,"Transition",j.css+"transform 0.4s linear"),p.moveX>0&&p.moveX<20?(m(c.section,"Transform","translateX(-"+o.height+"px)"),a=!0):p.moveX<0&&p.moveX>-20?(m(c.section,"Transform","translateX("+o.height+"px)"),a=!0):(m(c.section,"Transform","translateX(0px)"),a=!1),$(c.section).one("transitionend webkitTransitionEnd",function(){m(c.section,"Transition",""),i(a)})})}function k(a){return a.moveX}var m=f(170).preFixCss,j=f(170).prefix;h.exports={pageMove:d,pageEnd:b,pageStart:g,getMoveDistance:k}},function(h,l,f){function g(a){}function d(c,a,i){i.moveX>0?(m(a.section,"TransformOrigin","left"),m(c.section,"TransformOrigin","right"),m(a.section,"Transform","perspective(700px) rotate3d(0,1,0,90deg)")):(m(a.section,"TransformOrigin","right"),m(c.section,"TransformOrigin","left"),m(a.section,"Transform","perspective(700px) rotate3d(0,1,0,-90deg)")),m(c.section,"Transform","perspective(700px) rotate3d(0,1,0,"+-i.moveX/c.width*90+"deg)")}function b(o,c,p){var a=!0;return new Promise(function(i,e){m(c.section,"Transition",j.css+"transform 0.4s linear"),m(o.section,"Transition",j.css+"transform 0.4s linear"),Math.abs(p.moveX)>0&&Math.abs(p.moveX)<20?(m(o.section,"Transform","rotate3d(0,1,0,0deg)"),m(c.section,"Transform","rotate3d(0,1,0,0deg)"),a=!0):(p.moveX>0?m(o.section,"Transform","perspective(700px) rotate3d(0,1,0, -90deg)"):m(o.section,"Transform","perspective(700px) rotate3d(0,1,0, 90deg)"),$(o.section).one("transitionend webkitTransitionEnd",function(){m(c.section,"Transform","perspective(700px) rotate3d(0,1,0, 0deg)")}),a=!1),$(c.section).one("transitionend webkitTransitionEnd",function(){m(c.section,"Transition",""),m(c.section,"TransformOrigin",""),m(c.section,"Transform",""),m(o.section,"Transition",""),m(o.section,"TransformOrigin",""),m(o.section,"Transform",""),i(a)})})}function k(a){return a.moveX}var m=f(170).preFixCss,j=f(170).prefix;h.exports={pageMove:d,pageEnd:b,pageStart:g,getMoveDistance:k}},function(h,l,f){function g(a){}function d(c,a,i){i.moveX>0?(m(a.section,"Transform","translateX(-"+(c.width-i.moveX)+"px)"),m(c.section,"Transform","translateX("+i.moveX+"px)")):(m(a.section,"Transform","translateX("+(c.width+i.moveX)+"px)"),m(c.section,"Transform","translateX("+i.moveX+"px)"))}function b(o,c,p){var a=!0;return new Promise(function(i,e){m(o.section,"Transition",j.css+"transform 0.4s linear"),m(c.section,"Transition",j.css+"transform 0.4s linear"),p.moveX>0&&p.moveX<20?(m(c.section,"Transform","translateX(-"+o.width+"px)"),m(o.section,"Transform","translateX(0)"),a=!0):p.moveX<0&&p.moveX>-20?(m(c.section,"Transform","translateX("+o.width+"px)"),m(o.section,"Transform","translateX(0)"),a=!0):(m(c.section,"Transform","translateX(0px)"),p.moveX>0?m(o.section,"Transform","translateX("+o.width+"px)"):m(o.section,"Transform","translateX("+-o.width+"px)"),a=!1),$(c.section).one("transitionend webkitTransitionEnd",function(){m(o.section,"Transition",""),m(c.section,"Transition",""),i(a)})})}function k(a){return a.moveX}var m=f(170).preFixCss,j=f(170).prefix;h.exports={pageMove:d,pageEnd:b,pageStart:g,getMoveDistance:k}},function(h,l,f){function g(a){}function d(c,a,i){i.moveX>0?(m(a.section,"Transform","translateX(-"+(c.width-i.moveX)+"px)"),m(c.section,"Transform","scale("+((c.height-i.moveY)/c.height).toFixed(3)+")")):(m(a.section,"Transform","translateX("+(c.width+i.moveX)+"px)"),m(c.section,"Transform","scale("+((c.height+i.moveY)/c.height).toFixed(3)+")"))}function b(o,c,p){var a=!0;return new Promise(function(i,e){m(o.section,"Transition",j.css+"transform 0.4s linear"),m(c.section,"Transition",j.css+"transform 0.4s linear"),p.moveX>0&&p.moveX<20?(m(c.section,"Transform","translateX(-"+o.height+"px)"),m(o.section,"Transform","scale(1)"),a=!0):p.moveX<0&&p.moveX>-20?(m(c.section,"Transform","translateX("+o.height+"px)"),m(o.section,"Transform","scale(1)"),a=!0):(m(c.section,"Transform","translateX(0px)"),m(o.section,"Transform","scale(0.2)"),a=!1),$(c.section).one("transitionend webkitTransitionEnd",function(){m(o.section,"Transition",""),m(c.section,"Transition",""),i(a)})})}function k(a){return a.moveX}var m=f(170).preFixCss,j=f(170).prefix;h.exports={pageMove:d,pageEnd:b,pageStart:g,getMoveDistance:k}},function(h,l,f){function g(a){}function d(o,c,p){var a=Math.abs(p.moveY)/o.height*1.3;c.section.style.opacity=a.toFixed(1),a.toFixed(3)<=1&&m(c.section,"Transform","scale("+a.toFixed(3)+")")}function b(o,c,p){var a=!0;return new Promise(function(i,n){m(c.section,"Transition",j.css+"transform 0.4s linear"),p.moveY>0&&p.moveY<20?(m(c.section,"Transform","scale(0)"),c.section.style.opacity=0,a=!0):p.moveY<0&&p.moveY>-20?(m(c.section,"Transform","scale(0)"),c.section.style.opacity=0,a=!0):(m(c.section,"Transform","scale(1)"),c.section.style.opacity=1,a=!1),$(c.section).one("transitionend webkitTransitionEnd",function(){m(c.section,"Transition",""),c.section.style.opacity="",i(a)})})}function k(a){return a.moveY}var m=f(170).preFixCss,j=f(170).prefix;h.exports={pageMove:d,pageEnd:b,pageStart:g,getMoveDistance:k}},function(h,l,f){function g(a){}function d(c,a,i){a.section.style.zIndex=0,i.moveX>0?(i.moveX<=c.width/4?m(c.section,"Transform","translate3d("+i.moveX+"px, 0, 0)"):m(c.section,"Transform","translate3d("+1.5*i.moveX+"px, 0, -"+(i.moveX-c.width/4)+"px) scale("+((5*c.width/4-i.moveX)/c.width).toFixed(3)+") rotateY("+i.moveX/c.width*45+"deg)"),m(a.section,"Transform","scale("+(0.3-(-i.moveX+c.width/4)/c.width).toFixed(3)+") translate3d(-"+(i.moveX-c.width/4+200)+"px, 0, "+(-i.moveX+3*c.width/4)+"px) rotateY("+(45+(-i.moveX+c.width/4)/c.width*45)+"deg)")):(i.moveX>=-c.width/4?m(c.section,"Transform","translate3d("+i.moveX+"px, 0, 0)"):m(c.section,"Transform","translate3d("+1.5*i.moveX+"px, 0, "+(i.moveX+c.width/4)+"px) scale("+((5*c.width/4+i.moveX)/c.width).toFixed(3)+") rotateY("+i.moveX/c.width*45+"deg)"),m(a.section,"Transform","scale("+(0.3-(i.moveX+c.width/4)/c.width).toFixed(3)+") translate3d("+(-i.moveX-c.width/4+200)+"px,0,"+(-i.moveX-3*c.width/4)+"px) rotateY("+(45+(i.moveX+c.width/4)/c.width*45)+"deg)"))}function b(o,c,p){var a=!0;return new Promise(function(i,e){m(o.section,"Transition",j.css+"transform 0.4s linear"),m(c.section,"Transition",j.css+"transform 0.4s linear"),p.moveX>0&&p.moveX<20?(m(o.section,"Transform","translate3d(0,0,0) rotateY(0) scale(1)"),a=!0):p.moveX<0&&p.moveX>-20?(m(o.section,"Transform","translate3d(0,0,0) rotateY(0) scale(1)"),a=!0):(c.section.style.zIndex=2,p.moveX>0?m(o.section,"Transform","translate3d(0, 0, -"+o.width+"px) rotateY(0) scale(0.2)"):m(o.section,"Transform","translate3d("+o.width+"px, 0, -"+o.width+"px) rotateY(0) scale(0.2)"),m(c.section,"Transform","translate3d(0,0,0) rotateY(0) scale(1)"),a=!1),$(o.section).one("transitionend webkitTransitionEnd",function(){c.section.style.zIndex="",m(o.section,"Transition",""),m(c.section,"Transition",""),i(a)})})}function k(a){return a.moveX}var m=f(170).preFixCss,j=f(170).prefix;h.exports={pageMove:d,pageEnd:b,pageStart:g,getMoveDistance:k}},function(h,l,f){function g(a){}function d(c,a,i){i.moveY>0?(m(a.section,"Transform","translateY(-"+(c.height-i.moveY)+"px)"),m(c.section,"Transform","scale("+((c.height-i.moveY)/c.height).toFixed(3)+")")):(m(a.section,"Transform","translateY("+(c.height+i.moveY)+"px)"),m(c.section,"Transform","scale("+((c.height+i.moveY)/c.height).toFixed(3)+")"))}function b(o,c,p){var a=!0;return new Promise(function(i,e){m(o.section,"Transition",j.css+"transform 0.4s linear"),m(c.section,"Transition",j.css+"transform 0.4s linear"),p.moveY>0&&p.moveY<20?(m(c.section,"Transform","translateY(-"+o.height+"px)"),m(o.section,"Transform","scale(1)"),a=!0):p.moveY<0&&p.moveY>-20?(m(c.section,"Transform","translateY("+o.height+"px)"),m(o.section,"Transform","scale(1)"),a=!0):(m(c.section,"Transform","translateY(0px)"),m(o.section,"Transform","scale(0.2)"),a=!1),$(c.section).one("transitionend webkitTransitionEnd",function(){m(o.section,"Transition",""),m(c.section,"Transition",""),i(a)})})}function k(a){return a.moveY}var m=f(170).preFixCss,j=f(170).prefix;h.exports={pageMove:d,pageEnd:b,pageStart:g,getMoveDistance:k}},function(h,l,f){function g(a){}function d(c,a,i){i.moveY>0?m(a.section,"Transform","translateY(-"+(c.height-i.moveY)+"px)"):m(a.section,"Transform","translateY("+(c.height+i.moveY)+"px)")}function b(o,c,p){var a=!0;return new Promise(function(i,e){m(c.section,"Transition",j.css+"transform 0.4s linear"),p.moveY>0&&p.moveY<20?(m(c.section,"Transform","translateY(-"+o.height+"px)"),a=!0):p.moveY<0&&p.moveY>-20?(m(c.section,"Transform","translateY("+o.height+"px)"),a=!0):(m(c.section,"Transform","translateY(0px)"),a=!1),$(c.section).one("transitionend webkitTransitionEnd",function(){m(c.section,"Transition",""),i(a)})})}function k(a){return a.moveY}var m=f(170).preFixCss,j=f(170).prefix;h.exports={pageMove:d,pageEnd:b,pageStart:g,getMoveDistance:k}},function(h,l,f){function g(a){}function d(c,a,i){i.moveY>0?(m(c.section,"TransformOrigin","bottom"),m(a.section,"TransformOrigin","top"),m(a.section,"Transform","perspective(700px) rotate3d(1,0,0,-90deg)")):(m(a.section,"TransformOrigin","bottom"),m(c.section,"TransformOrigin","top"),m(a.section,"Transform","perspective(700px) rotate3d(1,0,0,90deg)")),m(c.section,"Transform","perspective(700px) rotate3d(1,0,0,"+i.moveY/c.height*90+"deg)")}function b(o,c,p){var a=!0;return new Promise(function(i,e){m(c.section,"Transition",j.css+"transform 0.4s linear"),m(o.section,"Transition",j.css+"transform 0.4s linear"),Math.abs(p.moveY)>0&&Math.abs(p.moveY)<20?(m(o.section,"Transform","rotate3d(1,0,0,0deg)"),m(c.section,"Transform","rotate3d(1,0,0,0deg)"),a=!0):(p.moveY>0?m(o.section,"Transform","perspective(700px) rotate3d(1,0,0, 90deg)"):m(o.section,"Transform","perspective(700px) rotate3d(1,0,0, -90deg)"),$(o.section).one("transitionend webkitTransitionEnd",function(){m(c.section,"Transform","perspective(700px) rotate3d(1,0,0, 0deg)")}),a=!1),$(c.section).one("transitionend webkitTransitionEnd",function(){m(c.section,"Transition",""),m(c.section,"TransformOrigin",""),m(c.section,"Transform",""),m(o.section,"Transition",""),m(o.section,"TransformOrigin",""),m(o.section,"Transform",""),i(a)})})}function k(a){return a.moveY}var m=f(170).preFixCss,j=f(170).prefix;h.exports={pageMove:d,pageEnd:b,pageStart:g,getMoveDistance:k}},function(h,l,f){function g(a){}function d(c,a,i){i.moveY>0?(m(a.section,"Transform","translateY(-"+(c.height-i.moveY)+"px)"),m(c.section,"Transform","translateY("+i.moveY+"px)")):(m(a.section,"Transform","translateY("+(c.height+i.moveY)+"px)"),m(c.section,"Transform","translateY("+i.moveY+"px)"))}function b(o,c,p){var a=!0;return new Promise(function(i,e){m(o.section,"Transition",j.css+"transform 0.4s linear"),m(c.section,"Transition",j.css+"transform 0.4s linear"),p.moveY>0&&p.moveY<20?(m(c.section,"Transform","translateY(-"+o.height+"px)"),m(o.section,"Transform","translateY(0)"),a=!0):p.moveY<0&&p.moveY>-20?(m(c.section,"Transform","translateY("+o.height+"px)"),m(o.section,"Transform","translateY(0)"),a=!0):(m(c.section,"Transform","translateY(0px)"),p.moveY>0?m(o.section,"Transform","translateY("+o.height+"px)"):m(o.section,"Transform","translateY("+-o.height+"px)"),a=!1),$(c.section).one("transitionend webkitTransitionEnd",function(){m(o.section,"Transition",""),m(c.section,"Transition",""),i(a)})})}function k(a){return a.moveY}var m=f(170).preFixCss,j=f(170).prefix;h.exports={pageMove:d,pageEnd:b,pageStart:g,getMoveDistance:k}},function(k,w,g){function j(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}var f=function(){function a(o,l){for(var p=0;p<l.length;p++){var c=l[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}return function(e,l,c){return l&&a(e.prototype,l),c&&a(e,c),e}}();g(452);var b=g(453),q=g(454),x=g(130),m=g(455),v=m.AnimationStart,h=m.AnimationEnd,d=function(){function a(c,e){j(this,a),this.bgAudioJson=c,this.eqxScene=e,this.$bgmBtn=$(b),this.bgAudioJson&&(this.soundAgent=new q(this,this.eqxScene.soundManager))}return f(a,[{key:"destroy",value:function(){this.$bgmBtn&&(this.soundAgent.destroy(),this.soundAgent=null,this.$bgmBtn.remove(),this.$bgmBtn=null)}},{key:"updateJson",value:function(c){this.soundAgent.update(new x("src",c))}},{key:"show",value:function(){this.$bgmBtn&&this.$bgmBtn.show()}},{key:"resumePlay",value:function(){this.soundAgent&&this.soundAgent.update(new x("end"))}},{key:"stopPlay",value:function(){this.soundAgent&&this.soundAgent.update(new x("stop"))}},{key:"hide",value:function(){this.$bgmBtn&&this.$bgmBtn.hide()}},{key:"startRotate",value:function(){this.$bgmBtn&&v(this.$bgmBtn.find(".bgm-btn"),"rotate")}},{key:"stopRotate",value:function(){this.$bgmBtn&&h(this.$bgmBtn.find(".bgm-btn").get(0),this.$bgmBtn.get(0),"rotate")}}]),a}();k.exports=d},function(b,a){},function(b,a){b.exports='<div class="bgm-btn-wraper"><div class="bgm-btn" data-event="11205"><audio loop="" src="" autoplay="" preload></audio></div></div>'},function(z,E,m){function v(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function k(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var C=function(){function a(f,d){for(var g=0;g<d.length;g++){var c=d[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),F=m(132),B=m(22),D=m(24).resolveUrl,q=m(25).mobilecheck,j=m(82).getWxJSSDK,A=m(25).isWeixin,w=m(25).isIOS,y=q()?"touchend":"click",x=function(c){function a(f,g){v(this,a);var d=k(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f,g));return d.manager=g,d.isManualPause=!1,d.$audio=d.master.$bgmBtn.find("audio"),d.audio=d.$audio[0],d.type=3,A()&&(d.wxJssdk=j()),window.EQX={startBgm:d.startPlay.bind(d),pauseBgm:d.stopPlay.bind(d)},d.init(),d}return b(a,c),C(a,[{key:"destroy",value:function(){this.$audio.attr("src","").off("canplay play pause"),this.$audio.remove(),this.$audio=null,this.audio=null,this.master.$bgmBtn.off(y),window.EQX.startBgm=function(){},window.EQX.pauseBgm=function(){},this.deregister()}},{key:"init",value:function(){var d=this.master.bgAudioJson;this.$audio.attr("src",D(B.FILE,d.url||d.src)),this.audio.load(),this.addEventListeners(),this.register(),this.master.show()}},{key:"update",value:function(f){var d=this;switch(f.type){case"src":var g=f.data;this.$audio.attr("src",D(B.FILE,g.url||g.src)),this.audio.load(),this.$audio.on("canplay",function(){d.audio.play()});break;case"hide":this.hide();break;case"show":this.show();break;case"stop":this.stopPlay();break;case"end":this.isManualPause||this.startPlay();break;case"down":w()?this.stopPlay():this.audio.volume=0.1;break;case"restore":w()?this.startPlay():this.audio.volume=1;break;case"play":this.startPlay()}}},{key:"addEventListeners",value:function(){function f(){g.audio.paused&&g.startPlay(!0)}var d=this,g=this;this.$audio.on("play",function(){console.log("play"),$(document.body).unbind(y,f),d.master.startRotate()}),this.$audio.on("pause",function(){console.log("pause"),d.master.stopRotate()}),this.master.$bgmBtn.on(y,function(h){h.cancelBubble=!0,h.stopPropagation(),d.isManualPause=!d.audio.paused,d.audio.paused?d.startPlay(!0):d.stopPlay(!0)}),$(document.body).bind(y,f),this.startPlay()}},{key:"startPlay",value:function(g){function f(i){4===i.readyState?i.paused&&(i.play(),h.manager.onPlay(h)):(i.load(),$(i).on("canplay",function(){h.$audio.off("canplay"),i.paused&&i.play(),h.manager.onPlay(h)}))}this.show();var h=this,d=h.audio;A()&&!g?this.wxJssdk.then(function(){wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){d.paused&&f(d)}})}):d.paused&&f(d)}},{key:"hide",value:function(){this.master.$bgmBtn&&this.master.$bgmBtn.hide(),this.stopPlay()}},{key:"show",value:function(){this.master.$bgmBtn&&this.master.$bgmBtn.show()}},{key:"stopPlay",value:function(g){function f(i){4===i.readyState?i.pause():(i.load(),$(i).on("canplay",function(){h.$audio.off("canplay"),i.pause()}))}var h=this;if(A()&&!g){this.wxJssdk.then(function(){var i=h.audio;wx.checkJsApi({jsApiList:["checkJsApi"],success:function(){f(i)}})})}else{var d=h.audio;f(d)}}}]),a}(F);z.exports=x},function(c,b){function f(h,g){h instanceof jQuery||(h=$(h)),h.addClass(g).css("-webkit-animation-play-state","running")}function a(m,j,o){if(d("animation-play-state")){m instanceof jQuery||(m=$(m)),m.css("-webkit-animation-play-state","paused")}else{var h=m instanceof jQuery?m.get(0):m,l=j instanceof jQuery?j.get(0):j,g=getComputedStyle(h).transform,k=getComputedStyle(l).transform;l.style.transform="none"===k?g:g.concat(" ",k),$(h).removeClass(o)}}var d=function(){var h=document.createElement("div"),g="Ms O Moz Webkit".split(" "),i=g.length;return function(e){if(e in h.style){return !0}for(e=e.replace(/^[a-z]/,function(j){return j.toUpperCase()});i--;){if(g[i]+e in h.style){return !0}}return !1}}();c.exports={AnimationStart:f,AnimationEnd:a,supportCss3:d}},function(g,d,j){function c(i,a){if(!(i instanceof a)){throw new TypeError("Cannot call a class as a function")}}var h=function(){function a(m,l){for(var o=0;o<l.length;o++){var k=l[o];k.enumerable=k.enumerable||!1,k.configurable=!0,"value" in k&&(k.writable=!0),Object.defineProperty(m,k.key,k)}}return function(k,l,e){return l&&a(k.prototype,l),e&&a(k,e),k}}(),f=j(130),b=function(){function a(){c(this,a),this.subscriberMap={}}return h(a,[{key:"subscribe",value:function(k,i){var l=this.subscriberMap[k];l||(l=this.subscriberMap[k]=[]),l.includes(i)||l.push(i)}},{key:"removeAll",value:function(k){for(var i in this.subscriberMap){this.subscriberMap.hasOwnProperty(i)&&this.remove(i,k)}}},{key:"remove",value:function(m,l){var o=this.subscriberMap[m];if(!o){return void (_DEBUG_&&console.error("remove subscriber form none existed event list"))}var k=o.indexOf(l);k>-1&&o.splice(k,1)}},{key:"publish",value:function(k,i){var l=this.subscriberMap[k];return l?void l.forEach(function(e){return e.update(new f(k,i))}):void (_DEBUG_&&console.error("event "+k+" no subscriber!"))}}]),a}();g.exports=b},function(h,l,f){function g(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function d(c,a){return JSON.stringify(c)===JSON.stringify(a)}var b=function(){function a(p,o){for(var q=0;q<o.length;q++){var c=o[q];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(p,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}(),k=f(458).$postComment,m=f(458).$getCommentList,j=function(){function a(c){g(this,a),this.sceneId=c,this.comments=[],this.canLoadMore=!0,this.lastTime=0,this.registers=[],this.promise=null}return b(a,[{key:"addComment",value:function(c){return !this.comments.find(function(e){return d(e,c)})&&(this.comments.push(c),!0)}},{key:"getComments",value:function(){return this.comments.sort(function(i,c){return c.createTime-i.createTime}),this.comments}},{key:"postComment",value:function(i){var c=this;return k(i).then(function(o){var p=o.obj;return c.addComment(p),c.publish(),p})}},{key:"publish",value:function(){this.registers.forEach(function(c){return c.updateComments()})}},{key:"loadInitComments",value:function(c){return this.promise?this.promise:(this.promise=this.loadMoreComments(c)["catch"](function(){}),this.promise)}},{key:"loadMoreComments",value:function(i){var c=this;return m({sceneId:this.sceneId,time:this.lastTime,size:i}).then(function(o){var p=o.list;return p.length?(c.lastTime=p[p.length-1].createTime,p=p.filter(function(n){return c.addComment(n)}),c.publish(),p):Promise.reject("")})}},{key:"register",value:function(c){this.registers.includes(c)||this.registers.push(c)}}]),a}();h.exports=j},function(g,d,j){function c(l){var k=l.sceneId,p=l.size,a=l.time,m=f.SERVER_1+"scene/msg/list?sceneId="+k;return p&&(m+="&size="+p),a&&(m+="&lastTime="+a),m+="&date="+(new Date).getTime(),b({type:"GET",url:m})}function h(a){return b({type:"POST",url:f.SERVER_1+"scene/send/msg",data:a})}var f=j(22),b=j(21).ajax;g.exports={$getCommentList:c,$postComment:h}},function(h,d,k){function c(i,a){if(!(i instanceof a)){throw new TypeError("Cannot call a class as a function")}}function j(a){return b.includes(""+a.type)}var g=function(){function a(o,m){for(var p=0;p<m.length;p++){var l=m[p];l.enumerable=l.enumerable||!1,l.configurable=!0,"value" in l&&(l.writable=!0),Object.defineProperty(o,l.key,l)}}return function(l,m,e){return m&&a(l.prototype,m),e&&a(l,e),l}}(),b=k(72).FORM_COMPS,f=function(){function a(){c(this,a),this.submited=!1,this.fromCompList=[]}return g(a,[{key:"add",value:function(i){if(j(i)){if(this.fromCompList.includes(i)){if(_DEBUG_){throw new Error("Duplicate EQX form element "+i)}}else{this.fromCompList.push(i)}}else{if(_DEBUG_){throw new Error("Invalid EQX Form Element "+i+", type: "+i.type)}}}},{key:"check",value:function(){for(var s={sms:[]},p=this.fromCompList.map(function(i){return i.check()}),v=0;v<p.length;v++){var m=p[v],u=m.success,q=m.key,l=m.value;if(!u){return m}m.type&&12==m.type?s[q]=l.phoneValue:s[q]=l,m.type&&12==m.type&&s.sms.push(l)}return Object.values(s).every(function(i){return !i})?{success:!1,message:"请填写表单"}:{success:!0,form:s}}}]),a}();h.exports=f},function(m,y,h){function k(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function g(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var w=function(){function a(l,d){for(var o=0;o<d.length;o++){var c=d[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}return function(d,e,c){return e&&a(d.prototype,e),c&&a(d,c),d}}(),z=function q(l,c,s){null===l&&(l=Function.prototype);var a=Object.getOwnPropertyDescriptor(l,c);if(void 0===a){var p=Object.getPrototypeOf(l);return null===p?void 0:q(p,c,s)}if("value" in a){return a.value}var d=a.get;if(void 0!==d){return d.call(s)}},v=h(406),x=h(227).$getCountValues,j=h(72).COMP_TYPE,f=function(c){function a(i){k(this,a);var l=i.list.reduce(function(o,n){return o.concat(n.elements)},[]),d=g(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,l));return d.sceneJson=i,d.countIdArr=[],d.countValuesPromise=null,d}return b(a,c),w(a,[{key:"iterate",value:function(){var d=this;z(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"iterate",this).call(this),this.compJsonList.forEach(function(e){var i=j[e.type];"EqxCount"!==i||d.countIdArr.includes(e.id)||d.countIdArr.push(e.id)})}},{key:"getCountIds",value:function(){return this.countIdArr.join(",")}},{key:"getCounterValues",value:function(){if(this.countValuesPromise){return this.countValuesPromise}var i=this.getCountIds();if(i){var d=this.sceneJson.meta.id;this.countValuesPromise=x({sceneId:d,fieldIds:i}).then(function(l){return l.map})["catch"](function(){return{}})}else{this.countValuesPromise=Promise.resolve({})}return this.countValuesPromise}}]),a}(v);m.exports=f},function(h,m,f){function g(c,a){if(!(c instanceof a)){throw new TypeError("Cannot call a class as a function")}}function d(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?c:a}function b(c,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var k=function(){function a(q,o){for(var r=0;r<o.length;r++){var c=o[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(q,c.key,c)}}return function(e,o,c){return o&&a(e.prototype,o),c&&a(e,c),e}}(),p=f(462),j=f(130),l=function(c){function a(){return g(this,a),d(this,(a.__proto__||Object.getPrototypeOf(a)).call(this))}return b(a,c),k(a,[{key:"onPlay",value:function(i){if(this.agents.includes(i)){switch(i.type){case 6:this.agents.forEach(function(e){e!==i&&6===e.type&&e.update(new j("hide")),5!==e.type||e.master.$context[0].paused||i.update(new j("pause"))}),this.agents.forEach(function(e){3===e.type&&(i.isSoundValid()||e.isManualPause?!i.isSoundValid()&&e.isManualPause?e.update(new j("show")):i.isSoundValid()&&e.update(new j("hide")):e.update(new j("play")))});break;case 3:this.agents.forEach(function(e){5!==e.type||e.master.$context[0].paused||i.update(new j("stop")),6===e.type&&e.audio&&!e.audio.paused&&i.update(new j("hide"))});break;case 5:this.agents.forEach(function(n){3===n.type?n.update(new j("stop")):6===n.type&&n.update(new j("pause"))});break;case 1:this.agents.forEach(function(e){e!==i&&(2===e.type||3===e.type||6===e.type?e.update(new j("down")):1===e.type&&(e.update(new j("stop")),e.update(new j("reset"))))});break;case 2:this.agents.forEach(function(e){3!==e.type&&6!==e.type||e.update(new j("down")),1!==e.type||e.audio.paused||i.update(new j("down"))});break;case 4:this.agents.forEach(function(n){2===n.type||3===n.type||6===n.type?n.update(new j("down")):1===n.type&&(n.update(new j("stop")),n.update(new j("reset")))})}}}},{key:"onEnd",value:function(r){if(r||this.agents.includes(r)){switch(r.type){case 5:this.agents.forEach(function(i){6===i.type?i.update(new j("play")):3!==i.type||i.isManualPause||i.update(new j("play"))});break;case 1:var q=null;q=this.agents.findIndex(function(i){return 1===i.type&&!i.audio.paused})!==-1,this.agents.forEach(function(i){2!==i.type||q||i.update(new j("restore"))}),q=this.agents.findIndex(function(i){return(1===i.type||2===i.type)&&!i.audio.paused})!==-1,!q&&this.agents.forEach(function(i){3!==i.type&&6!==i.type||i.update(new j("restore"))});break;case 2:var s=!1;this.agents.forEach(function(e){e===r||1!==e.type&&2!==e.type||e.audio.paused||(s=!0)}),!s&&this.agents.forEach(function(i){3!==i.type&&6!==i.type||i.update(new j("restore"))});break;case 4:var o=null;o=this.agents.findIndex(function(i){return 1===i.type&&!i.audio.paused})!==-1,this.agents.forEach(function(i){2!==i.type||o||i.update(new j("restore"))}),o=this.agents.findIndex(function(i){return(1===i.type||2===i.type)&&!i.audio.paused})!==-1,!o&&this.agents.forEach(function(i){3!==i.type&&6!==i.type||i.update(new j("restore"))})}}}},{key:"stopAll",value:function(){this.agents.forEach(function(i){i.audio&&!i.audio.paused&&i.update(new j("stop"))})}},{key:"restoreAll",value:function(){this.agents.forEach(function(i){3===i.type&&i.audio.paused&&!i.isManualPause&&i.update(new j("play"))})}}]),a}(p);h.exports=l},function(c,b){function f(h,g){if(!(h instanceof g)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function g(k,j){for(var l=0;l<j.length;l++){var h=j[l];h.enumerable=h.enumerable||!1,h.configurable=!0,"value" in h&&(h.writable=!0),Object.defineProperty(k,h.key,h)}}return function(h,j,e){return j&&g(h.prototype,j),e&&g(h,e),h}}(),d=function(){function g(e){f(this,g),this.agents=[],this.predict=e}return a(g,[{key:"add",value:function(h){this.predict&&!this.predict.call(this,h)||this.agents.includes(h)||this.agents.push(h)}},{key:"remove",value:function(i){var h=this.agents.indexOf(i);h>-1&&this.agents.splice(h,1)}}]),g}();c.exports=d},function(h,d,k){function c(i,a){if(!(i instanceof a)){throw new TypeError("Cannot call a class as a function")}}function j(i,a){if(!i){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||"object"!=typeof a&&"function"!=typeof a?i:a}function g(i,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function, not "+typeof a)}i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(i,a):i.__proto__=a)}var b=k(462),f=function(i){function a(){return c(this,a),j(this,(a.__proto__||Object.getPrototypeOf(a)).call(this))}return g(a,i),a}(b);h.exports=f},function(d,b,g){var a,f,c;!function(e,h){f=[b,g(465),g(467),g(468),g(469),g(470)],a=h,c="function"==typeof a?a.apply(b,f):a,!(void 0!==c&&(d.exports=c))}(this,function(w,A,m,v,k,h){function y(i){return i&&i.__esModule?i:{"default":i}}Object.defineProperty(w,"__esModule",{value:!0}),w.detailedDiff=w.updatedDiff=w.deletedDiff=w.diff=w.addedDiff=void 0;var B=y(A),x=y(m),z=y(v),q=y(k),j=y(h);w.addedDiff=x["default"],w.diff=B["default"],w.deletedDiff=z["default"],w.updatedDiff=q["default"],w.detailedDiff=j["default"]})},function(d,b,g){var a,f,c;!function(e,h){f=[d,b,g(466)],a=h,c="function"==typeof a?a.apply(b,f):a,!(void 0!==c&&(d.exports=c))}(this,function(m,k,q){function j(o,i,r){return i in o?Object.defineProperty(o,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[i]=r,o}Object.defineProperty(k,"__esModule",{value:!0});var p=Object.assign||function(s){for(var r=1;r<arguments.length;r++){var u=arguments[r];for(var o in u){Object.prototype.hasOwnProperty.call(u,o)&&(s[o]=u[o])}}return s},l=function h(u,i){if(u===i){return{}}if(!(0,q.isObject)(u)||!(0,q.isObject)(i)){return i}var o=(0,q.properObject)(u),n=(0,q.properObject)(i),v=Object.keys(o).reduce(function(s,r){return n.hasOwnProperty(r)?s:p({},s,j({},r,void 0))},{});return(0,q.isDate)(o)||(0,q.isDate)(n)?o.valueOf()==n.valueOf()?{}:n:Object.keys(n).reduce(function(s,r){if(!o.hasOwnProperty(r)){return p({},s,j({},r,n[r]))}var w=h(o[r],n[r]);return(0,q.isObject)(w)&&(0,q.isEmpty)(w)&&!(0,q.isDate)(w)?s:p({},s,j({},r,w))},v)};k["default"]=l,m.exports=k["default"]})},function(d,b,g){var a,f,c;!function(h,e){f=[b],a=e,c="function"==typeof a?a.apply(b,f):a,!(void 0!==c&&(d.exports=c))}(this,function(k){Object.defineProperty(k,"__esModule",{value:!0});var j=Object.assign||function(p){for(var o=1;o<arguments.length;o++){var q=arguments[o];for(var m in q){Object.prototype.hasOwnProperty.call(q,m)&&(p[m]=q[m])}}return p},l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},h=(k.isDate=function(i){return i instanceof Date},k.isEmpty=function(i){return 0===Object.keys(i).length},k.isObject=function(i){return null!=i&&"object"===("undefined"==typeof i?"undefined":l(i))});k.properObject=function(i){return h(i)&&!i.hasOwnProperty?j({},i):i}})},function(d,b,g){var a,f,c;!function(e,h){f=[d,b,g(466)],a=h,c="function"==typeof a?a.apply(b,f):a,!(void 0!==c&&(d.exports=c))}(this,function(m,k,q){function j(o,i,r){return i in o?Object.defineProperty(o,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[i]=r,o}Object.defineProperty(k,"__esModule",{value:!0});var p=Object.assign||function(s){for(var r=1;r<arguments.length;r++){var u=arguments[r];for(var o in u){Object.prototype.hasOwnProperty.call(u,o)&&(s[o]=u[o])}}return s},l=function h(u,i){if(u===i||!(0,q.isObject)(u)||!(0,q.isObject)(i)){return{}}var o=(0,q.properObject)(u),n=(0,q.properObject)(i);return Object.keys(n).reduce(function(s,r){if(o.hasOwnProperty(r)){var v=h(o[r],n[r]);return(0,q.isObject)(v)&&(0,q.isEmpty)(v)?s:p({},s,j({},r,v))}return p({},s,j({},r,n[r]))},{})};k["default"]=l,m.exports=k["default"]})},function(d,b,g){var a,f,c;!function(e,h){f=[d,b,g(466)],a=h,c="function"==typeof a?a.apply(b,f):a,!(void 0!==c&&(d.exports=c))}(this,function(m,k,q){function j(o,i,r){return i in o?Object.defineProperty(o,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[i]=r,o}Object.defineProperty(k,"__esModule",{value:!0});var p=Object.assign||function(s){for(var r=1;r<arguments.length;r++){var u=arguments[r];for(var o in u){Object.prototype.hasOwnProperty.call(u,o)&&(s[o]=u[o])}}return s},l=function h(u,i){if(u===i||!(0,q.isObject)(u)||!(0,q.isObject)(i)){return{}}var o=(0,q.properObject)(u),n=(0,q.properObject)(i);return Object.keys(o).reduce(function(s,r){if(n.hasOwnProperty(r)){var v=h(o[r],n[r]);return(0,q.isObject)(v)&&(0,q.isEmpty)(v)?s:p({},s,j({},r,v))}return p({},s,j({},r,void 0))},{})};k["default"]=l,m.exports=k["default"]})},function(d,b,g){var a,f,c;!function(e,h){f=[d,b,g(466)],a=h,c="function"==typeof a?a.apply(b,f):a,!(void 0!==c&&(d.exports=c))}(this,function(m,k,q){function j(o,i,r){return i in o?Object.defineProperty(o,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[i]=r,o}Object.defineProperty(k,"__esModule",{value:!0});var p=Object.assign||function(s){for(var r=1;r<arguments.length;r++){var u=arguments[r];for(var o in u){Object.prototype.hasOwnProperty.call(u,o)&&(s[o]=u[o])}}return s},l=function h(u,i){if(u===i){return{}}if(!(0,q.isObject)(u)||!(0,q.isObject)(i)){return i}var o=(0,q.properObject)(u),n=(0,q.properObject)(i);return(0,q.isDate)(o)||(0,q.isDate)(n)?o.valueOf()==n.valueOf()?{}:n:Object.keys(n).reduce(function(s,r){if(o.hasOwnProperty(r)){var v=h(o[r],n[r]);return(0,q.isObject)(v)&&(0,q.isEmpty)(v)&&!(0,q.isDate)(v)?s:p({},s,j({},r,v))}return s},{})};k["default"]=l,m.exports=k["default"]})},function(d,b,g){var a,f,c;!function(e,h){f=[d,b,g(467),g(468),g(469)],a=h,c="function"==typeof a?a.apply(b,f):a,!(void 0!==c&&(d.exports=c))}(this,function(m,w,k,l,j){function h(i){return i&&i.__esModule?i:{"default":i}}Object.defineProperty(w,"__esModule",{value:!0});var q=h(k),x=h(l),p=h(j),v=function(n,i){return{added:(0,q["default"])(n,i),deleted:(0,x["default"])(n,i),updated:(0,p["default"])(n,i)}};w["default"]=v,m.exports=w["default"]})},function(g,d,j){function c(i,a){return f()||a||i.map.wxComponent?function(q){var v=q.type,m=q.id,e=q.properties.type;if(a){var z=a.headimgurl,x=a.nickname;"201"==v&&"own"==e&&(q.content=x),"401"==v&&"own"==e&&(q.properties.src=z,delete q.properties.imgStyle)}var y=i.map.wxComponent,t=void 0===y?{shareUserName:"",shareUserHeader:""}:y,k=t.shareUserName,w=t.shareUserHeader;(k||w)&&("201"==v&&"share"==e&&k&&(q.content=k),"401"==v&&"share"==e&&w&&(q.properties.src=w,delete q.properties.imgStyle)),"201"!=v&&"401"!=v||"share"!=e||b.generateUserKey(),t[m]&&(q.serverId=t[m])}:h}var h=j(27).noop,f=j(25).isWeixin,b=j(82);g.exports={wxAdaptor:c}},function(c,b,f){function a(){var m=window.scene;if(m){var j=d.TRACK+"c.gif?",p=window.screen,h=p.availWidth+"x"+p.availHeight,l=window.navigator,g={lag:l.userLanguage||l.language};g.event_description=m.description,g.event_id=m.id,g.scene_type=m.type,g.creator_id=m.userId,g.creator_type=m.userType;var k="action_name="+encodeURIComponent(document.title)+"&idsite=2&url="+encodeURIComponent(document.location)+"&urlref="+encodeURIComponent(document.referrer)+"&res="+h+"&data="+encodeURIComponent(JSON.stringify(g));k+="&cookie="+(l.cookieEnabled?1:0),k+="&ct="+(new Date).getTime(),j+=k;var o=document.createElement("img");o.setAttribute("src",j),o.setAttribute("height","0"),o.setAttribute("width","0"),document.body.appendChild(o)}}var d=f(22);c.exports={putTracker:a}}]);